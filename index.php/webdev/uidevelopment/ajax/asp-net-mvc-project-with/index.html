<!DOCTYPE html>
<html lang="en-US">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
		<link rel="shortcut icon" href="http://lessthandot.com/favicon.ico" type="image/vnd.microsoft.icon" />
	<title>Less Than Dot - Blog -   ASP.NET MVC project with Modal dialogs and Flexigrid</title>
	<meta prefix="og: http://ogp.me/ns#" property="og:title" content="Less Than Dot - Blog -   ASP.NET MVC project with Modal dialogs and Flexigrid" />
	<meta prefix="og: http://ogp.me/ns#" property="og:type" content="article" />
	<meta prefix="og: http://ogp.me/ns#" property="og:url" content="/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/" />
		<meta prefix="og: http://ogp.me/ns#" property="og:image" content="http://lessthandot.com/images/logo_prod.png" />
	<meta prefix="og: http://ogp.me/ns#" property="og:type" content="article" />
	<meta prefix="og: http://ogp.me/ns#" property="og:site_name" content="LessThanDot" />
	<meta prefix="og: http://ogp.me/ns#" property="og:description" content="In the last few months I started working on my first ASP.NET MVC project. I already had a Visual FoxPro application I wrote in a few days and I wanted to replicate it for the Web using ASP.NET MVC. This project is still in its infancy, but I want to sha&hellip;" />
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/index.php/feed/" />
	<link rel="alternate" type="application/atom+xml" title="Atom" href="/index.php/feed/atom/" />

	<!-- this page is the canonical URL -->	
	<link rel="stylesheet" href="/wp-content/themes/lessthandot2009/style.css" type="text/css" />
	<link rel="stylesheet" href="http://lessthandot.com/includes/allsite.css" type="text/css" />
	<link rel="stylesheet" href="http://lessthandot.com/includes/allsiteprint.css" media="print" type="text/css" />

	<link rel='dns-prefetch' href='//ajax.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="LessthanDot &raquo; ASP.NET MVC project with Modal dialogs and Flexigrid Comments Feed" href="/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.1"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='bwp-syntax-css'  href='/wp-content/plugins/better-wordpress-syntax-based-on-geshi/css/bwp-syntax-global.css?ver=4.6.1' type='text/css' media='all' />
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-content/plugins/better-wordpress-syntax-based-on-geshi/js/bwp-syntax.js?ver=4.6.1'></script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='MongoDB: How to limit results and how to page through results' href='/index.php/datamgmt/dbadmin/mssqlserveradmin/mongodb-how-to-limit-results/' />
<link rel='next' title='A Glance of Plan Explorer Pro’s Deadlock Analysis' href='/index.php/datamgmt/dbadmin/look-at-plan-explorer-pro/' />
<meta name="generator" content="WordPress 4.6.1" />
<link rel="canonical" href="/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/" />
<link rel='shortlink' href='/?p=1943' />
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Findex.php%2Fwebdev%2Fuidevelopment%2Fajax%2Fasp-net-mvc-project-with%2F" />
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Findex.php%2Fwebdev%2Fuidevelopment%2Fajax%2Fasp-net-mvc-project-with%2F&#038;format=xml" />
<style type='text/css'>.rp4wp-related-posts ul{width:100%;padding:0;margin:0;float:left;}
.rp4wp-related-posts ul>li{list-style:none;padding:0;margin:0;padding-bottom:20px;clear:both;}
.rp4wp-related-posts ul>li>p{margin:0;padding:0;}
.rp4wp-related-post-image{width:35%;padding-right:25px;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;float:left;}</style>
	<script src="http://lessthandot.com/includes/allsite.js" type="text/javascript" ></script>
</head>
<body>
<div id="contain"><div id="subcontain"><div id="ttl"><div id="hdr"><div id="snav"><a href="http://lessthandot.com/login.php?backtrack=/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/?">Member Login</a>
</div><a href="http://lessthandot.com/" title="LessThanDot Launchpad" id="logoc"><img src="http://lessthandot.com/images/logo_prod.png" alt="LessThanDot Site Logo" border="0" /></a><h1>LessThanDot</h1><div class="pgsttl">A decade of helpful technical content</div></div><div id="nav">
<ul>
<li><a href="http://lessthandot.com/" title="LessThanDot Launchpad" id="h" ><span>Launchpad</span></a></li>
<li class="cur"><a href="/" title="LessThanDot Blogs" id="b" ><span>Blogs</span></a></li>
<li><a href="http://forum.lessthandot.com/" title="LessThanDot Community Forums" id="f" ><span>Forum</span></a></li>
<li><a href="http://wiki.lessthandot.com/" title="LessThanDot Wiki Articles" id="w" ><span>Wiki</span></a></li>
<li><a href="http://sqlcop.lessthandot.com/" title="LessThanDot SQLCop" id="a" ><span>SQLCop</span></a></li>
<li><a href="http://lessthandot.com/account.php" title="Your Account Settings" id="r"  class="l_ie"><span>My Account</span></a></li></ul></div>
</div><div id="content">
<div id="fac"><div id="fa">
		<p>Less Than Dot is a community of passionate IT professionals and enthusiasts dedicated to sharing technical knowledge, experience, and assistance. Inside you will find reference materials, interesting technical discussions, and expert tips and commentary.</p></div></div><div class="content-sidebar">
	<div id="social" class="sdsec">
		<h2>LTD Social Sitings</h2>
		<div>
		<a id="social_twitter" href="http://twitter.com/LessThanDot/" title="Follow us on Twitter" ><img src="http://lessthandot.com/images/bdg_twitter.png" alt="Lessthandot twitter"/></a> 
		<a href="http://www.linkedin.com/groups?home=&amp;gid=113440" title="Join us on LinkedIn" ><img src="http://lessthandot.com/images/bdg_linkedin.png" alt="Lessthandot Linkedin" /></a> 
		<a href="http://www.facebook.com/group.php?gid=19330511063" title="Join us on Facebook" ><img src="http://lessthandot.com/images/bdg_facebook.png" alt="Lessthandot facebook"/></a> 
		<a href="http://lessthandot.com/rss.php" title="LessThanDot News Feed" ><img src="http://lessthandot.com/images/bdg_rss_icon.png" alt="Lessthandot rss"/></a> 
		</div>
		<p><em>Note: Watch for social icons on posts by your favorite authors to follow their postings on these and other social sites.</em></p>
	</div><div class="content-sidebar-section">
<h2>Tag cloud</h2>
	<p class="tag-cloud">
		<a href='/index.php/tag/net/' class='tag-link-245 tag-link-position-1' title='21 topics' style='font-size: 8.9565217391304pt;'>.net</a> <a href='/index.php/tag/asp-net/' class='tag-link-168 tag-link-position-2' title='21 topics' style='font-size: 8.9565217391304pt;'>asp.net</a> <a href='/index.php/tag/azure-2/' class='tag-link-321 tag-link-position-3' title='29 topics' style='font-size: 10.173913043478pt;'>azure</a> <a href='/index.php/tag/book/' class='tag-link-130 tag-link-position-4' title='26 topics' style='font-size: 9.7391304347826pt;'>book</a> <a href='/index.php/tag/business-intelligence-2/' class='tag-link-256 tag-link-position-5' title='30 topics' style='font-size: 10.260869565217pt;'>business intelligence</a> <a href='/index.php/tag/c/' class='tag-link-138 tag-link-position-6' title='40 topics' style='font-size: 11.304347826087pt;'>c#</a> <a href='/index.php/tag/database/' class='tag-link-134 tag-link-position-7' title='31 topics' style='font-size: 10.434782608696pt;'>database</a> <a href='/index.php/tag/excel/' class='tag-link-155 tag-link-position-8' title='16 topics' style='font-size: 8pt;'>excel</a> <a href='/index.php/tag/gotcha/' class='tag-link-240 tag-link-position-9' title='19 topics' style='font-size: 8.6086956521739pt;'>gotcha</a> <a href='/index.php/tag/how-to/' class='tag-link-272 tag-link-position-10' title='44 topics' style='font-size: 11.652173913043pt;'>how to</a> <a href='/index.php/tag/mongodb/' class='tag-link-765 tag-link-position-11' title='17 topics' style='font-size: 8.2608695652174pt;'>mongodb</a> <a href='/index.php/tag/nosql/' class='tag-link-775 tag-link-position-12' title='18 topics' style='font-size: 8.4347826086957pt;'>nosql</a> <a href='/index.php/tag/performance/' class='tag-link-179 tag-link-position-13' title='26 topics' style='font-size: 9.7391304347826pt;'>performance</a> <a href='/index.php/tag/security-2/' class='tag-link-398 tag-link-position-14' title='25 topics' style='font-size: 9.5652173913043pt;'>security</a> <a href='/index.php/tag/sql/' class='tag-link-132 tag-link-position-15' title='42 topics' style='font-size: 11.478260869565pt;'>sql</a> <a href='/index.php/tag/sql-advent-2012/' class='tag-link-1416 tag-link-position-16' title='18 topics' style='font-size: 8.4347826086957pt;'>sql advent 2012</a> <a href='/index.php/tag/sql-friday/' class='tag-link-377 tag-link-position-17' title='18 topics' style='font-size: 8.4347826086957pt;'>sql friday</a> <a href='/index.php/tag/sql-server/' class='tag-link-154 tag-link-position-18' title='145 topics' style='font-size: 16.086956521739pt;'>sql server</a> <a href='/index.php/tag/sql-server-2000/' class='tag-link-366 tag-link-position-19' title='45 topics' style='font-size: 11.739130434783pt;'>sql server 2000</a> <a href='/index.php/tag/sql-server-2005/' class='tag-link-327 tag-link-position-20' title='118 topics' style='font-size: 15.391304347826pt;'>sql server 2005</a> <a href='/index.php/tag/sql-server-2008/' class='tag-link-152 tag-link-position-21' title='237 topics' style='font-size: 18pt;'>sql server 2008</a> <a href='/index.php/tag/sql-server-2008-r2/' class='tag-link-548 tag-link-position-22' title='38 topics' style='font-size: 11.130434782609pt;'>sql server 2008 r2</a> <a href='/index.php/tag/sql-server-2012/' class='tag-link-1161 tag-link-position-23' title='76 topics' style='font-size: 13.739130434783pt;'>sql server 2012</a> <a href='/index.php/tag/ssis-2/' class='tag-link-501 tag-link-position-24' title='52 topics' style='font-size: 12.260869565217pt;'>ssis</a> <a href='/index.php/tag/ssms/' class='tag-link-640 tag-link-position-25' title='18 topics' style='font-size: 8.4347826086957pt;'>ssms</a> <a href='/index.php/tag/ssrs-2/' class='tag-link-557 tag-link-position-26' title='27 topics' style='font-size: 9.9130434782609pt;'>ssrs</a> <a href='/index.php/tag/syndicated/' class='tag-link-1407 tag-link-position-27' title='67 topics' style='font-size: 13.217391304348pt;'>syndicated</a> <a href='/index.php/tag/t-sql/' class='tag-link-185 tag-link-position-28' title='26 topics' style='font-size: 9.7391304347826pt;'>t-sql</a> <a href='/index.php/tag/tip/' class='tag-link-194 tag-link-position-29' title='46 topics' style='font-size: 11.826086956522pt;'>tip</a> <a href='/index.php/tag/unit-testing/' class='tag-link-162 tag-link-position-30' title='17 topics' style='font-size: 8.2608695652174pt;'>unit testing</a>	</p>
</div>		<div class="content-sidebar-section">
		<h2>Authors</h2>
			<ul class="author-list dimmed">
				<li><a href="/index.php/author/SQLDenis/" title="Posts by SQLDenis">SQLDenis</a> <a href="/index.php/author/SQLDenis/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (597)</li><li><a href="/index.php/author/onpnt/" title="Posts by Ted Krueger (onpnt)">Ted Krueger (onpnt)</a> <a href="/index.php/author/onpnt/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (355)</li><li><a href="/index.php/author/grrlgeek/" title="Posts by Jes Borland">Jes Borland</a> <a href="/index.php/author/grrlgeek/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (202)</li><li><a href="/index.php/author/tarwn/" title="Posts by Eli Weinstock-Herman (tarwn)">Eli Weinstock-Herman (tarwn)</a> <a href="/index.php/author/tarwn/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (190)</li><li><a href="/index.php/author/koenverbeeck/" title="Posts by Koen Verbeeck">Koen Verbeeck</a> <a href="/index.php/author/koenverbeeck/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (100)</li><li><a href="/index.php/author/alexcuse/" title="Posts by Alex Ullrich">Alex Ullrich</a> <a href="/index.php/author/alexcuse/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (55)</li><li><a href="/index.php/author/gmmastros/" title="Posts by George Mastros (gmmastros)">George Mastros (gmmastros)</a> <a href="/index.php/author/gmmastros/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (45)</li><li><a href="/index.php/author/axel8s/" title="Posts by Axel Achten (axel8s)">Axel Achten (axel8s)</a> <a href="/index.php/author/axel8s/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (28)</li><li><a href="/index.php/author/naomi/" title="Posts by Naomi Nosonovsky">Naomi Nosonovsky</a> <a href="/index.php/author/naomi/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (27)</li><li><a href="/index.php/author/thirster42/" title="Posts by David Forck (thirster42)">David Forck (thirster42)</a> <a href="/index.php/author/thirster42/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (24)</li><li><a href="/index.php/author/chopstik/" title="Posts by chopstik">chopstik</a> <a href="/index.php/author/chopstik/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (20)</li><li><a href="/index.php/author/kconan/" title="Posts by Kevin Conan">Kevin Conan</a> <a href="/index.php/author/kconan/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (18)</li><li><a href="/index.php/author/robearl/" title="Posts by Rob Earl">Rob Earl</a> <a href="/index.php/author/robearl/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (14)</li><li><a href="/index.php/author/thatrickguy/" title="Posts by ThatRickGuy">ThatRickGuy</a> <a href="/index.php/author/thatrickguy/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (12)</li><li><a href="/index.php/author/sqlarcher/" title="Posts by SQLArcher">SQLArcher</a> <a href="/index.php/author/sqlarcher/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (11)</li>                <li><a href="http://lessthandot.com/Stats/BlogAuthors.php">More...</a></li>
			</ul>
		</div>
				<div class="content-sidebar-section">
		<h2>Categories</h2>
			<ul class="categories-list">
					<li class="cat-item cat-item-10"><a href="/index.php/category/all/" >All Blogs</a>
</li>
	<li class="cat-item cat-item-5"><a href="/index.php/category/architect/" >Architecture, Design and Strategy</a>
</li>
	<li class="cat-item cat-item-1759"><a href="/index.php/category/artificial-intelligence/" >Artificial Intelligence</a>
</li>
	<li class="cat-item cat-item-6"><a href="/index.php/category/datamgmt/" >Data Management</a>
</li>
	<li class="cat-item cat-item-7"><a href="/index.php/category/desktopdev/" >Desktop Developer</a>
</li>
	<li class="cat-item cat-item-8"><a href="/index.php/category/enterprisedev/" >Enterprise Developer</a>
</li>
	<li class="cat-item cat-item-11"><a href="/index.php/category/itprofessionals/" >IT Professionals</a>
</li>
	<li class="cat-item cat-item-12"><a href="/index.php/category/itstudents/" >IT Students and Researchers</a>
</li>
	<li class="cat-item cat-item-1743"><a href="/index.php/category/management/" >Management</a>
</li>
	<li class="cat-item cat-item-9"><a href="/index.php/category/sysadmins/" >System Admins</a>
</li>
	<li class="cat-item cat-item-1"><a href="/index.php/category/uncategorized/" >Uncategorized</a>
</li>
	<li class="cat-item cat-item-4"><a href="/index.php/category/webdev/" >Web Developer</a>
</li>
			</ul>
		</div>
		</div><div class="content-main">
				<div class="post-navigation">
				<div class="post-navigation-forward"><a href="/index.php/datamgmt/dbadmin/look-at-plan-explorer-pro/" rel="next">A Glance of Plan Explorer Pro’s Deadlock Analysis</a> &raquo; </div>
				<div class="post-navigation-back">&laquo; <a href="/index.php/datamgmt/dbadmin/mssqlserveradmin/mongodb-how-to-limit-results/" rel="prev">MongoDB: How to limit results and how to page through results</a></div>
			</div>
			<div class="post-area instapaper_body">
				<div class="post-title-line">
										<h1 class="instapaper_ignore"><a href="/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/" class="post-title">ASP.NET MVC project with Modal dialogs and Flexigrid</a></h1>
					<div class="post-byline">by <a href="/index.php/author/naomi/" title="Posts by Naomi Nosonovsky" rel="author">Naomi Nosonovsky</a> on January 27, 2013 in category <a href="/index.php/category/webdev/uidevelopment/ajax/" rel="category tag">AJAX</a>. Article views: 14,654 </div>
				</div>
				<div class="post-tagline"><a href="https://twitter.com/intent/tweet?url=/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/&text=RT @LessThanDot Blog - ASP.NET MVC project with Modal dialogs and Flexigrid by naomi" class="twitter-share-button-static" target="_blank"><i></i><span class="label">Tweet</span></a><a href="http://www.linkedin.com/shareArticle?mini=true&url=/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/&title=ASP.NET MVC project with Modal dialogs and Flexigrid&source=/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/" target="_blank" title="Share on LinkedIn" class="svg-button"><img alt="Share on LinkedIn"  src="http://lessthandot.com/images/LinkedIn.svg" /></a><a href="http://www.reddit.com/submit?url=/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/&title=ASP.NET MVC project with Modal dialogs and Flexigrid" target="_blank" title="Submit to Reddit" class="svg-button"><img alt="Submit to Reddit" src="http://lessthandot.com/images/Reddit.svg" /></a><a href="https://www.facebook.com/sharer/sharer.php?u=/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/&quote=ASP.NET MVC project with Modal dialogs and Flexigrid" title="Share on Facebook" target="_blank" class="svg-button"><img alt="Share on Facebook" src="http://lessthandot.com/images/Facebook.svg" /></a> <a href="http://www.instapaper.com/hello2?url=/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/&title=ASP.NET MVC project with Modal dialogs and Flexigrid" class="instapaper_button">Instapaper</a></div>

				<div class="post-content"><p>In the last few months I started working on my first ASP.NET MVC project. I already had a Visual FoxPro application I wrote in a few days and I wanted to replicate it for the Web using ASP.NET MVC. This project is still in its infancy, but I want to share my experience and some success I have with it.</p>
<p>I also first want to thank people who helped me to get where I am now with this project: Viv Phillips and Paul Mrozowski from UniversalThread, Darin Dimitrov from stackoverflow, Alex Ullrich and Sergey Kosik and also Jazzen Chen from MS. I also want to thank authors of many blogs and articles I read while working on this project.</p>
<p>I started my project from defining my models using Entity Framework Code first pattern since I already had the database defined. I am going to discuss only one model &#8220;Client&#8221; for the Clients table.</p>
<p>This is how the table looks in the database:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
</pre></td><td class="de1"><pre class="de1"><span class="kw1">CREATE</span> <span class="kw1">TABLE</span> <span class="br0">&#91;</span>dbo<span class="br0">&#93;</span>.<span class="br0">&#91;</span>Clients<span class="br0">&#93;</span><span class="br0">&#40;</span>
&nbsp; &nbsp; <span class="br0">&#91;</span>ClientID<span class="br0">&#93;</span> <span class="br0">&#91;</span><span class="kw1">int</span><span class="br0">&#93;</span> <span class="kw1">IDENTITY</span><span class="br0">&#40;</span><span class="nu0">1</span>,<span class="nu0">1</span><span class="br0">&#41;</span> <span class="sy0">NOT</span> <span class="sy0">NULL</span>,
&nbsp; &nbsp; <span class="br0">&#91;</span>client_no<span class="br0">&#93;</span> <span class="br0">&#91;</span><span class="kw1">smallint</span><span class="br0">&#93;</span> <span class="sy0">NOT</span> <span class="sy0">NULL</span>,
&nbsp; &nbsp; <span class="br0">&#91;</span>client_name<span class="br0">&#93;</span> <span class="br0">&#91;</span><span class="kw1">varchar</span><span class="br0">&#93;</span><span class="br0">&#40;</span><span class="nu0">30</span><span class="br0">&#41;</span> <span class="sy0">NULL</span>,
&nbsp; &nbsp; <span class="br0">&#91;</span>Contact1<span class="br0">&#93;</span> <span class="br0">&#91;</span><span class="kw1">varchar</span><span class="br0">&#93;</span><span class="br0">&#40;</span><span class="nu0">100</span><span class="br0">&#41;</span> <span class="sy0">NULL</span>,
&nbsp; &nbsp; <span class="br0">&#91;</span>C1_Email<span class="br0">&#93;</span> <span class="br0">&#91;</span><span class="kw1">varchar</span><span class="br0">&#93;</span><span class="br0">&#40;</span><span class="nu0">100</span><span class="br0">&#41;</span> <span class="sy0">NULL</span>,
&nbsp; &nbsp; <span class="br0">&#91;</span>Contact2<span class="br0">&#93;</span> <span class="br0">&#91;</span><span class="kw1">varchar</span><span class="br0">&#93;</span><span class="br0">&#40;</span><span class="nu0">100</span><span class="br0">&#41;</span> <span class="sy0">NULL</span>,
&nbsp; &nbsp; <span class="br0">&#91;</span>C2_Email<span class="br0">&#93;</span> <span class="br0">&#91;</span><span class="kw1">varchar</span><span class="br0">&#93;</span><span class="br0">&#40;</span><span class="nu0">100</span><span class="br0">&#41;</span> <span class="sy0">NULL</span>,
&nbsp; &nbsp; <span class="br0">&#91;</span>C1_Phone<span class="br0">&#93;</span> <span class="br0">&#91;</span><span class="kw1">varchar</span><span class="br0">&#93;</span><span class="br0">&#40;</span><span class="nu0">10</span><span class="br0">&#41;</span> <span class="sy0">NULL</span>,
&nbsp; &nbsp; <span class="br0">&#91;</span>C1_Ext<span class="br0">&#93;</span> <span class="br0">&#91;</span><span class="kw1">varchar</span><span class="br0">&#93;</span><span class="br0">&#40;</span><span class="nu0">5</span><span class="br0">&#41;</span> <span class="sy0">NULL</span>,
&nbsp; &nbsp; <span class="br0">&#91;</span>C2_Phone<span class="br0">&#93;</span> <span class="br0">&#91;</span><span class="kw1">varchar</span><span class="br0">&#93;</span><span class="br0">&#40;</span><span class="nu0">10</span><span class="br0">&#41;</span> <span class="sy0">NULL</span>,
&nbsp; &nbsp; <span class="br0">&#91;</span>C2_Ext<span class="br0">&#93;</span> <span class="br0">&#91;</span><span class="kw1">varchar</span><span class="br0">&#93;</span><span class="br0">&#40;</span><span class="nu0">5</span><span class="br0">&#41;</span> <span class="sy0">NULL</span>,
&nbsp; &nbsp; <span class="br0">&#91;</span>Address<span class="br0">&#93;</span> <span class="br0">&#91;</span><span class="kw1">varchar</span><span class="br0">&#93;</span><span class="br0">&#40;</span><span class="kw2">max</span><span class="br0">&#41;</span> <span class="sy0">NULL</span>,
&nbsp; &nbsp; <span class="br0">&#91;</span>EnteredBy<span class="br0">&#93;</span> <span class="br0">&#91;</span><span class="kw1">char</span><span class="br0">&#93;</span><span class="br0">&#40;</span><span class="nu0">6</span><span class="br0">&#41;</span> <span class="sy0">NOT</span> <span class="sy0">NULL</span>,
&nbsp; &nbsp; <span class="br0">&#91;</span>EnteredOn<span class="br0">&#93;</span> <span class="br0">&#91;</span><span class="kw1">smalldatetime</span><span class="br0">&#93;</span> <span class="sy0">NULL</span>,
&nbsp; &nbsp; <span class="br0">&#91;</span>ModifiedBy<span class="br0">&#93;</span> <span class="br0">&#91;</span><span class="kw1">char</span><span class="br0">&#93;</span><span class="br0">&#40;</span><span class="nu0">6</span><span class="br0">&#41;</span> <span class="sy0">NULL</span>,
&nbsp; &nbsp; <span class="br0">&#91;</span>ModifiedOn<span class="br0">&#93;</span> <span class="br0">&#91;</span><span class="kw1">smalldatetime</span><span class="br0">&#93;</span> <span class="sy0">NULL</span>,
&nbsp;<span class="kw1">CONSTRAINT</span> <span class="br0">&#91;</span>PK_Clients_ClientID<span class="br0">&#93;</span> <span class="kw1">PRIMARY</span> <span class="kw1">KEY</span> <span class="kw1">CLUSTERED</span> 
<span class="br0">&#40;</span>
&nbsp; &nbsp; <span class="br0">&#91;</span>ClientID<span class="br0">&#93;</span> <span class="kw1">ASC</span>
<span class="br0">&#41;</span><span class="kw1">WITH</span> <span class="br0">&#40;</span>PAD_<span class="sy0">IN</span>DEX &nbsp;<span class="sy0">=</span> <span class="kw1">OFF</span>, STATISTICS_N<span class="sy0">OR</span>ECOMPUTE &nbsp;<span class="sy0">=</span> <span class="kw1">OFF</span>, IGN<span class="sy0">OR</span>E_DUP_KEY <span class="sy0">=</span> <span class="kw1">OFF</span>, <span class="sy0">ALL</span>OW_ROW_LOCKS &nbsp;<span class="sy0">=</span> <span class="kw1">ON</span>, <span class="sy0">ALL</span>OW_PAGE_LOCKS &nbsp;<span class="sy0">=</span> <span class="kw1">ON</span><span class="br0">&#41;</span> <span class="kw1">ON</span> <span class="br0">&#91;</span><span class="kw1">PRIMARY</span><span class="br0">&#93;</span>
<span class="br0">&#41;</span> <span class="kw1">ON</span> <span class="br0">&#91;</span><span class="kw1">PRIMARY</span><span class="br0">&#93;</span> TEXTIMAGE_ON <span class="br0">&#91;</span><span class="kw1">PRIMARY</span><span class="br0">&#93;</span>
GO
<span class="kw1">SET</span> ANSI_PADD<span class="sy0">IN</span>G <span class="kw1">OFF</span>
GO
<span class="kw1">CREATE</span> <span class="kw1">NONCLUSTERED</span> <span class="kw1">INDEX</span> <span class="br0">&#91;</span>idxClients_Client_No<span class="br0">&#93;</span> <span class="kw1">ON</span> <span class="br0">&#91;</span>dbo<span class="br0">&#93;</span>.<span class="br0">&#91;</span>Clients<span class="br0">&#93;</span> 
<span class="br0">&#40;</span>
&nbsp; &nbsp; <span class="br0">&#91;</span>client_no<span class="br0">&#93;</span> <span class="kw1">ASC</span>
<span class="br0">&#41;</span><span class="kw1">WITH</span> <span class="br0">&#40;</span>PAD_<span class="sy0">IN</span>DEX &nbsp;<span class="sy0">=</span> <span class="kw1">OFF</span>, STATISTICS_N<span class="sy0">OR</span>ECOMPUTE &nbsp;<span class="sy0">=</span> <span class="kw1">OFF</span>, S<span class="sy0">OR</span>T_<span class="sy0">IN</span>_TEMPDB <span class="sy0">=</span> <span class="kw1">OFF</span>, IGN<span class="sy0">OR</span>E_DUP_KEY <span class="sy0">=</span> <span class="kw1">OFF</span>, DROP_EXIST<span class="sy0">IN</span>G <span class="sy0">=</span> <span class="kw1">OFF</span>, ONL<span class="sy0">IN</span>E <span class="sy0">=</span> <span class="kw1">OFF</span>, <span class="sy0">ALL</span>OW_ROW_LOCKS &nbsp;<span class="sy0">=</span> <span class="kw1">ON</span>, <span class="sy0">ALL</span>OW_PAGE_LOCKS &nbsp;<span class="sy0">=</span> <span class="kw1">ON</span><span class="br0">&#41;</span> <span class="kw1">ON</span> <span class="br0">&#91;</span><span class="kw1">PRIMARY</span><span class="br0">&#93;</span>
&nbsp;
<span class="coMULTI">/****** Object: &nbsp;Default [DF_Clients_EnteredBy] &nbsp; &nbsp;Script Date: 12/19/2012 07:00:35 ******/</span>
<span class="kw1">ALTER</span> <span class="kw1">TABLE</span> <span class="br0">&#91;</span>dbo<span class="br0">&#93;</span>.<span class="br0">&#91;</span>Clients<span class="br0">&#93;</span> <span class="kw1">ADD</span> &nbsp;<span class="kw1">CONSTRAINT</span> <span class="br0">&#91;</span>DF_Clients_EnteredBy<span class="br0">&#93;</span> &nbsp;<span class="kw1">DEFAULT</span> <span class="br0">&#40;</span><span class="st0">'ADMIN'</span><span class="br0">&#41;</span> <span class="kw1">FOR</span> <span class="br0">&#91;</span>EnteredBy<span class="br0">&#93;</span>
GO
<span class="coMULTI">/****** Object: &nbsp;Default [DF_Clients_EnteredOn] &nbsp; &nbsp;Script Date: 12/19/2012 07:00:35 ******/</span>
<span class="kw1">ALTER</span> <span class="kw1">TABLE</span> <span class="br0">&#91;</span>dbo<span class="br0">&#93;</span>.<span class="br0">&#91;</span>Clients<span class="br0">&#93;</span> <span class="kw1">ADD</span> &nbsp;<span class="kw1">CONSTRAINT</span> <span class="br0">&#91;</span>DF_Clients_EnteredOn<span class="br0">&#93;</span> &nbsp;<span class="kw1">DEFAULT</span> <span class="br0">&#40;</span><span class="kw2">getdate</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="kw1">FOR</span> <span class="br0">&#91;</span>EnteredOn<span class="br0">&#93;</span>
GO
<span class="coMULTI">/****** Object: &nbsp;Check [CK_Clients_C1_Phone] &nbsp; &nbsp;Script Date: 12/19/2012 07:00:35 ******/</span>
<span class="kw1">ALTER</span> <span class="kw1">TABLE</span> <span class="br0">&#91;</span>dbo<span class="br0">&#93;</span>.<span class="br0">&#91;</span>Clients<span class="br0">&#93;</span> &nbsp;<span class="kw1">WITH</span> <span class="kw1">CHECK</span> <span class="kw1">ADD</span> &nbsp;<span class="kw1">CONSTRAINT</span> <span class="br0">&#91;</span>CK_Clients_C1_Phone<span class="br0">&#93;</span> <span class="kw1">CHECK</span> &nbsp;<span class="br0">&#40;</span><span class="br0">&#40;</span><span class="br0">&#91;</span>C1_Phone<span class="br0">&#93;</span> like <span class="st0">'[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
GO
<span class="kw1">ALTER</span> <span class="kw1">TABLE</span> <span class="br0">&#91;</span>dbo<span class="br0">&#93;</span>.<span class="br0">&#91;</span>Clients<span class="br0">&#93;</span> <span class="kw1">CHECK</span> <span class="kw1">CONSTRAINT</span> <span class="br0">&#91;</span>CK_Clients_C1_Phone<span class="br0">&#93;</span>
GO
<span class="coMULTI">/****** Object: &nbsp;Check [CK_Clients_C2_Phone] &nbsp; &nbsp;Script Date: 12/19/2012 07:00:35 ******/</span>
<span class="kw1">ALTER</span> <span class="kw1">TABLE</span> <span class="br0">&#91;</span>dbo<span class="br0">&#93;</span>.<span class="br0">&#91;</span>Clients<span class="br0">&#93;</span> &nbsp;<span class="kw1">WITH</span> <span class="kw1">CHECK</span> <span class="kw1">ADD</span> &nbsp;<span class="kw1">CONSTRAINT</span> <span class="br0">&#91;</span>CK_Clients_C2_Phone<span class="br0">&#93;</span> <span class="kw1">CHECK</span> &nbsp;<span class="br0">&#40;</span><span class="br0">&#40;</span><span class="br0">&#91;</span>C2_Phone<span class="br0">&#93;</span> like <span class="st0">'[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
GO
<span class="kw1">ALTER</span> <span class="kw1">TABLE</span> <span class="br0">&#91;</span>dbo<span class="br0">&#93;</span>.<span class="br0">&#91;</span>Clients<span class="br0">&#93;</span> <span class="kw1">CHECK</span> <span class="kw1">CONSTRAINT</span> <span class="br0">&#91;</span>CK_Clients_C2_Phone<span class="br0">&#93;</span>
GO
<span class="coMULTI">/****** Object: &nbsp;ForeignKey [FK_Clients_Operators_EnteredBy] &nbsp; &nbsp;Script Date: 12/19/2012 07:00:35 ******/</span>
<span class="kw1">ALTER</span> <span class="kw1">TABLE</span> <span class="br0">&#91;</span>dbo<span class="br0">&#93;</span>.<span class="br0">&#91;</span>Clients<span class="br0">&#93;</span> &nbsp;<span class="kw1">WITH</span> <span class="kw1">CHECK</span> <span class="kw1">ADD</span> &nbsp;<span class="kw1">CONSTRAINT</span> <span class="br0">&#91;</span>FK_Clients_Operators_EnteredBy<span class="br0">&#93;</span> <span class="kw1">FOREIGN</span> <span class="kw1">KEY</span><span class="br0">&#40;</span><span class="br0">&#91;</span>EnteredBy<span class="br0">&#93;</span><span class="br0">&#41;</span>
<span class="kw1">REFERENCES</span> <span class="br0">&#91;</span>dbo<span class="br0">&#93;</span>.<span class="br0">&#91;</span>Operators<span class="br0">&#93;</span> <span class="br0">&#40;</span><span class="br0">&#91;</span>op_code<span class="br0">&#93;</span><span class="br0">&#41;</span>
GO
<span class="kw1">ALTER</span> <span class="kw1">TABLE</span> <span class="br0">&#91;</span>dbo<span class="br0">&#93;</span>.<span class="br0">&#91;</span>Clients<span class="br0">&#93;</span> <span class="kw1">CHECK</span> <span class="kw1">CONSTRAINT</span> <span class="br0">&#91;</span>FK_Clients_Operators_EnteredBy<span class="br0">&#93;</span>
GO
<span class="coMULTI">/****** Object: &nbsp;ForeignKey [FK_Clients_Operators_ModifiedBy] &nbsp; &nbsp;Script Date: 12/19/2012 07:00:35 ******/</span>
<span class="kw1">ALTER</span> <span class="kw1">TABLE</span> <span class="br0">&#91;</span>dbo<span class="br0">&#93;</span>.<span class="br0">&#91;</span>Clients<span class="br0">&#93;</span> &nbsp;<span class="kw1">WITH</span> <span class="kw1">CHECK</span> <span class="kw1">ADD</span> &nbsp;<span class="kw1">CONSTRAINT</span> <span class="br0">&#91;</span>FK_Clients_Operators_ModifiedBy<span class="br0">&#93;</span> <span class="kw1">FOREIGN</span> <span class="kw1">KEY</span><span class="br0">&#40;</span><span class="br0">&#91;</span>ModifiedBy<span class="br0">&#93;</span><span class="br0">&#41;</span>
<span class="kw1">REFERENCES</span> <span class="br0">&#91;</span>dbo<span class="br0">&#93;</span>.<span class="br0">&#91;</span>Operators<span class="br0">&#93;</span> <span class="br0">&#40;</span><span class="br0">&#91;</span>op_code<span class="br0">&#93;</span><span class="br0">&#41;</span>
GO
<span class="kw1">ALTER</span> <span class="kw1">TABLE</span> <span class="br0">&#91;</span>dbo<span class="br0">&#93;</span>.<span class="br0">&#91;</span>Clients<span class="br0">&#93;</span> <span class="kw1">CHECK</span> <span class="kw1">CONSTRAINT</span> <span class="br0">&#91;</span>FK_Clients_Operators_ModifiedBy<span class="br0">&#93;</span>
GO</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">CREATE TABLE [dbo].[Clients](
	[ClientID] [int] IDENTITY(1,1) NOT NULL,
	[client_no] [smallint] NOT NULL,
	[client_name] [varchar](30) NULL,
	[Contact1] [varchar](100) NULL,
	[C1_Email] [varchar](100) NULL,
	[Contact2] [varchar](100) NULL,
	[C2_Email] [varchar](100) NULL,
	[C1_Phone] [varchar](10) NULL,
	[C1_Ext] [varchar](5) NULL,
	[C2_Phone] [varchar](10) NULL,
	[C2_Ext] [varchar](5) NULL,
	[Address] [varchar](max) NULL,
	[EnteredBy] [char](6) NOT NULL,
	[EnteredOn] [smalldatetime] NULL,
	[ModifiedBy] [char](6) NULL,
	[ModifiedOn] [smalldatetime] NULL,
 CONSTRAINT [PK_Clients_ClientID] PRIMARY KEY CLUSTERED 
(
	[ClientID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
SET ANSI_PADDING OFF
GO
CREATE NONCLUSTERED INDEX [idxClients_Client_No] ON [dbo].[Clients] 
(
	[client_no] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, DROP_EXISTING = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]

/****** Object:  Default [DF_Clients_EnteredBy]    Script Date: 12/19/2012 07:00:35 ******/
ALTER TABLE [dbo].[Clients] ADD  CONSTRAINT [DF_Clients_EnteredBy]  DEFAULT ('ADMIN') FOR [EnteredBy]
GO
/****** Object:  Default [DF_Clients_EnteredOn]    Script Date: 12/19/2012 07:00:35 ******/
ALTER TABLE [dbo].[Clients] ADD  CONSTRAINT [DF_Clients_EnteredOn]  DEFAULT (getdate()) FOR [EnteredOn]
GO
/****** Object:  Check [CK_Clients_C1_Phone]    Script Date: 12/19/2012 07:00:35 ******/
ALTER TABLE [dbo].[Clients]  WITH CHECK ADD  CONSTRAINT [CK_Clients_C1_Phone] CHECK  (([C1_Phone] like '[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]'))
GO
ALTER TABLE [dbo].[Clients] CHECK CONSTRAINT [CK_Clients_C1_Phone]
GO
/****** Object:  Check [CK_Clients_C2_Phone]    Script Date: 12/19/2012 07:00:35 ******/
ALTER TABLE [dbo].[Clients]  WITH CHECK ADD  CONSTRAINT [CK_Clients_C2_Phone] CHECK  (([C2_Phone] like '[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]'))
GO
ALTER TABLE [dbo].[Clients] CHECK CONSTRAINT [CK_Clients_C2_Phone]
GO
/****** Object:  ForeignKey [FK_Clients_Operators_EnteredBy]    Script Date: 12/19/2012 07:00:35 ******/
ALTER TABLE [dbo].[Clients]  WITH CHECK ADD  CONSTRAINT [FK_Clients_Operators_EnteredBy] FOREIGN KEY([EnteredBy])
REFERENCES [dbo].[Operators] ([op_code])
GO
ALTER TABLE [dbo].[Clients] CHECK CONSTRAINT [FK_Clients_Operators_EnteredBy]
GO
/****** Object:  ForeignKey [FK_Clients_Operators_ModifiedBy]    Script Date: 12/19/2012 07:00:35 ******/
ALTER TABLE [dbo].[Clients]  WITH CHECK ADD  CONSTRAINT [FK_Clients_Operators_ModifiedBy] FOREIGN KEY([ModifiedBy])
REFERENCES [dbo].[Operators] ([op_code])
GO
ALTER TABLE [dbo].[Clients] CHECK CONSTRAINT [FK_Clients_Operators_ModifiedBy]
GO</pre></div></div>

<p>Last 2 constraints in the above script refer to the Operators table I am not showing here.</p>
<p>Let&#8217;s add some data to insert:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="de1"><pre class="de1">GO
<span class="kw1">SET</span> <span class="kw1">IDENTITY_INSERT</span> <span class="br0">&#91;</span>dbo<span class="br0">&#93;</span>.<span class="br0">&#91;</span>Clients<span class="br0">&#93;</span> <span class="kw1">ON</span>
&nbsp;
<span class="kw1">INSERT</span> <span class="br0">&#91;</span>dbo<span class="br0">&#93;</span>.<span class="br0">&#91;</span>Clients<span class="br0">&#93;</span> <span class="br0">&#40;</span><span class="br0">&#91;</span>ClientID<span class="br0">&#93;</span>, <span class="br0">&#91;</span>client_no<span class="br0">&#93;</span>, <span class="br0">&#91;</span>client_name<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Contact1<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Email<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Contact2<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Email<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Phone<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Ext<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Phone<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Ext<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Address<span class="br0">&#93;</span>, <span class="br0">&#91;</span>EnteredBy<span class="br0">&#93;</span>, <span class="br0">&#91;</span>EnteredOn<span class="br0">&#93;</span>, <span class="br0">&#91;</span>ModifiedBy<span class="br0">&#93;</span>, <span class="br0">&#91;</span>ModifiedOn<span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="kw1">VALUES</span> <span class="br0">&#40;</span><span class="nu0">3</span>, <span class="nu0">8096</span>, N<span class="st0">'Wachusett'</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, N<span class="st0">'ADMIN '</span>, <span class="kw1">CAST</span><span class="br0">&#40;</span>0x9F9002DD <span class="kw1">AS</span> <span class="kw1">SmallDateTime</span><span class="br0">&#41;</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span><span class="br0">&#41;</span>
<span class="kw1">INSERT</span> <span class="br0">&#91;</span>dbo<span class="br0">&#93;</span>.<span class="br0">&#91;</span>Clients<span class="br0">&#93;</span> <span class="br0">&#40;</span><span class="br0">&#91;</span>ClientID<span class="br0">&#93;</span>, <span class="br0">&#91;</span>client_no<span class="br0">&#93;</span>, <span class="br0">&#91;</span>client_name<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Contact1<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Email<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Contact2<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Email<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Phone<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Ext<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Phone<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Ext<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Address<span class="br0">&#93;</span>, <span class="br0">&#91;</span>EnteredBy<span class="br0">&#93;</span>, <span class="br0">&#91;</span>EnteredOn<span class="br0">&#93;</span>, <span class="br0">&#91;</span>ModifiedBy<span class="br0">&#93;</span>, <span class="br0">&#91;</span>ModifiedOn<span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="kw1">VALUES</span> <span class="br0">&#40;</span><span class="nu0">4</span>, <span class="nu0">6700</span>, N<span class="st0">'Buck Hill'</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, N<span class="st0">'ADMIN '</span>, <span class="kw1">CAST</span><span class="br0">&#40;</span>0x9F9002DD <span class="kw1">AS</span> <span class="kw1">SmallDateTime</span><span class="br0">&#41;</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span><span class="br0">&#41;</span>
<span class="kw1">INSERT</span> <span class="br0">&#91;</span>dbo<span class="br0">&#93;</span>.<span class="br0">&#91;</span>Clients<span class="br0">&#93;</span> <span class="br0">&#40;</span><span class="br0">&#91;</span>ClientID<span class="br0">&#93;</span>, <span class="br0">&#91;</span>client_no<span class="br0">&#93;</span>, <span class="br0">&#91;</span>client_name<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Contact1<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Email<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Contact2<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Email<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Phone<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Ext<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Phone<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Ext<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Address<span class="br0">&#93;</span>, <span class="br0">&#91;</span>EnteredBy<span class="br0">&#93;</span>, <span class="br0">&#91;</span>EnteredOn<span class="br0">&#93;</span>, <span class="br0">&#91;</span>ModifiedBy<span class="br0">&#93;</span>, <span class="br0">&#91;</span>ModifiedOn<span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="kw1">VALUES</span> <span class="br0">&#40;</span><span class="nu0">5</span>, <span class="nu0">6238</span>, N<span class="st0">'Jamz'</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, N<span class="st0">'ADMIN '</span>, <span class="kw1">CAST</span><span class="br0">&#40;</span>0x9F9002DD <span class="kw1">AS</span> <span class="kw1">SmallDateTime</span><span class="br0">&#41;</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span><span class="br0">&#41;</span>
<span class="kw1">INSERT</span> <span class="br0">&#91;</span>dbo<span class="br0">&#93;</span>.<span class="br0">&#91;</span>Clients<span class="br0">&#93;</span> <span class="br0">&#40;</span><span class="br0">&#91;</span>ClientID<span class="br0">&#93;</span>, <span class="br0">&#91;</span>client_no<span class="br0">&#93;</span>, <span class="br0">&#91;</span>client_name<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Contact1<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Email<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Contact2<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Email<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Phone<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Ext<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Phone<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Ext<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Address<span class="br0">&#93;</span>, <span class="br0">&#91;</span>EnteredBy<span class="br0">&#93;</span>, <span class="br0">&#91;</span>EnteredOn<span class="br0">&#93;</span>, <span class="br0">&#91;</span>ModifiedBy<span class="br0">&#93;</span>, <span class="br0">&#91;</span>ModifiedOn<span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="kw1">VALUES</span> <span class="br0">&#40;</span><span class="nu0">7</span>, <span class="nu0">8363</span>, N<span class="st0">'Okemo'</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, N<span class="st0">'ADMIN '</span>, <span class="kw1">CAST</span><span class="br0">&#40;</span>0x9F9002DD <span class="kw1">AS</span> <span class="kw1">SmallDateTime</span><span class="br0">&#41;</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span><span class="br0">&#41;</span>
<span class="kw1">INSERT</span> <span class="br0">&#91;</span>dbo<span class="br0">&#93;</span>.<span class="br0">&#91;</span>Clients<span class="br0">&#93;</span> <span class="br0">&#40;</span><span class="br0">&#91;</span>ClientID<span class="br0">&#93;</span>, <span class="br0">&#91;</span>client_no<span class="br0">&#93;</span>, <span class="br0">&#91;</span>client_name<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Contact1<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Email<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Contact2<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Email<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Phone<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Ext<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Phone<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Ext<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Address<span class="br0">&#93;</span>, <span class="br0">&#91;</span>EnteredBy<span class="br0">&#93;</span>, <span class="br0">&#91;</span>EnteredOn<span class="br0">&#93;</span>, <span class="br0">&#91;</span>ModifiedBy<span class="br0">&#93;</span>, <span class="br0">&#91;</span>ModifiedOn<span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="kw1">VALUES</span> <span class="br0">&#40;</span><span class="nu0">8</span>, <span class="nu0">1161</span>, N<span class="st0">'Shawnee Mountain'</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, N<span class="st0">'ADMIN '</span>, <span class="kw1">CAST</span><span class="br0">&#40;</span>0x9F9002DD <span class="kw1">AS</span> <span class="kw1">SmallDateTime</span><span class="br0">&#41;</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span><span class="br0">&#41;</span>
<span class="kw1">INSERT</span> <span class="br0">&#91;</span>dbo<span class="br0">&#93;</span>.<span class="br0">&#91;</span>Clients<span class="br0">&#93;</span> <span class="br0">&#40;</span><span class="br0">&#91;</span>ClientID<span class="br0">&#93;</span>, <span class="br0">&#91;</span>client_no<span class="br0">&#93;</span>, <span class="br0">&#91;</span>client_name<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Contact1<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Email<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Contact2<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Email<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Phone<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Ext<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Phone<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Ext<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Address<span class="br0">&#93;</span>, <span class="br0">&#91;</span>EnteredBy<span class="br0">&#93;</span>, <span class="br0">&#91;</span>EnteredOn<span class="br0">&#93;</span>, <span class="br0">&#91;</span>ModifiedBy<span class="br0">&#93;</span>, <span class="br0">&#91;</span>ModifiedOn<span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="kw1">VALUES</span> <span class="br0">&#40;</span><span class="nu0">9</span>, <span class="nu0">7497</span>, N<span class="st0">'Southern Star Obs Wheel'</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, N<span class="st0">'ADMIN '</span>, <span class="kw1">CAST</span><span class="br0">&#40;</span>0x9F9002DD <span class="kw1">AS</span> <span class="kw1">SmallDateTime</span><span class="br0">&#41;</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span><span class="br0">&#41;</span>
<span class="kw1">INSERT</span> <span class="br0">&#91;</span>dbo<span class="br0">&#93;</span>.<span class="br0">&#91;</span>Clients<span class="br0">&#93;</span> <span class="br0">&#40;</span><span class="br0">&#91;</span>ClientID<span class="br0">&#93;</span>, <span class="br0">&#91;</span>client_no<span class="br0">&#93;</span>, <span class="br0">&#91;</span>client_name<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Contact1<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Email<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Contact2<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Email<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Phone<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Ext<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Phone<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Ext<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Address<span class="br0">&#93;</span>, <span class="br0">&#91;</span>EnteredBy<span class="br0">&#93;</span>, <span class="br0">&#91;</span>EnteredOn<span class="br0">&#93;</span>, <span class="br0">&#91;</span>ModifiedBy<span class="br0">&#93;</span>, <span class="br0">&#91;</span>ModifiedOn<span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="kw1">VALUES</span> <span class="br0">&#40;</span><span class="nu0">10</span>, <span class="nu0">1636</span>, N<span class="st0">'Mount Rose'</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, N<span class="st0">'ADMIN '</span>, <span class="kw1">CAST</span><span class="br0">&#40;</span>0x9F9002DD <span class="kw1">AS</span> <span class="kw1">SmallDateTime</span><span class="br0">&#41;</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span><span class="br0">&#41;</span>
<span class="kw1">INSERT</span> <span class="br0">&#91;</span>dbo<span class="br0">&#93;</span>.<span class="br0">&#91;</span>Clients<span class="br0">&#93;</span> <span class="br0">&#40;</span><span class="br0">&#91;</span>ClientID<span class="br0">&#93;</span>, <span class="br0">&#91;</span>client_no<span class="br0">&#93;</span>, <span class="br0">&#91;</span>client_name<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Contact1<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Email<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Contact2<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Email<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Phone<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C1_Ext<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Phone<span class="br0">&#93;</span>, <span class="br0">&#91;</span>C2_Ext<span class="br0">&#93;</span>, <span class="br0">&#91;</span>Address<span class="br0">&#93;</span>, <span class="br0">&#91;</span>EnteredBy<span class="br0">&#93;</span>, <span class="br0">&#91;</span>EnteredOn<span class="br0">&#93;</span>, <span class="br0">&#91;</span>ModifiedBy<span class="br0">&#93;</span>, <span class="br0">&#91;</span>ModifiedOn<span class="br0">&#93;</span><span class="br0">&#41;</span> <span class="kw1">VALUES</span> <span class="br0">&#40;</span><span class="nu0">11</span>, <span class="nu0">3951</span>, N<span class="st0">'Crystal Mtn Washington'</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span>, N<span class="st0">'ADMIN '</span>, <span class="kw1">CAST</span><span class="br0">&#40;</span>0x9F9002DD <span class="kw1">AS</span> <span class="kw1">SmallDateTime</span><span class="br0">&#41;</span>, <span class="sy0">NULL</span>, <span class="sy0">NULL</span><span class="br0">&#41;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">GO
SET IDENTITY_INSERT [dbo].[Clients] ON

INSERT [dbo].[Clients] ([ClientID], [client_no], [client_name], [Contact1], [C1_Email], [Contact2], [C2_Email], [C1_Phone], [C1_Ext], [C2_Phone], [C2_Ext], [Address], [EnteredBy], [EnteredOn], [ModifiedBy], [ModifiedOn]) VALUES (3, 8096, N'Wachusett', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, N'ADMIN ', CAST(0x9F9002DD AS SmallDateTime), NULL, NULL)
INSERT [dbo].[Clients] ([ClientID], [client_no], [client_name], [Contact1], [C1_Email], [Contact2], [C2_Email], [C1_Phone], [C1_Ext], [C2_Phone], [C2_Ext], [Address], [EnteredBy], [EnteredOn], [ModifiedBy], [ModifiedOn]) VALUES (4, 6700, N'Buck Hill', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, N'ADMIN ', CAST(0x9F9002DD AS SmallDateTime), NULL, NULL)
INSERT [dbo].[Clients] ([ClientID], [client_no], [client_name], [Contact1], [C1_Email], [Contact2], [C2_Email], [C1_Phone], [C1_Ext], [C2_Phone], [C2_Ext], [Address], [EnteredBy], [EnteredOn], [ModifiedBy], [ModifiedOn]) VALUES (5, 6238, N'Jamz', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, N'ADMIN ', CAST(0x9F9002DD AS SmallDateTime), NULL, NULL)
INSERT [dbo].[Clients] ([ClientID], [client_no], [client_name], [Contact1], [C1_Email], [Contact2], [C2_Email], [C1_Phone], [C1_Ext], [C2_Phone], [C2_Ext], [Address], [EnteredBy], [EnteredOn], [ModifiedBy], [ModifiedOn]) VALUES (7, 8363, N'Okemo', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, N'ADMIN ', CAST(0x9F9002DD AS SmallDateTime), NULL, NULL)
INSERT [dbo].[Clients] ([ClientID], [client_no], [client_name], [Contact1], [C1_Email], [Contact2], [C2_Email], [C1_Phone], [C1_Ext], [C2_Phone], [C2_Ext], [Address], [EnteredBy], [EnteredOn], [ModifiedBy], [ModifiedOn]) VALUES (8, 1161, N'Shawnee Mountain', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, N'ADMIN ', CAST(0x9F9002DD AS SmallDateTime), NULL, NULL)
INSERT [dbo].[Clients] ([ClientID], [client_no], [client_name], [Contact1], [C1_Email], [Contact2], [C2_Email], [C1_Phone], [C1_Ext], [C2_Phone], [C2_Ext], [Address], [EnteredBy], [EnteredOn], [ModifiedBy], [ModifiedOn]) VALUES (9, 7497, N'Southern Star Obs Wheel', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, N'ADMIN ', CAST(0x9F9002DD AS SmallDateTime), NULL, NULL)
INSERT [dbo].[Clients] ([ClientID], [client_no], [client_name], [Contact1], [C1_Email], [Contact2], [C2_Email], [C1_Phone], [C1_Ext], [C2_Phone], [C2_Ext], [Address], [EnteredBy], [EnteredOn], [ModifiedBy], [ModifiedOn]) VALUES (10, 1636, N'Mount Rose', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, N'ADMIN ', CAST(0x9F9002DD AS SmallDateTime), NULL, NULL)
INSERT [dbo].[Clients] ([ClientID], [client_no], [client_name], [Contact1], [C1_Email], [Contact2], [C2_Email], [C1_Phone], [C1_Ext], [C2_Phone], [C2_Ext], [Address], [EnteredBy], [EnteredOn], [ModifiedBy], [ModifiedOn]) VALUES (11, 3951, N'Crystal Mtn Washington', NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, N'ADMIN ', CAST(0x9F9002DD AS SmallDateTime), NULL, NULL)</pre></div></div>

<p>It took me many iterations and consultations with various blogs about Entity Framework to come up with the following model:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="csharp"><thead><tr><td colspan="2"  class="head">C#</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
</pre></td><td class="de1"><pre class="de1"><span class="kw1">using</span> <span class="co3">System</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">using</span> <span class="co3">System.ComponentModel.DataAnnotations</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">System.ComponentModel</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">using</span> <span class="co3">DataAnnotationsExtensions</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">System.ComponentModel.DataAnnotations.Schema</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">System.Collections.Generic</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">namespace</span> CardNumbers<span class="sy0">.</span><span class="me1">Objects</span>
<span class="br0">&#123;</span>
&nbsp; &nbsp; <span class="br0">&#91;</span>ComplexType<span class="br0">&#93;</span>
&nbsp; &nbsp; <span class="kw1">public</span> <span class="kw4">class</span> PhoneInfo
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>DataType<span class="br0">&#40;</span>DataType<span class="sy0">.</span><span class="me1">PhoneNumber</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>DisplayName<span class="br0">&#40;</span><span class="st0">&quot;Phone&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>RegularExpression<span class="br0">&#40;</span><span class="st_h">@&quot;^(((d{3})|d{3})s?)?d{3}[-s]?d{4}s*$&quot;</span>, ErrorMessage <span class="sy0">=</span> <span class="st0">&quot;Please enter valid Phone Number&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">virtual</span> <span class="kw4">string</span> Phone <span class="br0">&#123;</span> <span class="kw1">get</span><span class="sy0">;</span> <span class="kw1">set</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>StringLength<span class="br0">&#40;</span><span class="nu0">5</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>DisplayName<span class="br0">&#40;</span><span class="st0">&quot;Ext&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">virtual</span> <span class="kw4">string</span> Ext <span class="br0">&#123;</span> <span class="kw1">get</span><span class="sy0">;</span> <span class="kw1">set</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw4">bool</span> HasValue
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">get</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="br0">&#40;</span>Phone <span class="sy0">!=</span> <span class="kw1">null</span> <span class="sy0">||</span> Ext <span class="sy0">!=</span> <span class="kw1">null</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>ComplexType<span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw4">class</span> ContactDetail
&nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">//Constructor</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> ContactDetail<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; phoneInfo <span class="sy0">=</span> <span class="kw3">new</span> PhoneInfo<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>StringLength<span class="br0">&#40;</span><span class="nu0">100</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>DisplayName<span class="br0">&#40;</span><span class="st0">&quot;Contact Name&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>DisplayFormat<span class="br0">&#40;</span>NullDisplayText <span class="sy0">=</span> <span class="st0">&quot;&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">virtual</span> <span class="kw4">string</span> Contact <span class="br0">&#123;</span> <span class="kw1">get</span><span class="sy0">;</span> <span class="kw1">set</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>Email<span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>StringLength<span class="br0">&#40;</span><span class="nu0">100</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>DataType<span class="br0">&#40;</span>DataType<span class="sy0">.</span><span class="me1">EmailAddress</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>DisplayName<span class="br0">&#40;</span><span class="st0">&quot;Email&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">virtual</span> <span class="kw4">string</span> Email <span class="br0">&#123;</span> <span class="kw1">get</span><span class="sy0">;</span> <span class="kw1">set</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">virtual</span> PhoneInfo phoneInfo <span class="br0">&#123;</span> <span class="kw1">get</span><span class="sy0">;</span> <span class="kw1">set</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw4">bool</span> HasValue
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">get</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="br0">&#40;</span>Contact <span class="sy0">!=</span> <span class="kw1">null</span> <span class="sy0">||</span> Email <span class="sy0">!=</span> <span class="kw1">null</span> <span class="sy0">||</span> phoneInfo<span class="sy0">.</span><span class="me1">HasValue</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
<span class="co1">/// &lt;summary&gt;</span>
<span class="co1">/// Client class (Client No, Client Name, Address, Contact1, Contact2 info, Created By, Modified By (operator and date)</span>
<span class="co1">/// &lt;/summary&gt;</span>
&nbsp; &nbsp; <span class="kw1">public</span> <span class="kw4">class</span> Client
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> Client<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Contact1 <span class="sy0">=</span> <span class="kw3">new</span> ContactDetail<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Contact2 <span class="sy0">=</span> <span class="kw3">new</span> ContactDetail<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp;<span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>Key<span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>Editable<span class="br0">&#40;</span><span class="kw1">false</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>Column<span class="br0">&#40;</span><span class="st0">&quot;ClientId&quot;</span>,TypeName <span class="sy0">=</span> <span class="st0">&quot;int&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">virtual</span> <span class="kw4">int</span> Id <span class="br0">&#123;</span> <span class="kw1">get</span><span class="sy0">;</span> <span class="kw1">set</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">//[Required]</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>DisplayName<span class="br0">&#40;</span><span class="st0">&quot;Client No&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span> &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>Column<span class="br0">&#40;</span><span class="st0">&quot;client_no&quot;</span>, TypeName <span class="sy0">=</span> <span class="st0">&quot;smallint&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">virtual</span> Int16 Number <span class="br0">&#123;</span> <span class="kw1">get</span><span class="sy0">;</span> <span class="kw1">set</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">//[Required]</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>Column<span class="br0">&#40;</span><span class="st0">&quot;client_name&quot;</span>, TypeName <span class="sy0">=</span> <span class="st0">&quot;varchar&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>DisplayName<span class="br0">&#40;</span><span class="st0">&quot;Client Name&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>MaxLength<span class="br0">&#40;</span><span class="nu0">30</span>, ErrorMessage <span class="sy0">=</span> <span class="st0">&quot;Client Name should not be longer than 30 characters&quot;</span> <span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>MinLength<span class="br0">&#40;</span><span class="nu0">3</span>, ErrorMessage <span class="sy0">=</span> <span class="st0">&quot;Client Name is too short&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">virtual</span> <span class="kw4">string</span> Name <span class="br0">&#123;</span> <span class="kw1">get</span><span class="sy0">;</span> <span class="kw1">set</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>DataType<span class="br0">&#40;</span>DataType<span class="sy0">.</span><span class="me1">MultilineText</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">virtual</span> <span class="kw4">string</span> Address <span class="br0">&#123;</span> <span class="kw1">get</span><span class="sy0">;</span> <span class="kw1">set</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">virtual</span> ContactDetail Contact1 <span class="br0">&#123;</span><span class="kw1">get</span><span class="sy0">;</span> <span class="kw1">set</span><span class="sy0">;</span><span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">virtual</span> ContactDetail Contact2 <span class="br0">&#123;</span><span class="kw1">get</span><span class="sy0">;</span> <span class="kw1">set</span><span class="sy0">;</span><span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>ForeignKey<span class="br0">&#40;</span><span class="st0">&quot;EnteredByOperator&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw4">string</span> EnteredBy <span class="br0">&#123;</span> <span class="kw1">get</span><span class="sy0">;</span> <span class="kw1">set</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>InverseProperty<span class="br0">&#40;</span><span class="st0">&quot;ClientsEnteredBy&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">virtual</span> <span class="kw1">Operator</span> EnteredByOperator <span class="br0">&#123;</span> <span class="kw1">get</span><span class="sy0">;</span> <span class="kw1">set</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>ForeignKey<span class="br0">&#40;</span><span class="st0">&quot;ModifiedByOperator&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw4">string</span> ModifiedBy <span class="br0">&#123;</span> <span class="kw1">get</span><span class="sy0">;</span> <span class="kw1">set</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>InverseProperty<span class="br0">&#40;</span><span class="st0">&quot;ClientsUpdatedBy&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">virtual</span> <span class="kw1">Operator</span> ModifiedByOperator <span class="br0">&#123;</span> <span class="kw1">get</span><span class="sy0">;</span> <span class="kw1">set</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>DataType<span class="br0">&#40;</span>DataType<span class="sy0">.</span><span class="me1">DateTime</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>DisplayName<span class="br0">&#40;</span><span class="st0">&quot;Created on&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> DateTime EnteredOn <span class="br0">&#123;</span> <span class="kw1">get</span><span class="sy0">;</span> <span class="kw1">set</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>DataType<span class="br0">&#40;</span>DataType<span class="sy0">.</span><span class="me1">DateTime</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>DisplayName<span class="br0">&#40;</span><span class="st0">&quot;Modified on&quot;</span><span class="br0">&#41;</span><span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> DateTime<span class="sy0">?</span> ModifiedOn <span class="br0">&#123;</span> <span class="kw1">get</span><span class="sy0">;</span> <span class="kw1">set</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">virtual</span> ICollection<span class="sy0">&lt;</span>ClientOrder<span class="sy0">&gt;</span> ClientOrders <span class="br0">&#123;</span> <span class="kw1">get</span><span class="sy0">;</span> <span class="kw1">set</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">virtual</span> ICollection<span class="sy0">&lt;</span>Reorder<span class="sy0">&gt;</span> Reorders <span class="br0">&#123;</span> <span class="kw1">get</span><span class="sy0">;</span> <span class="kw1">set</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">using System;

using System.ComponentModel.DataAnnotations;
using System.ComponentModel;

using DataAnnotationsExtensions;
using System.ComponentModel.DataAnnotations.Schema;
using System.Collections.Generic;

namespace CardNumbers.Objects
{
    [ComplexType]
    public class PhoneInfo
    {
        [DataType(DataType.PhoneNumber)]
        
        [DisplayName("Phone")]
        [RegularExpression(@"^(((d{3})|d{3})s?)?d{3}[-s]?d{4}s*$", ErrorMessage = "Please enter valid Phone Number")]
        public virtual string Phone { get; set; }

        [StringLength(5)]
        [DisplayName("Ext")]
        public virtual string Ext { get; set; }

        public bool HasValue
        {
            get
            {
                return (Phone != null || Ext != null);
            }
        }

    }

      [ComplexType]
      public class ContactDetail
      {
          //Constructor
          public ContactDetail()
          {
              phoneInfo = new PhoneInfo();
          }

          [StringLength(100)]
          [DisplayName("Contact Name")]
          [DisplayFormat(NullDisplayText = "")]
          public virtual string Contact { get; set; }

          [Email]
          [StringLength(100)]
          [DataType(DataType.EmailAddress)]
          [DisplayName("Email")]
          public virtual string Email { get; set; }

          public virtual PhoneInfo phoneInfo { get; set; }
          public bool HasValue
          {
              get
              {
                  return (Contact != null || Email != null || phoneInfo.HasValue);
              }
          }
      }

/// &lt;summary&gt;
/// Client class (Client No, Client Name, Address, Contact1, Contact2 info, Created By, Modified By (operator and date)
/// &lt;/summary&gt;
    public class Client
    {
        public Client()
        {
            Contact1 = new ContactDetail();
            Contact2 = new ContactDetail();
     }

        [Key]
        [Editable(false)]
        [Column("ClientId",TypeName = "int")]
        public virtual int Id { get; set; }
        
        //[Required]
        [DisplayName("Client No")]      
        [Column("client_no", TypeName = "smallint")]
        public virtual Int16 Number { get; set; }
        
        //[Required]
        [Column("client_name", TypeName = "varchar")]
        [DisplayName("Client Name")]
        [MaxLength(30, ErrorMessage = "Client Name should not be longer than 30 characters" )]
        [MinLength(3, ErrorMessage = "Client Name is too short")]

        public virtual string Name { get; set; }

        [DataType(DataType.MultilineText)]
        public virtual string Address { get; set; }

        public virtual ContactDetail Contact1 {get; set;}
        public virtual ContactDetail Contact2 {get; set;}

        [ForeignKey("EnteredByOperator")]
        public string EnteredBy { get; set; }

        [InverseProperty("ClientsEnteredBy")]
        public virtual Operator EnteredByOperator { get; set; }

        [ForeignKey("ModifiedByOperator")]
        public string ModifiedBy { get; set; }

        [InverseProperty("ClientsUpdatedBy")]
        public virtual Operator ModifiedByOperator { get; set; }

        [DataType(DataType.DateTime)]
        [DisplayName("Created on")]
        public DateTime EnteredOn { get; set; }

        [DataType(DataType.DateTime)]
        [DisplayName("Modified on")]
        public DateTime? ModifiedOn { get; set; }

        public virtual ICollection&lt;ClientOrder&gt; ClientOrders { get; set; }
        
        public virtual ICollection&lt;Reorder&gt; Reorders { get; set; }
    }
}</pre></div></div>

<p>The interesting thing in this model is 2 Complex Types. Originally this model didn&#8217;t have Complex Types, but I found later that I need them in order to create one Editor for each Contact information (as we see, the table is not properly normalized and contains 2 contacts columns). </p>
<p>I created all my models in one project called CardNumbers.Objects. I later was criticized for such project name, but I used the same naming convention that was used by our 3 days course teacher and therefore left it as is. In my next project I am going to be more thoughtful in regards to project names.</p>
<p>I also created another project called CardNumbers.Data where I placed repository objects. I also originally built them the same way we were taught by the instructor, but as I found later it was not the best way, so I re-designed based on some blog posts and StackOverflow questions this way:</p>
<p>IClientRepository.cs:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="csharp"><thead><tr><td colspan="2"  class="head">C#</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td><td class="de1"><pre class="de1"><span class="kw1">using</span> <span class="co3">CardNumbers.Objects</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">System</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">System.Collections.Generic</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">System.Linq</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">namespace</span> CardNumbers<span class="sy0">.</span><span class="me1">Data</span>
<span class="br0">&#123;</span>
&nbsp; &nbsp; <span class="kw1">public</span> <span class="kw4">interface</span> IClientRepository<span class="sy0">:</span>IDisposable
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; IQueryable<span class="sy0">&lt;</span>Client<span class="sy0">&gt;</span> Clients <span class="br0">&#123;</span> <span class="kw1">get</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; Client GetClientById<span class="br0">&#40;</span><span class="kw4">int</span> clientId<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">void</span> Commit<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">void</span> AddClient<span class="br0">&#40;</span>Client client, <span class="kw4">bool</span> autoCommit <span class="sy0">=</span> <span class="kw1">true</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">void</span> DeleteClient<span class="br0">&#40;</span>Client client, <span class="kw4">bool</span> autoCommit <span class="sy0">=</span> <span class="kw1">true</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">void</span> DeleteClient<span class="br0">&#40;</span><span class="kw4">int</span> clientId<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">void</span> UpdateClient<span class="br0">&#40;</span>Client client, <span class="kw4">bool</span> autoCommit <span class="sy0">=</span> <span class="kw1">true</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">using CardNumbers.Objects;
using System;
using System.Collections.Generic;
using System.Linq;
 
namespace CardNumbers.Data
{
    public interface IClientRepository:IDisposable
    {
        IQueryable&lt;Client&gt; Clients { get; }
        Client GetClientById(int clientId);
        void Commit();

        void AddClient(Client client, bool autoCommit = true);

        void DeleteClient(Client client, bool autoCommit = true);
        
        void DeleteClient(int clientId);

        void UpdateClient(Client client, bool autoCommit = true);
    }
}</pre></div></div>

<p>and the actual implementation of the above interface:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="csharp"><thead><tr><td colspan="2"  class="head">C#</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
</pre></td><td class="de1"><pre class="de1"><span class="kw1">using</span> <span class="co3">System</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">System.Collections.Generic</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">System.Data</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">System.Data.Entity</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">System.Linq</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">CardNumbers.Objects</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">namespace</span> CardNumbers<span class="sy0">.</span><span class="me1">Data</span>
<span class="br0">&#123;</span>
&nbsp; &nbsp; <span class="kw1">public</span> <span class="kw4">class</span> ClientRepository <span class="sy0">:</span> IClientRepository, IDisposable 
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">private</span> CardNumbersContext context<span class="sy0">;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> ClientRepository<span class="br0">&#40;</span>CardNumbersContext context<span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span><span class="sy0">.</span><span class="me1">context</span> <span class="sy0">=</span> context<span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span> &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; IQueryable<span class="sy0">&lt;</span>Client<span class="sy0">&gt;</span> IClientRepository<span class="sy0">.</span><span class="me1">Clients</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">get</span> <span class="br0">&#123;</span> <span class="kw1">return</span> <span class="kw1">this</span><span class="sy0">.</span><span class="me1">context</span><span class="sy0">.</span><span class="me1">Clients</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw4">void</span> Commit<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span><span class="sy0">.</span><span class="me1">context</span><span class="sy0">.</span><span class="me1">SaveChanges</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw4">void</span> AddClient<span class="br0">&#40;</span>Client client, <span class="kw4">bool</span> autoCommit <span class="sy0">=</span> <span class="kw1">true</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; client<span class="sy0">.</span><span class="me1">EnteredOn</span> <span class="sy0">=</span> DateTime<span class="sy0">.</span><span class="me1">Now</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span><span class="sy0">.</span><span class="me1">context</span><span class="sy0">.</span><span class="me1">Clients</span><span class="sy0">.</span><span class="kw1">Add</span><span class="br0">&#40;</span>client<span class="br0">&#41;</span> &nbsp; <span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>autoCommit<span class="br0">&#41;</span> <span class="kw1">this</span><span class="sy0">.</span><span class="me1">Commit</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw4">void</span> DeleteClient<span class="br0">&#40;</span>Client client, <span class="kw4">bool</span> autoCommit <span class="sy0">=</span> <span class="kw1">true</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span><span class="sy0">.</span><span class="me1">context</span><span class="sy0">.</span><span class="me1">Clients</span><span class="sy0">.</span><span class="kw1">Remove</span><span class="br0">&#40;</span>client<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>autoCommit<span class="br0">&#41;</span> <span class="kw1">this</span><span class="sy0">.</span><span class="me1">Commit</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw4">void</span> DeleteClient<span class="br0">&#40;</span><span class="kw4">int</span> id<span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span><span class="sy0">.</span><span class="me1">context</span><span class="sy0">.</span><span class="me1">Clients</span><span class="sy0">.</span><span class="kw1">Remove</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="sy0">.</span><span class="me1">GetClientById</span><span class="br0">&#40;</span>id<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span><span class="sy0">.</span><span class="me1">Commit</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> Client GetClientById<span class="br0">&#40;</span><span class="kw4">int</span> id<span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw1">this</span><span class="sy0">.</span><span class="me1">context</span><span class="sy0">.</span><span class="me1">Clients</span><span class="sy0">.</span><span class="me1">Find</span><span class="br0">&#40;</span>id<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw4">void</span> UpdateClient<span class="br0">&#40;</span>Client client, <span class="kw4">bool</span> autoCommit <span class="sy0">=</span> <span class="kw1">true</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; client<span class="sy0">.</span><span class="me1">ModifiedOn</span> <span class="sy0">=</span> DateTime<span class="sy0">.</span><span class="me1">Now</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span><span class="sy0">.</span><span class="me1">context</span><span class="sy0">.</span><span class="me1">Entry</span><span class="br0">&#40;</span>client<span class="br0">&#41;</span><span class="sy0">.</span><span class="me1">State</span> <span class="sy0">=</span> EntityState<span class="sy0">.</span><span class="me1">Modified</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>autoCommit<span class="br0">&#41;</span> <span class="kw1">this</span><span class="sy0">.</span><span class="me1">Commit</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">private</span> <span class="kw4">bool</span> disposed <span class="sy0">=</span> <span class="kw1">false</span><span class="sy0">;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">protected</span> <span class="kw1">virtual</span> <span class="kw4">void</span> Dispose<span class="br0">&#40;</span><span class="kw4">bool</span> disposing<span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span><span class="kw1">this</span><span class="sy0">.</span><span class="me1">disposed</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>disposing<span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; context<span class="sy0">.</span><span class="me1">Dispose</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">this</span><span class="sy0">.</span><span class="me1">disposed</span> <span class="sy0">=</span> <span class="kw1">true</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> <span class="kw4">void</span> Dispose<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Dispose<span class="br0">&#40;</span><span class="kw1">true</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; GC<span class="sy0">.</span><span class="me1">SuppressFinalize</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">using System;
using System.Collections.Generic;
using System.Data;
using System.Data.Entity;
using System.Linq;
using CardNumbers.Objects;

namespace CardNumbers.Data
{
    public class ClientRepository : IClientRepository, IDisposable 
    {
        private CardNumbersContext context;

        public ClientRepository(CardNumbersContext context)
        {
            this.context = context;
        }        

        IQueryable&lt;Client&gt; IClientRepository.Clients
        {
            get { return this.context.Clients; }
        }
       
        public void Commit()
        {
            this.context.SaveChanges();
        }

        public void AddClient(Client client, bool autoCommit = true)
        {
            client.EnteredOn = DateTime.Now;
            this.context.Clients.Add(client)   ;
            if (autoCommit) this.Commit();
        }

        public void DeleteClient(Client client, bool autoCommit = true)
        {
            this.context.Clients.Remove(client);
            if (autoCommit) this.Commit();
        }

        public void DeleteClient(int id)
        {
            this.context.Clients.Remove(this.GetClientById(id));
            this.Commit();
        }

        public Client GetClientById(int id)
        {
            return this.context.Clients.Find(id);
        }

        public void UpdateClient(Client client, bool autoCommit = true)
        {
            client.ModifiedOn = DateTime.Now;
            this.context.Entry(client).State = EntityState.Modified;
            if (autoCommit) this.Commit();
        }

        private bool disposed = false;

        protected virtual void Dispose(bool disposing)
        {
            if (!this.disposed)
            {
                if (disposing)
                {
                    context.Dispose();
                }
            }
            this.disposed = true;
        }

        public void Dispose()
        {
            Dispose(true);
            GC.SuppressFinalize(this);
        }
        
    }
}</pre></div></div>

<p>and I show CardNumbersContext.cs for completion:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="csharp"><thead><tr><td colspan="2"  class="head">C#</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="de1"><pre class="de1"><span class="kw1">using</span> <span class="co3">System</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">System.Collections.Generic</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">System.Data.Entity</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">CardNumbers.Objects</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">System.Data.Entity.ModelConfiguration.Conventions</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">CardNumbers.Objects.Mapping</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">namespace</span> CardNumbers<span class="sy0">.</span><span class="me1">Data</span>
<span class="br0">&#123;</span>
&nbsp; &nbsp; <span class="kw1">public</span> <span class="kw4">class</span> CardNumbersContext <span class="sy0">:</span> DbContext
&nbsp;
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> DbSet<span class="sy0">&lt;</span>Client<span class="sy0">&gt;</span> Clients <span class="br0">&#123;</span> <span class="kw1">get</span><span class="sy0">;</span> <span class="kw1">set</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> DbSet<span class="sy0">&lt;</span><span class="kw1">Operator</span><span class="sy0">&gt;</span> Operators <span class="br0">&#123;</span> <span class="kw1">get</span><span class="sy0">;</span> <span class="kw1">set</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> DbSet<span class="sy0">&lt;</span>Reorder<span class="sy0">&gt;</span> Reorders <span class="br0">&#123;</span> <span class="kw1">get</span><span class="sy0">;</span> <span class="kw1">set</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> DbSet<span class="sy0">&lt;</span>ClientOrder<span class="sy0">&gt;</span> ClientOrders <span class="br0">&#123;</span> <span class="kw1">get</span><span class="sy0">;</span> <span class="kw1">set</span><span class="sy0">;</span> <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">protected</span> <span class="kw1">override</span> <span class="kw4">void</span> OnModelCreating<span class="br0">&#40;</span>DbModelBuilder modelBuilder<span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">// base.OnModelCreating(modelBuilder);</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; modelBuilder<span class="sy0">.</span><span class="me1">Configurations</span><span class="sy0">.</span><span class="kw1">Add</span><span class="br0">&#40;</span><span class="kw3">new</span> ClientMap<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; modelBuilder<span class="sy0">.</span><span class="me1">Configurations</span><span class="sy0">.</span><span class="kw1">Add</span><span class="br0">&#40;</span><span class="kw3">new</span> OperatorMap<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; modelBuilder<span class="sy0">.</span><span class="me1">Configurations</span><span class="sy0">.</span><span class="kw1">Add</span><span class="br0">&#40;</span><span class="kw3">new</span> ClientOrdersMap<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; modelBuilder<span class="sy0">.</span><span class="me1">Configurations</span><span class="sy0">.</span><span class="kw1">Add</span><span class="br0">&#40;</span><span class="kw3">new</span> ReorderMap<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">using System;
using System.Collections.Generic;
using System.Data.Entity;
using CardNumbers.Objects;
using System.Data.Entity.ModelConfiguration.Conventions;
using CardNumbers.Objects.Mapping;

namespace CardNumbers.Data
{
    public class CardNumbersContext : DbContext

    {
        public DbSet&lt;Client&gt; Clients { get; set; }
        public DbSet&lt;Operator&gt; Operators { get; set; }
        public DbSet&lt;Reorder&gt; Reorders { get; set; }
        public DbSet&lt;ClientOrder&gt; ClientOrders { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
           // base.OnModelCreating(modelBuilder);
            modelBuilder.Configurations.Add(new ClientMap());
            modelBuilder.Configurations.Add(new OperatorMap());
            modelBuilder.Configurations.Add(new ClientOrdersMap());            
            modelBuilder.Configurations.Add(new ReorderMap());
        }
    }
}</pre></div></div>

<p>So, the above two projects describe my models and means to work with them.</p>
<p>Now I am going to describe the CardNumbers.Web project. </p>
<p>I started from designing the view for working with the Clients. Here I didn&#8217;t want to go with the standard shown in all tutorials ways of displaying all clients information in a one page grid with inline Edit/Delete buttons. I didn&#8217;t like this interface much. So, I started my research as what existing grids I may try to implement. I looked up a few different grid implementations and at some point someone suggested me to look into <a href="http://flexigrid.info/">flexigrid</a> CodePlex project. I really liked its look and decided to go with it. Also, I believe that same person suggested me <a href="http://mvc4beginner.com/Sample-Code/Insert-Update-Delete/Asp-.Net-MVC-Ajax-Insert-Update-Delete-Using-Flexigrid.html">his site</a> which was enough to get me started. I got the Clients view working relatively quickly based on that information.</p>
<p>However, I didn&#8217;t want to start from displaying all Clients. I wanted to simulate my current VFP application where I started from the empty grid, typed some letters in the client name search textbox and based on that show only small subset of rows initially.</p>
<p>This took me a while to figure out. I was almost ready to give up, but finally found addFormData method (which was there all the time) and figured out how to use it for my purpose. It may seem silly to most of the experienced jquery developers, but for me it was my first mini-success.</p>
<p>So, I will show you how my Client View now looks and the relevant portions of Clients.js script file and the ClientController.cs file:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="html4strict"><thead><tr><td colspan="2"  class="head">HTML</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="de1"><pre class="de1">@model CardNumbers.Models.ClientViewModel
&nbsp;
@section scripts {
&nbsp; &nbsp; <span class="sc2">&lt;<span class="kw2">script</span> <span class="kw3">src</span><span class="sy0">=</span><span class="st0">&quot;@Url.Content(&quot;</span>~<span class="sy0">/</span>Scripts<span class="sy0">/</span>Clients.js<span class="st0">&quot;)&quot;</span> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;text/javascript&quot;</span> &gt;&lt;<span class="sy0">/</span><span class="kw2">script</span>&gt;</span>
}
&nbsp;
<span class="sc2">&lt;<span class="kw2">form</span> <span class="kw3">id</span><span class="sy0">=</span><span class="st0">&quot;frmClientsSearch&quot;</span>&gt;</span>
&nbsp; &nbsp; <span class="sc2">&lt;<span class="kw2">label</span> <span class="kw3">for</span><span class="sy0">=</span><span class="st0">&quot;clientNo&quot;</span>&gt;</span>Client No: <span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">label</span>&gt;</span>
&nbsp; &nbsp; <span class="sc2">&lt;<span class="kw2">input</span> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;number&quot;</span> <span class="kw3">name</span><span class="sy0">=</span><span class="st0">&quot;searchClientNo&quot;</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;numericOnly&quot;</span> <span class="sy0">/</span>&gt;&lt;<span class="kw2">br</span> <span class="sy0">/</span>&gt;</span>
&nbsp; &nbsp; <span class="sc2">&lt;<span class="kw2">label</span> <span class="kw3">for</span><span class="sy0">=</span><span class="st0">&quot;clientName&quot;</span>&gt;</span>Client Name: <span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">label</span>&gt;</span>
&nbsp; &nbsp; <span class="sc2">&lt;<span class="kw2">input</span> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;search&quot;</span> <span class="kw3">size</span><span class="sy0">=</span><span class="st0">&quot;25&quot;</span> <span class="kw3">value</span><span class="sy0">=</span><span class="st0">&quot;Please enter the search value&quot;</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;SelectOnEntry&quot;</span></span>
<span class="sc2"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="kw3">name</span><span class="sy0">=</span><span class="st0">&quot;searchClientName&quot;</span> <span class="sy0">/</span>&gt;</span>
&nbsp;
&nbsp; &nbsp; <span class="sc2">&lt;<span class="kw2">input</span> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;button&quot;</span> <span class="kw3">id</span><span class="sy0">=</span><span class="st0">&quot;btnClientsSearch&quot;</span> <span class="kw3">value</span><span class="sy0">=</span><span class="st0">&quot;Find / Refresh&quot;</span> <span class="sy0">/</span>&gt;</span>
<span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">form</span>&gt;</span>
<span class="sc2">&lt;<span class="kw2">div</span> <span class="kw3">style</span><span class="sy0">=</span><span class="st0">&quot;padding-left: 150px; padding-top: 50px; padding-bottom: 50px;&quot;</span> <span class="kw3">id</span><span class="sy0">=</span><span class="st0">&quot;ClientsResults&quot;</span>&gt;</span>
&nbsp; &nbsp; <span class="sc2">&lt;<span class="kw2">table</span> <span class="kw3">id</span><span class="sy0">=</span><span class="st0">&quot;flexClients&quot;</span> <span class="kw3">style</span><span class="sy0">=</span><span class="st0">&quot;display: none&quot;</span>&gt;</span>
&nbsp; &nbsp; <span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">table</span>&gt;</span>
<span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">div</span>&gt;</span>
&nbsp;
&nbsp;<span class="sc2">&lt;<span class="kw2">div</span> <span class="kw3">id</span><span class="sy0">=</span><span class="st0">&quot;add-edit-dialog&quot;</span> <span class="kw3">style</span><span class="sy0">=</span><span class="st0">&quot;display: none&quot;</span> <span class="kw3">title</span><span class="sy0">=</span><span class="st0">&quot;Add / Edit Client&quot;</span>&gt;</span> 
&nbsp; &nbsp; @Html.Partial(&quot;_ClientForm&quot;, Model)
<span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">div</span>&gt;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">@model CardNumbers.Models.ClientViewModel

@section scripts {
    &lt;script src="@Url.Content("~/Scripts/Clients.js")" type="text/javascript" &gt;&lt;/script&gt;
}

&lt;form id="frmClientsSearch"&gt;
    &lt;label for="clientNo"&gt;Client No: &lt;/label&gt;
    &lt;input type="number" name="searchClientNo" class="numericOnly" /&gt;&lt;br /&gt;
    &lt;label for="clientName"&gt;Client Name: &lt;/label&gt;
    &lt;input type="search" size="25" value="Please enter the search value" class="SelectOnEntry"
        name="searchClientName" /&gt;

    &lt;input type="button" id="btnClientsSearch" value="Find / Refresh" /&gt;
&lt;/form&gt;
&lt;div style="padding-left: 150px; padding-top: 50px; padding-bottom: 50px;" id="ClientsResults"&gt;
    &lt;table id="flexClients" style="display: none"&gt;
    &lt;/table&gt;
&lt;/div&gt;

 &lt;div id="add-edit-dialog" style="display: none" title="Add / Edit Client"&gt; 
    @Html.Partial("_ClientForm", Model)
&lt;/div&gt;</pre></div></div>

<p>As you can see, this main view has just few controls and lines of code. At the top I display two search controls and at the bottom the flexigrid placeholder and the dialog (invisible initially) for my modal Add/Edit dialogs.</p>
<p>Now I want to show the Clients.js part that is responsible for the flexigrid and passing Search form data to the controller through form&#8217;s collection:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="javascript"><thead><tr><td colspan="2"  class="head">Javascript</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
</pre></td><td class="de1"><pre class="de1">$<span class="br0">&#40;</span><span class="st0">&quot;#flexClients&quot;</span><span class="br0">&#41;</span>.<span class="me1">flexigrid</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
&nbsp; &nbsp; url<span class="sy0">:</span> <span class="st0">'/Client/Client/'</span><span class="sy0">,</span>
&nbsp; &nbsp; dataType<span class="sy0">:</span> <span class="st0">'json'</span><span class="sy0">,</span>
&nbsp; &nbsp; colModel<span class="sy0">:</span> <span class="br0">&#91;</span>
&nbsp; &nbsp; <span class="br0">&#123;</span> display<span class="sy0">:</span> <span class="st0">'Client Id'</span><span class="sy0">,</span> name<span class="sy0">:</span> <span class="st0">'Id'</span><span class="sy0">,</span> width<span class="sy0">:</span> <span class="nu0">100</span><span class="sy0">,</span> sortable<span class="sy0">:</span> <span class="kw2">true</span><span class="sy0">,</span> align<span class="sy0">:</span> <span class="st0">'center'</span><span class="sy0">,</span> hide<span class="sy0">:</span> <span class="kw2">true</span> <span class="br0">&#125;</span><span class="sy0">,</span>
&nbsp; &nbsp; <span class="br0">&#123;</span> display<span class="sy0">:</span> <span class="st0">'Client #'</span><span class="sy0">,</span> name<span class="sy0">:</span> <span class="st0">'Number'</span><span class="sy0">,</span> width<span class="sy0">:</span> <span class="nu0">100</span><span class="sy0">,</span> sortable<span class="sy0">:</span> <span class="kw2">true</span><span class="sy0">,</span> align<span class="sy0">:</span> <span class="st0">'center'</span> <span class="br0">&#125;</span><span class="sy0">,</span>
&nbsp; &nbsp; <span class="br0">&#123;</span> display<span class="sy0">:</span> <span class="st0">'Name'</span><span class="sy0">,</span> name<span class="sy0">:</span> <span class="st0">'Name'</span><span class="sy0">,</span> width<span class="sy0">:</span> <span class="nu0">350</span><span class="sy0">,</span> sortable<span class="sy0">:</span> <span class="kw2">true</span><span class="sy0">,</span> align<span class="sy0">:</span> <span class="st0">'center'</span> <span class="br0">&#125;</span><span class="sy0">,</span>
&nbsp; &nbsp; <span class="br0">&#123;</span> display<span class="sy0">:</span> <span class="st0">'Contact 1'</span><span class="sy0">,</span> name<span class="sy0">:</span> <span class="st0">'Contact1'</span><span class="sy0">,</span> width<span class="sy0">:</span> <span class="nu0">350</span><span class="sy0">,</span> sortable<span class="sy0">:</span> <span class="kw2">true</span><span class="sy0">,</span> align<span class="sy0">:</span> <span class="st0">'center'</span> <span class="br0">&#125;</span><span class="sy0">,</span>
&nbsp; &nbsp; <span class="br0">&#93;</span><span class="sy0">,</span>
&nbsp; &nbsp; buttons<span class="sy0">:</span> <span class="br0">&#91;</span>
&nbsp; &nbsp; <span class="br0">&#123;</span> name<span class="sy0">:</span> <span class="st0">'Add'</span><span class="sy0">,</span> bclass<span class="sy0">:</span> <span class="st0">'add'</span><span class="sy0">,</span> onpress<span class="sy0">:</span> add <span class="br0">&#125;</span><span class="sy0">,</span>
&nbsp; &nbsp; <span class="br0">&#123;</span> name<span class="sy0">:</span> <span class="st0">'Edit'</span><span class="sy0">,</span> bclass<span class="sy0">:</span> <span class="st0">'edit'</span><span class="sy0">,</span> onpress<span class="sy0">:</span> edit <span class="br0">&#125;</span><span class="sy0">,</span>
&nbsp; &nbsp; <span class="br0">&#123;</span> name<span class="sy0">:</span> <span class="st0">'Delete'</span><span class="sy0">,</span> bclass<span class="sy0">:</span> <span class="st0">'delete'</span><span class="sy0">,</span> onpress<span class="sy0">:</span> del <span class="br0">&#125;</span><span class="sy0">,</span>
&nbsp; &nbsp; <span class="br0">&#123;</span> separator<span class="sy0">:</span> <span class="kw2">true</span> <span class="br0">&#125;</span>
&nbsp; &nbsp; <span class="br0">&#93;</span><span class="sy0">,</span>
&nbsp; &nbsp; searchitems<span class="sy0">:</span> <span class="br0">&#91;</span>
&nbsp; &nbsp; <span class="br0">&#123;</span> display<span class="sy0">:</span> <span class="st0">'Client Name'</span><span class="sy0">,</span> name<span class="sy0">:</span> <span class="st0">'Name'</span> <span class="br0">&#125;</span>
&nbsp; &nbsp; <span class="br0">&#93;</span><span class="sy0">,</span>
&nbsp; &nbsp; sortname<span class="sy0">:</span> <span class="st0">&quot;Name&quot;</span><span class="sy0">,</span>
&nbsp; &nbsp; sortorder<span class="sy0">:</span> <span class="st0">&quot;asc&quot;</span><span class="sy0">,</span>
&nbsp; &nbsp; usepager<span class="sy0">:</span> <span class="kw2">true</span><span class="sy0">,</span>
&nbsp; &nbsp; title<span class="sy0">:</span> <span class="st0">'Clients'</span><span class="sy0">,</span>
&nbsp; &nbsp; useRp<span class="sy0">:</span> <span class="kw2">true</span><span class="sy0">,</span>
&nbsp; &nbsp; rp<span class="sy0">:</span> <span class="nu0">15</span><span class="sy0">,</span>
&nbsp; &nbsp; rpOptions<span class="sy0">:</span> <span class="br0">&#91;</span><span class="nu0">5</span><span class="sy0">,</span> <span class="nu0">10</span><span class="sy0">,</span> <span class="nu0">15</span><span class="sy0">,</span> <span class="nu0">20</span><span class="sy0">,</span> <span class="nu0">25</span><span class="sy0">,</span> <span class="nu0">40</span><span class="br0">&#93;</span><span class="sy0">,</span>
&nbsp; &nbsp; showTableToggleBtn<span class="sy0">:</span> <span class="kw2">true</span><span class="sy0">,</span>
&nbsp; &nbsp; width<span class="sy0">:</span> <span class="nu0">900</span><span class="sy0">,</span>
&nbsp; &nbsp; onSuccess<span class="sy0">:</span> bindDblClick<span class="sy0">,</span>
&nbsp; &nbsp; onSubmit<span class="sy0">:</span> addFormData<span class="sy0">,</span>
&nbsp; &nbsp; hideOnSubmit<span class="sy0">:</span> <span class="kw2">false</span><span class="sy0">,</span>
&nbsp; &nbsp; height<span class="sy0">:</span> <span class="st0">'auto'</span><span class="sy0">,</span>
&nbsp; &nbsp; singleSelect<span class="sy0">:</span> <span class="kw2">true</span>
<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//$('.flexigrid').on('dblclick', 'tr[id*=&quot;row&quot;]', function () {</span>
<span class="co1">// &nbsp; &nbsp;// console.log('mouseenter rowId: ' + $(this).attr('id').substr(3));</span>
<span class="co1">// &nbsp; &nbsp;alert($(this).attr('id').substr(3));</span>
<span class="co1">// &nbsp; &nbsp;//Edit();</span>
<span class="co1">//});</span>
&nbsp;
<span class="kw1">function</span> bindDblClick<span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
&nbsp; &nbsp; $<span class="br0">&#40;</span><span class="st0">'#flexClients tr'</span><span class="br0">&#41;</span>.<span class="me1">dblclick</span><span class="br0">&#40;</span><span class="kw1">function</span> <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp;edit<span class="br0">&#40;</span><span class="st0">'Edit'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">//This function adds parameters to the post of flexigrid. You can add a verification as well by return to false if you don't want flexigrid to submit &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; </span>
<span class="kw1">function</span> addFormData<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
&nbsp;
&nbsp; &nbsp; <span class="co1">//passing a form object to serializeArray will get the valid data from all the objects, but, if the you pass a non-form object, you have to specify the input elements that the data will come from</span>
&nbsp; &nbsp; <span class="kw1">var</span> dt <span class="sy0">=</span> $<span class="br0">&#40;</span><span class="st0">&quot;#add-edit-form&quot;</span><span class="br0">&#41;</span>.<span class="me1">serializeArray</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; dt <span class="sy0">=</span> dt.<span class="me1">concat</span><span class="br0">&#40;</span>$<span class="br0">&#40;</span><span class="st0">'#frmClientsSearch'</span><span class="br0">&#41;</span>.<span class="me1">serializeArray</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; 
&nbsp; &nbsp; $<span class="br0">&#40;</span><span class="st0">&quot;#flexClients&quot;</span><span class="br0">&#41;</span>.<span class="me1">flexOptions</span><span class="br0">&#40;</span><span class="br0">&#123;</span> params<span class="sy0">:</span> dt <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; <span class="kw1">return</span> <span class="kw2">true</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">$("#flexClients").flexigrid({
    url: '/Client/Client/',
    dataType: 'json',
    colModel: [
    { display: 'Client Id', name: 'Id', width: 100, sortable: true, align: 'center', hide: true },
    { display: 'Client #', name: 'Number', width: 100, sortable: true, align: 'center' },
    { display: 'Name', name: 'Name', width: 350, sortable: true, align: 'center' },
    { display: 'Contact 1', name: 'Contact1', width: 350, sortable: true, align: 'center' },
    ],
    buttons: [
    { name: 'Add', bclass: 'add', onpress: add },
    { name: 'Edit', bclass: 'edit', onpress: edit },
    { name: 'Delete', bclass: 'delete', onpress: del },
    { separator: true }
    ],
    searchitems: [
    { display: 'Client Name', name: 'Name' }
    ],
    sortname: "Name",
    sortorder: "asc",
    usepager: true,
    title: 'Clients',
    useRp: true,
    rp: 15,
    rpOptions: [5, 10, 15, 20, 25, 40],
    showTableToggleBtn: true,
    width: 900,
    onSuccess: bindDblClick,
    onSubmit: addFormData,
    hideOnSubmit: false,
    height: 'auto',
    singleSelect: true
});

//$('.flexigrid').on('dblclick', 'tr[id*="row"]', function () {
//    // console.log('mouseenter rowId: ' + $(this).attr('id').substr(3));
//    alert($(this).attr('id').substr(3));
//    //Edit();
//});

function bindDblClick()
{
    $('#flexClients tr').dblclick(function () {          
       edit('Edit');
    });
}

//This function adds parameters to the post of flexigrid. You can add a verification as well by return to false if you don't want flexigrid to submit			
function addFormData() {

    //passing a form object to serializeArray will get the valid data from all the objects, but, if the you pass a non-form object, you have to specify the input elements that the data will come from
    var dt = $("#add-edit-form").serializeArray();
    dt = dt.concat($('#frmClientsSearch').serializeArray());
  
    $("#flexClients").flexOptions({ params: dt });
    return true;
}</pre></div></div>

<p>So, the first part defines flexigrid (you can see that it used Client controller Client method to return its data). Then the next piece of code binds grid&#8217;s double click with the same method that is called by the Edit button (in other words, I want to either click on the Edit button or double click on the selected row in a grid to get the same behavior) and the last piece of code (addFormData) is used to pass both Search form and add-edit-form data back to my controller. </p>
<p>And this is how Client method of the controller looks like (I separated this method into 2 based on the idea I took from looking at the <a href="http://www.s4sme.com/Blog/Post/aspnet-mvc-4-application-with-flexigrid-jquery-ui-and-jquery-validation">following solution</a>)</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="csharp"><thead><tr><td colspan="2"  class="head">C#</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
</pre></td><td class="de1"><pre class="de1">&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#91;</span>HttpPost<span class="br0">&#93;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">public</span> ActionResult Client<span class="br0">&#40;</span>FormCollection formValues<span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// Assume we want to select everything</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">var</span> clients <span class="sy0">=</span> Db<span class="sy0">.</span><span class="me1">Clients</span><span class="sy0">;</span> <span class="co1">// Should set type of clients to IQueryable&lt;Clients&gt;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">int</span> searchClientNo <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">int</span><span class="sy0">.</span><span class="me1">TryParse</span><span class="br0">&#40;</span>formValues<span class="br0">&#91;</span><span class="st0">&quot;searchClientNo&quot;</span><span class="br0">&#93;</span>, <span class="kw1">out</span> searchClientNo <span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">string</span> searchClientName <span class="sy0">=</span> <span class="br0">&#40;</span>formValues<span class="br0">&#91;</span><span class="st0">&quot;searchClientName&quot;</span><span class="br0">&#93;</span><span class="sy0">??</span><span class="st0">&quot;&quot;</span><span class="br0">&#41;</span><span class="sy0">.</span><span class="me1">ToString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>searchClientNo <span class="sy0">==</span> <span class="nu0">0</span> <span class="sy0">&amp;&amp;</span> searchClientName <span class="sy0">==</span> <span class="st0">&quot;Please enter the search value&quot;</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; clients <span class="sy0">=</span> clients<span class="sy0">.</span><span class="kw1">Where</span><span class="br0">&#40;</span>c <span class="sy0">=&gt;</span> <span class="br0">&#40;</span>c<span class="sy0">.</span><span class="me1">Number</span> <span class="sy0">==</span> searchClientNo<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">else</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>searchClientNo <span class="sy0">!=</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="co1">//Number was supplied</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; clients <span class="sy0">=</span> clients<span class="sy0">.</span><span class="kw1">Where</span><span class="br0">&#40;</span>c <span class="sy0">=&gt;</span> <span class="br0">&#40;</span>c<span class="sy0">.</span><span class="me1">Number</span> <span class="sy0">==</span> searchClientNo<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// If clientNo was supplied, clients is now filtered by that. If not, it still has the full list. The following will further filter it.</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span><span class="kw4">String</span><span class="sy0">.</span><span class="me1">IsNullOrWhiteSpace</span><span class="br0">&#40;</span>searchClientName<span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="co1">// Part of the name was supplied</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; clients <span class="sy0">=</span> clients<span class="sy0">.</span><span class="kw1">Where</span><span class="br0">&#40;</span>c <span class="sy0">=&gt;</span> <span class="br0">&#40;</span>c<span class="sy0">.</span><span class="me1">Name</span><span class="sy0">.</span><span class="me1">Contains</span><span class="br0">&#40;</span>searchClientName<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">int</span> page <span class="sy0">=</span> <span class="kw4">int</span><span class="sy0">.</span><span class="me1">Parse</span><span class="br0">&#40;</span>formValues<span class="br0">&#91;</span><span class="st0">&quot;page&quot;</span><span class="br0">&#93;</span> <span class="sy0">??</span> <span class="st0">&quot;1&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">int</span> rp <span class="sy0">=</span> <span class="kw4">int</span><span class="sy0">.</span><span class="me1">Parse</span><span class="br0">&#40;</span><span class="br0">&#40;</span>formValues<span class="br0">&#91;</span><span class="st0">&quot;rp&quot;</span><span class="br0">&#93;</span><span class="sy0">??</span><span class="st0">&quot;15&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">string</span> qtype <span class="sy0">=</span> <span class="br0">&#40;</span>formValues<span class="br0">&#91;</span><span class="st0">&quot;qtype&quot;</span><span class="br0">&#93;</span><span class="sy0">??</span><span class="st0">&quot;&quot;</span><span class="br0">&#41;</span><span class="sy0">.</span><span class="me1">ToString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">string</span> query <span class="sy0">=</span> <span class="br0">&#40;</span>formValues<span class="br0">&#91;</span><span class="st0">&quot;query&quot;</span><span class="br0">&#93;</span> <span class="sy0">??</span> <span class="st0">&quot;&quot;</span><span class="br0">&#41;</span><span class="sy0">.</span><span class="me1">ToString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">string</span> sortname <span class="sy0">=</span> <span class="br0">&#40;</span>formValues<span class="br0">&#91;</span><span class="st0">&quot;sortname&quot;</span><span class="br0">&#93;</span> <span class="sy0">??</span> <span class="st0">&quot;Name&quot;</span><span class="br0">&#41;</span><span class="sy0">.</span><span class="me1">ToString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">string</span> sortorder <span class="sy0">=</span> <span class="br0">&#40;</span>formValues<span class="br0">&#91;</span><span class="st0">&quot;sortorder&quot;</span><span class="br0">&#93;</span> <span class="sy0">??</span> <span class="st0">&quot;asc&quot;</span><span class="br0">&#41;</span><span class="sy0">.</span><span class="me1">ToString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span><span class="kw4">string</span><span class="sy0">.</span><span class="me1">IsNullOrEmpty</span><span class="br0">&#40;</span>sortname<span class="br0">&#41;</span> <span class="sy0">&amp;&amp;</span> <span class="sy0">!</span><span class="kw4">string</span><span class="sy0">.</span><span class="me1">IsNullOrEmpty</span><span class="br0">&#40;</span>sortorder<span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; clients <span class="sy0">=</span> clients<span class="sy0">.</span><span class="me1">OrderBy</span><span class="br0">&#40;</span>sortname, <span class="br0">&#40;</span>sortorder <span class="sy0">==</span> <span class="st0">&quot;asc&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span><span class="kw4">string</span><span class="sy0">.</span><span class="me1">IsNullOrEmpty</span><span class="br0">&#40;</span>qtype<span class="br0">&#41;</span> <span class="sy0">&amp;&amp;</span> <span class="sy0">!</span><span class="kw4">string</span><span class="sy0">.</span><span class="me1">IsNullOrEmpty</span><span class="br0">&#40;</span>query<span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; clients <span class="sy0">=</span> clients<span class="sy0">.</span><span class="me1">Like</span><span class="br0">&#40;</span>qtype, query<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">int</span> Total <span class="sy0">=</span> clients<span class="sy0">.</span><span class="me1">Count</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; clients <span class="sy0">=</span> clients<span class="sy0">.</span><span class="me1">Skip</span><span class="br0">&#40;</span><span class="br0">&#40;</span>page <span class="sy0">-</span> <span class="nu0">1</span><span class="br0">&#41;</span> <span class="sy0">*</span> rp<span class="br0">&#41;</span><span class="sy0">.</span><span class="me1">Take</span><span class="br0">&#40;</span>rp<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> CreateFlexiJson<span class="br0">&#40;</span>clients, page, Total<span class="br0">&#41;</span><span class="sy0">;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">private</span> JsonResult CreateFlexiJson<span class="br0">&#40;</span>IEnumerable<span class="sy0">&lt;</span>Client<span class="sy0">&gt;</span> items, <span class="kw4">int</span> page, <span class="kw4">int</span> total<span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> Json<span class="br0">&#40;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">new</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; page,
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; total,
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; rows <span class="sy0">=</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; items
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="sy0">.</span><span class="kw1">Select</span><span class="br0">&#40;</span>x <span class="sy0">=&gt;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw3">new</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; id <span class="sy0">=</span> x<span class="sy0">.</span><span class="me1">Id</span>,
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// either use GetPropertyList(x) method to get all columns </span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; cell <span class="sy0">=</span> <span class="kw3">new</span> <span class="br0">&#123;</span> Id <span class="sy0">=</span> x<span class="sy0">.</span><span class="me1">Id</span>, Number <span class="sy0">=</span> x<span class="sy0">.</span><span class="me1">Number</span>, Name <span class="sy0">=</span> x<span class="sy0">.</span><span class="me1">Name</span>, Contact1 <span class="sy0">=</span> x<span class="sy0">.</span><span class="me1">Contact1</span><span class="sy0">.</span><span class="me1">Contact</span> <span class="sy0">??</span> <span class="kw4">String</span><span class="sy0">.</span><span class="me1">Empty</span> <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>, JsonRequestBehavior<span class="sy0">.</span><span class="me1">AllowGet</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">        [HttpPost]
        public ActionResult Client(FormCollection formValues)
        {
            // Assume we want to select everything
            var clients = Db.Clients; // Should set type of clients to IQueryable&lt;Clients&gt;
            int searchClientNo = 0;
            
            int.TryParse(formValues["searchClientNo"], out searchClientNo );
            string searchClientName = (formValues["searchClientName"]??"").ToString();

            if (searchClientNo == 0 &amp;&amp; searchClientName == "Please enter the search value")
                clients = clients.Where(c =&gt; (c.Number == searchClientNo));
            else
            {
                if (searchClientNo != 0) //Number was supplied
                    clients = clients.Where(c =&gt; (c.Number == searchClientNo));

                // If clientNo was supplied, clients is now filtered by that. If not, it still has the full list. The following will further filter it.
                if (!String.IsNullOrWhiteSpace(searchClientName)) // Part of the name was supplied
                    clients = clients.Where(c =&gt; (c.Name.Contains(searchClientName)));

            }
            int page = int.Parse(formValues["page"] ?? "1");

            int rp = int.Parse((formValues["rp"]??"15"));
            string qtype = (formValues["qtype"]??"").ToString();

            string query = (formValues["query"] ?? "").ToString();

            string sortname = (formValues["sortname"] ?? "Name").ToString();
            string sortorder = (formValues["sortorder"] ?? "asc").ToString();           

            if (!string.IsNullOrEmpty(sortname) &amp;&amp; !string.IsNullOrEmpty(sortorder))
            {
                clients = clients.OrderBy(sortname, (sortorder == "asc"));
            }

            if (!string.IsNullOrEmpty(qtype) &amp;&amp; !string.IsNullOrEmpty(query))
            {
                clients = clients.Like(qtype, query);
            }

            int Total = clients.Count();

            clients = clients.Skip((page - 1) * rp).Take(rp);
            return CreateFlexiJson(clients, page, Total);           

        }

        private JsonResult CreateFlexiJson(IEnumerable&lt;Client&gt; items, int page, int total)
        {
            return Json(
                    new
                    {
                        page,
                        total,
                        rows =
                            items
                            .Select(x =&gt;
                                new
                                {
                                    id = x.Id,
                                    // either use GetPropertyList(x) method to get all columns 
                                    cell = new { Id = x.Id, Number = x.Number, Name = x.Name, Contact1 = x.Contact1.Contact ?? String.Empty }
                                })
                    }, JsonRequestBehavior.AllowGet);
        }</pre></div></div>

<p>So far so good. Now I want to describe the modal dialogs implementation for Add and Edit buttons. This really took me a very long time to get working correctly and I was lucky to finally got this resolved with Jazzen Chen help.</p>
<p>First I want to show the partial view _ClientForm. There is nothing too interesting in that view besides using special EditorForm I implemented based on <a href="http://dotnetspeak.com/index.php/2012/10/asp-net-mvc-template-and-knockout-js/">this blog post</a> by Sergey Barskiy:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="html4strict"><thead><tr><td colspan="2"  class="head">HTML</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre></td><td class="de1"><pre class="de1">@using CardNumbers.Helper
@model CardNumbers.Models.ClientViewModel
&nbsp; <span class="sc2">&lt;<span class="kw2">form</span> <span class="kw3">id</span><span class="sy0">=</span><span class="st0">&quot;add-edit-form&quot;</span>&gt;</span>
&nbsp; &nbsp; <span class="sc2">&lt;<span class="kw2">fieldset</span>&gt;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="sc2">&lt;<span class="kw2">legend</span>&gt;</span>Client Info<span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">legend</span>&gt;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; @Html.ValidationSummary(true)
&nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="sc2">&lt;<span class="kw2">input</span> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;hidden&quot;</span> <span class="kw3">id</span><span class="sy0">=</span><span class="st0">&quot;fntype&quot;</span> <span class="kw3">name</span><span class="sy0">=</span><span class="st0">&quot;fntype&quot;</span>&gt;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; @Html.HiddenFor(m =&gt; m.ClientId)
&nbsp; &nbsp; &nbsp; &nbsp; @Html.EditorFor(m =&gt; m.ClientNumber, EditorTemplate.TextBox)
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; @Html.EditorFor(m =&gt; m.ClientName, EditorTemplate.TextBox)
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; @Html.EditorFor(m =&gt; m.Client.Address, EditorTemplate.EditBox)
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="sc2">&lt;<span class="kw2">div</span> <span class="kw3">id</span><span class="sy0">=</span><span class="st0">&quot;ContactsInfo&quot;</span>&gt;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="sc2">&lt;<span class="kw2">div</span> <span class="kw3">id</span><span class="sy0">=</span><span class="st0">&quot;Contact1&quot;</span>&gt;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; @Html.EditorFor(m =&gt; m.Client.Contact1)
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">div</span>&gt;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="sc2">&lt;<span class="kw2">div</span> <span class="kw3">id</span><span class="sy0">=</span><span class="st0">&quot;Contact2&quot;</span>&gt;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; @Html.EditorFor(m =&gt; m.Client.Contact2)
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">div</span>&gt;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">div</span>&gt;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp;@* <span class="sc2">&lt;<span class="kw2">div</span> <span class="kw3">id</span><span class="sy0">=</span><span class="st0">&quot;SaveCancel&quot;</span> <span class="kw3">class</span><span class="sy0">=</span><span class="st0">&quot;float-right&quot;</span>&gt;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="sc2">&lt;<span class="kw2">button</span> <span class="kw3">id</span><span class="sy0">=</span><span class="st0">&quot;btnSave&quot;</span>&gt;</span>Save<span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">button</span>&gt;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="sc2">&lt;<span class="kw2">button</span> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;reset&quot;</span> <span class="kw3">id</span> <span class="sy0">=</span><span class="st0">&quot;btnCancel&quot;</span> <span class="kw3">name</span><span class="sy0">=</span><span class="st0">&quot;Reset&quot;</span>&gt;</span>Cancel<span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">button</span>&gt;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">div</span>&gt;</span>*@
&nbsp; &nbsp; <span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">fieldset</span>&gt;</span>
&nbsp;
&nbsp;<span class="sc2">&lt;<span class="sy0">/</span><span class="kw2">form</span>&gt;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">@using CardNumbers.Helper
@model CardNumbers.Models.ClientViewModel
  &lt;form id="add-edit-form"&gt;
    &lt;fieldset&gt;
        &lt;legend&gt;Client Info&lt;/legend&gt;

        @Html.ValidationSummary(true)
       
        &lt;input type="hidden" id="fntype" name="fntype"&gt;

        @Html.HiddenFor(m =&gt; m.ClientId)
        @Html.EditorFor(m =&gt; m.ClientNumber, EditorTemplate.TextBox)

        @Html.EditorFor(m =&gt; m.ClientName, EditorTemplate.TextBox)

        @Html.EditorFor(m =&gt; m.Client.Address, EditorTemplate.EditBox)

        &lt;div id="ContactsInfo"&gt;

            &lt;div id="Contact1"&gt;

                @Html.EditorFor(m =&gt; m.Client.Contact1)

            &lt;/div&gt;

            &lt;div id="Contact2"&gt;

                @Html.EditorFor(m =&gt; m.Client.Contact2)
            &lt;/div&gt;
        &lt;/div&gt;

       @* &lt;div id="SaveCancel" class="float-right"&gt;
            &lt;button id="btnSave"&gt;Save&lt;/button&gt;
            &lt;button type="reset" id ="btnCancel" name="Reset"&gt;Cancel&lt;/button&gt;
        &lt;/div&gt;*@
    &lt;/fieldset&gt;

 &lt;/form&gt;</pre></div></div>

<p>This is the Clients.js relevant code which drives that Add, Edit and Delete (for completeness) buttons:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="javascript"><thead><tr><td colspan="2"  class="head">Javascript</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
</pre></td><td class="de1"><pre class="de1"><span class="kw1">function</span> del<span class="br0">&#40;</span>com<span class="sy0">,</span> grid<span class="br0">&#41;</span> <span class="br0">&#123;</span>
&nbsp; &nbsp; <span class="kw1">try</span> <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">var</span> clientName <span class="sy0">=</span> $<span class="br0">&#40;</span><span class="st0">'.trSelected td:eq(2)'</span><span class="br0">&#41;</span>.<span class="me1">text</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>clientName<span class="br0">&#41;</span> <span class="co1">//Variable is defined and not empty</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>confirm<span class="br0">&#40;</span><span class="st0">&quot;Are you sure you want to delete &quot;</span> <span class="sy0">+</span> $.<span class="me1">trim</span><span class="br0">&#40;</span>clientName<span class="br0">&#41;</span> <span class="sy0">+</span> <span class="st0">&quot;?&quot;</span><span class="br0">&#41;</span><span class="sy0">===</span><span class="kw2">false</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="kw2">false</span><span class="sy0">;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $<span class="br0">&#40;</span><span class="st0">'.trSelected'</span><span class="sy0">,</span> grid<span class="br0">&#41;</span>.<span class="me1">each</span><span class="br0">&#40;</span><span class="kw1">function</span> <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">var</span> id <span class="sy0">=</span> $<span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span>.<span class="me1">attr</span><span class="br0">&#40;</span><span class="st0">'id'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; id <span class="sy0">=</span> id.<span class="me1">substring</span><span class="br0">&#40;</span>id.<span class="me1">lastIndexOf</span><span class="br0">&#40;</span><span class="st0">'row'</span><span class="br0">&#41;</span> <span class="sy0">+</span> <span class="nu0">3</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; addFormData<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> $<span class="br0">&#40;</span><span class="st0">'#flexClients'</span><span class="br0">&#41;</span>.<span class="me1">flexOptions</span><span class="br0">&#40;</span><span class="br0">&#123;</span> url<span class="sy0">:</span> <span class="st0">'/Client/Delete/'</span><span class="sy0">+</span> id <span class="br0">&#125;</span><span class="br0">&#41;</span>.<span class="me1">flexReload</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp; &nbsp; <span class="kw1">catch</span><span class="br0">&#40;</span>e<span class="br0">&#41;</span> <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; alert<span class="br0">&#40;</span><span class="st0">'Error '</span> <span class="sy0">+</span> e<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">var</span> validator <span class="sy0">=</span> $<span class="br0">&#40;</span><span class="st0">&quot;#add-edit-form&quot;</span><span class="br0">&#41;</span>.<span class="me1">validate</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">var</span> $dlg <span class="sy0">=</span> $<span class="br0">&#40;</span><span class="st0">&quot;#add-edit-dialog&quot;</span><span class="br0">&#41;</span>.<span class="me1">dialog</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
&nbsp; &nbsp; autoOpen<span class="sy0">:</span> <span class="kw2">false</span><span class="sy0">,</span>
&nbsp; &nbsp; show<span class="sy0">:</span> <span class="st0">&quot;blind&quot;</span><span class="sy0">,</span>
&nbsp; &nbsp; closeOnEscape<span class="sy0">:</span> <span class="kw2">true</span><span class="sy0">,</span>
&nbsp; &nbsp; resizable<span class="sy0">:</span> <span class="kw2">true</span><span class="sy0">,</span>
&nbsp; &nbsp; width<span class="sy0">:</span> <span class="nu0">1200</span><span class="sy0">,</span>
&nbsp; &nbsp; height<span class="sy0">:</span> <span class="nu0">750</span><span class="sy0">,</span>
&nbsp; &nbsp; minHeight<span class="sy0">:</span> <span class="nu0">600</span><span class="sy0">,</span>
&nbsp; &nbsp; minWidth<span class="sy0">:</span> <span class="nu0">950</span><span class="sy0">,</span>
&nbsp; &nbsp; buttons<span class="sy0">:</span> <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="st0">&quot;Save&quot;</span><span class="sy0">:</span> <span class="kw1">function</span> <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>$<span class="br0">&#40;</span><span class="st0">&quot;#add-edit-form&quot;</span><span class="br0">&#41;</span>.<span class="me1">valid</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// jobPost.setVals(txtId.val(), txtRole.val(), txtLocation.val(), txtJobType.val(), txtDescription.val()); &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $.<span class="me1">ajax</span><span class="br0">&#40;</span><span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; type<span class="sy0">:</span> <span class="st0">'POST'</span><span class="sy0">,</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">//data: JSON.stringify(clientInformation),</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; url<span class="sy0">:</span> <span class="st0">'/Client/Save'</span><span class="sy0">,</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; dataType<span class="sy0">:</span> <span class="st0">'json'</span><span class="sy0">,</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; contentType<span class="sy0">:</span> <span class="st0">'application/json'</span><span class="sy0">,</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; success<span class="sy0">:</span> <span class="kw1">function</span> <span class="br0">&#40;</span>result<span class="br0">&#41;</span> <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// insert new list into grid</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $<span class="br0">&#40;</span><span class="st0">'#flexClients'</span><span class="br0">&#41;</span>.<span class="me1">flexAddData</span><span class="br0">&#40;</span>result<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $<span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span>.<span class="me1">dialog</span><span class="br0">&#40;</span><span class="st0">'close'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="kw1">return</span> <span class="kw2">false</span><span class="sy0">;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="sy0">,</span>
&nbsp; &nbsp; &nbsp; &nbsp; Cancel<span class="sy0">:</span> <span class="kw1">function</span> <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $<span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span>.<span class="me1">dialog</span><span class="br0">&#40;</span><span class="st0">&quot;close&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; clearForm<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>validator<span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; validator.<span class="me1">resetForm</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span><span class="sy0">,</span>
&nbsp; &nbsp; close<span class="sy0">:</span> <span class="kw1">function</span> <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span> clearForm<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="br0">&#125;</span><span class="sy0">,</span>
&nbsp; &nbsp; open<span class="sy0">:</span> <span class="kw1">function</span> <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">//$(&quot;#add-edit-dialog&quot;).parent().appendTo($(&quot;#add-edit-form&quot;));</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">function</span> RunModalDialog<span class="br0">&#40;</span>title<span class="sy0">,</span> url<span class="br0">&#41;</span>
<span class="br0">&#123;</span> &nbsp; &nbsp;
&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>title<span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; $dlg.<span class="me1">dialog</span><span class="br0">&#40;</span><span class="st0">&quot;option&quot;</span><span class="sy0">,</span> <span class="br0">&#123;</span><span class="st0">&quot;title&quot;</span><span class="sy0">:</span> title <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
&nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>url<span class="br0">&#41;</span>
&nbsp; &nbsp; <span class="br0">&#123;</span> &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; $dlg.<span class="me1">load</span><span class="br0">&#40;</span>url<span class="br0">&#41;</span>.<span class="me1">dialog</span><span class="br0">&#40;</span><span class="st0">&quot;option&quot;</span><span class="sy0">,</span> <span class="br0">&#123;</span> <span class="st0">&quot;title&quot;</span><span class="sy0">:</span> title <span class="br0">&#125;</span><span class="br0">&#41;</span>.<span class="me1">dialog</span><span class="br0">&#40;</span><span class="st0">&quot;open&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">//$dlg.load(url, function () {</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// &nbsp; &nbsp;var validator = $(&quot;#sform&quot;).validate();</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// &nbsp; &nbsp;if (validator)</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// &nbsp; &nbsp; &nbsp; &nbsp; validator.resetForm();</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// &nbsp; &nbsp;$dlg.dialog(&quot;option&quot;, { &quot;title&quot;: title }).dialog(&quot;open&quot;);</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">//});</span>
&nbsp; &nbsp; <span class="kw1">else</span> <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; $dlg.<span class="me1">dialog</span><span class="br0">&#40;</span><span class="st0">&quot;open&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">function</span> add<span class="br0">&#40;</span>com<span class="sy0">,</span> grid<span class="br0">&#41;</span> <span class="br0">&#123;</span>
&nbsp; &nbsp; $<span class="br0">&#40;</span><span class="st0">'#fntype'</span><span class="br0">&#41;</span>.<span class="me1">val</span><span class="br0">&#40;</span><span class="st0">'Add'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; <span class="kw1">var</span> url <span class="sy0">=</span> <span class="st0">'/Client/Add/'</span><span class="sy0">;</span>
&nbsp; &nbsp; <span class="co1">//location.replace(url);</span>
&nbsp; &nbsp; RunModalDialog<span class="br0">&#40;</span><span class="st0">&quot;Create New Client&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp;<span class="co1">// clearForm(); &nbsp; &nbsp;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">function</span> edit<span class="br0">&#40;</span>com<span class="sy0">,</span> grid<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; $<span class="br0">&#40;</span><span class="st0">'.trSelected'</span><span class="sy0">,</span> grid<span class="br0">&#41;</span>.<span class="me1">each</span><span class="br0">&#40;</span><span class="kw1">function</span> <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">var</span> id <span class="sy0">=</span> $<span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span>.<span class="me1">attr</span><span class="br0">&#40;</span><span class="st0">'id'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; id <span class="sy0">=</span> id.<span class="me1">substring</span><span class="br0">&#40;</span>id.<span class="me1">lastIndexOf</span><span class="br0">&#40;</span><span class="st0">'row'</span><span class="br0">&#41;</span> <span class="sy0">+</span> <span class="nu0">3</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; currentId <span class="sy0">=</span> id<span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $<span class="br0">&#40;</span><span class="st0">'#fntype'</span><span class="br0">&#41;</span>.<span class="me1">val</span><span class="br0">&#40;</span><span class="st0">'Edit'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">var</span> ClientName<span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ClientName <span class="sy0">=</span>$<span class="br0">&#40;</span><span class="st0">'.trSelected td:eq(2)'</span><span class="br0">&#41;</span>.<span class="me1">text</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">var</span> url <span class="sy0">=</span> <span class="st0">'/Client/Edit/'</span> <span class="sy0">+</span> id <span class="sy0">;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $.<span class="kw1">get</span><span class="br0">&#40;</span>url<span class="sy0">,</span> <span class="kw1">function</span> <span class="br0">&#40;</span>html<span class="br0">&#41;</span> <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// &nbsp;setFormControls(data.Id, data.Role, data.Location, data.JobType, data.Description);</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">// alert(data);</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $<span class="br0">&#40;</span>$dlg<span class="br0">&#41;</span>.<span class="me1">html</span><span class="br0">&#40;</span>html<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<span class="co1">//location.replace(url);</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;RunModalDialog<span class="br0">&#40;</span><span class="st0">&quot;Edit Client: &quot;</span> <span class="sy0">+</span> ClientName<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
&nbsp; &nbsp; <span class="br0">&#125;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">function del(com, grid) {
    try {
        var clientName = $('.trSelected td:eq(2)').text();
        if (clientName) //Variable is defined and not empty
        {
            if (confirm("Are you sure you want to delete " + $.trim(clientName) + "?")===false)
                return false;            

            $('.trSelected', grid).each(function () {
                var id = $(this).attr('id');
                id = id.substring(id.lastIndexOf('row') + 3);

                addFormData(); $('#flexClients').flexOptions({ url: '/Client/Delete/'+ id }).flexReload();
            });
        }
    }
    catch(e) {
        alert('Error ' + e);
    }
}

var validator = $("#add-edit-form").validate();

var $dlg = $("#add-edit-dialog").dialog({
    autoOpen: false,
    show: "blind",
    closeOnEscape: true,
    resizable: true,
    width: 1200,
    height: 750,
    minHeight: 600,
    minWidth: 950,
    buttons: {
        "Save": function () {

            if ($("#add-edit-form").valid()) {
                // jobPost.setVals(txtId.val(), txtRole.val(), txtLocation.val(), txtJobType.val(), txtDescription.val());                            

                $.ajax({
                    type: 'POST',
                    //data: JSON.stringify(clientInformation),
                    url: '/Client/Save',
                    dataType: 'json',
                    contentType: 'application/json',
                    success: function (result) {
                        // insert new list into grid
                        $('#flexClients').flexAddData(result);
                    }
                });
                $(this).dialog('close');
            } else return false;

        },
        Cancel: function () {
            $(this).dialog("close");
            clearForm();
            if (validator)
                validator.resetForm();
        }
    },
    close: function () { clearForm(); },
    open: function () {
        //$("#add-edit-dialog").parent().appendTo($("#add-edit-form"));
    }
});

function RunModalDialog(title, url)
{    
    if (title)
        $dlg.dialog("option", {"title": title });

    if (url)
    {        
        $dlg.load(url).dialog("option", { "title": title }).dialog("open");
    }
        //$dlg.load(url, function () {
        //    var validator = $("#sform").validate();
        //    if (validator)
        //         validator.resetForm();
        //    $dlg.dialog("option", { "title": title }).dialog("open");
        //});
    else {
        
        $dlg.dialog("open");
    }
}

function add(com, grid) {
    $('#fntype').val('Add');
    var url = '/Client/Add/';
    //location.replace(url);
    RunModalDialog("Create New Client");
   // clearForm();    
}
 
function edit(com, grid)
{
        $('.trSelected', grid).each(function () {
          
                var id = $(this).attr('id');
                id = id.substring(id.lastIndexOf('row') + 3);
                currentId = id;
                $('#fntype').val('Edit');
                var ClientName;
                ClientName =$('.trSelected td:eq(2)').text();
                var url = '/Client/Edit/' + id ;

                $.get(url, function (html) {
                    //  setFormControls(data.Id, data.Role, data.Location, data.JobType, data.Description);
                    // alert(data);
                    $($dlg).html(html);
                });
               //location.replace(url);
               RunModalDialog("Edit Client: " + ClientName);
        });

    }</pre></div></div>

<p>The most complicated part in the above script was to figure out how to make a server trip to get data for the Edit button and return that page back for editing.<br />
This is done with these two lines of code:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="javascript"><thead><tr><td colspan="2"  class="head">Javascript</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
</pre></td><td class="de1"><pre class="de1">$.<span class="kw1">get</span><span class="br0">&#40;</span>url<span class="sy0">,</span> <span class="kw1">function</span> <span class="br0">&#40;</span>html<span class="br0">&#41;</span> <span class="br0">&#123;</span> &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; $<span class="br0">&#40;</span>$dlg<span class="br0">&#41;</span>.<span class="me1">html</span><span class="br0">&#40;</span>html<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">$.get(url, function (html) {                   
                    $($dlg).html(html);
                });</pre></div></div>

<p>And to make the whole picture complete I&#8217;ll show the Edit method of my controller that returns the above data:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="csharp"><thead><tr><td colspan="2"  class="head">C#</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
</pre></td><td class="de1"><pre class="de1"><span class="kw1">public</span> ActionResult Edit<span class="br0">&#40;</span><span class="kw4">int</span> id<span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ClientViewModel model <span class="sy0">=</span> <span class="kw3">new</span> ClientViewModel<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">var</span> client <span class="sy0">=</span> Db<span class="sy0">.</span><span class="me1">GetClientById</span><span class="br0">&#40;</span>id<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; model<span class="sy0">.</span><span class="me1">Client</span> <span class="sy0">=</span> client<span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> PartialView<span class="br0">&#40;</span><span class="st0">&quot;_ClientForm&quot;</span>,model<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">public ActionResult Edit(int id)
        {
            ClientViewModel model = new ClientViewModel(); 
            var client = Db.GetClientById(id);
            model.Client = client;
            
            return PartialView("_ClientForm",model);
        }</pre></div></div>

<p>As you can see, just a few lines of code to return the model data and the partial view.</p>
<p>This all may seem very easy now, but I can tell you it was not easy to figure all the pieces out.</p>
<p>I am not showing certain functionality here such as my view model or EditorFor custom editors. I also don&#8217;t show the RemoteValidator used to provide uniqueness of the client number and client name. If there will be an interest, I may discuss these details in the separate blog post.</p>
<p>Hope this blog post can help people struggling with the modal dialogs implementation in ASP.NET MVC application.</p>
<p>
*** <strong>Remember, if you have a Web application related question, try our <a href="http://forum.lessthandot.com/viewforum.php?f=6&amp;sid=ebc29b65310d77fa409af74cf8d5cd70">Web Developer</a> forum.</strong><ins></ins></p>
<div class='rp4wp-related-posts'>
<h3>Related Posts</h3>
<ul>
<li><div class='rp4wp-related-post-content'>
<a href='/index.php/webdev/webdesigngraphicsstyling/asp-net-mvc-2-release-candidate-2-releas/'>ASP.NET MVC 2 (Release Candidate 2) Released</a><p>ASP.NET MVC 2 RC 2 has been released and is available for download. For those&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-content'>
<a href='/index.php/datamgmt/datadesign/use-alter-table-alter-column-to-change-d/'>Use alter table alter column to change datatypes for a column in SQL Server</a><p>This question popped in the microsoft.public.sqlserver.programming forum yesterday. A person wanted to change a column&hellip;</p></div>
</li>
</ul>
</div>
</div>
				<div class="post-author">
					<div class="userInfo"><h2>About the Author</h2>Naomi Nosonovsky, Senior Software Developer, has more than 15 years of enterprise experience in analysis, design, development and implementation of high-performance client/server data management solutions.

She is a Personality of the Year for 2008, 2009, 2010 and 2011 at www.universalthread.com in .NET, SQL Server & VFP categories.

She is also an All Star contributor/MCC Community Contributor at forums.asp.net and MSDN T-SQL forum.


 
	



    

    


<br style="clear: left" /><div class="bioSoc"><span class="bioSocTitle">Social Sitings</span><a href="http://www.facebook.com/profile.php?id=http://www.facebook.com/?sk=messages&tid=1240691655679#!/profile.php?id=10395470" title="Naomi at Facebook" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_facebook.png" alt="Facebook" /></a><a href="http://www.linkedin.com/profile?viewProfile=&key=55538716&trk=tab_pro" title="Naomi at LinkedIn" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_linkedin.png" alt="LinkedIn" /></a><a href="http://delicious.com/http://delicious.com/naomi_nos" title="Naomi at delicious" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_delicious.png" alt="delicious" /></a><a href="/index.php/author/naomi/feed/" title="Blog RSS feed for Naomi" class="bioSocLink"><img src="http://lessthandot.com/images/bdg_rss_icon.png" alt="LTD RSS Feed" /></a></div></div>				</div>
				<div class="post-foot instapaper_ignore">
					<div class="post-tagline">
						<div class="post-foot-views"><label>Article views:</label> 14,654 </div>
						<div class="post-foot-more-posts">
                            <a href="/index.php/author/naomi/">Read More Posts by Naomi Nosonovsky</a>
						</div>
					</div>
					<div>
						 
					</div>
					<div class="post-tagline" style="height: auto">
						<span class="social-button-label">Share:</span><a href="https://twitter.com/intent/tweet?url=/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/&text=RT @LessThanDot Blog - ASP.NET MVC project with Modal dialogs and Flexigrid by naomi" class="twitter-share-button-static" target="_blank"><i></i><span class="label">Tweet</span></a><a href="http://www.linkedin.com/shareArticle?mini=true&url=/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/&title=ASP.NET MVC project with Modal dialogs and Flexigrid&source=/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/" target="_blank" title="Share on LinkedIn" class="svg-button"><img alt="Share on LinkedIn"  src="http://lessthandot.com/images/LinkedIn.svg" /></a><a href="http://www.reddit.com/submit?url=/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/&title=ASP.NET MVC project with Modal dialogs and Flexigrid" target="_blank" title="Submit to Reddit" class="svg-button"><img alt="Submit to Reddit" src="http://lessthandot.com/images/Reddit.svg" /></a><a href="https://www.facebook.com/sharer/sharer.php?u=/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/&quote=ASP.NET MVC project with Modal dialogs and Flexigrid" title="Share on Facebook" target="_blank" class="svg-button"><img alt="Share on Facebook" src="http://lessthandot.com/images/Facebook.svg" /></a> <a href="http://www.instapaper.com/hello2?url=/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/&title=ASP.NET MVC project with Modal dialogs and Flexigrid" class="instapaper_button">Instapaper</a>					</div>			
				</div>
				<div class="comments-area instapaper_ignore">
	<h4 class="comments-title">
		3 Comments	</h4>
			<ol class="comments-list">
					<li class="comment even thread-even depth-1" id="comment-5828">
				<div id="div-comment-5828" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/65e80b79db25983c6f3ae942eaed9df4?s=64&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/65e80b79db25983c6f3ae942eaed9df4?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">RAF</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/#comment-5828">
			July 23, 2013 at 5:46 am</a>		</div>

		<p>It would be great if you provide working example in ZIP file for not advanced users.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/?replytocom=5828#respond' onclick='return addComment.moveForm( "div-comment-5828", "5828", "respond", "1943" )' aria-label='Reply to RAF'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-4226417">
				<div id="div-comment-4226417" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://2.gravatar.com/avatar/5e7228ce11905c98ee62a476605af018?s=64&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/5e7228ce11905c98ee62a476605af018?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn"><a href='http://mvc4all/' rel='external nofollow' class='url'>maddy</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/#comment-4226417">
			May 5, 2015 at 5:26 am</a>		</div>

		<p>can we achieve this using asp.net 4.0 web apps ?</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/?replytocom=4226417#respond' onclick='return addComment.moveForm( "div-comment-4226417", "4226417", "respond", "1943" )' aria-label='Reply to maddy'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-4226422">
				<div id="div-comment-4226422" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://2.gravatar.com/avatar/5e7228ce11905c98ee62a476605af018?s=64&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/5e7228ce11905c98ee62a476605af018?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn"><a href='http://mvc4all.com/' rel='external nofollow' class='url'>maddy</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/#comment-4226422">
			May 5, 2015 at 5:28 am</a>		</div>

		<p>i mean the same functionality using MVC in above example , can we repeat it to asp.net web ?</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/?replytocom=4226422#respond' onclick='return addComment.moveForm( "div-comment-4226422", "4226422", "respond", "1943" )' aria-label='Reply to maddy'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		</ol>
						<div id="respond" class="comment-respond">
			<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/index.php/webdev/uidevelopment/ajax/asp-net-mvc-project-with/#respond" style="display:none;">Cancel reply</a></small></h3>				<form action="/wp-comments-post.php" method="post" id="commentform" class="comment-form">
					<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" aria-required='true' required='required' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" maxlength="100" aria-describedby="email-notes" aria-required='true' required='required' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="text" value="" size="30" maxlength="200" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='1943' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><input type="hidden" id="killer_value" name="killer_value" value="8b16ebc056e613024c057be590b542eb"/><noscript>Sorry, but you are required to use a javascript enabled brower to comment here.</noscript>				</form>
					</div><!-- #respond -->
		</div>			</div>
				<br style="clear: both;" />
</div>
		</div>
		<div id="page-footer">
			<div id="botnav"><a href="http://lessthandot.com/" title="LessThanDot Launchpad">Launchpad</a> | <a href="http://lessthandot.com/account.php" title="Your Account Settings">My Account</a> | <a href="http://lessthandot.com/statistics.php" title="Statistics">Statistics</a> | <a href="http://lessthandot.com/donate.php" title="Donate">Donate</a> | <a href="http://lessthandot.com/contactus.php" title="Contact Us">Contact Us</a> | <a href="http://lessthandot.com/aboutus.php" title="About the LessThanDot Team">&copy;2008 - 2019 LessThanDot, LLC</a></div>

		<script type='text/javascript'>
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-4471405-1']);
		_gaq.push(['_trackPageview']);
		_gaq.push(['_setCustomVar', 1, 'Environment', 'lessthandot.com', 3]);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	  </script>			<div class="validator"><a href="http://validator.w3.org/check?uri=referer">Valid XHTML</a> | <a href="http://jigsaw.w3.org/css-validator/check/referer" title="Validate the CSS for this page at the W3C website">Valid CSS</a> | 2018-11-11 15:52</div>
		</div>
	</div>
</div>
<!-- <script type="text/javascript" src="http://apis.google.com/js/plusone.js"></script> -->
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.6.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var spam_destroyer = {"key":"159ff9dcc225580310c2de238cdd1f1a","lifetime":"3600","limit":"1552766008"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/plugins/spam-destroyer/kill.js?ver=1.2'></script>
</body>
</html>
