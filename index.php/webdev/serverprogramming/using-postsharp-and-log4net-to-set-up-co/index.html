<!DOCTYPE html>
<html lang="en-US">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
		<link rel="shortcut icon" href="http://lessthandot.com/favicon.ico" type="image/vnd.microsoft.icon" />
	<title>Less Than Dot - Blog -   Using PostSharp and log4net to Set Up Controller Logging in ASP.net MVC</title>
	<meta prefix="og: http://ogp.me/ns#" property="og:title" content="Less Than Dot - Blog -   Using PostSharp and log4net to Set Up Controller Logging in ASP.net MVC" />
	<meta prefix="og: http://ogp.me/ns#" property="og:type" content="article" />
	<meta prefix="og: http://ogp.me/ns#" property="og:url" content="/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/" />
		<meta prefix="og: http://ogp.me/ns#" property="og:image" content="http://lessthandot.com/images/logo_prod.png" />
	<meta prefix="og: http://ogp.me/ns#" property="og:type" content="article" />
	<meta prefix="og: http://ogp.me/ns#" property="og:site_name" content="LessThanDot" />
	<meta prefix="og: http://ogp.me/ns#" property="og:description" content="A friend of mine pointed me in the direction of a cool library for Aspect Oriented Programming called PostSharp the other day. I&#8217;d read about AOP in the past, but always had so much going on that it slipped my mind to look further into it. But, his excitement rubbed off on me and it [&hellip;]" />
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/index.php/feed/" />
	<link rel="alternate" type="application/atom+xml" title="Atom" href="/index.php/feed/atom/" />

	<!-- this page is the canonical URL -->	
	<link rel="stylesheet" href="/wp-content/themes/lessthandot2009/style.css" type="text/css" />
	<link rel="stylesheet" href="http://lessthandot.com/includes/allsite.css" type="text/css" />
	<link rel="stylesheet" href="http://lessthandot.com/includes/allsiteprint.css" media="print" type="text/css" />

	<link rel='dns-prefetch' href='//ajax.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="LessthanDot &raquo; Using PostSharp and log4net to Set Up Controller Logging in ASP.net MVC Comments Feed" href="/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.1"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='bwp-syntax-css'  href='/wp-content/plugins/better-wordpress-syntax-based-on-geshi/css/bwp-syntax-global.css?ver=4.6.1' type='text/css' media='all' />
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-content/plugins/better-wordpress-syntax-based-on-geshi/js/bwp-syntax.js?ver=4.6.1'></script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Replace Your Case When Then Else Syntax With the Sign Function In SQL Server' href='/index.php/datamgmt/datadesign/replace-your-case-when-then-else-syntax/' />
<link rel='next' title='Not a fan of the Report Manager in SSRS?  Using SSRS procedures to get the job done' href='/index.php/datamgmt/datadesign/not-a-fan-of-the-report-manager-in-ssrs/' />
<meta name="generator" content="WordPress 4.6.1" />
<link rel="canonical" href="/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/" />
<link rel='shortlink' href='/?p=409' />
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Findex.php%2Fwebdev%2Fserverprogramming%2Fusing-postsharp-and-log4net-to-set-up-co%2F" />
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Findex.php%2Fwebdev%2Fserverprogramming%2Fusing-postsharp-and-log4net-to-set-up-co%2F&#038;format=xml" />
<style type='text/css'>.rp4wp-related-posts ul{width:100%;padding:0;margin:0;float:left;}
.rp4wp-related-posts ul>li{list-style:none;padding:0;margin:0;padding-bottom:20px;clear:both;}
.rp4wp-related-posts ul>li>p{margin:0;padding:0;}
.rp4wp-related-post-image{width:35%;padding-right:25px;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;float:left;}</style>
	<script src="http://lessthandot.com/includes/allsite.js" type="text/javascript" ></script>
</head>
<body>
<div id="contain"><div id="subcontain"><div id="ttl"><div id="hdr"><div id="snav"><a href="http://lessthandot.com/login.php?backtrack=/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/?">Member Login</a>
</div><a href="http://lessthandot.com/" title="LessThanDot Launchpad" id="logoc"><img src="http://lessthandot.com/images/logo_prod.png" alt="LessThanDot Site Logo" border="0" /></a><h1>LessThanDot</h1><div class="pgsttl">A decade of helpful technical content</div></div><div id="nav">
<ul>
<li><a href="http://lessthandot.com/" title="LessThanDot Launchpad" id="h" ><span>Launchpad</span></a></li>
<li class="cur"><a href="/" title="LessThanDot Blogs" id="b" ><span>Blogs</span></a></li>
<li><a href="http://forum.lessthandot.com/" title="LessThanDot Community Forums" id="f" ><span>Forum</span></a></li>
<li><a href="http://wiki.lessthandot.com/" title="LessThanDot Wiki Articles" id="w" ><span>Wiki</span></a></li>
<li><a href="http://sqlcop.lessthandot.com/" title="LessThanDot SQLCop" id="a" ><span>SQLCop</span></a></li>
<li><a href="http://lessthandot.com/account.php" title="Your Account Settings" id="r"  class="l_ie"><span>My Account</span></a></li></ul></div>
</div><div id="content">
<div id="fac"><div id="fa">
		<p>Less Than Dot is a community of passionate IT professionals and enthusiasts dedicated to sharing technical knowledge, experience, and assistance. Inside you will find reference materials, interesting technical discussions, and expert tips and commentary.</p></div></div><div class="content-sidebar">
	<div id="social" class="sdsec">
		<h2>LTD Social Sitings</h2>
		<div>
		<a id="social_twitter" href="http://twitter.com/LessThanDot/" title="Follow us on Twitter" ><img src="http://lessthandot.com/images/bdg_twitter.png" alt="Lessthandot twitter"/></a> 
		<a href="http://www.linkedin.com/groups?home=&amp;gid=113440" title="Join us on LinkedIn" ><img src="http://lessthandot.com/images/bdg_linkedin.png" alt="Lessthandot Linkedin" /></a> 
		<a href="http://www.facebook.com/group.php?gid=19330511063" title="Join us on Facebook" ><img src="http://lessthandot.com/images/bdg_facebook.png" alt="Lessthandot facebook"/></a> 
		<a href="http://lessthandot.com/rss.php" title="LessThanDot News Feed" ><img src="http://lessthandot.com/images/bdg_rss_icon.png" alt="Lessthandot rss"/></a> 
		</div>
		<p><em>Note: Watch for social icons on posts by your favorite authors to follow their postings on these and other social sites.</em></p>
	</div><div class="content-sidebar-section">
<h2>Tag cloud</h2>
	<p class="tag-cloud">
		<a href='/index.php/tag/net/' class='tag-link-245 tag-link-position-1' title='21 topics' style='font-size: 8.9565217391304pt;'>.net</a> <a href='/index.php/tag/asp-net/' class='tag-link-168 tag-link-position-2' title='21 topics' style='font-size: 8.9565217391304pt;'>asp.net</a> <a href='/index.php/tag/azure-2/' class='tag-link-321 tag-link-position-3' title='29 topics' style='font-size: 10.173913043478pt;'>azure</a> <a href='/index.php/tag/book/' class='tag-link-130 tag-link-position-4' title='26 topics' style='font-size: 9.7391304347826pt;'>book</a> <a href='/index.php/tag/business-intelligence-2/' class='tag-link-256 tag-link-position-5' title='30 topics' style='font-size: 10.260869565217pt;'>business intelligence</a> <a href='/index.php/tag/c/' class='tag-link-138 tag-link-position-6' title='40 topics' style='font-size: 11.304347826087pt;'>c#</a> <a href='/index.php/tag/database/' class='tag-link-134 tag-link-position-7' title='31 topics' style='font-size: 10.434782608696pt;'>database</a> <a href='/index.php/tag/excel/' class='tag-link-155 tag-link-position-8' title='16 topics' style='font-size: 8pt;'>excel</a> <a href='/index.php/tag/gotcha/' class='tag-link-240 tag-link-position-9' title='19 topics' style='font-size: 8.6086956521739pt;'>gotcha</a> <a href='/index.php/tag/how-to/' class='tag-link-272 tag-link-position-10' title='44 topics' style='font-size: 11.652173913043pt;'>how to</a> <a href='/index.php/tag/mongodb/' class='tag-link-765 tag-link-position-11' title='17 topics' style='font-size: 8.2608695652174pt;'>mongodb</a> <a href='/index.php/tag/nosql/' class='tag-link-775 tag-link-position-12' title='18 topics' style='font-size: 8.4347826086957pt;'>nosql</a> <a href='/index.php/tag/performance/' class='tag-link-179 tag-link-position-13' title='26 topics' style='font-size: 9.7391304347826pt;'>performance</a> <a href='/index.php/tag/security-2/' class='tag-link-398 tag-link-position-14' title='25 topics' style='font-size: 9.5652173913043pt;'>security</a> <a href='/index.php/tag/sql/' class='tag-link-132 tag-link-position-15' title='42 topics' style='font-size: 11.478260869565pt;'>sql</a> <a href='/index.php/tag/sql-advent-2012/' class='tag-link-1416 tag-link-position-16' title='18 topics' style='font-size: 8.4347826086957pt;'>sql advent 2012</a> <a href='/index.php/tag/sql-friday/' class='tag-link-377 tag-link-position-17' title='18 topics' style='font-size: 8.4347826086957pt;'>sql friday</a> <a href='/index.php/tag/sql-server/' class='tag-link-154 tag-link-position-18' title='145 topics' style='font-size: 16.086956521739pt;'>sql server</a> <a href='/index.php/tag/sql-server-2000/' class='tag-link-366 tag-link-position-19' title='45 topics' style='font-size: 11.739130434783pt;'>sql server 2000</a> <a href='/index.php/tag/sql-server-2005/' class='tag-link-327 tag-link-position-20' title='118 topics' style='font-size: 15.391304347826pt;'>sql server 2005</a> <a href='/index.php/tag/sql-server-2008/' class='tag-link-152 tag-link-position-21' title='237 topics' style='font-size: 18pt;'>sql server 2008</a> <a href='/index.php/tag/sql-server-2008-r2/' class='tag-link-548 tag-link-position-22' title='38 topics' style='font-size: 11.130434782609pt;'>sql server 2008 r2</a> <a href='/index.php/tag/sql-server-2012/' class='tag-link-1161 tag-link-position-23' title='76 topics' style='font-size: 13.739130434783pt;'>sql server 2012</a> <a href='/index.php/tag/ssis-2/' class='tag-link-501 tag-link-position-24' title='52 topics' style='font-size: 12.260869565217pt;'>ssis</a> <a href='/index.php/tag/ssms/' class='tag-link-640 tag-link-position-25' title='18 topics' style='font-size: 8.4347826086957pt;'>ssms</a> <a href='/index.php/tag/ssrs-2/' class='tag-link-557 tag-link-position-26' title='27 topics' style='font-size: 9.9130434782609pt;'>ssrs</a> <a href='/index.php/tag/syndicated/' class='tag-link-1407 tag-link-position-27' title='67 topics' style='font-size: 13.217391304348pt;'>syndicated</a> <a href='/index.php/tag/t-sql/' class='tag-link-185 tag-link-position-28' title='26 topics' style='font-size: 9.7391304347826pt;'>t-sql</a> <a href='/index.php/tag/tip/' class='tag-link-194 tag-link-position-29' title='46 topics' style='font-size: 11.826086956522pt;'>tip</a> <a href='/index.php/tag/unit-testing/' class='tag-link-162 tag-link-position-30' title='17 topics' style='font-size: 8.2608695652174pt;'>unit testing</a>	</p>
</div>		<div class="content-sidebar-section">
		<h2>Authors</h2>
			<ul class="author-list dimmed">
				<li><a href="/index.php/author/SQLDenis/" title="Posts by SQLDenis">SQLDenis</a> <a href="/index.php/author/SQLDenis/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (597)</li><li><a href="/index.php/author/onpnt/" title="Posts by Ted Krueger (onpnt)">Ted Krueger (onpnt)</a> <a href="/index.php/author/onpnt/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (355)</li><li><a href="/index.php/author/grrlgeek/" title="Posts by Jes Borland">Jes Borland</a> <a href="/index.php/author/grrlgeek/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (202)</li><li><a href="/index.php/author/tarwn/" title="Posts by Eli Weinstock-Herman (tarwn)">Eli Weinstock-Herman (tarwn)</a> <a href="/index.php/author/tarwn/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (190)</li><li><a href="/index.php/author/koenverbeeck/" title="Posts by Koen Verbeeck">Koen Verbeeck</a> <a href="/index.php/author/koenverbeeck/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (100)</li><li><a href="/index.php/author/alexcuse/" title="Posts by Alex Ullrich">Alex Ullrich</a> <a href="/index.php/author/alexcuse/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (55)</li><li><a href="/index.php/author/gmmastros/" title="Posts by George Mastros (gmmastros)">George Mastros (gmmastros)</a> <a href="/index.php/author/gmmastros/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (45)</li><li><a href="/index.php/author/axel8s/" title="Posts by Axel Achten (axel8s)">Axel Achten (axel8s)</a> <a href="/index.php/author/axel8s/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (28)</li><li><a href="/index.php/author/naomi/" title="Posts by Naomi Nosonovsky">Naomi Nosonovsky</a> <a href="/index.php/author/naomi/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (27)</li><li><a href="/index.php/author/thirster42/" title="Posts by David Forck (thirster42)">David Forck (thirster42)</a> <a href="/index.php/author/thirster42/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (24)</li><li><a href="/index.php/author/chopstik/" title="Posts by chopstik">chopstik</a> <a href="/index.php/author/chopstik/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (20)</li><li><a href="/index.php/author/kconan/" title="Posts by Kevin Conan">Kevin Conan</a> <a href="/index.php/author/kconan/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (18)</li><li><a href="/index.php/author/robearl/" title="Posts by Rob Earl">Rob Earl</a> <a href="/index.php/author/robearl/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (14)</li><li><a href="/index.php/author/thatrickguy/" title="Posts by ThatRickGuy">ThatRickGuy</a> <a href="/index.php/author/thatrickguy/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (12)</li><li><a href="/index.php/author/sqlarcher/" title="Posts by SQLArcher">SQLArcher</a> <a href="/index.php/author/sqlarcher/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (11)</li>                <li><a href="http://lessthandot.com/Stats/BlogAuthors.php">More...</a></li>
			</ul>
		</div>
				<div class="content-sidebar-section">
		<h2>Categories</h2>
			<ul class="categories-list">
					<li class="cat-item cat-item-10"><a href="/index.php/category/all/" >All Blogs</a>
</li>
	<li class="cat-item cat-item-5"><a href="/index.php/category/architect/" >Architecture, Design and Strategy</a>
</li>
	<li class="cat-item cat-item-1759"><a href="/index.php/category/artificial-intelligence/" >Artificial Intelligence</a>
</li>
	<li class="cat-item cat-item-6"><a href="/index.php/category/datamgmt/" >Data Management</a>
</li>
	<li class="cat-item cat-item-7"><a href="/index.php/category/desktopdev/" >Desktop Developer</a>
</li>
	<li class="cat-item cat-item-8"><a href="/index.php/category/enterprisedev/" >Enterprise Developer</a>
</li>
	<li class="cat-item cat-item-11"><a href="/index.php/category/itprofessionals/" >IT Professionals</a>
</li>
	<li class="cat-item cat-item-12"><a href="/index.php/category/itstudents/" >IT Students and Researchers</a>
</li>
	<li class="cat-item cat-item-1743"><a href="/index.php/category/management/" >Management</a>
</li>
	<li class="cat-item cat-item-9"><a href="/index.php/category/sysadmins/" >System Admins</a>
</li>
	<li class="cat-item cat-item-1"><a href="/index.php/category/uncategorized/" >Uncategorized</a>
</li>
	<li class="cat-item cat-item-4"><a href="/index.php/category/webdev/" >Web Developer</a>
</li>
			</ul>
		</div>
		</div><div class="content-main">
				<div class="post-navigation">
				<div class="post-navigation-forward"><a href="/index.php/datamgmt/datadesign/not-a-fan-of-the-report-manager-in-ssrs/" rel="next">Not a fan of the Report Manager in SSRS?  Using SSRS procedures to get the job done</a> &raquo; </div>
				<div class="post-navigation-back">&laquo; <a href="/index.php/datamgmt/datadesign/replace-your-case-when-then-else-syntax/" rel="prev">Replace Your Case When Then Else Syntax With the Sign Function In SQL Server</a></div>
			</div>
			<div class="post-area instapaper_body">
				<div class="post-title-line">
										<h1 class="instapaper_ignore"><a href="/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/" class="post-title">Using PostSharp and log4net to Set Up Controller Logging in ASP.net MVC</a></h1>
					<div class="post-byline">by <a href="/index.php/author/alexcuse/" title="Posts by Alex Ullrich" rel="author">Alex Ullrich</a> on June 24, 2009 in category <a href="/index.php/category/webdev/serverprogramming/aspnet/" rel="category tag">ASP.NET</a> <a href="/index.php/category/webdev/serverprogramming/" rel="category tag">Server Programming</a>. Article views: 39,143 </div>
				</div>
				<div class="post-tagline"><a href="https://twitter.com/intent/tweet?url=/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/&text=RT @LessThanDot Blog - Using PostSharp and log4net to Set Up Controller Logging in ASP.net MVC by @AlexCuse" class="twitter-share-button-static" target="_blank"><i></i><span class="label">Tweet</span></a><a href="http://www.linkedin.com/shareArticle?mini=true&url=/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/&title=Using PostSharp and log4net to Set Up Controller Logging in ASP.net MVC&source=/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/" target="_blank" title="Share on LinkedIn" class="svg-button"><img alt="Share on LinkedIn"  src="http://lessthandot.com/images/LinkedIn.svg" /></a><a href="http://www.reddit.com/submit?url=/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/&title=Using PostSharp and log4net to Set Up Controller Logging in ASP.net MVC" target="_blank" title="Submit to Reddit" class="svg-button"><img alt="Submit to Reddit" src="http://lessthandot.com/images/Reddit.svg" /></a><a href="https://www.facebook.com/sharer/sharer.php?u=/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/&quote=Using PostSharp and log4net to Set Up Controller Logging in ASP.net MVC" title="Share on Facebook" target="_blank" class="svg-button"><img alt="Share on Facebook" src="http://lessthandot.com/images/Facebook.svg" /></a> <a href="http://www.instapaper.com/hello2?url=/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/&title=Using PostSharp and log4net to Set Up Controller Logging in ASP.net MVC" class="instapaper_button">Instapaper</a></div>

				<div class="post-content"><p>A friend of mine pointed me in the direction of a cool library for Aspect Oriented Programming called <a href="http://www.postsharp.org/">PostSharp</a> the other day.  I&#8217;d read about AOP in the past, but always had so much going on that it slipped my mind to look further into it.  But, his excitement rubbed off on me and it wasn&#8217;t long before I thought of a way I could use it.  I&#8217;d been wanting to set up logging on a site I&#8217;ve been working on so that I could collect data for a while and report on it to see which controller methods are running the slowest.  Not a permanent solution, just a way to gather data for a while to analyze it and identify any pain points I may have missed.  Using PostSharp I can do it without littering too much logging code throughout the controllers themselves (all they would need is an attribute).</p>
<p>First thing we need to do is create a table to log to.  Something like this:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="mysql"><thead><tr><td colspan="2"  class="head">MySQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="de1"><pre class="de1"><span class="kw1">CREATE</span> <span class="kw1">TABLE</span> &nbsp;<span class="st0">`my<span class="es1">_</span>site`</span>.<span class="st0">`log`</span> <span class="br0">&#40;</span>
&nbsp; <span class="st0">`ID`</span> <span class="kw4">int</span><span class="br0">&#40;</span><span class="nu0">10</span><span class="br0">&#41;</span> <span class="kw6">unsigned</span> <span class="kw10">NOT</span> <span class="kw3">NULL</span> <span class="kw6">auto_increment</span><span class="sy2">,</span>
&nbsp; <span class="st0">`Date`</span> <span class="kw4">datetime</span> <span class="kw10">NOT</span> <span class="kw3">NULL</span><span class="sy2">,</span>
&nbsp; <span class="st0">`Thread`</span> <span class="kw4">varchar</span><span class="br0">&#40;</span><span class="nu0">32</span><span class="br0">&#41;</span> <span class="kw10">NOT</span> <span class="kw3">NULL</span><span class="sy2">,</span>
&nbsp; <span class="st0">`Context`</span> <span class="kw4">varchar</span><span class="br0">&#40;</span><span class="nu0">10</span><span class="br0">&#41;</span> <span class="kw10">NOT</span> <span class="kw3">NULL</span><span class="sy2">,</span>
&nbsp; <span class="st0">`Level`</span> <span class="kw4">varchar</span><span class="br0">&#40;</span><span class="nu0">10</span><span class="br0">&#41;</span> <span class="kw10">NOT</span> <span class="kw3">NULL</span><span class="sy2">,</span>
&nbsp; <span class="st0">`Logger`</span> <span class="kw4">varchar</span><span class="br0">&#40;</span><span class="nu0">512</span><span class="br0">&#41;</span> <span class="kw10">NOT</span> <span class="kw3">NULL</span><span class="sy2">,</span>
&nbsp; <span class="st0">`Method`</span> <span class="kw4">varchar</span><span class="br0">&#40;</span><span class="nu0">200</span><span class="br0">&#41;</span> <span class="kw2">default</span> <span class="kw3">NULL</span><span class="sy2">,</span>
&nbsp; <span class="st0">`Parameters`</span> <span class="kw4">varchar</span><span class="br0">&#40;</span><span class="nu0">8000</span><span class="br0">&#41;</span> <span class="kw2">default</span> <span class="kw3">NULL</span><span class="sy2">,</span>
&nbsp; <span class="st0">`Message`</span> <span class="kw4">varchar</span><span class="br0">&#40;</span><span class="nu0">1000</span><span class="br0">&#41;</span> <span class="kw10">NOT</span> <span class="kw3">NULL</span><span class="sy2">,</span>
&nbsp; <span class="st0">`Exception`</span> <span class="kw4">varchar</span><span class="br0">&#40;</span><span class="nu0">4000</span><span class="br0">&#41;</span> <span class="kw2">default</span> <span class="kw3">NULL</span><span class="sy2">,</span>
&nbsp; <span class="st0">`ExecutionTime`</span> <span class="kw4">decimal</span><span class="br0">&#40;</span><span class="nu0">14</span><span class="sy2">,</span><span class="nu0">4</span><span class="br0">&#41;</span> <span class="kw2">default</span> <span class="kw3">NULL</span><span class="sy2">,</span>
&nbsp; <span class="kw1">PRIMARY KEY</span> &nbsp;<span class="br0">&#40;</span><span class="st0">`ID`</span><span class="br0">&#41;</span><span class="sy2">,</span>
&nbsp; <span class="kw1">INDEX</span> <span class="st0">`ix<span class="es1">_</span>log<span class="es1">_</span>level`</span> <span class="br0">&#40;</span><span class="st0">`Level`</span><span class="br0">&#41;</span><span class="sy2">,</span>
&nbsp; <span class="kw1">INDEX</span> <span class="st0">`ix<span class="es1">_</span>log<span class="es1">_</span>executiontime`</span> <span class="br0">&#40;</span><span class="st0">`ExecutionTime`</span><span class="br0">&#41;</span>
<span class="br0">&#41;</span> <span class="kw1">ENGINE</span><span class="sy1">=</span><span class="kw1">InnoDB</span> <span class="kw6">AUTO_INCREMENT</span><span class="sy1">=</span><span class="nu0">1</span> <span class="kw2">DEFAULT</span> <span class="kw7">CHARSET</span><span class="sy1">=</span>utf8<span class="sy2">;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">CREATE TABLE  `my_site`.`log` (
  `ID` int(10) unsigned NOT NULL auto_increment,
  `Date` datetime NOT NULL,
  `Thread` varchar(32) NOT NULL,
  `Context` varchar(10) NOT NULL,
  `Level` varchar(10) NOT NULL,
  `Logger` varchar(512) NOT NULL,
  `Method` varchar(200) default NULL,
  `Parameters` varchar(8000) default NULL,
  `Message` varchar(1000) NOT NULL,
  `Exception` varchar(4000) default NULL,
  `ExecutionTime` decimal(14,4) default NULL,
  PRIMARY KEY  (`ID`),
  INDEX `ix_log_level` (`Level`),
  INDEX `ix_log_executiontime` (`ExecutionTime`)
) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;</pre></div></div>

<p>The only interesting thing here is the &#8220;ExecutionTime&#8221; column.  I added this because in this case I am logging to MySQL, and MySQL doesn&#8217;t store the millisecond portion of Date/Times.  Seems it would be easier anyway to just log the time rather than try to connect start and finish entries (you could also do it in a single entry, as shown <a href="http://wesshaddix.info/post/Logging-in-ASPNet-MVC-using-Log4Net-and-PostSharp.aspx">here</a>).  The reason I didn&#8217;t do this is because I wanted to be able to split the table into 3 (start, finish, and exception entries) to get as good an idea as I could what is happening at any given time.  </p>
<p>Another thing to note here is that I added a column for parameter name/value combinations and the method name.  log4net has a built-in conversion pattern for determining the method name, but it will not work for me because I plan to wrap log4net in a separate static helper class, in case I ever want to change the logging solution behind the scenes.  I also read on log4net&#8217;s <a href="http://logging.apache.org/log4net/release/sdk/log4net.Layout.PatternLayout.html">Pattern Layout</a> docs that getting any kind of information about the caller from log4net is very slow, because it generates a call stack to read the information from.  That is one hell of a warning, they might as well just put police tape around those methods.  So I will take my chances getting this info from PostSharp!</p>
<p>Next is to configure log4net.  Added an xml file called log4net.config to the top-level directory in the project.  Something like this ought to do:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="xml"><thead><tr><td colspan="2"  class="head">XML</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
</pre></td><td class="de1"><pre class="de1"><span class="sc3"><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">&quot;1.0&quot;</span> <span class="re0">encoding</span>=<span class="st0">&quot;utf-8&quot;</span> <span class="re2">?&gt;</span></span>
<span class="sc3"><span class="re1">&lt;log4net<span class="re2">&gt;</span></span></span>
&nbsp; <span class="sc-1">&lt;!-- How to set up secondary appender (bufferless) for Exceptions only? --&gt;</span>
&nbsp; <span class="sc-1">&lt;!-- Log4Net Appender Settings--&gt;</span>
&nbsp; <span class="sc3"><span class="re1">&lt;root<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;level</span> <span class="re0">value</span>=<span class="st0">&quot;All&quot;</span> <span class="re2">/&gt;</span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;appender-ref</span> <span class="re0">ref</span>=<span class="st0">&quot;ADONetAppender&quot;</span> <span class="re2">/&gt;</span></span>
&nbsp; <span class="sc3"><span class="re1">&lt;/root<span class="re2">&gt;</span></span></span>
&nbsp; <span class="sc3"><span class="re1">&lt;appender</span> <span class="re0">name</span>=<span class="st0">&quot;ADONetAppender&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;log4net.Appender.ADONetAppender&quot;</span><span class="re2">&gt;</span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;bufferSize</span> <span class="re0">value</span>=<span class="st0">&quot;10&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;lossy</span> <span class="re0">value</span>=<span class="st0">&quot;false&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;connectionType</span> <span class="re0">value</span>=<span class="st0">&quot;MySql.Data.MySqlClient.MySqlConnection, MySql.Data&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;connectionString</span> <span class="re0">value</span>=<span class="st0">&quot;Server=999.99.443.206;Database=my_site; Uid=someuser;Pwd=welcome1;&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;commandText</span> <span class="re0">value</span>=<span class="st0">&quot;INSERT INTO Log (Date,Thread,Level,Logger,Message,Method,Parameters,Exception,Context,ExecutionTime) VALUES (?log_date, ?thread, ?log_level, ?logger, ?message, ?method_name, ?parameters, ?exception, ?context, ?execution_time)&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;parameter<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;parameterName</span> <span class="re0">value</span>=<span class="st0">&quot;log_date&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;dbType</span> <span class="re0">value</span>=<span class="st0">&quot;DateTime&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;layout</span> <span class="re0">type</span>=<span class="st0">&quot;log4net.Layout.RawTimeStampLayout&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;/parameter<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;parameter<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;parameterName</span> <span class="re0">value</span>=<span class="st0">&quot;thread&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;dbType</span> <span class="re0">value</span>=<span class="st0">&quot;String&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;size</span> <span class="re0">value</span>=<span class="st0">&quot;32&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;layout</span> <span class="re0">type</span>=<span class="st0">&quot;log4net.Layout.PatternLayout&quot;</span><span class="re2">&gt;</span></span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;conversionPattern</span> <span class="re0">value</span>=<span class="st0">&quot;%t&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;/layout<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;/parameter<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;parameter<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;parameterName</span> <span class="re0">value</span>=<span class="st0">&quot;log_level&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;dbType</span> <span class="re0">value</span>=<span class="st0">&quot;String&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;size</span> <span class="re0">value</span>=<span class="st0">&quot;512&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;layout</span> <span class="re0">type</span>=<span class="st0">&quot;log4net.Layout.PatternLayout&quot;</span><span class="re2">&gt;</span></span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;conversionPattern</span> <span class="re0">value</span>=<span class="st0">&quot;%p&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;/layout<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;/parameter<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;parameter<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;parameterName</span> <span class="re0">value</span>=<span class="st0">&quot;context&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;dbType</span> <span class="re0">value</span>=<span class="st0">&quot;String&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;size</span> <span class="re0">value</span>=<span class="st0">&quot;512&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;layout</span> <span class="re0">type</span>=<span class="st0">&quot;log4net.Layout.PatternLayout&quot;</span><span class="re2">&gt;</span></span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;conversionPattern</span> <span class="re0">value</span>=<span class="st0">&quot;%x&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;/layout<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;/parameter<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;parameter<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;parameterName</span> <span class="re0">value</span>=<span class="st0">&quot;logger&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;dbType</span> <span class="re0">value</span>=<span class="st0">&quot;String&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;size</span> <span class="re0">value</span>=<span class="st0">&quot;512&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;layout</span> <span class="re0">type</span>=<span class="st0">&quot;log4net.Layout.PatternLayout&quot;</span><span class="re2">&gt;</span></span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;conversionPattern</span> <span class="re0">value</span>=<span class="st0">&quot;%c&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;/layout<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;/parameter<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;parameter<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;parameterName</span> <span class="re0">value</span>=<span class="st0">&quot;message&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;dbType</span> <span class="re0">value</span>=<span class="st0">&quot;String&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;size</span> <span class="re0">value</span>=<span class="st0">&quot;1000&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;layout</span> <span class="re0">type</span>=<span class="st0">&quot;log4net.Layout.PatternLayout&quot;</span><span class="re2">&gt;</span></span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;conversionPattern</span> <span class="re0">value</span>=<span class="st0">&quot;%m&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;/layout<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;/parameter<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;parameter<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;parameterName</span> <span class="re0">value</span>=<span class="st0">&quot;exception&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;dbType</span> <span class="re0">value</span>=<span class="st0">&quot;String&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;size</span> <span class="re0">value</span>=<span class="st0">&quot;4000&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;layout</span> <span class="re0">type</span>=<span class="st0">&quot;log4net.Layout.ExceptionLayout&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;/parameter<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;parameter<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;parameterName</span> <span class="re0">value</span>=<span class="st0">&quot;method_name&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;dbType</span> <span class="re0">value</span>=<span class="st0">&quot;String&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;size</span> <span class="re0">value</span>=<span class="st0">&quot;200&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;layout</span> <span class="re0">type</span>=<span class="st0">&quot;log4net.Layout.PatternLayout&quot;</span><span class="re2">&gt;</span></span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;conversionPattern</span> <span class="re0">value</span>=<span class="st0">&quot;%property{method_name}&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;/layout<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;/parameter<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;parameter<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;parameterName</span> <span class="re0">value</span>=<span class="st0">&quot;execution_time&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;dbType</span> <span class="re0">value</span>=<span class="st0">&quot;Decimal&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;layout</span> <span class="re0">type</span>=<span class="st0">&quot;log4net.Layout.PatternLayout&quot;</span><span class="re2">&gt;</span></span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;conversionPattern</span> <span class="re0">value</span>=<span class="st0">&quot;%property{execution_time}&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;/layout<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;/parameter<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;parameter<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;parameterName</span> <span class="re0">value</span>=<span class="st0">&quot;parameters&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;dbType</span> <span class="re0">value</span>=<span class="st0">&quot;String&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;layout</span> <span class="re0">type</span>=<span class="st0">&quot;log4net.Layout.PatternLayout&quot;</span><span class="re2">&gt;</span></span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;conversionPattern</span> <span class="re0">value</span>=<span class="st0">&quot;%property{parameters}&quot;</span><span class="re2">/&gt;</span></span>
&nbsp; &nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;/layout<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;/parameter<span class="re2">&gt;</span></span></span>
&nbsp; <span class="sc3"><span class="re1">&lt;/appender<span class="re2">&gt;</span></span></span>
<span class="sc3"><span class="re1">&lt;/log4net<span class="re2">&gt;</span></span></span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">&lt;?xml version="1.0" encoding="utf-8" ?&gt;
&lt;log4net&gt;
  &lt;!-- How to set up secondary appender (bufferless) for Exceptions only? --&gt;
  &lt;!-- Log4Net Appender Settings--&gt;
  &lt;root&gt;
    &lt;level value="All" /&gt;
    &lt;appender-ref ref="ADONetAppender" /&gt;
  &lt;/root&gt;
  &lt;appender name="ADONetAppender" type="log4net.Appender.ADONetAppender"&gt;
    &lt;bufferSize value="10"/&gt;
    &lt;lossy value="false"/&gt;
    &lt;connectionType value="MySql.Data.MySqlClient.MySqlConnection, MySql.Data"/&gt;
    &lt;connectionString value="Server=999.99.443.206;Database=my_site; Uid=someuser;Pwd=welcome1;"/&gt;
    &lt;commandText value="INSERT INTO Log (Date,Thread,Level,Logger,Message,Method,Parameters,Exception,Context,ExecutionTime) VALUES (?log_date, ?thread, ?log_level, ?logger, ?message, ?method_name, ?parameters, ?exception, ?context, ?execution_time)"/&gt;
    &lt;parameter&gt;
      &lt;parameterName value="log_date"/&gt;
      &lt;dbType value="DateTime"/&gt;
      &lt;layout type="log4net.Layout.RawTimeStampLayout"/&gt;
    &lt;/parameter&gt;
    &lt;parameter&gt;
      &lt;parameterName value="thread"/&gt;
      &lt;dbType value="String"/&gt;
      &lt;size value="32"/&gt;
      &lt;layout type="log4net.Layout.PatternLayout"&gt;
        &lt;conversionPattern value="%t"/&gt;
      &lt;/layout&gt;
    &lt;/parameter&gt;
    &lt;parameter&gt;
      &lt;parameterName value="log_level"/&gt;
      &lt;dbType value="String"/&gt;
      &lt;size value="512"/&gt;
      &lt;layout type="log4net.Layout.PatternLayout"&gt;
        &lt;conversionPattern value="%p"/&gt;
      &lt;/layout&gt;
    &lt;/parameter&gt;
    &lt;parameter&gt;
      &lt;parameterName value="context"/&gt;
      &lt;dbType value="String"/&gt;
      &lt;size value="512"/&gt;
      &lt;layout type="log4net.Layout.PatternLayout"&gt;
        &lt;conversionPattern value="%x"/&gt;
      &lt;/layout&gt;
    &lt;/parameter&gt;
    &lt;parameter&gt;
      &lt;parameterName value="logger"/&gt;
      &lt;dbType value="String"/&gt;
      &lt;size value="512"/&gt;
      &lt;layout type="log4net.Layout.PatternLayout"&gt;
        &lt;conversionPattern value="%c"/&gt;
      &lt;/layout&gt;
    &lt;/parameter&gt;
    &lt;parameter&gt;
      &lt;parameterName value="message"/&gt;
      &lt;dbType value="String"/&gt;
      &lt;size value="1000"/&gt;
      &lt;layout type="log4net.Layout.PatternLayout"&gt;
        &lt;conversionPattern value="%m"/&gt;
      &lt;/layout&gt;
    &lt;/parameter&gt;
    &lt;parameter&gt;
      &lt;parameterName value="exception"/&gt;
      &lt;dbType value="String"/&gt;
      &lt;size value="4000"/&gt;
      &lt;layout type="log4net.Layout.ExceptionLayout"/&gt;
    &lt;/parameter&gt;
    &lt;parameter&gt;
      &lt;parameterName value="method_name"/&gt;
      &lt;dbType value="String"/&gt;
      &lt;size value="200"/&gt;
      &lt;layout type="log4net.Layout.PatternLayout"&gt;
        &lt;conversionPattern value="%property{method_name}"/&gt;
      &lt;/layout&gt;
    &lt;/parameter&gt;
    &lt;parameter&gt;
      &lt;parameterName value="execution_time"/&gt;
      &lt;dbType value="Decimal"/&gt;
      &lt;layout type="log4net.Layout.PatternLayout"&gt;
        &lt;conversionPattern value="%property{execution_time}"/&gt;
      &lt;/layout&gt;
    &lt;/parameter&gt;
    &lt;parameter&gt;
      &lt;parameterName value="parameters"/&gt;
      &lt;dbType value="String"/&gt;
      &lt;layout type="log4net.Layout.PatternLayout"&gt;
        &lt;conversionPattern value="%property{parameters}"/&gt;
      &lt;/layout&gt;
    &lt;/parameter&gt;
  &lt;/appender&gt;
&lt;/log4net&gt;</pre></div></div>

<p>Nothing really special there, except for the additional parameters we added that I didn&#8217;t see on most of the vanilla demos.  One thing to note is the conversionPattern we used for the custom properties, &#8220;%property{PROPERTY_NAME}&#8221; as it can be very handy if you want to set custom parameters.  There&#8217;s also a special &#8220;ErrorLog&#8221; that writes to a flat file without using a buffer, for errors only.  This is so that if there is a fatal error in the application, the exceptions leading up to it are not lost.  Onward.  Next thing we need to do is ensure that log4net is configured when we start up the application.  There are two ways to do this:</p>
<p>I first used AssemblyInfo.cs like so:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="csharp"><thead><tr><td colspan="2"  class="head">C#</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
</pre></td><td class="de1"><pre class="de1"><span class="br0">&#91;</span>assembly<span class="sy0">:</span> log4net<span class="sy0">.</span><span class="me1">Config</span><span class="sy0">.</span><span class="me1">XmlConfigurator</span><span class="br0">&#40;</span>ConfigFile <span class="sy0">=</span> <span class="st0">&quot;log4net.config&quot;</span>, Watch <span class="sy0">=</span> <span class="kw1">true</span><span class="br0">&#41;</span><span class="br0">&#93;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">[assembly: log4net.Config.XmlConfigurator(ConfigFile = "log4net.config", Watch = true)]</pre></div></div>

<p>But found I could also use the Application_start method like this:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="csharp"><thead><tr><td colspan="2"  class="head">C#</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
</pre></td><td class="de1"><pre class="de1"><span class="kw1">protected</span> <span class="kw4">void</span> Application_Start<span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
&nbsp; &nbsp; RegisterRoutes<span class="br0">&#40;</span>RouteTable<span class="sy0">.</span><span class="me1">Routes</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; log4net<span class="sy0">.</span><span class="me1">Config</span><span class="sy0">.</span><span class="me1">XmlConfigurator</span><span class="sy0">.</span><span class="me1">Configure</span><span class="br0">&#40;</span><span class="kw3">new</span> <span class="kw5">System.<span class="me1">IO</span></span><span class="sy0">.</span><span class="me1">FileInfo</span><span class="br0">&#40;</span>HttpContext<span class="sy0">.</span><span class="me1">Current</span><span class="sy0">.</span><span class="me1">Server</span><span class="sy0">.</span><span class="me1">MapPath</span><span class="br0">&#40;</span><span class="st0">&quot;log4net.config&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">protected void Application_Start()
{
    RegisterRoutes(RouteTable.Routes);
    log4net.Config.XmlConfigurator.Configure(new System.IO.FileInfo(HttpContext.Current.Server.MapPath("log4net.config")));
}</pre></div></div>

<p>I have not yet decided which I like better, but I lean towards the second method because the first just feels a bit dirty.  So feel free to pick the one you like best.</p>
<p>Now that this is done, the fun can begin.  First thing I did was set up a little helper class, so that I don&#8217;t have calls to log4net all over the place.  Besides returning a log4net.ILog to be used in writing entries, this class will have a few methods to use to Add/Remove parameters from the ThreadContext&#8217;s Properties and NDC Stack.  This class will look like this:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="csharp"><thead><tr><td colspan="2"  class="head">C#</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
</pre></td><td class="de1"><pre class="de1"><span class="kw1">using</span> <span class="co3">System</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">System.Collections.Generic</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">System.Linq</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">System.Web</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">log4net</span><span class="sy0">;</span>
&nbsp;
<span class="br0">&#91;</span><span class="kw5">System.<span class="me1">Diagnostics</span></span><span class="sy0">.</span><span class="me1">DebuggerStepThrough</span><span class="br0">&#93;</span>
<span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">class</span> Logging
<span class="br0">&#123;</span>
&nbsp; &nbsp; <span class="co1">/// &lt;summary&gt;Log an Informational Message&lt;/summary&gt;</span>
&nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> Info<span class="br0">&#40;</span><span class="kw4">String</span> message<span class="br0">&#41;</span>
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; LogManager<span class="sy0">.</span><span class="me1">GetLogger</span><span class="br0">&#40;</span><span class="st0">&quot;root&quot;</span><span class="br0">&#41;</span><span class="sy0">.</span><span class="me1">Info</span><span class="br0">&#40;</span>message<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; <span class="co1">/// &lt;summary&gt;Log an Error Message&lt;/summary&gt;</span>
&nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> Error<span class="br0">&#40;</span><span class="kw4">String</span> message, Exception ex<span class="br0">&#41;</span>
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">//for errors, use the ErrorLog that will write to a flat file (bufferless) rather than database (buffered)</span>
&nbsp; &nbsp; &nbsp; &nbsp; LogManager<span class="sy0">.</span><span class="me1">GetLogger</span><span class="br0">&#40;</span><span class="st0">&quot;ErrorLogger&quot;</span><span class="br0">&#41;</span><span class="sy0">.</span><span class="me1">Error</span><span class="br0">&#40;</span>message, ex<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; <span class="co1">/// &lt;summary&gt;Insert a parameter to MDC&lt;/summary&gt;</span>
&nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> SetParameter<span class="br0">&#40;</span><span class="kw4">String</span> name, <span class="kw4">String</span> <span class="kw1">value</span><span class="br0">&#41;</span>
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; ThreadContext<span class="sy0">.</span><span class="me1">Properties</span><span class="br0">&#91;</span>name<span class="br0">&#93;</span> <span class="sy0">=</span> <span class="kw1">value</span><span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; <span class="co1">/// &lt;summary&gt;Remove parameter from MDC&lt;/summary&gt;</span>
&nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> RemoveParameter<span class="br0">&#40;</span><span class="kw4">String</span> name<span class="br0">&#41;</span>
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; ThreadContext<span class="sy0">.</span><span class="me1">Properties</span><span class="sy0">.</span><span class="kw1">Remove</span><span class="br0">&#40;</span>name<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; <span class="co1">/// &lt;summary&gt;Add another context to NDC&lt;/summary&gt;</span>
&nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> PushContext<span class="br0">&#40;</span><span class="kw4">Object</span> obj<span class="br0">&#41;</span>
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; ThreadContext<span class="sy0">.</span><span class="me1">Stacks</span><span class="br0">&#91;</span><span class="st0">&quot;NDC&quot;</span><span class="br0">&#93;</span><span class="sy0">.</span><span class="me1">Push</span><span class="br0">&#40;</span>obj<span class="sy0">.</span><span class="me1">ToString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; <span class="co1">/// &lt;summary&gt;Clear all contexts from NDC&lt;/summary&gt;</span>
&nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> ClearContext<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; ThreadContext<span class="sy0">.</span><span class="me1">Stacks</span><span class="br0">&#91;</span><span class="st0">&quot;NDC&quot;</span><span class="br0">&#93;</span><span class="sy0">.</span><span class="me1">Clear</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; <span class="co1">/// &lt;summary&gt;Remove top context from NDC&lt;/summary&gt;</span>
&nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> PopContext<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; ThreadContext<span class="sy0">.</span><span class="me1">Stacks</span><span class="br0">&#91;</span><span class="st0">&quot;NDC&quot;</span><span class="br0">&#93;</span><span class="sy0">.</span><span class="me1">Pop</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; <span class="co1">/// &lt;summary&gt;Set Execution time parameter (null for zero)&lt;/summary&gt;</span>
&nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> SetExecutionTime<span class="br0">&#40;</span>DateTime<span class="sy0">?</span> current<span class="br0">&#41;</span>
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">Double</span> execution_time_milliseconds <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>current <span class="sy0">!=</span> <span class="kw1">null</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; DateTime start<span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>DateTime<span class="sy0">.</span><span class="me1">TryParse</span><span class="br0">&#40;</span>ThreadContext<span class="sy0">.</span><span class="me1">Properties</span><span class="br0">&#91;</span><span class="st0">&quot;start_time&quot;</span><span class="br0">&#93;</span><span class="sy0">.</span><span class="me1">ToString</span><span class="br0">&#40;</span><span class="br0">&#41;</span>, <span class="kw1">out</span> start<span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Int64 execution_time_ticks <span class="sy0">=</span> <span class="br0">&#40;</span>current<span class="sy0">.</span><span class="kw1">Value</span> <span class="sy0">-</span> start<span class="br0">&#41;</span><span class="sy0">.</span><span class="me1">Ticks</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; execution_time_milliseconds <span class="sy0">=</span> <span class="br0">&#40;</span>execution_time_ticks <span class="sy0">*</span> <span class="nu0">1.00</span> <span class="sy0">/</span> TimeSpan<span class="sy0">.</span><span class="me1">TicksPerMillisecond</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; ThreadContext<span class="sy0">.</span><span class="me1">Properties</span><span class="br0">&#91;</span><span class="st0">&quot;execution_time&quot;</span><span class="br0">&#93;</span> <span class="sy0">=</span> execution_time_milliseconds<span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; <span class="co1">/// &lt;summary&gt;Store context-specific start time for sharing across methods (within a thread)&lt;/summary&gt;</span>
&nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">static</span> <span class="kw4">void</span> SetStartTime<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; ThreadContext<span class="sy0">.</span><span class="me1">Properties</span><span class="br0">&#91;</span><span class="st0">&quot;start_time&quot;</span><span class="br0">&#93;</span> <span class="sy0">=</span> DateTime<span class="sy0">.</span><span class="me1">Now</span><span class="sy0">.</span><span class="me1">ToString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using log4net;

[System.Diagnostics.DebuggerStepThrough]
public static class Logging
{
    /// &lt;summary&gt;Log an Informational Message&lt;/summary&gt;
    public static void Info(String message)
    {
        LogManager.GetLogger("root").Info(message);
    }

    /// &lt;summary&gt;Log an Error Message&lt;/summary&gt;
    public static void Error(String message, Exception ex)
    {
        //for errors, use the ErrorLog that will write to a flat file (bufferless) rather than database (buffered)
        LogManager.GetLogger("ErrorLogger").Error(message, ex);
    }

    /// &lt;summary&gt;Insert a parameter to MDC&lt;/summary&gt;
    public static void SetParameter(String name, String value)
    {
        ThreadContext.Properties[name] = value;
    }

    /// &lt;summary&gt;Remove parameter from MDC&lt;/summary&gt;
    public static void RemoveParameter(String name)
    {
        ThreadContext.Properties.Remove(name);
    }

    /// &lt;summary&gt;Add another context to NDC&lt;/summary&gt;
    public static void PushContext(Object obj)
    {
        ThreadContext.Stacks["NDC"].Push(obj.ToString());
    }

    /// &lt;summary&gt;Clear all contexts from NDC&lt;/summary&gt;
    public static void ClearContext()
    {
        ThreadContext.Stacks["NDC"].Clear();
    }

    /// &lt;summary&gt;Remove top context from NDC&lt;/summary&gt;
    public static void PopContext()
    {
        ThreadContext.Stacks["NDC"].Pop();
    }

    /// &lt;summary&gt;Set Execution time parameter (null for zero)&lt;/summary&gt;
    public static void SetExecutionTime(DateTime? current)
    {
        Double execution_time_milliseconds = 0;
        if (current != null)
        {
            DateTime start;
            if (DateTime.TryParse(ThreadContext.Properties["start_time"].ToString(), out start))
            {
                Int64 execution_time_ticks = (current.Value - start).Ticks;
                execution_time_milliseconds = (execution_time_ticks * 1.00 / TimeSpan.TicksPerMillisecond);
            }
        }
        ThreadContext.Properties["execution_time"] = execution_time_milliseconds;
    }

    /// &lt;summary&gt;Store context-specific start time for sharing across methods (within a thread)&lt;/summary&gt;
    public static void SetStartTime()
    {
        ThreadContext.Properties["start_time"] = DateTime.Now.ToString();
    }
}</pre></div></div>

<p>Ok so now we know how we are going to do the logging.  Now, time to go through and add calls to this logging code throughout our application right?  Not exactly.  Lets take a look how post sharp comes in.  We&#8217;ll want to extend the class &#8220;OnMethodBoundaryAspect&#8221; found in PostSharp.Laos.  Use of this class will allow us to weave code into our application at compile time that will execute at various points during method execution (if the class has been tagged with the attribute we are about to create).  For this exercise we are concerned with overriding the OnEntry, OnExit, and OnException methods.  Their purposes ought to be pretty straight forward.  I also added a method to take the method&#8217;s parameter values and build it into a string like &#8220;[param1 = A][param2 = B]&#8221;.  The code for this looks like so:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="csharp"><thead><tr><td colspan="2"  class="head">C#</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
</pre></td><td class="de1"><pre class="de1"><span class="kw1">using</span> <span class="co3">System</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">System.Collections.Generic</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">System.Linq</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">PostSharp.Laos</span><span class="sy0">;</span>
<span class="kw1">using</span> <span class="co3">System.Collections</span><span class="sy0">;</span>
&nbsp;
<span class="br0">&#91;</span>Serializable<span class="br0">&#93;</span>
<span class="br0">&#91;</span><span class="kw5">System.<span class="me1">Diagnostics</span></span><span class="sy0">.</span><span class="me1">DebuggerStepThrough</span><span class="br0">&#93;</span>
<span class="kw1">public</span> <span class="kw4">class</span> LoggableAttribute <span class="sy0">:</span> OnMethodBoundaryAspect
<span class="br0">&#123;</span>
&nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">override</span> <span class="kw4">void</span> OnEntry<span class="br0">&#40;</span>MethodExecutionEventArgs event_args<span class="br0">&#41;</span>
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; Logging<span class="sy0">.</span><span class="me1">SetStartTime</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; Logging<span class="sy0">.</span><span class="me1">SetExecutionTime</span><span class="br0">&#40;</span><span class="kw1">null</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; Logging<span class="sy0">.</span><span class="me1">SetParameter</span><span class="br0">&#40;</span><span class="st0">&quot;method_name&quot;</span>, event_args<span class="sy0">.</span><span class="me1">Method</span><span class="sy0">.</span><span class="me1">Name</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; Logging<span class="sy0">.</span><span class="me1">SetParameter</span><span class="br0">&#40;</span><span class="st0">&quot;class_name&quot;</span>, event_args<span class="sy0">.</span><span class="me1">Instance</span><span class="sy0">.</span><span class="me1">GetType</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">.</span><span class="me1">ToString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">//for analysis, we want to be able to identify individual executions</span>
&nbsp; &nbsp; &nbsp; &nbsp; event_args<span class="sy0">.</span><span class="me1">MethodExecutionTag</span> <span class="sy0">=</span> Guid<span class="sy0">.</span><span class="me1">NewGuid</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; Logging<span class="sy0">.</span><span class="me1">PushContext</span><span class="br0">&#40;</span>event_args<span class="sy0">.</span><span class="me1">MethodExecutionTag</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; Logging<span class="sy0">.</span><span class="me1">SetParameter</span><span class="br0">&#40;</span><span class="st0">&quot;parameters&quot;</span>, ParametersToString<span class="br0">&#40;</span>event_args<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; Logging<span class="sy0">.</span><span class="me1">Info</span><span class="br0">&#40;</span><span class="st0">&quot;Called &quot;</span> <span class="sy0">+</span> event_args<span class="sy0">.</span><span class="me1">Method</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">override</span> <span class="kw4">void</span> OnExit<span class="br0">&#40;</span>MethodExecutionEventArgs event_args<span class="br0">&#41;</span>
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; Logging<span class="sy0">.</span><span class="me1">SetExecutionTime</span><span class="br0">&#40;</span>DateTime<span class="sy0">.</span><span class="me1">Now</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; Logging<span class="sy0">.</span><span class="me1">SetParameter</span><span class="br0">&#40;</span><span class="st0">&quot;parameters&quot;</span>, ParametersToString<span class="br0">&#40;</span>event_args<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; Logging<span class="sy0">.</span><span class="me1">SetParameter</span><span class="br0">&#40;</span><span class="st0">&quot;method_name&quot;</span>, event_args<span class="sy0">.</span><span class="me1">Method</span><span class="sy0">.</span><span class="me1">Name</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; Logging<span class="sy0">.</span><span class="me1">SetParameter</span><span class="br0">&#40;</span><span class="st0">&quot;class_name&quot;</span>, event_args<span class="sy0">.</span><span class="me1">Instance</span><span class="sy0">.</span><span class="me1">GetType</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">.</span><span class="me1">ToString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; Logging<span class="sy0">.</span><span class="me1">Info</span><span class="br0">&#40;</span><span class="st0">&quot;Finished &quot;</span> <span class="sy0">+</span> event_args<span class="sy0">.</span><span class="me1">Method</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; Logging<span class="sy0">.</span><span class="me1">PopContext</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; <span class="kw1">public</span> <span class="kw1">override</span> <span class="kw4">void</span> OnException<span class="br0">&#40;</span>MethodExecutionEventArgs event_args<span class="br0">&#41;</span>
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; Logging<span class="sy0">.</span><span class="me1">SetExecutionTime</span><span class="br0">&#40;</span>DateTime<span class="sy0">.</span><span class="me1">Now</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; Logging<span class="sy0">.</span><span class="me1">SetParameter</span><span class="br0">&#40;</span><span class="st0">&quot;parameters&quot;</span>, ParametersToString<span class="br0">&#40;</span>event_args<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; Logging<span class="sy0">.</span><span class="me1">SetParameter</span><span class="br0">&#40;</span><span class="st0">&quot;method_name&quot;</span>, event_args<span class="sy0">.</span><span class="me1">Method</span><span class="sy0">.</span><span class="me1">Name</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; Logging<span class="sy0">.</span><span class="me1">SetParameter</span><span class="br0">&#40;</span><span class="st0">&quot;class_name&quot;</span>, event_args<span class="sy0">.</span><span class="me1">Instance</span><span class="sy0">.</span><span class="me1">GetType</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">.</span><span class="me1">ToString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; 
&nbsp; &nbsp; &nbsp; &nbsp; Logging<span class="sy0">.</span><span class="me1">Error</span><span class="br0">&#40;</span><span class="st0">&quot;Error Encountered in &quot;</span> <span class="sy0">+</span> event_args<span class="sy0">.</span><span class="me1">Method</span>, event_args<span class="sy0">.</span><span class="me1">Exception</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp;
&nbsp; &nbsp; <span class="co1">//helpers</span>
&nbsp; &nbsp; <span class="kw1">private</span> <span class="kw1">static</span> <span class="kw4">String</span> ParametersToString<span class="br0">&#40;</span>MethodExecutionEventArgs event_args<span class="br0">&#41;</span>
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">String</span> output <span class="sy0">=</span> <span class="st0">&quot;&quot;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">if</span> <span class="br0">&#40;</span>event_args<span class="sy0">.</span><span class="me1">GetReadOnlyArgumentArray</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">!=</span> <span class="kw1">null</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> event_args<span class="sy0">.</span><span class="me1">GetReadOnlyArgumentArray</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">.</span><span class="me1">Length</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; output <span class="sy0">+=</span> <span class="kw4">String</span><span class="sy0">.</span><span class="me1">Format</span><span class="br0">&#40;</span><span class="st0">&quot;[{0} = {1}]&quot;</span>, event_args<span class="sy0">.</span><span class="me1">Method</span><span class="sy0">.</span><span class="me1">GetParameters</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="sy0">.</span><span class="me1">Name</span>, event_args<span class="sy0">.</span><span class="me1">GetReadOnlyArgumentArray</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> output<span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">using System;
using System.Collections.Generic;
using System.Linq;
using PostSharp.Laos;
using System.Collections;

[Serializable]
[System.Diagnostics.DebuggerStepThrough]
public class LoggableAttribute : OnMethodBoundaryAspect
{
    public override void OnEntry(MethodExecutionEventArgs event_args)
    {
        Logging.SetStartTime();
        Logging.SetExecutionTime(null);
        Logging.SetParameter("method_name", event_args.Method.Name);
        Logging.SetParameter("class_name", event_args.Instance.GetType().ToString());

        //for analysis, we want to be able to identify individual executions
        event_args.MethodExecutionTag = Guid.NewGuid();

        Logging.PushContext(event_args.MethodExecutionTag);
        Logging.SetParameter("parameters", ParametersToString(event_args));

        Logging.Info("Called " + event_args.Method);
    }

    public override void OnExit(MethodExecutionEventArgs event_args)
    {
        Logging.SetExecutionTime(DateTime.Now);
        Logging.SetParameter("parameters", ParametersToString(event_args));
        Logging.SetParameter("method_name", event_args.Method.Name);
        Logging.SetParameter("class_name", event_args.Instance.GetType().ToString());
        
        Logging.Info("Finished " + event_args.Method);

        Logging.PopContext();
    }

    public override void OnException(MethodExecutionEventArgs event_args)
    {
        Logging.SetExecutionTime(DateTime.Now);
        Logging.SetParameter("parameters", ParametersToString(event_args));
        Logging.SetParameter("method_name", event_args.Method.Name);
        Logging.SetParameter("class_name", event_args.Instance.GetType().ToString());
        
        Logging.Error("Error Encountered in " + event_args.Method, event_args.Exception);
    }

    //helpers
    private static String ParametersToString(MethodExecutionEventArgs event_args)
    {
        String output = "";
        if (event_args.GetReadOnlyArgumentArray() != null)
        {
            for (int i = 0; i &lt; event_args.GetReadOnlyArgumentArray().Length; i++)
            {
                output += String.Format("[{0} = {1}]", event_args.Method.GetParameters()[i].Name, event_args.GetReadOnlyArgumentArray()[i]);
            }
        }
        return output;
    }
}</pre></div></div>

<p>Pretty simple, considering what it does.  Now that we&#8217;ve gone through all this effort to set things up, we can see where the magic happens.  It seems like a lot of work, but this is where we get the payoff.  Find a controller in your project, such as the default home controller.  And just add your attribute to it:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="csharp"><thead><tr><td colspan="2"  class="head">C#</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="de1"><pre class="de1"><span class="br0">&#91;</span>HandleError<span class="br0">&#93;</span>
<span class="br0">&#91;</span>Loggable<span class="br0">&#93;</span>
<span class="kw1">public</span> <span class="kw4">class</span> HomeController <span class="sy0">:</span> Controller
<span class="br0">&#123;</span>
&nbsp; &nbsp; <span class="kw1">public</span> ActionResult Index<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; ViewData<span class="br0">&#91;</span><span class="st0">&quot;Title&quot;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st0">&quot;Page Title&quot;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; ViewData<span class="br0">&#91;</span><span class="st0">&quot;Message&quot;</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st0">&quot;Hey LessThanDotters!&quot;</span><span class="sy0">;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> View<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">[HandleError]
[Loggable]
public class HomeController : Controller
{
    public ActionResult Index()
    {
        ViewData["Title"] = "Page Title";
        ViewData["Message"] = "Hey LessThanDotters!";

        return View();
    }
}</pre></div></div>

<p>Now, the &#8220;[Loggable]&#8221; attribute is all that you need to add to any class that you want logging to take place on the three method boundaries that we wrote code for (there may be some limitations, but I&#8217;m not aware of them yet).  You can add it on a method-by-method basis as well.  If you want to stop logging a certain class/method, just remove the attribute.  Its&#8217; really that easy.</p>
<p>I&#8217;m sure I will find some problems with this approach eventually (first try and all), and I will update with those as I find them.  Or if anything is immediately apparent, please point it out in the comments!</p>
<p>Sorry this post was so heavy on the code, I just thought it was really cool and wanted to share.  Hopefully it gives you your own ideas for ways to use the PostSharp library.  </p>
<p>Have fun!</p>
<div class='rp4wp-related-posts'>
<h3>Related Posts</h3>
<ul>
<li><div class='rp4wp-related-post-content'>
<a href='/index.php/webdev/webdesigngraphicsstyling/asp-net-mvc-2-release-candidate-2-releas/'>ASP.NET MVC 2 (Release Candidate 2) Released</a><p>ASP.NET MVC 2 RC 2 has been released and is available for download. For those&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-content'>
<a href='/index.php/webdev/serveradmin/msiis/setting-up-sql-server-with-asp-net-mvc/'>Setting up SQL Server with ASP.NET MVC</a><p>If you download ASP.NET MVC from Microsoft, install it and create a MVC website you&hellip;</p></div>
</li>
</ul>
</div>
</div>
				<div class="post-author">
					<div class="userInfo"><h2>About the Author</h2><img class="bioPic" src="http://forum.lessthandot.com/download/file.php?avatar=56_1270084566.jpg" alt="User bio image"/>Alex is a software engineer from southeastern PA, where he lives with a lovely wife and a veritable smorgasbord of pets.  He loves mountain biking, open source software, barbecue and Syracuse basketball.<br style="clear: left" /><div class="bioSoc"><span class="bioSocTitle">Social Sitings</span><a href="http://twitter.com/AlexCuse" title="AlexCuse at Twitter" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_twitter.png" alt="Twitter" /></a><a href="http://www.linkedin.com/in/alexullrich" title="AlexCuse at LinkedIn" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_linkedin.png" alt="LinkedIn" /></a><a href="/index.php/author/alexcuse/feed/" title="Blog RSS feed for AlexCuse" class="bioSocLink"><img src="http://lessthandot.com/images/bdg_rss_icon.png" alt="LTD RSS Feed" /></a></div></div>				</div>
				<div class="post-foot instapaper_ignore">
					<div class="post-tagline">
						<div class="post-foot-views"><label>Article views:</label> 39,143 </div>
						<div class="post-foot-more-posts">
                            <a href="/index.php/author/alexcuse/">Read More Posts by Alex Ullrich</a>
						</div>
					</div>
					<div>
						 
					</div>
					<div class="post-tagline" style="height: auto">
						<span class="social-button-label">Share:</span><a href="https://twitter.com/intent/tweet?url=/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/&text=RT @LessThanDot Blog - Using PostSharp and log4net to Set Up Controller Logging in ASP.net MVC by @AlexCuse" class="twitter-share-button-static" target="_blank"><i></i><span class="label">Tweet</span></a><a href="http://www.linkedin.com/shareArticle?mini=true&url=/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/&title=Using PostSharp and log4net to Set Up Controller Logging in ASP.net MVC&source=/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/" target="_blank" title="Share on LinkedIn" class="svg-button"><img alt="Share on LinkedIn"  src="http://lessthandot.com/images/LinkedIn.svg" /></a><a href="http://www.reddit.com/submit?url=/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/&title=Using PostSharp and log4net to Set Up Controller Logging in ASP.net MVC" target="_blank" title="Submit to Reddit" class="svg-button"><img alt="Submit to Reddit" src="http://lessthandot.com/images/Reddit.svg" /></a><a href="https://www.facebook.com/sharer/sharer.php?u=/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/&quote=Using PostSharp and log4net to Set Up Controller Logging in ASP.net MVC" title="Share on Facebook" target="_blank" class="svg-button"><img alt="Share on Facebook" src="http://lessthandot.com/images/Facebook.svg" /></a> <a href="http://www.instapaper.com/hello2?url=/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/&title=Using PostSharp and log4net to Set Up Controller Logging in ASP.net MVC" class="instapaper_button">Instapaper</a>					</div>			
				</div>
				<div class="comments-area instapaper_ignore">
	<h4 class="comments-title">
		16 Comments	</h4>
			<ol class="comments-list">
					<li class="comment byuser comment-author-SQLDenis even thread-even depth-1" id="comment-1309">
				<div id="div-comment-1309" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/7a49149d4d4b9242348b95a2c561c20d?s=64&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/7a49149d4d4b9242348b95a2c561c20d?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">SQLDenis</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/#comment-1309">
			June 24, 2009 at 6:52 am</a>		</div>

		<p>I think the IP address 999.99.443.206 is wrong  🙂</p>
<p>Just kidding, great post, I will have to try it out&#8230;why did you not use PostgreSQL it has the timestamp dataype which goes down all the way to 1 microsecond</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/?replytocom=1309#respond' onclick='return addComment.moveForm( "div-comment-1309", "1309", "respond", "409" )' aria-label='Reply to SQLDenis'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-alexcuse bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-1310">
				<div id="div-comment-1310" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://2.gravatar.com/avatar/5e8bfdc77e52098a1ab2ddd1cd2a176f?s=64&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/5e8bfdc77e52098a1ab2ddd1cd2a176f?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Alex Ullrich</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/#comment-1310">
			June 24, 2009 at 6:58 am</a>		</div>

		<p>Thanks Denis.  I have a free MySQL database with my web host, figured I&#8217;d use it.  I&#8217;ve actually gotten quite fond of it (especially ON DUPLICATE KEY UPDATE), but it&#8217;ll never take SQL Server&#8217;s place in my heart 🙂</p>
<p>I&#8217;ve never used PostgreSQL but I suppose I should give it a look one of these days.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/?replytocom=1310#respond' onclick='return addComment.moveForm( "div-comment-1310", "1310", "respond", "409" )' aria-label='Reply to Alex Ullrich'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1311">
				<div id="div-comment-1311" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/1ec55b4818a46a8c991a157258949fb3?s=64&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/1ec55b4818a46a8c991a157258949fb3?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn"><a href='http://www.loggershop.co.uk/' rel='external nofollow' class='url'>David</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/#comment-1311">
			June 25, 2009 at 12:48 am</a>		</div>

		<p>When I made games using PHP and mysql I would store milliseconds as a separate column, then string that together with DATETIME to give the user his score. I would order these separately on the page using a few IF statements so it looked right.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/?replytocom=1311#respond' onclick='return addComment.moveForm( "div-comment-1311", "1311", "respond", "409" )' aria-label='Reply to David'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-alexcuse bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-1314">
				<div id="div-comment-1314" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://2.gravatar.com/avatar/5e8bfdc77e52098a1ab2ddd1cd2a176f?s=64&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/5e8bfdc77e52098a1ab2ddd1cd2a176f?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Alex Ullrich</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/#comment-1314">
			July 20, 2009 at 11:27 am</a>		</div>

		<p>I saw this on the twitters today:  <a href="http://code.google.com/p/postsharp-user-plugins/wiki/Log4PostSharp" rel="nofollow">http://code.google.com/p/postsharp-user-plugins/wiki/Log4PostSharp</a></p>
<p>Probably a better alternative in most cases (not sure for this one, since I needed to manually calculate execution time within aspect code)</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/?replytocom=1314#respond' onclick='return addComment.moveForm( "div-comment-1314", "1314", "respond", "409" )' aria-label='Reply to Alex Ullrich'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-1306">
				<div id="div-comment-1306" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/3fb9821b33fe27fe8624114f99e6c3cc?s=64&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/3fb9821b33fe27fe8624114f99e6c3cc?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Jon R</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/#comment-1306">
			September 29, 2009 at 3:26 pm</a>		</div>

		<p>Brill 🙂</p>
<p>One point though. If I put the Loggable attribute on my MVC controller base class, I get:</p>
<p>Called Void OnActionExecuting(System.Web.Mvc.ActionExecutingContext)</p>
<p>rather than the Action method name&#8230;</p>
<p>Any ideas why this might be?</p>
<p>Cheers,<br />
Jon</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/?replytocom=1306#respond' onclick='return addComment.moveForm( "div-comment-1306", "1306", "respond", "409" )' aria-label='Reply to Jon R'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1315">
				<div id="div-comment-1315" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/02d9d5ccb3f259b03a411bf8df9a19fc?s=64&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/02d9d5ccb3f259b03a411bf8df9a19fc?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn"><a href='http://msprogrammer.serviciipeweb.ro/2010/04/19/logging-and-instrumentation/' rel='external nofollow' class='url'>Andrei Ignat</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/#comment-1315">
			May 2, 2010 at 7:27 am</a>		</div>

		<p>do you use log4postsharp ?</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/?replytocom=1315#respond' onclick='return addComment.moveForm( "div-comment-1315", "1315", "respond", "409" )' aria-label='Reply to Andrei Ignat'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-alexcuse bypostauthor even thread-even depth-1" id="comment-1308">
				<div id="div-comment-1308" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://2.gravatar.com/avatar/5e8bfdc77e52098a1ab2ddd1cd2a176f?s=64&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/5e8bfdc77e52098a1ab2ddd1cd2a176f?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Alex Ullrich</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/#comment-1308">
			May 13, 2010 at 3:02 pm</a>		</div>

		<p>Andrei, I haven&#8217;t used log4postsharp, but it does look very promising.  If I need this again, I plan to use it (assuming I can get it running with PostSharp 1.5 / mono)</p>
<p>Jon, sorry I didn&#8217;t see this comment but I&#8217;m not sure what could cause your problem with the base controller.  Take it you weren&#8217;t overriding OnActionExecuting in your class 😉  If I get a chance I&#8217;ll look into this.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/?replytocom=1308#respond' onclick='return addComment.moveForm( "div-comment-1308", "1308", "respond", "409" )' aria-label='Reply to Alex Ullrich'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1307">
				<div id="div-comment-1307" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/c425753d9240d9795d580ae7fb594716?s=64&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/c425753d9240d9795d580ae7fb594716?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Anil</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/#comment-1307">
			June 21, 2010 at 4:04 am</a>		</div>

		<p>Hello Alex,<br />
Thanks for such a grate example. I have implemented your code in my application and it works well, one thing though, it is taking much time to insert record in db as around 2-3 thousands records enter during login process and more for other events. Will you please tell me how can i make it faster. Actually  I m implementing it in MVC. My problem is i want to create a log of what actions are slowing us down for the whole site and let those events build up for 2-3 days.  Then group by action, and get an average time to process, and see what the major issues are in the application. Please help<br />
 me on this</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/?replytocom=1307#respond' onclick='return addComment.moveForm( "div-comment-1307", "1307", "respond", "409" )' aria-label='Reply to Anil'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-alexcuse bypostauthor even thread-even depth-1" id="comment-1312">
				<div id="div-comment-1312" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://2.gravatar.com/avatar/5e8bfdc77e52098a1ab2ddd1cd2a176f?s=64&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/5e8bfdc77e52098a1ab2ddd1cd2a176f?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Alex Ullrich</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/#comment-1312">
			October 5, 2010 at 8:52 am</a>		</div>

		<p>Hmm, I would start by trying to increase the buffer size log4net uses (this will minimize round trips to the database)</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/?replytocom=1312#respond' onclick='return addComment.moveForm( "div-comment-1312", "1312", "respond", "409" )' aria-label='Reply to Alex Ullrich'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1316">
				<div id="div-comment-1316" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/4b4360b4b0e026e8d973859d65893116?s=64&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/4b4360b4b0e026e8d973859d65893116?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn"><a href='http://www.thoughtresults.com/' rel='external nofollow' class='url'>Saeed Neamati</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/#comment-1316">
			December 29, 2011 at 1:51 am</a>		</div>

		<p>What I see here, is tons of logging code lines. This I don&#8217;t think is a good practice.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/?replytocom=1316#respond' onclick='return addComment.moveForm( "div-comment-1316", "1316", "respond", "409" )' aria-label='Reply to Saeed Neamati'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-alexcuse bypostauthor even thread-even depth-1" id="comment-1317">
				<div id="div-comment-1317" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://2.gravatar.com/avatar/5e8bfdc77e52098a1ab2ddd1cd2a176f?s=64&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/5e8bfdc77e52098a1ab2ddd1cd2a176f?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Alex Ullrich</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/#comment-1317">
			December 29, 2011 at 3:36 am</a>		</div>

		<p>I think you may be missing the point Saeed.  It seems like a lot of code (though not a lot more than it&#8217;d take to get something you can explicitly call) but it saves you from writing even a single method call in places you need logging.  It also makes it easy to implement wholesale changes in your logging behavior without needing to change method signatures all over the place.  In large systems, this benefit is not trivial.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/?replytocom=1317#respond' onclick='return addComment.moveForm( "div-comment-1317", "1317", "respond", "409" )' aria-label='Reply to Alex Ullrich'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1313">
				<div id="div-comment-1313" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://2.gravatar.com/avatar/29ffad19814bc3f895aedc52c40c1ecf?s=64&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/29ffad19814bc3f895aedc52c40c1ecf?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">James</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/#comment-1313">
			November 21, 2012 at 8:57 am</a>		</div>

		<p>Great tutorial.  Curious if you have an updated code base for the latest release?  Code is throwing errors for latest build of PostSharp.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/?replytocom=1313#respond' onclick='return addComment.moveForm( "div-comment-1313", "1313", "respond", "409" )' aria-label='Reply to James'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-652134">
				<div id="div-comment-652134" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/a4de7de637cd46576974ca1732075ac5?s=64&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/a4de7de637cd46576974ca1732075ac5?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Rajeev Gupta</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/#comment-652134">
			April 25, 2014 at 6:29 am</a>		</div>

		<p>Can you please let me know will this work in case of my application run under the load balancer environment. I actually want log all errors in file.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/?replytocom=652134#respond' onclick='return addComment.moveForm( "div-comment-652134", "652134", "respond", "409" )' aria-label='Reply to Rajeev Gupta'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-alexcuse bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-652545">
				<div id="div-comment-652545" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://2.gravatar.com/avatar/5e8bfdc77e52098a1ab2ddd1cd2a176f?s=64&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/5e8bfdc77e52098a1ab2ddd1cd2a176f?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Alex Ullrich</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/#comment-652545">
			April 25, 2014 at 7:45 am</a>		</div>

		<p>I don&#8217;t see why it wouldn&#8217;t &#8211; as mentioned above this is not going to work with the latest version of PostSharp though, and I am not going to update because it is not free anymore.  I&#8217;m fairly sure the approach with new version would be similar.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/?replytocom=652545#respond' onclick='return addComment.moveForm( "div-comment-652545", "652545", "respond", "409" )' aria-label='Reply to Alex Ullrich'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 parent" id="comment-3903077">
				<div id="div-comment-3903077" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/f5f59a9e3b4efd4142bfef3fcd179144?s=64&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/f5f59a9e3b4efd4142bfef3fcd179144?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Rob Bills</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/#comment-3903077">
			March 6, 2015 at 8:25 am</a>		</div>

		<p>Great article, very helpful. It may help some to note that more recent versions of MySQL (5.6.4+ I think) now do support milliseconds. Change your date creation to Date(3) and MySQL will store the date as &#8216;2015-01-01 13:45:30.258&#8217;. It has to be when the table is created, you can&#8217;t do it with ALTER TABLE&#8230;</p>
<p>We&#8217;re already having success with log4net and MySQL separately.  Hadn&#8217;t really had the cycles to try combining them yet&#8230;</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/?replytocom=3903077#respond' onclick='return addComment.moveForm( "div-comment-3903077", "3903077", "respond", "409" )' aria-label='Reply to Rob Bills'>Reply</a></div>
				</div>
		<ol class="children">
		<li class="comment odd alt depth-2" id="comment-3903090">
				<div id="div-comment-3903090" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/f5f59a9e3b4efd4142bfef3fcd179144?s=64&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/f5f59a9e3b4efd4142bfef3fcd179144?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Rob Bills</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/#comment-3903090">
			March 6, 2015 at 8:27 am</a>		</div>

		<p>fat-fingered, that should have been datetime(3)<br />
&#8230;.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/?replytocom=3903090#respond' onclick='return addComment.moveForm( "div-comment-3903090", "3903090", "respond", "409" )' aria-label='Reply to Rob Bills'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		</ol>
						<div id="respond" class="comment-respond">
			<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/index.php/webdev/serverprogramming/using-postsharp-and-log4net-to-set-up-co/#respond" style="display:none;">Cancel reply</a></small></h3>				<form action="/wp-comments-post.php" method="post" id="commentform" class="comment-form">
					<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" aria-required='true' required='required' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" maxlength="100" aria-describedby="email-notes" aria-required='true' required='required' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="text" value="" size="30" maxlength="200" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='409' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><input type="hidden" id="killer_value" name="killer_value" value="069059b7ef840f0c74a814ec9237b6ec"/><noscript>Sorry, but you are required to use a javascript enabled brower to comment here.</noscript>				</form>
					</div><!-- #respond -->
		</div>			</div>
				<br style="clear: both;" />
</div>
		</div>
		<div id="page-footer">
			<div id="botnav"><a href="http://lessthandot.com/" title="LessThanDot Launchpad">Launchpad</a> | <a href="http://lessthandot.com/account.php" title="Your Account Settings">My Account</a> | <a href="http://lessthandot.com/statistics.php" title="Statistics">Statistics</a> | <a href="http://lessthandot.com/donate.php" title="Donate">Donate</a> | <a href="http://lessthandot.com/contactus.php" title="Contact Us">Contact Us</a> | <a href="http://lessthandot.com/aboutus.php" title="About the LessThanDot Team">&copy;2008 - 2019 LessThanDot, LLC</a></div>

		<script type='text/javascript'>
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-4471405-1']);
		_gaq.push(['_trackPageview']);
		_gaq.push(['_setCustomVar', 1, 'Environment', 'lessthandot.com', 3]);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	  </script>			<div class="validator"><a href="http://validator.w3.org/check?uri=referer">Valid XHTML</a> | <a href="http://jigsaw.w3.org/css-validator/check/referer" title="Validate the CSS for this page at the W3C website">Valid CSS</a> | 2018-11-11 15:52</div>
		</div>
	</div>
</div>
<!-- <script type="text/javascript" src="http://apis.google.com/js/plusone.js"></script> -->
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.6.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var spam_destroyer = {"key":"159ff9dcc225580310c2de238cdd1f1a","lifetime":"3600","limit":"1552765972"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/plugins/spam-destroyer/kill.js?ver=1.2'></script>
</body>
</html>
