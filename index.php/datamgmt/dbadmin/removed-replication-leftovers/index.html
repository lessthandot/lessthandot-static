<!DOCTYPE html>
<html lang="en-US">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
		<link rel="shortcut icon" href="http://lessthandot.com/favicon.ico" type="image/vnd.microsoft.icon" />
	<title>Less Than Dot - Blog -   Removed Replication – rowguid added back</title>
	<meta prefix="og: http://ogp.me/ns#" property="og:title" content="Less Than Dot - Blog -   Removed Replication – rowguid added back" />
	<meta prefix="og: http://ogp.me/ns#" property="og:type" content="article" />
	<meta prefix="og: http://ogp.me/ns#" property="og:url" content="/index.php/datamgmt/dbadmin/removed-replication-leftovers/" />
		<meta prefix="og: http://ogp.me/ns#" property="og:image" content="http://lessthandot.com/images/logo_prod.png" />
	<meta prefix="og: http://ogp.me/ns#" property="og:type" content="article" />
	<meta prefix="og: http://ogp.me/ns#" property="og:site_name" content="LessThanDot" />
	<meta prefix="og: http://ogp.me/ns#" property="og:description" content="When replication features are used in a database, tables that are part of the publications may be altered.  In particular, Merge and Transactional Replication require either a Primary Key or UNIQUEIDENTIFIER column in order to function correctly.  In or&hellip;" />
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/index.php/feed/" />
	<link rel="alternate" type="application/atom+xml" title="Atom" href="/index.php/feed/atom/" />

	<!-- this page is the canonical URL -->	
	<link rel="stylesheet" href="/wp-content/themes/lessthandot2009/style.css" type="text/css" />
	<link rel="stylesheet" href="http://lessthandot.com/includes/allsite.css" type="text/css" />
	<link rel="stylesheet" href="http://lessthandot.com/includes/allsiteprint.css" media="print" type="text/css" />

	<link rel='dns-prefetch' href='//ajax.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="LessthanDot &raquo; Removed Replication – rowguid added back Comments Feed" href="/index.php/datamgmt/dbadmin/removed-replication-leftovers/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.1"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='bwp-syntax-css'  href='/wp-content/plugins/better-wordpress-syntax-based-on-geshi/css/bwp-syntax-global.css?ver=4.6.1' type='text/css' media='all' />
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-content/plugins/better-wordpress-syntax-based-on-geshi/js/bwp-syntax.js?ver=4.6.1'></script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='SSMS Add-in for Plan Explorer Update' href='/index.php/datamgmt/dbadmin/mssqlserveradmin/ssms-add-in-for-plan/' />
<link rel='next' title='Future, Career and Success – BlueMetal Architects' href='/index.php/itprofessionals/professionaldevelopment/future-career-and-success-bluemetal/' />
<meta name="generator" content="WordPress 4.6.1" />
<link rel="canonical" href="/index.php/datamgmt/dbadmin/removed-replication-leftovers/" />
<link rel='shortlink' href='/?p=1760' />
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Findex.php%2Fdatamgmt%2Fdbadmin%2Fremoved-replication-leftovers%2F" />
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Findex.php%2Fdatamgmt%2Fdbadmin%2Fremoved-replication-leftovers%2F&#038;format=xml" />
<style type='text/css'>.rp4wp-related-posts ul{width:100%;padding:0;margin:0;float:left;}
.rp4wp-related-posts ul>li{list-style:none;padding:0;margin:0;padding-bottom:20px;clear:both;}
.rp4wp-related-posts ul>li>p{margin:0;padding:0;}
.rp4wp-related-post-image{width:35%;padding-right:25px;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;float:left;}</style>
	<script src="http://lessthandot.com/includes/allsite.js" type="text/javascript" ></script>
</head>
<body>
<div id="contain"><div id="subcontain"><div id="ttl"><div id="hdr"><div id="snav"><a href="http://lessthandot.com/login.php?backtrack=/index.php/datamgmt/dbadmin/removed-replication-leftovers/?">Member Login</a>
</div><a href="http://lessthandot.com/" title="LessThanDot Launchpad" id="logoc"><img src="http://lessthandot.com/images/logo_prod.png" alt="LessThanDot Site Logo" border="0" /></a><h1>LessThanDot</h1><div class="pgsttl">A decade of helpful technical content</div></div><div id="nav">
<ul>
<li><a href="http://lessthandot.com/" title="LessThanDot Launchpad" id="h" ><span>Launchpad</span></a></li>
<li class="cur"><a href="/" title="LessThanDot Blogs" id="b" ><span>Blogs</span></a></li>
<li><a href="http://forum.lessthandot.com/" title="LessThanDot Community Forums" id="f" ><span>Forum</span></a></li>
<li><a href="http://wiki.lessthandot.com/" title="LessThanDot Wiki Articles" id="w" ><span>Wiki</span></a></li>
<li><a href="http://sqlcop.lessthandot.com/" title="LessThanDot SQLCop" id="a" ><span>SQLCop</span></a></li>
<li><a href="http://lessthandot.com/account.php" title="Your Account Settings" id="r"  class="l_ie"><span>My Account</span></a></li></ul></div>
</div><div id="content">
<div id="fac"><div id="fa">
		<p>Less Than Dot is a community of passionate IT professionals and enthusiasts dedicated to sharing technical knowledge, experience, and assistance. Inside you will find reference materials, interesting technical discussions, and expert tips and commentary.</p></div></div><div class="content-sidebar">
	<div id="social" class="sdsec">
		<h2>LTD Social Sitings</h2>
		<div>
		<a id="social_twitter" href="http://twitter.com/LessThanDot/" title="Follow us on Twitter" ><img src="http://lessthandot.com/images/bdg_twitter.png" alt="Lessthandot twitter"/></a> 
		<a href="http://www.linkedin.com/groups?home=&amp;gid=113440" title="Join us on LinkedIn" ><img src="http://lessthandot.com/images/bdg_linkedin.png" alt="Lessthandot Linkedin" /></a> 
		<a href="http://www.facebook.com/group.php?gid=19330511063" title="Join us on Facebook" ><img src="http://lessthandot.com/images/bdg_facebook.png" alt="Lessthandot facebook"/></a> 
		<a href="http://lessthandot.com/rss.php" title="LessThanDot News Feed" ><img src="http://lessthandot.com/images/bdg_rss_icon.png" alt="Lessthandot rss"/></a> 
		</div>
		<p><em>Note: Watch for social icons on posts by your favorite authors to follow their postings on these and other social sites.</em></p>
	</div><div class="content-sidebar-section">
<h2>Tag cloud</h2>
	<p class="tag-cloud">
		<a href='/index.php/tag/net/' class='tag-link-245 tag-link-position-1' title='21 topics' style='font-size: 8.9565217391304pt;'>.net</a> <a href='/index.php/tag/asp-net/' class='tag-link-168 tag-link-position-2' title='21 topics' style='font-size: 8.9565217391304pt;'>asp.net</a> <a href='/index.php/tag/azure-2/' class='tag-link-321 tag-link-position-3' title='29 topics' style='font-size: 10.173913043478pt;'>azure</a> <a href='/index.php/tag/book/' class='tag-link-130 tag-link-position-4' title='26 topics' style='font-size: 9.7391304347826pt;'>book</a> <a href='/index.php/tag/business-intelligence-2/' class='tag-link-256 tag-link-position-5' title='30 topics' style='font-size: 10.260869565217pt;'>business intelligence</a> <a href='/index.php/tag/c/' class='tag-link-138 tag-link-position-6' title='40 topics' style='font-size: 11.304347826087pt;'>c#</a> <a href='/index.php/tag/database/' class='tag-link-134 tag-link-position-7' title='31 topics' style='font-size: 10.434782608696pt;'>database</a> <a href='/index.php/tag/excel/' class='tag-link-155 tag-link-position-8' title='16 topics' style='font-size: 8pt;'>excel</a> <a href='/index.php/tag/gotcha/' class='tag-link-240 tag-link-position-9' title='19 topics' style='font-size: 8.6086956521739pt;'>gotcha</a> <a href='/index.php/tag/how-to/' class='tag-link-272 tag-link-position-10' title='44 topics' style='font-size: 11.652173913043pt;'>how to</a> <a href='/index.php/tag/mongodb/' class='tag-link-765 tag-link-position-11' title='17 topics' style='font-size: 8.2608695652174pt;'>mongodb</a> <a href='/index.php/tag/nosql/' class='tag-link-775 tag-link-position-12' title='18 topics' style='font-size: 8.4347826086957pt;'>nosql</a> <a href='/index.php/tag/performance/' class='tag-link-179 tag-link-position-13' title='26 topics' style='font-size: 9.7391304347826pt;'>performance</a> <a href='/index.php/tag/security-2/' class='tag-link-398 tag-link-position-14' title='25 topics' style='font-size: 9.5652173913043pt;'>security</a> <a href='/index.php/tag/sql/' class='tag-link-132 tag-link-position-15' title='42 topics' style='font-size: 11.478260869565pt;'>sql</a> <a href='/index.php/tag/sql-advent-2012/' class='tag-link-1416 tag-link-position-16' title='18 topics' style='font-size: 8.4347826086957pt;'>sql advent 2012</a> <a href='/index.php/tag/sql-friday/' class='tag-link-377 tag-link-position-17' title='18 topics' style='font-size: 8.4347826086957pt;'>sql friday</a> <a href='/index.php/tag/sql-server/' class='tag-link-154 tag-link-position-18' title='145 topics' style='font-size: 16.086956521739pt;'>sql server</a> <a href='/index.php/tag/sql-server-2000/' class='tag-link-366 tag-link-position-19' title='45 topics' style='font-size: 11.739130434783pt;'>sql server 2000</a> <a href='/index.php/tag/sql-server-2005/' class='tag-link-327 tag-link-position-20' title='118 topics' style='font-size: 15.391304347826pt;'>sql server 2005</a> <a href='/index.php/tag/sql-server-2008/' class='tag-link-152 tag-link-position-21' title='237 topics' style='font-size: 18pt;'>sql server 2008</a> <a href='/index.php/tag/sql-server-2008-r2/' class='tag-link-548 tag-link-position-22' title='38 topics' style='font-size: 11.130434782609pt;'>sql server 2008 r2</a> <a href='/index.php/tag/sql-server-2012/' class='tag-link-1161 tag-link-position-23' title='76 topics' style='font-size: 13.739130434783pt;'>sql server 2012</a> <a href='/index.php/tag/ssis-2/' class='tag-link-501 tag-link-position-24' title='52 topics' style='font-size: 12.260869565217pt;'>ssis</a> <a href='/index.php/tag/ssms/' class='tag-link-640 tag-link-position-25' title='18 topics' style='font-size: 8.4347826086957pt;'>ssms</a> <a href='/index.php/tag/ssrs-2/' class='tag-link-557 tag-link-position-26' title='27 topics' style='font-size: 9.9130434782609pt;'>ssrs</a> <a href='/index.php/tag/syndicated/' class='tag-link-1407 tag-link-position-27' title='67 topics' style='font-size: 13.217391304348pt;'>syndicated</a> <a href='/index.php/tag/t-sql/' class='tag-link-185 tag-link-position-28' title='26 topics' style='font-size: 9.7391304347826pt;'>t-sql</a> <a href='/index.php/tag/tip/' class='tag-link-194 tag-link-position-29' title='46 topics' style='font-size: 11.826086956522pt;'>tip</a> <a href='/index.php/tag/unit-testing/' class='tag-link-162 tag-link-position-30' title='17 topics' style='font-size: 8.2608695652174pt;'>unit testing</a>	</p>
</div>		<div class="content-sidebar-section">
		<h2>Authors</h2>
			<ul class="author-list dimmed">
				<li><a href="/index.php/author/SQLDenis/" title="Posts by SQLDenis">SQLDenis</a> <a href="/index.php/author/SQLDenis/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (597)</li><li><a href="/index.php/author/onpnt/" title="Posts by Ted Krueger (onpnt)">Ted Krueger (onpnt)</a> <a href="/index.php/author/onpnt/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (355)</li><li><a href="/index.php/author/grrlgeek/" title="Posts by Jes Borland">Jes Borland</a> <a href="/index.php/author/grrlgeek/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (202)</li><li><a href="/index.php/author/tarwn/" title="Posts by Eli Weinstock-Herman (tarwn)">Eli Weinstock-Herman (tarwn)</a> <a href="/index.php/author/tarwn/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (190)</li><li><a href="/index.php/author/koenverbeeck/" title="Posts by Koen Verbeeck">Koen Verbeeck</a> <a href="/index.php/author/koenverbeeck/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (100)</li><li><a href="/index.php/author/alexcuse/" title="Posts by Alex Ullrich">Alex Ullrich</a> <a href="/index.php/author/alexcuse/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (55)</li><li><a href="/index.php/author/gmmastros/" title="Posts by George Mastros (gmmastros)">George Mastros (gmmastros)</a> <a href="/index.php/author/gmmastros/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (45)</li><li><a href="/index.php/author/axel8s/" title="Posts by Axel Achten (axel8s)">Axel Achten (axel8s)</a> <a href="/index.php/author/axel8s/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (28)</li><li><a href="/index.php/author/naomi/" title="Posts by Naomi Nosonovsky">Naomi Nosonovsky</a> <a href="/index.php/author/naomi/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (27)</li><li><a href="/index.php/author/thirster42/" title="Posts by David Forck (thirster42)">David Forck (thirster42)</a> <a href="/index.php/author/thirster42/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (24)</li><li><a href="/index.php/author/chopstik/" title="Posts by chopstik">chopstik</a> <a href="/index.php/author/chopstik/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (20)</li><li><a href="/index.php/author/kconan/" title="Posts by Kevin Conan">Kevin Conan</a> <a href="/index.php/author/kconan/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (18)</li><li><a href="/index.php/author/robearl/" title="Posts by Rob Earl">Rob Earl</a> <a href="/index.php/author/robearl/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (14)</li><li><a href="/index.php/author/thatrickguy/" title="Posts by ThatRickGuy">ThatRickGuy</a> <a href="/index.php/author/thatrickguy/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (12)</li><li><a href="/index.php/author/sqlarcher/" title="Posts by SQLArcher">SQLArcher</a> <a href="/index.php/author/sqlarcher/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (11)</li>                <li><a href="http://lessthandot.com/Stats/BlogAuthors.php">More...</a></li>
			</ul>
		</div>
				<div class="content-sidebar-section">
		<h2>Categories</h2>
			<ul class="categories-list">
					<li class="cat-item cat-item-10"><a href="/index.php/category/all/" >All Blogs</a>
</li>
	<li class="cat-item cat-item-5"><a href="/index.php/category/architect/" >Architecture, Design and Strategy</a>
</li>
	<li class="cat-item cat-item-1759"><a href="/index.php/category/artificial-intelligence/" >Artificial Intelligence</a>
</li>
	<li class="cat-item cat-item-6"><a href="/index.php/category/datamgmt/" >Data Management</a>
</li>
	<li class="cat-item cat-item-7"><a href="/index.php/category/desktopdev/" >Desktop Developer</a>
</li>
	<li class="cat-item cat-item-8"><a href="/index.php/category/enterprisedev/" >Enterprise Developer</a>
</li>
	<li class="cat-item cat-item-11"><a href="/index.php/category/itprofessionals/" >IT Professionals</a>
</li>
	<li class="cat-item cat-item-12"><a href="/index.php/category/itstudents/" >IT Students and Researchers</a>
</li>
	<li class="cat-item cat-item-1743"><a href="/index.php/category/management/" >Management</a>
</li>
	<li class="cat-item cat-item-9"><a href="/index.php/category/sysadmins/" >System Admins</a>
</li>
	<li class="cat-item cat-item-1"><a href="/index.php/category/uncategorized/" >Uncategorized</a>
</li>
	<li class="cat-item cat-item-4"><a href="/index.php/category/webdev/" >Web Developer</a>
</li>
			</ul>
		</div>
		</div><div class="content-main">
				<div class="post-navigation">
				<div class="post-navigation-forward"><a href="/index.php/itprofessionals/professionaldevelopment/future-career-and-success-bluemetal/" rel="next">Future, Career and Success – BlueMetal Architects</a> &raquo; </div>
				<div class="post-navigation-back">&laquo; <a href="/index.php/datamgmt/dbadmin/mssqlserveradmin/ssms-add-in-for-plan/" rel="prev">SSMS Add-in for Plan Explorer Update</a></div>
			</div>
			<div class="post-area instapaper_body">
				<div class="post-title-line">
										<h1 class="instapaper_ignore"><a href="/index.php/datamgmt/dbadmin/removed-replication-leftovers/" class="post-title">Removed Replication – rowguid added back</a></h1>
					<div class="post-byline">by <a href="/index.php/author/onpnt/" title="Posts by Ted Krueger (onpnt)" rel="author">Ted Krueger (onpnt)</a> on October 18, 2012 in category <a href="/index.php/category/datamgmt/dbadmin/" rel="category tag">Database Administration</a> <a href="/index.php/category/datamgmt/dbprogramming/mssqlserver/" rel="category tag">Microsoft SQL Server</a>. Article views: 12,169 </div>
				</div>
				<div class="post-tagline"><a href="https://twitter.com/intent/tweet?url=/index.php/datamgmt/dbadmin/removed-replication-leftovers/&text=RT @LessThanDot Blog - Removed Replication &ndash; rowguid added back by @onpnt" class="twitter-share-button-static" target="_blank"><i></i><span class="label">Tweet</span></a><a href="http://www.linkedin.com/shareArticle?mini=true&url=/index.php/datamgmt/dbadmin/removed-replication-leftovers/&title=Removed Replication &ndash; rowguid added back&source=/index.php/datamgmt/dbadmin/removed-replication-leftovers/" target="_blank" title="Share on LinkedIn" class="svg-button"><img alt="Share on LinkedIn"  src="http://lessthandot.com/images/LinkedIn.svg" /></a><a href="http://www.reddit.com/submit?url=/index.php/datamgmt/dbadmin/removed-replication-leftovers/&title=Removed Replication &ndash; rowguid added back" target="_blank" title="Submit to Reddit" class="svg-button"><img alt="Submit to Reddit" src="http://lessthandot.com/images/Reddit.svg" /></a><a href="https://www.facebook.com/sharer/sharer.php?u=/index.php/datamgmt/dbadmin/removed-replication-leftovers/&quote=Removed Replication &ndash; rowguid added back" title="Share on Facebook" target="_blank" class="svg-button"><img alt="Share on Facebook" src="http://lessthandot.com/images/Facebook.svg" /></a> <a href="http://www.instapaper.com/hello2?url=/index.php/datamgmt/dbadmin/removed-replication-leftovers/&title=Removed Replication &ndash; rowguid added back" class="instapaper_button">Instapaper</a></div>

				<div class="post-content"><p>When replication features are used in a database, tables that are part of the publications may be altered.  In particular, Merge and Transactional Replication require either a Primary Key or UNIQUEIDENTIFIER column in order to function correctly.  In order to manage a change capture -not to be confused with Change Data Capture (CDC) &#8211;  a unique value is required for every row in a table so replication knows what changes to replicate.   Indexing these columns is a highly recommended practice as replication relies heavily on reading data from the tables that are being replicated.  The execution plans that are generated from those reads should be as optimal as possible.  </p>
<p>Unfortunately, those alterations to tables can inadvertently become a problem.  What happens when a database requires an upgrade, a new deployment, or replication is removed?  Alterations to the tables can cause difficulties, and it is important to understand why, and what methods exist to circumvent this problem.</p>
<p><strong>Merge Replication and the GUID column</strong></p>
<p>With Merge Replication, each table that is part of a publication requires a UNIQUEIDENTIFIER column.  This UNIQUEIDENTIFIER column can be included in your table definition. If such a column does not exist for a table, when replication is configured a new column named rowguid will be added to the table.  Transactional Replication follows the same principle but requires a unique primary key column.  Again, if one is does not already exist for a table, you can create one as a surrogate key in order to replicate the table.  If Merge Replication is removed, or the database is backed up or migrated, the columns will persist in the table.  If the schema of the table is part of a source control that was pulled from the database, the columns will be defined in source control.  However, if sp_removedbreplication is executed, or if Merge Replication is manually removed via SSMS tools, those columns that were automatically created for Merge Replication, are also removed &#8211; unless they have been indexed.  In addition, if the columns were placed in the tables manually after replication was removed but code referenced them as a method to combat this problem, they will have a default constraint such as NEWSEQUENTIALID().  </p>
<p>For example, take a table named MergeMe in database QTuner.</p>
<p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
</pre></td><td class="de1"><pre class="de1"><span class="kw1">CREATE</span> <span class="kw1">TABLE</span> MergeMe <span class="br0">&#40;</span>CUSTID <span class="kw1">INT</span> <span class="kw1">IDENTITY</span><span class="br0">&#40;</span><span class="nu0">1</span>,<span class="nu0">1</span><span class="br0">&#41;</span> <span class="kw1">PRIMARY</span> <span class="kw1">KEY</span>, CUSTNAME <span class="kw1">NVARCHAR</span><span class="br0">&#40;</span><span class="nu0">50</span><span class="br0">&#41;</span>, CUSTADDR <span class="kw1">NVARCHAR</span><span class="br0">&#40;</span><span class="nu0">50</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
GO</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">CREATE TABLE MergeMe (CUSTID INT IDENTITY(1,1) PRIMARY KEY, CUSTNAME NVARCHAR(50), CUSTADDR NVARCHAR(50))
GO</pre></div></div>

</p>
<p>This table consists of a primary key and does not require any additional changes to be used in transactional replication.  However, in a Merge Replication setup, this table would require a UNIQUEIDENTIFIER column.  If you run the create publication wizard, you are warned about this directly after selecting the table as an article</p>
<p>
<div class="image_block"><a href="/wp-content/uploads/blogs/DataMgmt/leftover_1.gif?mtime=1350479616"><img alt="" src="/wp-content/uploads/blogs/DataMgmt/leftover_1.gif?mtime=1350479616" width="504" height="289" /></a></div>
</p>
<p>After the publication is created, review the MergeMe table definition again</p>
<p>
<div class="image_block"><a href="/wp-content/uploads/blogs/DataMgmt/-169.png?mtime=1350479616"><img alt="" src="/wp-content/uploads/blogs/DataMgmt/-169.png?mtime=1350479616" width="292" height="109" /></a></div>
</p>
<p>As shown, the rowguid column is created in the table as well as a unique nonclustered index.</p>
<p>
<div class="image_block"><a href="/wp-content/uploads/blogs/All/late.gif?mtime=1350519523"><img alt="" src="/wp-content/uploads/blogs/All/late.gif?mtime=1350519523" width="377" height="115" /></a></div>
</p>
<p>Indexing the UNIQUEIDENTIFIER</p>
<p>Up to this point, Merge Replication controls these objects and knows that if replication is removed, it needs to clean up after itself.  But what if you are reviewing the plan cache and see an extremely poorly running query that is executing on your database engine repeatedly through the day &#8211; possibly, as often as every 60 seconds in which the agents for replication run?  At this point, creating an index to cover the query would be the next step in tuning the poor-performing query.</p>
<p>For example, the following index may be created</p>
<p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
</pre></td><td class="de1"><pre class="de1"><span class="kw1">CREATE</span> <span class="kw1">INDEX</span> IDX_ROWGUID <span class="kw1">ON</span> MergeMe <span class="br0">&#40;</span>ROWGUID ,CUSTNAME<span class="br0">&#41;</span> &nbsp;
GO</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">CREATE INDEX IDX_ROWGUID ON MergeMe (ROWGUID ,CUSTNAME)  
GO</pre></div></div>

</p>
<p>Another common event is a code change related to the rowguid column.  This happens often, and is not recommended, but it is not unheard of for a column to be directly referenced in an application, such as a linq2sql reference pulled in the schema and relies on that column being returned, or perhaps an INSERT statement was written which inserts a UNIQUEIDENTIFIER into the rowguid.  The last two instances are extremely bad practice, but, as with any bad practice, they do happen.  </p>
<p>A resulting problem from these types of modifications is that replication cannot be fully removed.  For example, if we execute sp_removedbreplication on the QTuner database after creating the covering index, the following error will be thrown.  </p>
<p>
<div class="image_block"><a href="/wp-content/uploads/blogs/DataMgmt/-170.png?mtime=1350479616"><img alt="" src="/wp-content/uploads/blogs/DataMgmt/-170.png?mtime=1350479616" width="618" height="153" /></a></div>
</p>
<p>Object dependency is something we cannot get around.  At this point, the only way to remove replication is to remove the index that was created on rowguid.  </p>
<p>Another set of problems can arise from this event.  Despite this error, replication can be partly removed but the application which references the rowguid column, mentioned earlier, and continues to insert directly into it.  Now, the application falls under restrictions that prevent a simple change to the code base so we have to design something in the database to address this problem.  Either adding the column back or leaving the column in place may occur while forcibly removing replication in the back ground.  But this is where larger problems can occur.  </p>
<p>In order to add the rowguid back, a default constraint is required for newsequantialid().  This leads to another issue in which the column cannot be dropped unless the default constraint is dropped first. </p>
<p>For example, take this sequence of events:</p>
<p>1)      Indexes were dropped so replication could be removed</p>
<p>2)      Application errors are reported on rowguid so rowguid is added back to the table</p>
<p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
</pre></td><td class="de1"><pre class="de1"><span class="kw1">IF</span> <span class="sy0">NOT</span> <span class="sy0">EXISTS</span> <span class="br0">&#40;</span><span class="kw1">SELECT</span> <span class="nu0">1</span> <span class="kw1">FROM</span> sys.<span class="me1">columns</span> <span class="kw1">where</span> Name <span class="sy0">=</span> N<span class="st0">'rowguid'</span> and <span class="kw2">Object_ID</span> <span class="sy0">=</span> <span class="kw2">Object_ID</span><span class="br0">&#40;</span>N<span class="st0">'MergeMe'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp; &nbsp; <span class="kw1">ALTER</span> <span class="kw1">TABLE</span> MergeMe <span class="kw1">ADD</span> rowguid <span class="kw1">UNIQUEIDENTIFIER</span> <span class="kw1">DEFAULT</span> <span class="br0">&#40;</span>newsequentialid<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
GO</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">IF NOT EXISTS (SELECT 1 FROM sys.columns where Name = N'rowguid' and Object_ID = Object_ID(N'MergeMe'))
	ALTER TABLE MergeMe ADD rowguid UNIQUEIDENTIFIER DEFAULT (newsequentialid())
GO</pre></div></div>

</p>
<ul>
<li>Following a code release of the application, now the columns can be removed. What do you do if there are hundreds of them?  The following script will:
</li>
<ul>
<li>Create a list of tables in table variables </li>
<li>Create a statement to drop indexes where the column is used in a key column reference </li>
<li>Drop the constraints </li>
<li>Drop the column </li>
</ul>
</ul>
<p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
</pre></td><td class="de1"><pre class="de1"><span class="kw1">USE</span> QTuner
GO
<span class="kw1">DECLARE</span> @<span class="kw1">int</span> <span class="kw1">INT</span> <span class="sy0">=</span> <span class="nu0">1</span>
<span class="kw1">DECLARE</span> @CMD <span class="kw1">NVARCHAR</span><span class="br0">&#40;</span><span class="nu0">1200</span><span class="br0">&#41;</span>
<span class="kw1">DECLARE</span> @idxList <span class="kw1">TABLE</span> <span class="br0">&#40;</span>TableName <span class="kw1">NVARCHAR</span><span class="br0">&#40;</span><span class="nu0">128</span><span class="br0">&#41;</span>, IX_NAME <span class="kw1">NVARCHAR</span><span class="br0">&#40;</span><span class="nu0">128</span><span class="br0">&#41;</span> <span class="sy0">NULL</span>, ROWID <span class="kw1">INT</span> <span class="kw1">IDENTITY</span><span class="br0">&#40;</span><span class="nu0">1</span>,<span class="nu0">1</span><span class="br0">&#41;</span>, SQLCMD <span class="kw1">NVARCHAR</span><span class="br0">&#40;</span><span class="nu0">1200</span><span class="br0">&#41;</span><span class="br0">&#41;</span>&nbsp; &nbsp; 
<span class="kw1">DECLARE</span> @tblList <span class="kw1">TABLE</span> <span class="br0">&#40;</span>TableName <span class="kw1">NVARCHAR</span><span class="br0">&#40;</span><span class="nu0">128</span><span class="br0">&#41;</span>, DF_NAME <span class="kw1">NVARCHAR</span><span class="br0">&#40;</span><span class="nu0">128</span><span class="br0">&#41;</span> <span class="sy0">NULL</span>, ROWID <span class="kw1">INT</span> <span class="kw1">IDENTITY</span><span class="br0">&#40;</span><span class="nu0">1</span>,<span class="nu0">1</span><span class="br0">&#41;</span>, SQLCMD <span class="kw1">NVARCHAR</span><span class="br0">&#40;</span><span class="nu0">1200</span><span class="br0">&#41;</span><span class="br0">&#41;</span>&nbsp; &nbsp; 
<span class="kw1">INSERT</span> <span class="kw1">INTO</span> @tblList <span class="br0">&#40;</span>TableName<span class="br0">&#41;</span> <span class="kw1">VALUES</span> <span class="br0">&#40;</span><span class="st0">'MergeMe'</span><span class="br0">&#41;</span>
<span class="kw1">INSERT</span> <span class="kw1">INTO</span> @idxList <span class="br0">&#40;</span>TableName<span class="br0">&#41;</span> <span class="kw1">VALUES</span> <span class="br0">&#40;</span><span class="st0">'MergeMe'</span><span class="br0">&#41;</span>
&nbsp;
<span class="kw1">UPDATE</span> list
<span class="kw1">SET</span> DF_NAME <span class="sy0">=</span> <span class="kw2">object_name</span><span class="br0">&#40;</span>cols.<span class="me1">default_object_id</span><span class="br0">&#41;</span>,
SQLCMD <span class="sy0">=</span> <span class="st0">'ALTER TABLE '</span> <span class="sy0">+</span> list.<span class="me1">TableName</span> <span class="sy0">+</span> <span class="st0">' DROP CONSTRAINT '</span> <span class="sy0">+</span> <span class="kw2">object_name</span><span class="br0">&#40;</span>cols.<span class="me1">default_object_id</span><span class="br0">&#41;</span>
<span class="kw1">FROM</span> @tblList list
<span class="sy0">JOIN</span> sys.<span class="me1">objects</span> obj <span class="kw1">ON</span> list.<span class="me1">TableName</span> <span class="sy0">=</span> obj.<span class="me1">Name</span>
<span class="sy0">JOIN</span> sys.<span class="me1">columns</span> cols <span class="kw1">ON</span> obj.<span class="kw2">object_id</span> <span class="sy0">=</span> cols.<span class="kw2">object_id</span>
<span class="kw1">WHERE</span> cols.<span class="me1">Name</span> <span class="sy0">=</span> <span class="st0">'rowguid'</span> &nbsp;
&nbsp;
<span class="kw1">WHILE</span> @<span class="kw1">int</span> <span class="sy0">&lt;=</span> <span class="br0">&#40;</span><span class="kw1">SELECT</span> <span class="kw2">COUNT</span><span class="br0">&#40;</span><span class="sy0">*</span><span class="br0">&#41;</span> <span class="kw1">FROM</span> @tblList<span class="br0">&#41;</span>
&nbsp;<span class="kw1">BEGIN</span>
&nbsp; <span class="kw1">IF</span> <span class="sy0">EXISTS</span> <span class="br0">&#40;</span><span class="kw1">SELECT</span> <span class="nu0">1</span> <span class="kw1">FROM</span> @tblList <span class="kw1">WHERE</span> ROWID <span class="sy0">=</span> @<span class="kw1">int</span> <span class="sy0">AND</span> SQLCMD <span class="kw1">IS</span> <span class="sy0">NOT</span> <span class="sy0">NULL</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp;<span class="kw1">BEGIN</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">SET</span> @CMD <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw1">SELECT</span> SQLCMD <span class="kw1">FROM</span> @tblList <span class="kw1">WHERE</span> ROWID <span class="sy0">=</span> @<span class="kw1">int</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">--EXEC (@CMD)</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">Print</span> @CMD
&nbsp; &nbsp; &nbsp;<span class="kw1">END</span>
&nbsp; <span class="kw1">SET</span> @<span class="kw1">int</span> <span class="sy0">+=</span> <span class="nu0">1</span>
&nbsp;<span class="kw1">END</span>
&nbsp;
&nbsp;
<span class="kw1">SET</span> @<span class="kw1">int</span> <span class="sy0">=</span> <span class="nu0">1</span>
&nbsp;
<span class="kw1">UPDATE</span> list
<span class="kw1">SET</span> IX_NAME <span class="sy0">=</span> idx.<span class="me1">Name</span>,
SQLCMD <span class="sy0">=</span> <span class="st0">'DROP INDEX '</span> <span class="sy0">+</span> idx.<span class="me1">Name</span> <span class="sy0">+</span> <span class="st0">' ON '</span> <span class="sy0">+</span> list.<span class="me1">TableName</span>
<span class="kw1">FROM</span> sys.<span class="me1">indexes</span> idx
<span class="kw1">INNER</span> <span class="sy0">JOIN</span> sys.<span class="me1">index_columns</span> cols <span class="kw1">ON</span> idx.<span class="kw2">object_id</span> <span class="sy0">=</span> cols.<span class="kw2">object_id</span> <span class="sy0">AND</span> idx.<span class="me1">index_id</span> <span class="sy0">=</span> cols.<span class="me1">index_id</span>
<span class="kw1">INNER</span> <span class="sy0">JOIN</span> sys.<span class="me1">all_columns</span> colName <span class="kw1">ON</span> cols.<span class="kw2">object_id</span> <span class="sy0">=</span> colName.<span class="kw2">object_id</span> <span class="sy0">AND</span> cols.<span class="me1">column_id</span> <span class="sy0">=</span> colName.<span class="me1">column_id</span>
<span class="sy0">JOIN</span> @idxList list <span class="kw1">ON</span> idx.<span class="kw2">object_id</span> <span class="sy0">=</span> <span class="kw2">object_id</span><span class="br0">&#40;</span>list.<span class="me1">TableName</span><span class="br0">&#41;</span>
<span class="kw1">WHERE</span> colName.<span class="me1">name</span> <span class="sy0">=</span> <span class="st0">'rowguid'</span> 
&nbsp;
<span class="kw1">WHILE</span> @<span class="kw1">int</span> <span class="sy0">&lt;=</span> <span class="br0">&#40;</span><span class="kw1">SELECT</span> <span class="kw2">COUNT</span><span class="br0">&#40;</span><span class="sy0">*</span><span class="br0">&#41;</span> <span class="kw1">FROM</span> @idxList<span class="br0">&#41;</span>
&nbsp;<span class="kw1">BEGIN</span>
&nbsp; <span class="kw1">IF</span> <span class="sy0">EXISTS</span> <span class="br0">&#40;</span><span class="kw1">SELECT</span> <span class="nu0">1</span> <span class="kw1">FROM</span> @idxList <span class="kw1">WHERE</span> ROWID <span class="sy0">=</span> @<span class="kw1">int</span> <span class="sy0">AND</span> SQLCMD <span class="kw1">IS</span> <span class="sy0">NOT</span> <span class="sy0">NULL</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp;<span class="kw1">BEGIN</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">SET</span> @CMD <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw1">SELECT</span> SQLCMD <span class="kw1">FROM</span> @idxList <span class="kw1">WHERE</span> ROWID <span class="sy0">=</span> @<span class="kw1">int</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="co1">--EXEC (@CMD)</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">Print</span> @CMD
&nbsp; &nbsp; &nbsp;<span class="kw1">END</span>
&nbsp; <span class="kw1">SET</span> @<span class="kw1">int</span> <span class="sy0">+=</span> <span class="nu0">1</span>
&nbsp;<span class="kw1">END</span>
&nbsp;
<span class="kw1">SET</span> @<span class="kw1">int</span> <span class="sy0">=</span> <span class="nu0">1</span>
&nbsp;
<span class="kw1">WHILE</span> @<span class="kw1">int</span> <span class="sy0">&lt;=</span> <span class="br0">&#40;</span><span class="kw1">SELECT</span> <span class="kw2">COUNT</span><span class="br0">&#40;</span><span class="sy0">*</span><span class="br0">&#41;</span> <span class="kw1">FROM</span> @idxList<span class="br0">&#41;</span>
&nbsp;<span class="kw1">BEGIN</span>
&nbsp; &nbsp; <span class="kw1">SET</span> @CMD <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw1">SELECT</span> <span class="st0">'ALTER TABLE '</span> <span class="sy0">+</span> TableName <span class="sy0">+</span> <span class="st0">' DROP COLUMN rowguid'</span> <span class="kw1">FROM</span> @idxList <span class="kw1">WHERE</span> ROWID <span class="sy0">=</span> @<span class="kw1">int</span><span class="br0">&#41;</span>
&nbsp; &nbsp; <span class="co1">--EXEC (@CMD)</span>
&nbsp; &nbsp; <span class="kw1">Print</span> @CMD
&nbsp; <span class="kw1">SET</span> @<span class="kw1">int</span> <span class="sy0">+=</span> <span class="nu0">1</span>
&nbsp;<span class="kw1">END</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">USE QTuner
GO
DECLARE @int INT = 1
DECLARE @CMD NVARCHAR(1200)
DECLARE @idxList TABLE (TableName NVARCHAR(128), IX_NAME NVARCHAR(128) NULL, ROWID INT IDENTITY(1,1), SQLCMD NVARCHAR(1200))	
DECLARE @tblList TABLE (TableName NVARCHAR(128), DF_NAME NVARCHAR(128) NULL, ROWID INT IDENTITY(1,1), SQLCMD NVARCHAR(1200))	
INSERT INTO @tblList (TableName) VALUES ('MergeMe')
INSERT INTO @idxList (TableName) VALUES ('MergeMe')

UPDATE list
SET DF_NAME = object_name(cols.default_object_id),
SQLCMD = 'ALTER TABLE ' + list.TableName + ' DROP CONSTRAINT ' + object_name(cols.default_object_id)
FROM @tblList list
JOIN sys.objects obj ON list.TableName = obj.Name
JOIN sys.columns cols ON obj.object_id = cols.object_id
WHERE cols.Name = 'rowguid'  

WHILE @int &lt;= (SELECT COUNT(*) FROM @tblList)
 BEGIN
  IF EXISTS (SELECT 1 FROM @tblList WHERE ROWID = @int AND SQLCMD IS NOT NULL)
	 BEGIN
		SET @CMD = (SELECT SQLCMD FROM @tblList WHERE ROWID = @int)
		--EXEC (@CMD)
		Print @CMD
     END
  SET @int += 1
 END


SET @int = 1

UPDATE list
SET IX_NAME = idx.Name,
SQLCMD = 'DROP INDEX ' + idx.Name + ' ON ' + list.TableName
FROM sys.indexes idx
INNER JOIN sys.index_columns cols ON idx.object_id = cols.object_id AND idx.index_id = cols.index_id
INNER JOIN sys.all_columns colName ON cols.object_id = colName.object_id AND cols.column_id = colName.column_id
JOIN @idxList list ON idx.object_id = object_id(list.TableName)
WHERE colName.name = 'rowguid' 

WHILE @int &lt;= (SELECT COUNT(*) FROM @idxList)
 BEGIN
  IF EXISTS (SELECT 1 FROM @idxList WHERE ROWID = @int AND SQLCMD IS NOT NULL)
	 BEGIN
		SET @CMD = (SELECT SQLCMD FROM @idxList WHERE ROWID = @int)
		--EXEC (@CMD)
		Print @CMD
     END
  SET @int += 1
 END

SET @int = 1

WHILE @int &lt;= (SELECT COUNT(*) FROM @idxList)
 BEGIN
	SET @CMD = (SELECT 'ALTER TABLE ' + TableName + ' DROP COLUMN rowguid' FROM @idxList WHERE ROWID = @int)
	--EXEC (@CMD)
	Print @CMD
  SET @int += 1
 END</pre></div></div>

</p>
<p>Note: This script does not validate for primary keys or included columns in an indexes.</p>
<p>Executing this script with the EXEC(@CMD) comment out, prints the following that would be executed otherwise.</p>
<p>
<blockquote>ALTER TABLE MergeMe DROP CONSTRAINT DF__MergeMe__rowguid__6E8B6712<br />
DROP INDEX IDX_ROWGUID ON MergeMe<br />
ALTER TABLE MergeMe DROP COLUMN rowguid
</p></blockquote>
<p><strong>Summary</strong></p>
<p>As shown, there can be significant effort involved with adding replication to a database, particularly with regard to the columns that may be added to support replication, if replication is removed, misused, or managed without fully understanding the actions which occur behind the scenes.  Indexing the columns that are used by replication is a valid method when the performance calls for it.  Take care when creating custom indexes, as the indexes may cause problems in the future when replication changes are needed or replication is removed.  Making use of extended properties and source control with comments and documentation should always be done to ease the pain for the next person that tries to work on the database.  </p>
<p>Also, values should never be inserted into a rowguid column as part of application code or custom scripting.  Those columns will be removed if replication is removed, and doing so will break any procedures or inline statements that applications are using.  Rowguid columns should be used handle replication and only that task.  These essential practices are even more critical when adding replication to third party databases, and it is always recommended to contact your vendor to verify that replication is supported for any third-party database. </p>
<div class='rp4wp-related-posts'>
<h3>Related Posts</h3>
<ul>
<li><div class='rp4wp-related-post-content'>
<a href='/index.php/datamgmt/dbadmin/row-level-and-column-level/'>Row-Level and Column-Level tracking in Merge Replication</a><p>There are several considerations when deciding if your Merge Replication setup is in need of&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-content'>
<a href='/index.php/datamgmt/dbadmin/troubleshooting-merge-replication-indexing-publications/'>Troubleshooting Merge Replication Performance – Indexing Publications</a><p>Troubleshooting Merge Replication – Index your publication design When setting up and designing a merge&hellip;</p></div>
</li>
</ul>
</div>
</div>
				<div class="post-author">
					<div class="userInfo"><h2>About the Author</h2>Ted Krueger is a SQL Server MVP and Author that has been working in development and database administration and the owner of a successful consulting business, DataMetrics Consulting.  Specialties range from High Availability and Disaster / Recovery setup and testing methods down to custom assembly development for SQL Server Reporting Services.  Ted blogs and is also one of the founders of LessThanDot.com technology community.  Some of the articles focused on are Backup / Recovery, Security, SSIS and working on SQL Server and using all of the SQL Server features available to create stable and scalable database services.  <br style="clear: left" /><div class="bioSoc"><span class="bioSocTitle">Social Sitings</span><a href="http://twitter.com/onpnt" title="onpnt at Twitter" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_twitter.png" alt="Twitter" /></a><a href="http://www.facebook.com/profile.php?id=https://www.facebook.com/onpntfirearms" title="onpnt at Facebook" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_facebook.png" alt="Facebook" /></a><a href="http://www.linkedin.com/pub/ted-krueger/2/183/b66" title="onpnt at LinkedIn" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_linkedin.png" alt="LinkedIn" /></a><a href="http://www.datametricsconsulting.com/" title="onpnt at HomePage" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_homepage.png" alt="HomePage" /></a><a href="/index.php/author/onpnt/feed/" title="Blog RSS feed for onpnt" class="bioSocLink"><img src="http://lessthandot.com/images/bdg_rss_icon.png" alt="LTD RSS Feed" /></a></div></div>				</div>
				<div class="post-foot instapaper_ignore">
					<div class="post-tagline">
						<div class="post-foot-views"><label>Article views:</label> 12,169 </div>
						<div class="post-foot-more-posts">
                            <a href="/index.php/author/onpnt/">Read More Posts by Ted Krueger (onpnt)</a>
						</div>
					</div>
					<div>
						 
					</div>
					<div class="post-tagline" style="height: auto">
						<span class="social-button-label">Share:</span><a href="https://twitter.com/intent/tweet?url=/index.php/datamgmt/dbadmin/removed-replication-leftovers/&text=RT @LessThanDot Blog - Removed Replication &ndash; rowguid added back by @onpnt" class="twitter-share-button-static" target="_blank"><i></i><span class="label">Tweet</span></a><a href="http://www.linkedin.com/shareArticle?mini=true&url=/index.php/datamgmt/dbadmin/removed-replication-leftovers/&title=Removed Replication &ndash; rowguid added back&source=/index.php/datamgmt/dbadmin/removed-replication-leftovers/" target="_blank" title="Share on LinkedIn" class="svg-button"><img alt="Share on LinkedIn"  src="http://lessthandot.com/images/LinkedIn.svg" /></a><a href="http://www.reddit.com/submit?url=/index.php/datamgmt/dbadmin/removed-replication-leftovers/&title=Removed Replication &ndash; rowguid added back" target="_blank" title="Submit to Reddit" class="svg-button"><img alt="Submit to Reddit" src="http://lessthandot.com/images/Reddit.svg" /></a><a href="https://www.facebook.com/sharer/sharer.php?u=/index.php/datamgmt/dbadmin/removed-replication-leftovers/&quote=Removed Replication &ndash; rowguid added back" title="Share on Facebook" target="_blank" class="svg-button"><img alt="Share on Facebook" src="http://lessthandot.com/images/Facebook.svg" /></a> <a href="http://www.instapaper.com/hello2?url=/index.php/datamgmt/dbadmin/removed-replication-leftovers/&title=Removed Replication &ndash; rowguid added back" class="instapaper_button">Instapaper</a>					</div>			
				</div>
				<div class="comments-area instapaper_ignore">
	<h4 class="comments-title">
		1 Comment so far	</h4>
			<ol class="comments-list">
					<li class="comment byuser comment-author-onpnt bypostauthor even thread-even depth-1" id="comment-5542">
				<div id="div-comment-5542" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/9666550a97e912e0dff5023dddb78e64?s=64&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/9666550a97e912e0dff5023dddb78e64?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Ted Krueger (onpnt)</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/dbadmin/removed-replication-leftovers/#comment-5542">
			October 18, 2012 at 7:43 am</a>		</div>

		<p>Thanks to Joe Fleming @muad_dba for catching my poor use of words Ident <> Primary Key 🙂</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/dbadmin/removed-replication-leftovers/?replytocom=5542#respond' onclick='return addComment.moveForm( "div-comment-5542", "5542", "respond", "1760" )' aria-label='Reply to Ted Krueger (onpnt)'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		</ol>
						<div id="respond" class="comment-respond">
			<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/index.php/datamgmt/dbadmin/removed-replication-leftovers/#respond" style="display:none;">Cancel reply</a></small></h3>				<form action="/wp-comments-post.php" method="post" id="commentform" class="comment-form">
					<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" aria-required='true' required='required' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" maxlength="100" aria-describedby="email-notes" aria-required='true' required='required' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="text" value="" size="30" maxlength="200" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='1760' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><input type="hidden" id="killer_value" name="killer_value" value="43ec517d68b6edd3015b3edc9a11367b"/><noscript>Sorry, but you are required to use a javascript enabled brower to comment here.</noscript>				</form>
					</div><!-- #respond -->
		</div>			</div>
				<br style="clear: both;" />
</div>
		</div>
		<div id="page-footer">
			<div id="botnav"><a href="http://lessthandot.com/" title="LessThanDot Launchpad">Launchpad</a> | <a href="http://lessthandot.com/account.php" title="Your Account Settings">My Account</a> | <a href="http://lessthandot.com/statistics.php" title="Statistics">Statistics</a> | <a href="http://lessthandot.com/donate.php" title="Donate">Donate</a> | <a href="http://lessthandot.com/contactus.php" title="Contact Us">Contact Us</a> | <a href="http://lessthandot.com/aboutus.php" title="About the LessThanDot Team">&copy;2008 - 2019 LessThanDot, LLC</a></div>

		<script type='text/javascript'>
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-4471405-1']);
		_gaq.push(['_trackPageview']);
		_gaq.push(['_setCustomVar', 1, 'Environment', 'lessthandot.com', 3]);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	  </script>			<div class="validator"><a href="http://validator.w3.org/check?uri=referer">Valid XHTML</a> | <a href="http://jigsaw.w3.org/css-validator/check/referer" title="Validate the CSS for this page at the W3C website">Valid CSS</a> | 2018-11-11 15:52</div>
		</div>
	</div>
</div>
<!-- <script type="text/javascript" src="http://apis.google.com/js/plusone.js"></script> -->
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.6.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var spam_destroyer = {"key":"159ff9dcc225580310c2de238cdd1f1a","lifetime":"3600","limit":"1552765739"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/plugins/spam-destroyer/kill.js?ver=1.2'></script>
</body>
</html>
