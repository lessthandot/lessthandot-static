<!DOCTYPE html>
<html lang="en-US">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
		<link rel="shortcut icon" href="http://lessthandot.com/favicon.ico" type="image/vnd.microsoft.icon" />
	<title>Less Than Dot - Blog -   Observing &#8211; Optimize for Ad Hoc Workload server option</title>
	<meta prefix="og: http://ogp.me/ns#" property="og:title" content="Less Than Dot - Blog -   Observing &#8211; Optimize for Ad Hoc Workload server option" />
	<meta prefix="og: http://ogp.me/ns#" property="og:type" content="article" />
	<meta prefix="og: http://ogp.me/ns#" property="og:url" content="/index.php/datamgmt/dbadmin/observing-optimize-for-ad-hoc/" />
		<meta prefix="og: http://ogp.me/ns#" property="og:image" content="http://lessthandot.com/images/logo_prod.png" />
	<meta prefix="og: http://ogp.me/ns#" property="og:type" content="article" />
	<meta prefix="og: http://ogp.me/ns#" property="og:site_name" content="LessThanDot" />
	<meta prefix="og: http://ogp.me/ns#" property="og:description" content="Optimize For Ad Hoc Workloads – Observations...... I’ve been watching this one particular server that has been throwing alerts for high physical memory usage from Red Gate’s SQL Monitoring tool.  I was discussing this with a friend of mine, Clayton&hellip;" />
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/index.php/feed/" />
	<link rel="alternate" type="application/atom+xml" title="Atom" href="/index.php/feed/atom/" />

	<!-- this page is the canonical URL -->	
	<link rel="stylesheet" href="/wp-content/themes/lessthandot2009/style.css" type="text/css" />
	<link rel="stylesheet" href="http://lessthandot.com/includes/allsite.css" type="text/css" />
	<link rel="stylesheet" href="http://lessthandot.com/includes/allsiteprint.css" media="print" type="text/css" />

	<link rel='dns-prefetch' href='//ajax.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="LessthanDot &raquo; Observing &#8211; Optimize for Ad Hoc Workload server option Comments Feed" href="/index.php/datamgmt/dbadmin/observing-optimize-for-ad-hoc/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.1"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='bwp-syntax-css'  href='/wp-content/plugins/better-wordpress-syntax-based-on-geshi/css/bwp-syntax-global.css?ver=4.6.1' type='text/css' media='all' />
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-content/plugins/better-wordpress-syntax-based-on-geshi/js/bwp-syntax.js?ver=4.6.1'></script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Be careful when passing around parameters, make sure they are the same size and type' href='/index.php/datamgmt/datadesign/be-careful-when-passing-around/' />
<link rel='next' title='When changing column data types use ALTER TABLE TableName ALTER Column syntax, don&#8217;t drop and recreate column' href='/index.php/datamgmt/datadesign/when-changing-column-data-types/' />
<meta name="generator" content="WordPress 4.6.1" />
<link rel="canonical" href="/index.php/datamgmt/dbadmin/observing-optimize-for-ad-hoc/" />
<link rel='shortlink' href='/?p=1109' />
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Findex.php%2Fdatamgmt%2Fdbadmin%2Fobserving-optimize-for-ad-hoc%2F" />
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Findex.php%2Fdatamgmt%2Fdbadmin%2Fobserving-optimize-for-ad-hoc%2F&#038;format=xml" />
<style type='text/css'>.rp4wp-related-posts ul{width:100%;padding:0;margin:0;float:left;}
.rp4wp-related-posts ul>li{list-style:none;padding:0;margin:0;padding-bottom:20px;clear:both;}
.rp4wp-related-posts ul>li>p{margin:0;padding:0;}
.rp4wp-related-post-image{width:35%;padding-right:25px;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;float:left;}</style>
	<script src="http://lessthandot.com/includes/allsite.js" type="text/javascript" ></script>
</head>
<body>
<div id="contain"><div id="subcontain"><div id="ttl"><div id="hdr"><div id="snav"><a href="http://lessthandot.com/login.php?backtrack=/index.php/datamgmt/dbadmin/observing-optimize-for-ad-hoc/?">Member Login</a>
</div><a href="http://lessthandot.com/" title="LessThanDot Launchpad" id="logoc"><img src="http://lessthandot.com/images/logo_prod.png" alt="LessThanDot Site Logo" border="0" /></a><h1>LessThanDot</h1><div class="pgsttl">A decade of helpful technical content</div></div><div id="nav">
<ul>
<li><a href="http://lessthandot.com/" title="LessThanDot Launchpad" id="h" ><span>Launchpad</span></a></li>
<li class="cur"><a href="/" title="LessThanDot Blogs" id="b" ><span>Blogs</span></a></li>
<li><a href="http://forum.lessthandot.com/" title="LessThanDot Community Forums" id="f" ><span>Forum</span></a></li>
<li><a href="http://wiki.lessthandot.com/" title="LessThanDot Wiki Articles" id="w" ><span>Wiki</span></a></li>
<li><a href="http://sqlcop.lessthandot.com/" title="LessThanDot SQLCop" id="a" ><span>SQLCop</span></a></li>
<li><a href="http://lessthandot.com/account.php" title="Your Account Settings" id="r"  class="l_ie"><span>My Account</span></a></li></ul></div>
</div><div id="content">
<div id="fac"><div id="fa">
		<p>Less Than Dot is a community of passionate IT professionals and enthusiasts dedicated to sharing technical knowledge, experience, and assistance. Inside you will find reference materials, interesting technical discussions, and expert tips and commentary.</p></div></div><div class="content-sidebar">
	<div id="social" class="sdsec">
		<h2>LTD Social Sitings</h2>
		<div>
		<a id="social_twitter" href="http://twitter.com/LessThanDot/" title="Follow us on Twitter" ><img src="http://lessthandot.com/images/bdg_twitter.png" alt="Lessthandot twitter"/></a> 
		<a href="http://www.linkedin.com/groups?home=&amp;gid=113440" title="Join us on LinkedIn" ><img src="http://lessthandot.com/images/bdg_linkedin.png" alt="Lessthandot Linkedin" /></a> 
		<a href="http://www.facebook.com/group.php?gid=19330511063" title="Join us on Facebook" ><img src="http://lessthandot.com/images/bdg_facebook.png" alt="Lessthandot facebook"/></a> 
		<a href="http://lessthandot.com/rss.php" title="LessThanDot News Feed" ><img src="http://lessthandot.com/images/bdg_rss_icon.png" alt="Lessthandot rss"/></a> 
		</div>
		<p><em>Note: Watch for social icons on posts by your favorite authors to follow their postings on these and other social sites.</em></p>
	</div><div class="content-sidebar-section">
<h2>Tag cloud</h2>
	<p class="tag-cloud">
		<a href='/index.php/tag/net/' class='tag-link-245 tag-link-position-1' title='21 topics' style='font-size: 8.9565217391304pt;'>.net</a> <a href='/index.php/tag/asp-net/' class='tag-link-168 tag-link-position-2' title='21 topics' style='font-size: 8.9565217391304pt;'>asp.net</a> <a href='/index.php/tag/azure-2/' class='tag-link-321 tag-link-position-3' title='29 topics' style='font-size: 10.173913043478pt;'>azure</a> <a href='/index.php/tag/book/' class='tag-link-130 tag-link-position-4' title='26 topics' style='font-size: 9.7391304347826pt;'>book</a> <a href='/index.php/tag/business-intelligence-2/' class='tag-link-256 tag-link-position-5' title='30 topics' style='font-size: 10.260869565217pt;'>business intelligence</a> <a href='/index.php/tag/c/' class='tag-link-138 tag-link-position-6' title='40 topics' style='font-size: 11.304347826087pt;'>c#</a> <a href='/index.php/tag/database/' class='tag-link-134 tag-link-position-7' title='31 topics' style='font-size: 10.434782608696pt;'>database</a> <a href='/index.php/tag/excel/' class='tag-link-155 tag-link-position-8' title='16 topics' style='font-size: 8pt;'>excel</a> <a href='/index.php/tag/gotcha/' class='tag-link-240 tag-link-position-9' title='19 topics' style='font-size: 8.6086956521739pt;'>gotcha</a> <a href='/index.php/tag/how-to/' class='tag-link-272 tag-link-position-10' title='44 topics' style='font-size: 11.652173913043pt;'>how to</a> <a href='/index.php/tag/mongodb/' class='tag-link-765 tag-link-position-11' title='17 topics' style='font-size: 8.2608695652174pt;'>mongodb</a> <a href='/index.php/tag/nosql/' class='tag-link-775 tag-link-position-12' title='18 topics' style='font-size: 8.4347826086957pt;'>nosql</a> <a href='/index.php/tag/performance/' class='tag-link-179 tag-link-position-13' title='26 topics' style='font-size: 9.7391304347826pt;'>performance</a> <a href='/index.php/tag/security-2/' class='tag-link-398 tag-link-position-14' title='25 topics' style='font-size: 9.5652173913043pt;'>security</a> <a href='/index.php/tag/sql/' class='tag-link-132 tag-link-position-15' title='42 topics' style='font-size: 11.478260869565pt;'>sql</a> <a href='/index.php/tag/sql-advent-2012/' class='tag-link-1416 tag-link-position-16' title='18 topics' style='font-size: 8.4347826086957pt;'>sql advent 2012</a> <a href='/index.php/tag/sql-friday/' class='tag-link-377 tag-link-position-17' title='18 topics' style='font-size: 8.4347826086957pt;'>sql friday</a> <a href='/index.php/tag/sql-server/' class='tag-link-154 tag-link-position-18' title='145 topics' style='font-size: 16.086956521739pt;'>sql server</a> <a href='/index.php/tag/sql-server-2000/' class='tag-link-366 tag-link-position-19' title='45 topics' style='font-size: 11.739130434783pt;'>sql server 2000</a> <a href='/index.php/tag/sql-server-2005/' class='tag-link-327 tag-link-position-20' title='118 topics' style='font-size: 15.391304347826pt;'>sql server 2005</a> <a href='/index.php/tag/sql-server-2008/' class='tag-link-152 tag-link-position-21' title='237 topics' style='font-size: 18pt;'>sql server 2008</a> <a href='/index.php/tag/sql-server-2008-r2/' class='tag-link-548 tag-link-position-22' title='38 topics' style='font-size: 11.130434782609pt;'>sql server 2008 r2</a> <a href='/index.php/tag/sql-server-2012/' class='tag-link-1161 tag-link-position-23' title='76 topics' style='font-size: 13.739130434783pt;'>sql server 2012</a> <a href='/index.php/tag/ssis-2/' class='tag-link-501 tag-link-position-24' title='52 topics' style='font-size: 12.260869565217pt;'>ssis</a> <a href='/index.php/tag/ssms/' class='tag-link-640 tag-link-position-25' title='18 topics' style='font-size: 8.4347826086957pt;'>ssms</a> <a href='/index.php/tag/ssrs-2/' class='tag-link-557 tag-link-position-26' title='27 topics' style='font-size: 9.9130434782609pt;'>ssrs</a> <a href='/index.php/tag/syndicated/' class='tag-link-1407 tag-link-position-27' title='67 topics' style='font-size: 13.217391304348pt;'>syndicated</a> <a href='/index.php/tag/t-sql/' class='tag-link-185 tag-link-position-28' title='26 topics' style='font-size: 9.7391304347826pt;'>t-sql</a> <a href='/index.php/tag/tip/' class='tag-link-194 tag-link-position-29' title='46 topics' style='font-size: 11.826086956522pt;'>tip</a> <a href='/index.php/tag/unit-testing/' class='tag-link-162 tag-link-position-30' title='17 topics' style='font-size: 8.2608695652174pt;'>unit testing</a>	</p>
</div>		<div class="content-sidebar-section">
		<h2>Authors</h2>
			<ul class="author-list dimmed">
				<li><a href="/index.php/author/SQLDenis/" title="Posts by SQLDenis">SQLDenis</a> <a href="/index.php/author/SQLDenis/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (597)</li><li><a href="/index.php/author/onpnt/" title="Posts by Ted Krueger (onpnt)">Ted Krueger (onpnt)</a> <a href="/index.php/author/onpnt/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (355)</li><li><a href="/index.php/author/grrlgeek/" title="Posts by Jes Borland">Jes Borland</a> <a href="/index.php/author/grrlgeek/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (202)</li><li><a href="/index.php/author/tarwn/" title="Posts by Eli Weinstock-Herman (tarwn)">Eli Weinstock-Herman (tarwn)</a> <a href="/index.php/author/tarwn/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (190)</li><li><a href="/index.php/author/koenverbeeck/" title="Posts by Koen Verbeeck">Koen Verbeeck</a> <a href="/index.php/author/koenverbeeck/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (100)</li><li><a href="/index.php/author/alexcuse/" title="Posts by Alex Ullrich">Alex Ullrich</a> <a href="/index.php/author/alexcuse/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (55)</li><li><a href="/index.php/author/gmmastros/" title="Posts by George Mastros (gmmastros)">George Mastros (gmmastros)</a> <a href="/index.php/author/gmmastros/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (45)</li><li><a href="/index.php/author/axel8s/" title="Posts by Axel Achten (axel8s)">Axel Achten (axel8s)</a> <a href="/index.php/author/axel8s/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (28)</li><li><a href="/index.php/author/naomi/" title="Posts by Naomi Nosonovsky">Naomi Nosonovsky</a> <a href="/index.php/author/naomi/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (27)</li><li><a href="/index.php/author/thirster42/" title="Posts by David Forck (thirster42)">David Forck (thirster42)</a> <a href="/index.php/author/thirster42/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (24)</li><li><a href="/index.php/author/chopstik/" title="Posts by chopstik">chopstik</a> <a href="/index.php/author/chopstik/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (20)</li><li><a href="/index.php/author/kconan/" title="Posts by Kevin Conan">Kevin Conan</a> <a href="/index.php/author/kconan/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (18)</li><li><a href="/index.php/author/robearl/" title="Posts by Rob Earl">Rob Earl</a> <a href="/index.php/author/robearl/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (14)</li><li><a href="/index.php/author/thatrickguy/" title="Posts by ThatRickGuy">ThatRickGuy</a> <a href="/index.php/author/thatrickguy/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (12)</li><li><a href="/index.php/author/sqlarcher/" title="Posts by SQLArcher">SQLArcher</a> <a href="/index.php/author/sqlarcher/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (11)</li>                <li><a href="http://lessthandot.com/Stats/BlogAuthors.php">More...</a></li>
			</ul>
		</div>
				<div class="content-sidebar-section">
		<h2>Categories</h2>
			<ul class="categories-list">
					<li class="cat-item cat-item-10"><a href="/index.php/category/all/" >All Blogs</a>
</li>
	<li class="cat-item cat-item-5"><a href="/index.php/category/architect/" >Architecture, Design and Strategy</a>
</li>
	<li class="cat-item cat-item-1759"><a href="/index.php/category/artificial-intelligence/" >Artificial Intelligence</a>
</li>
	<li class="cat-item cat-item-6"><a href="/index.php/category/datamgmt/" >Data Management</a>
</li>
	<li class="cat-item cat-item-7"><a href="/index.php/category/desktopdev/" >Desktop Developer</a>
</li>
	<li class="cat-item cat-item-8"><a href="/index.php/category/enterprisedev/" >Enterprise Developer</a>
</li>
	<li class="cat-item cat-item-11"><a href="/index.php/category/itprofessionals/" >IT Professionals</a>
</li>
	<li class="cat-item cat-item-12"><a href="/index.php/category/itstudents/" >IT Students and Researchers</a>
</li>
	<li class="cat-item cat-item-1743"><a href="/index.php/category/management/" >Management</a>
</li>
	<li class="cat-item cat-item-9"><a href="/index.php/category/sysadmins/" >System Admins</a>
</li>
	<li class="cat-item cat-item-1"><a href="/index.php/category/uncategorized/" >Uncategorized</a>
</li>
	<li class="cat-item cat-item-4"><a href="/index.php/category/webdev/" >Web Developer</a>
</li>
			</ul>
		</div>
		</div><div class="content-main">
				<div class="post-navigation">
				<div class="post-navigation-forward"><a href="/index.php/datamgmt/datadesign/when-changing-column-data-types/" rel="next">When changing column data types use ALTER TABLE TableName ALTER Column syntax, don&#8217;t drop and recreate column</a> &raquo; </div>
				<div class="post-navigation-back">&laquo; <a href="/index.php/datamgmt/datadesign/be-careful-when-passing-around/" rel="prev">Be careful when passing around parameters, make sure they are the same size and type</a></div>
			</div>
			<div class="post-area instapaper_body">
				<div class="post-title-line">
										<h1 class="instapaper_ignore"><a href="/index.php/datamgmt/dbadmin/observing-optimize-for-ad-hoc/" class="post-title">Observing &#8211; Optimize for Ad Hoc Workload server option</a></h1>
					<div class="post-byline">by <a href="/index.php/author/ktessereau/" title="Posts by SQLology ~ Kim Tessereau" rel="author">SQLology ~ Kim Tessereau</a> on April 9, 2011 in category <a href="/index.php/category/datamgmt/dbadmin/" rel="category tag">Database Administration</a> <a href="/index.php/category/datamgmt/dbprogramming/mssqlserver/" rel="category tag">Microsoft SQL Server</a> <a href="/index.php/category/datamgmt/dbadmin/mssqlserveradmin/" rel="category tag">Microsoft SQL Server Admin</a>. Article views: 8,091 </div>
				</div>
				<div class="post-tagline"><a href="https://twitter.com/intent/tweet?url=/index.php/datamgmt/dbadmin/observing-optimize-for-ad-hoc/&text=RT @LessThanDot Blog - Observing &amp;#8211; Optimize for Ad Hoc Workload server option by @ktessereau" class="twitter-share-button-static" target="_blank"><i></i><span class="label">Tweet</span></a><a href="http://www.linkedin.com/shareArticle?mini=true&url=/index.php/datamgmt/dbadmin/observing-optimize-for-ad-hoc/&title=Observing &amp;#8211; Optimize for Ad Hoc Workload server option&source=/index.php/datamgmt/dbadmin/observing-optimize-for-ad-hoc/" target="_blank" title="Share on LinkedIn" class="svg-button"><img alt="Share on LinkedIn"  src="http://lessthandot.com/images/LinkedIn.svg" /></a><a href="http://www.reddit.com/submit?url=/index.php/datamgmt/dbadmin/observing-optimize-for-ad-hoc/&title=Observing &amp;#8211; Optimize for Ad Hoc Workload server option" target="_blank" title="Submit to Reddit" class="svg-button"><img alt="Submit to Reddit" src="http://lessthandot.com/images/Reddit.svg" /></a><a href="https://www.facebook.com/sharer/sharer.php?u=/index.php/datamgmt/dbadmin/observing-optimize-for-ad-hoc/&quote=Observing &amp;#8211; Optimize for Ad Hoc Workload server option" title="Share on Facebook" target="_blank" class="svg-button"><img alt="Share on Facebook" src="http://lessthandot.com/images/Facebook.svg" /></a> <a href="http://www.instapaper.com/hello2?url=/index.php/datamgmt/dbadmin/observing-optimize-for-ad-hoc/&title=Observing &amp;#8211; Optimize for Ad Hoc Workload server option" class="instapaper_button">Instapaper</a></div>

				<div class="post-content"><p class="MsoNormal" style="margin: 0in 0in 0pt;"><strong style="mso-bidi-font-weight: normal;"><span style="font-family: Calibri; font-size: 11pt;">Optimize For Ad Hoc Workloads – Observations&#8230;&#8230;</span></strong></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><strong style="mso-bidi-font-weight: normal;"><span style="font-family: Calibri; font-size: 11pt;"> </span></strong></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><strong style="mso-bidi-font-weight: normal;"><span style="font-family: &amp;amp;amp; font-size: 8pt;">I’ve been watching this one particular server that has been throwing alerts for high physical memory usage from Red Gate’s SQL Monitoring tool.<span style="mso-spacerun: yes;">  </span>I was discussing this with a friend of mine, Clayton Hoyt and he mentioned that I might want to look at the “Optimize for Ad Hoc Workloads” advanced server configuration options.<span style="mso-spacerun: yes;">  </span>I took him up on his advice and googled for the “Optimize For Ad Hoc Workloads” and “SQLSkills”.<span style="mso-spacerun: yes;">  </span>I found a wonderful article from Kimberly Tripp on just this topic.<span style="mso-spacerun: yes;">  </span>Here is the link.</span></strong></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><strong style="mso-bidi-font-weight: normal;"><span style="font-family: &amp;amp;amp; font-size: 8pt;"> </span></strong></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: Calibri; font-size: 11pt;"> <a href="http://www.sqlskills.com/blogs/kimberly/post/procedure-cache-and-optimizing-for-adhoc-workloads.aspx">http://www.sqlskills.com/blogs/kimberly/post/procedure-cache-and-optimizing-for-adhoc-workloads.aspx</a></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: Calibri; font-size: 11pt;"> </span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">The article suggests running the below query to determine the number of plans in cache and the total space that they are taking up.<span style="mso-spacerun: yes;">  </span>So I ran the query on my memory hungry server and the following is what happened&#8230;&#8230;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; color: blue; font-size: 10pt; mso-no-proof: yes;"> </span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; color: blue; font-size: 10pt; mso-no-proof: yes;">SELECT</span><span style="font-family: &amp;amp;amp; font-size: 10pt; mso-no-proof: yes;"> objtype <span style="color: blue;">AS</span> [CacheType]</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 10pt; mso-no-proof: yes;"><span style="mso-spacerun: yes;">        </span><span style="color: gray;">,</span> <span style="color: fuchsia;">count_big</span><span style="color: gray;">(*)</span> <span style="color: blue;">AS</span> [Total Plans]</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 10pt; mso-no-proof: yes;"><span style="mso-spacerun: yes;">        </span><span style="color: gray;">,</span> <span style="color: fuchsia;">sum</span><span style="color: gray;">(</span><span style="color: fuchsia;">cast</span><span style="color: gray;">(</span>size_in_bytes <span style="color: blue;">as</span> <span style="color: blue;">decimal</span><span style="color: gray;">(</span>18<span style="color: gray;">,</span>2<span style="color: gray;">)))/</span>1024<span style="color: gray;">/</span>1024 <span style="color: blue;">AS</span> [Total MBs]</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 10pt; mso-no-proof: yes;"><span style="mso-spacerun: yes;">        </span><span style="color: gray;">,</span> <span style="color: fuchsia;">avg</span><span style="color: gray;">(</span>usecounts<span style="color: gray;">)</span> <span style="color: blue;">AS</span> [Avg Use Count]</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 10pt; mso-no-proof: yes;"><span style="mso-spacerun: yes;">        </span><span style="color: gray;">,</span> <span style="color: fuchsia;">sum</span><span style="color: gray;">(</span><span style="color: fuchsia;">cast</span><span style="color: gray;">((</span><span style="color: blue;">CASE</span> <span style="color: blue;">WHEN</span> usecounts <span style="color: gray;">=</span> 1 <span style="color: blue;">THEN</span> size_in_bytes <span style="color: blue;">ELSE</span> 0 <span style="color: blue;">END</span><span style="color: gray;">)</span> <span style="color: blue;">as</span> <span style="color: blue;">decimal</span><span style="color: gray;">(</span>18<span style="color: gray;">,</span>2<span style="color: gray;">)))/</span>1024<span style="color: gray;">/</span>1024 <span style="color: blue;">AS</span> [Total MBs &#8211; USE Count 1]</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 10pt; mso-no-proof: yes;"><span style="mso-spacerun: yes;">        </span><span style="color: gray;">,</span> <span style="color: fuchsia;">sum</span><span style="color: gray;">(</span><span style="color: blue;">CASE</span> <span style="color: blue;">WHEN</span> usecounts <span style="color: gray;">=</span> 1 <span style="color: blue;">THEN</span> 1 <span style="color: blue;">ELSE</span> 0 <span style="color: blue;">END</span><span style="color: gray;">)</span> <span style="color: blue;">AS</span> [Total Plans &#8211; USE Count 1]</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; color: blue; font-size: 10pt; mso-no-proof: yes;">FROM</span><span style="font-family: &amp;amp;amp; font-size: 10pt; mso-no-proof: yes;"> <span style="color: green;">sys</span><span style="color: gray;">.</span><span style="color: green;">dm_exec_cached_plans</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; color: blue; font-size: 10pt; mso-no-proof: yes;">GROUP</span><span style="font-family: &amp;amp;amp; font-size: 10pt; mso-no-proof: yes;"> <span style="color: blue;">BY</span> objtype</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; color: blue; font-size: 10pt; mso-no-proof: yes;">ORDER</span><span style="font-family: &amp;amp;amp; font-size: 10pt; mso-no-proof: yes;"> <span style="color: blue;">BY</span> [Total MBs &#8211; USE Count 1] <span style="color: blue;">DESC</span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; color: blue; font-size: 10pt; mso-no-proof: yes;">go</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: &amp;amp;amp; font-size: 8pt;"> </span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: &amp;amp;amp; font-size: 8pt;"> </span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: &amp;amp;amp; font-size: 8pt;"> </span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: &amp;amp;amp; font-size: 8pt;">Initial Query Results:<span style="mso-spacerun: yes;">  </span>This is what I started with.</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: &amp;amp;amp; font-size: 8pt;"> </span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: &amp;amp;amp; font-size: 8pt;">CacheType   Total Plans   Total MBs     Avg Use Count Total MBs &#8211; USE Count 1  Total Plans </span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: &amp;amp;amp; font-size: 8pt;">&#8212;&#8212;&#8212;&#8211; &#8212;&#8212;&#8212;&#8212;- &#8212;&#8212;&#8212;&#8212;- &#8212;&#8212;&#8212;&#8212;- &#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212; &#8212;&#8212;&#8212;&#8212;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: &amp;amp;amp; background: yellow; font-size: 8pt; mso-highlight: yellow;">Adhoc       32750        <span style="mso-spacerun: yes;"> </span>2352.641181       927           947.289619                 9167</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: &amp;amp;amp; font-size: 8pt;">Proc        842           387.390625        169428        6.882812                   29</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: &amp;amp;amp; font-size: 8pt;">Prepared    576           69.460937         15176         6.234375                   64</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: &amp;amp;amp; font-size: 8pt;">Trigger     35            21.867187         6154          0.828125                   3</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: &amp;amp;amp; font-size: 8pt;">Check       31            0.812500          11453         0.023437                   1</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: &amp;amp;amp; font-size: 8pt;">View        327           36.875000         8057          0.000000                   0</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: &amp;amp;amp; font-size: 8pt;">UsrTab      4             0.468750          1473          0.000000                   0</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;"> </span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">Then I turned on “Optimized for Ad Hoc Workload” and watched the total number of plans decrease along with the total amount of space depleat.<span style="mso-spacerun: yes;">  </span>I kept monitoring during this time as well using SQL Monitor and the only thing that I noticed was the Buffer Free Pages dropped from 1.7 million to .7 million during this 4 hours I spent watching this server.</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;"> </span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">4 hours had passed, Query Results:<span style="mso-spacerun: yes;">  </span></span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;"> </span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">CacheType<span style="mso-spacerun: yes;">   </span>Total Plans<span style="mso-spacerun: yes;">  </span>Total MBs<span style="mso-spacerun: yes;">    </span>Avg Use Count Total MBs &#8211; USE Count 1<span style="mso-spacerun: yes;">   </span>Total Plans </span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;"> </span><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">&#8212;&#8212;&#8212;-<span style="mso-spacerun: yes;">  </span>&#8212;&#8212;&#8212;&#8211; <span style="mso-spacerun: yes;"> </span>&#8212;&#8212;&#8212;&#8212; &#8212;&#8212;&#8212;&#8212;- &#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;- &#8212;&#8212;&#8212;&#8212;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; background: yellow; font-size: 8pt; mso-no-proof: yes; mso-highlight: yellow;">Adhoc<span style="mso-spacerun: yes;">       </span>42270<span style="mso-spacerun: yes;">     </span><span style="mso-spacerun: yes;">   </span>2264.423034<span style="mso-spacerun: yes;">        </span>733<span style="mso-spacerun: yes;">           </span>659.141784<span style="mso-spacerun: yes;">                </span>11827</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">Proc<span style="mso-spacerun: yes;">        </span>833<span style="mso-spacerun: yes;">          </span>320.968750<span style="mso-spacerun: yes;">         </span>173396<span style="mso-spacerun: yes;">        </span>6.882812<span style="mso-spacerun: yes;">                  </span>29</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">Prepared<span style="mso-spacerun: yes;">    </span>653<span style="mso-spacerun: yes;">          </span>84.187500<span style="mso-spacerun: yes;">          </span>13557<span style="mso-spacerun: yes;">         </span>2.773437<span style="mso-spacerun: yes;">                  </span>26</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">Trigger<span style="mso-spacerun: yes;">     </span>35<span style="mso-spacerun: yes;">           </span>21.453125<span style="mso-spacerun: yes;">          </span>6624<span style="mso-spacerun: yes;">          </span>0.609375<span style="mso-spacerun: yes;">                  </span>2</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">Check<span style="mso-spacerun: yes;">       </span>31<span style="mso-spacerun: yes;">           </span>0.812500<span style="mso-spacerun: yes;">           </span>11582<span style="mso-spacerun: yes;">         </span>0.023437<span style="mso-spacerun: yes;">                  </span>1</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">View<span style="mso-spacerun: yes;">        </span>327<span style="mso-spacerun: yes;">          </span>36.875000<span style="mso-spacerun: yes;">          </span>8159<span style="mso-spacerun: yes;">          </span>0.000000<span style="mso-spacerun: yes;">                  </span>0</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">UsrTab<span style="mso-spacerun: yes;">      </span>4<span style="mso-spacerun: yes;">            </span>0.468750<span style="mso-spacerun: yes;">           </span>1490<span style="mso-spacerun: yes;">          </span>0.000000<span style="mso-spacerun: yes;">                  </span>0</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: Times New Roman; font-size: small;"> </span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: &amp;amp;amp; font-size: 8pt;">Then I decided instead of waiting for the server to slowly correct itself I would go ahead and issue </span><span style="font-family: &amp;amp;amp; color: blue; font-size: 10pt; mso-no-proof: yes;">DBCC</span><span style="font-family: &amp;amp;amp; font-size: 10pt; mso-no-proof: yes;"> FREEPROCCACHE</span><span style="font-family: &amp;amp;amp; font-size: 8pt;"> to clear the procedure cache.</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: &amp;amp;amp; font-size: 10pt; mso-no-proof: yes;"> </span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">After DBCC command had run, Query Results:</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: &amp;amp;amp; font-size: 8pt;"> </span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">CacheType<span style="mso-spacerun: yes;">  </span>Total Plans<span style="mso-spacerun: yes;">   </span>Total MBs<span style="mso-spacerun: yes;">    </span>Avg Use Count Total MBs &#8211; USE Count 1<span style="mso-spacerun: yes;">    </span>Total Plans</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">&#8212;&#8212;&#8212;- &#8212;&#8212;&#8212;&#8212;- &#8212;&#8212;&#8212;&#8212; &#8212;&#8212;&#8212;&#8212;- &#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8211; &#8212;&#8212;&#8212;&#8212;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">Proc<span style="mso-spacerun: yes;">       </span>70<span style="mso-spacerun: yes;">            </span>21.031250<span style="mso-spacerun: yes;">          </span>20<span style="mso-spacerun: yes;">            </span>5.804687<span style="mso-spacerun: yes;">                   </span>17</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; background: yellow; font-size: 8pt; mso-no-proof: yes; mso-highlight: yellow;">Adhoc<span style="mso-spacerun: yes;">      </span>215<span style="mso-spacerun: yes;">           </span>5.745986<span style="mso-spacerun: yes;">           </span>3<span style="mso-spacerun: yes;">             </span>0.691299<span style="mso-spacerun: yes;">                   </span>128</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">Prepared<span style="mso-spacerun: yes;">   </span>21<span style="mso-spacerun: yes;">            </span>1.625000<span style="mso-spacerun: yes;">           </span>5<span style="mso-spacerun: yes;">             </span>0.523437<span style="mso-spacerun: yes;">                   </span>9</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">Trigger<span style="mso-spacerun: yes;">    </span>3<span style="mso-spacerun: yes;">            </span><span style="mso-spacerun: yes;"> </span>1.140625<span style="mso-spacerun: yes;">           </span>6<span style="mso-spacerun: yes;">             </span>0.382812<span style="mso-spacerun: yes;">                   </span>1</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">View<span style="mso-spacerun: yes;">       </span>28<span style="mso-spacerun: yes;">            </span>1.656250<span style="mso-spacerun: yes;">           </span>8<span style="mso-spacerun: yes;">             </span>0.000000<span style="mso-spacerun: yes;">                   </span>0</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;"> </span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">Buffer Free Pages climbing from .7 million to 1.1 million. I thought I would see Buffer Free Pages go through the roof, but I’m guessing that data cache stepped in and took over what had become available.</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;"> </span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">What I expect to see in the next 12 hours is that the total plans and total MB’s will grow again, but not to the size that it was in the first query.<span style="mso-spacerun: yes;">  </span>I’m going to bed now and I’ll check the server in the morning……</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;"> </span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">And&#8230;I’m back&#8230; </span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;"> </span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: &amp;amp;amp; font-size: 8pt;">Results 12 hours after cache was cleared:</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: &amp;amp;amp; font-size: 8pt;"> </span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">CacheType<span style="mso-spacerun: yes;">  </span>Total Plans<span style="mso-spacerun: yes;">   </span>Total MBs<span style="mso-spacerun: yes;">    </span>Avg Use Count Total MBs &#8211; USE Count 1<span style="mso-spacerun: yes;">       </span>Total Plans</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">&#8212;&#8212;&#8212;- &#8212;&#8212;&#8212;&#8212;- &#8212;&#8212;&#8212;&#8212; &#8212;&#8212;&#8212;&#8212;- &#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8212;&#8211; &#8212;&#8212;&#8212;&#8212;</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; background: yellow; font-size: 8pt; mso-no-proof: yes; mso-highlight: yellow;">Adhoc<span style="mso-spacerun: yes;">      </span>61025<span style="mso-spacerun: yes;">         </span>1456.307067<span style="mso-spacerun: yes;">        </span>8<span style="mso-spacerun: yes;">             </span>523.744567<span style="mso-spacerun: yes;">                    </span>46369</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">Proc<span style="mso-spacerun: yes;">       </span>348<span style="mso-spacerun: yes;">           </span>138.406250<span style="mso-spacerun: yes;">         </span>4961<span style="mso-spacerun: yes;">          </span>8.828125<span style="mso-spacerun: yes;">            </span><span style="mso-spacerun: yes;">          </span>40</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">Prepared<span style="mso-spacerun: yes;">   </span>615<span style="mso-spacerun: yes;">           </span>76.601562<span style="mso-spacerun: yes;">          </span>279<span style="mso-spacerun: yes;">           </span>3.718750<span style="mso-spacerun: yes;">                      </span>46</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">Check<span style="mso-spacerun: yes;">      </span>32<span style="mso-spacerun: yes;">            </span>0.781250<span style="mso-spacerun: yes;">           </span>279<span style="mso-spacerun: yes;">           </span>0.218750<span style="mso-spacerun: yes;">                      </span>11</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">Trigger<span style="mso-spacerun: yes;">    </span>16<span style="mso-spacerun: yes;">            </span>6.398437<span style="mso-spacerun: yes;">           </span>1247<span style="mso-spacerun: yes;">          </span>0.000000<span style="mso-spacerun: yes;">                      </span>0</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">View<span style="mso-spacerun: yes;">       </span>322<span style="mso-spacerun: yes;">           </span>30.742187<span style="mso-spacerun: yes;">          </span>299<span style="mso-spacerun: yes;">           </span>0.000000<span style="mso-spacerun: yes;">                      </span>0</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt; mso-layout-grid-align: none;"><span style="font-family: &amp;amp;amp; font-size: 8pt; mso-no-proof: yes;">UsrTab<span style="mso-spacerun: yes;">     </span>3<span style="mso-spacerun: yes;">             </span>0.250000<span style="mso-spacerun: yes;">           </span>48<span style="mso-spacerun: yes;">            </span>0.000000<span style="mso-spacerun: yes;">                      </span>0</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: &amp;amp;amp; font-size: 8pt;"> </span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: &amp;amp;amp; font-size: 8pt;">Conclusion:<span style="mso-spacerun: yes;">  </span>The total number of Adhoc plans in cache were higher than the original baseline, however, the space being used for Adhoc plans was significantly less with the “Optimize For Ad Hoc Workloads” configuration option set on.<span style="mso-spacerun: yes;">  </span>Because this server houses databases that are accessed with an unusual amount of Adhoc queries I will leave this option on.</span></p>
<p class="MsoNormal" style="margin: 0in 0in 0pt;"><span style="font-family: &amp;amp;amp; font-size: 8pt;"> </span></p>
<div class='rp4wp-related-posts'>
<h3>Related Posts</h3>
<ul>
<li><div class='rp4wp-related-post-content'>
<a href='/index.php/datamgmt/dbadmin/turning-on-optimize-for-ad/'>Turning on Optimize for Ad hoc Workloads, Ad Hoc Distributed Queries and more on a AWS RDS SQL Server Instance</a><p>There are several advanced options that you can modify in SQL Server.If you want to&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-content'>
<a href='/index.php/datamgmt/dbadmin/mssqlserveradmin/database-space-use/'>Database space use</a><p>I was doing some research on my SQL Servers and wanted to know just how&hellip;</p></div>
</li>
</ul>
</div>
</div>
				<div class="post-author">
					<div class="userInfo"><h2>About the Author</h2><img class="bioPic" src="http://a3.twimg.com/profile_images/1296288244/2010-12-22_17_56_43-1.jpg" alt="User bio image"/>I'm a proud mother, dog owner and SQL Architect.  I love to teach and am just beginning to get back into bike riding.  I work for Swank Motion Pictures and I teach for Washington University CAIT in St. Louis, Missouri <br style="clear: left" /><div class="bioSoc"><span class="bioSocTitle">Social Sitings</span><a href="http://twitter.com/ktessereau" title="ktessereau at Twitter" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_twitter.png" alt="Twitter" /></a><a href="http://www.facebook.com/profile.php?id=Kim Cato Tessereau" title="ktessereau at Facebook" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_facebook.png" alt="Facebook" /></a><a href="/index.php/datamgmt/dbadmin/observing-optimize-for-ad-hoc/Kim Tessereau" title="ktessereau at LinkedIn" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_linkedin.png" alt="LinkedIn" /></a><a href="http://ktessereau.spaces.live.com/" title="ktessereau at Windows Live Spaces" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_livespaces.png" alt="Windows Live Spaces" /></a><a href="/index.php/author/ktessereau/feed/" title="Blog RSS feed for ktessereau" class="bioSocLink"><img src="http://lessthandot.com/images/bdg_rss_icon.png" alt="LTD RSS Feed" /></a></div></div>				</div>
				<div class="post-foot instapaper_ignore">
					<div class="post-tagline">
						<div class="post-foot-views"><label>Article views:</label> 8,091 </div>
						<div class="post-foot-more-posts">
                            <a href="/index.php/author/ktessereau/">Read More Posts by SQLology ~ Kim Tessereau</a>
						</div>
					</div>
					<div>
						 
					</div>
					<div class="post-tagline" style="height: auto">
						<span class="social-button-label">Share:</span><a href="https://twitter.com/intent/tweet?url=/index.php/datamgmt/dbadmin/observing-optimize-for-ad-hoc/&text=RT @LessThanDot Blog - Observing &amp;#8211; Optimize for Ad Hoc Workload server option by @ktessereau" class="twitter-share-button-static" target="_blank"><i></i><span class="label">Tweet</span></a><a href="http://www.linkedin.com/shareArticle?mini=true&url=/index.php/datamgmt/dbadmin/observing-optimize-for-ad-hoc/&title=Observing &amp;#8211; Optimize for Ad Hoc Workload server option&source=/index.php/datamgmt/dbadmin/observing-optimize-for-ad-hoc/" target="_blank" title="Share on LinkedIn" class="svg-button"><img alt="Share on LinkedIn"  src="http://lessthandot.com/images/LinkedIn.svg" /></a><a href="http://www.reddit.com/submit?url=/index.php/datamgmt/dbadmin/observing-optimize-for-ad-hoc/&title=Observing &amp;#8211; Optimize for Ad Hoc Workload server option" target="_blank" title="Submit to Reddit" class="svg-button"><img alt="Submit to Reddit" src="http://lessthandot.com/images/Reddit.svg" /></a><a href="https://www.facebook.com/sharer/sharer.php?u=/index.php/datamgmt/dbadmin/observing-optimize-for-ad-hoc/&quote=Observing &amp;#8211; Optimize for Ad Hoc Workload server option" title="Share on Facebook" target="_blank" class="svg-button"><img alt="Share on Facebook" src="http://lessthandot.com/images/Facebook.svg" /></a> <a href="http://www.instapaper.com/hello2?url=/index.php/datamgmt/dbadmin/observing-optimize-for-ad-hoc/&title=Observing &amp;#8211; Optimize for Ad Hoc Workload server option" class="instapaper_button">Instapaper</a>					</div>			
				</div>
				<div class="comments-area instapaper_ignore">
	<h4 class="comments-title">
		No comments posted so far	</h4>
					<div id="respond" class="comment-respond">
			<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/index.php/datamgmt/dbadmin/observing-optimize-for-ad-hoc/#respond" style="display:none;">Cancel reply</a></small></h3>				<form action="/wp-comments-post.php" method="post" id="commentform" class="comment-form">
					<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" aria-required='true' required='required' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" maxlength="100" aria-describedby="email-notes" aria-required='true' required='required' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="text" value="" size="30" maxlength="200" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='1109' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><input type="hidden" id="killer_value" name="killer_value" value="1543843a4723ed2ab08e18053ae6dc5b"/><noscript>Sorry, but you are required to use a javascript enabled brower to comment here.</noscript>				</form>
					</div><!-- #respond -->
		</div>			</div>
				<br style="clear: both;" />
</div>
		</div>
		<div id="page-footer">
			<div id="botnav"><a href="http://lessthandot.com/" title="LessThanDot Launchpad">Launchpad</a> | <a href="http://lessthandot.com/account.php" title="Your Account Settings">My Account</a> | <a href="http://lessthandot.com/statistics.php" title="Statistics">Statistics</a> | <a href="http://lessthandot.com/donate.php" title="Donate">Donate</a> | <a href="http://lessthandot.com/contactus.php" title="Contact Us">Contact Us</a> | <a href="http://lessthandot.com/aboutus.php" title="About the LessThanDot Team">&copy;2008 - 2019 LessThanDot, LLC</a></div>

		<script type='text/javascript'>
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-4471405-1']);
		_gaq.push(['_trackPageview']);
		_gaq.push(['_setCustomVar', 1, 'Environment', 'lessthandot.com', 3]);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	  </script>			<div class="validator"><a href="http://validator.w3.org/check?uri=referer">Valid XHTML</a> | <a href="http://jigsaw.w3.org/css-validator/check/referer" title="Validate the CSS for this page at the W3C website">Valid CSS</a> | 2018-11-11 15:52</div>
		</div>
	</div>
</div>
<!-- <script type="text/javascript" src="http://apis.google.com/js/plusone.js"></script> -->
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.6.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var spam_destroyer = {"key":"159ff9dcc225580310c2de238cdd1f1a","lifetime":"3600","limit":"1552766226"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/plugins/spam-destroyer/kill.js?ver=1.2'></script>
</body>
</html>
