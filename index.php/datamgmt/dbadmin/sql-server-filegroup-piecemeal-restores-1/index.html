<!DOCTYPE html>
<html lang="en-US">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
		<link rel="shortcut icon" href="http://lessthandot.com/favicon.ico" type="image/vnd.microsoft.icon" />
	<title>Less Than Dot - Blog -   SQL Server Filegroup Piecemeal Restores</title>
	<meta prefix="og: http://ogp.me/ns#" property="og:title" content="Less Than Dot - Blog -   SQL Server Filegroup Piecemeal Restores" />
	<meta prefix="og: http://ogp.me/ns#" property="og:type" content="article" />
	<meta prefix="og: http://ogp.me/ns#" property="og:url" content="/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/" />
		<meta prefix="og: http://ogp.me/ns#" property="og:image" content="http://lessthandot.com/images/logo_prod.png" />
	<meta prefix="og: http://ogp.me/ns#" property="og:type" content="article" />
	<meta prefix="og: http://ogp.me/ns#" property="og:site_name" content="LessThanDot" />
	<meta prefix="og: http://ogp.me/ns#" property="og:description" content="Learn how to use multiple filegroups to perform partial restores in a SQL Server database." />
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/index.php/feed/" />
	<link rel="alternate" type="application/atom+xml" title="Atom" href="/index.php/feed/atom/" />

	<!-- this page is the canonical URL -->	
	<link rel="stylesheet" href="/wp-content/themes/lessthandot2009/style.css" type="text/css" />
	<link rel="stylesheet" href="http://lessthandot.com/includes/allsite.css" type="text/css" />
	<link rel="stylesheet" href="http://lessthandot.com/includes/allsiteprint.css" media="print" type="text/css" />

	<link rel='dns-prefetch' href='//ajax.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="LessthanDot &raquo; SQL Server Filegroup Piecemeal Restores Comments Feed" href="/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.1"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='bwp-syntax-css'  href='/wp-content/plugins/better-wordpress-syntax-based-on-geshi/css/bwp-syntax-global.css?ver=4.6.1' type='text/css' media='all' />
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-content/plugins/better-wordpress-syntax-based-on-geshi/js/bwp-syntax.js?ver=4.6.1'></script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='The Stand-up Desk &#8211; Year Two, Version Two' href='/index.php/itprofessionals/itprocesses/the-stand-up-desk-year-2/' />
<link rel='next' title='Book Review: Securing SQL Server By Denny Cherry' href='/index.php/datamgmt/datadesign/book-review-securing-sql-server/' />
<meta name="generator" content="WordPress 4.6.1" />
<link rel="canonical" href="/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/" />
<link rel='shortlink' href='/?p=1187' />
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Findex.php%2Fdatamgmt%2Fdbadmin%2Fsql-server-filegroup-piecemeal-restores-1%2F" />
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Findex.php%2Fdatamgmt%2Fdbadmin%2Fsql-server-filegroup-piecemeal-restores-1%2F&#038;format=xml" />
<style type='text/css'>.rp4wp-related-posts ul{width:100%;padding:0;margin:0;float:left;}
.rp4wp-related-posts ul>li{list-style:none;padding:0;margin:0;padding-bottom:20px;clear:both;}
.rp4wp-related-posts ul>li>p{margin:0;padding:0;}
.rp4wp-related-post-image{width:35%;padding-right:25px;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;float:left;}</style>
	<script src="http://lessthandot.com/includes/allsite.js" type="text/javascript" ></script>
</head>
<body>
<div id="contain"><div id="subcontain"><div id="ttl"><div id="hdr"><div id="snav"><a href="http://lessthandot.com/login.php?backtrack=/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/?">Member Login</a>
</div><a href="http://lessthandot.com/" title="LessThanDot Launchpad" id="logoc"><img src="http://lessthandot.com/images/logo_prod.png" alt="LessThanDot Site Logo" border="0" /></a><h1>LessThanDot</h1><div class="pgsttl">A decade of helpful technical content</div></div><div id="nav">
<ul>
<li><a href="http://lessthandot.com/" title="LessThanDot Launchpad" id="h" ><span>Launchpad</span></a></li>
<li class="cur"><a href="/" title="LessThanDot Blogs" id="b" ><span>Blogs</span></a></li>
<li><a href="http://forum.lessthandot.com/" title="LessThanDot Community Forums" id="f" ><span>Forum</span></a></li>
<li><a href="http://wiki.lessthandot.com/" title="LessThanDot Wiki Articles" id="w" ><span>Wiki</span></a></li>
<li><a href="http://sqlcop.lessthandot.com/" title="LessThanDot SQLCop" id="a" ><span>SQLCop</span></a></li>
<li><a href="http://lessthandot.com/account.php" title="Your Account Settings" id="r"  class="l_ie"><span>My Account</span></a></li></ul></div>
</div><div id="content">
<div id="fac"><div id="fa">
		<p>Less Than Dot is a community of passionate IT professionals and enthusiasts dedicated to sharing technical knowledge, experience, and assistance. Inside you will find reference materials, interesting technical discussions, and expert tips and commentary.</p></div></div><div class="content-sidebar">
	<div id="social" class="sdsec">
		<h2>LTD Social Sitings</h2>
		<div>
		<a id="social_twitter" href="http://twitter.com/LessThanDot/" title="Follow us on Twitter" ><img src="http://lessthandot.com/images/bdg_twitter.png" alt="Lessthandot twitter"/></a> 
		<a href="http://www.linkedin.com/groups?home=&amp;gid=113440" title="Join us on LinkedIn" ><img src="http://lessthandot.com/images/bdg_linkedin.png" alt="Lessthandot Linkedin" /></a> 
		<a href="http://www.facebook.com/group.php?gid=19330511063" title="Join us on Facebook" ><img src="http://lessthandot.com/images/bdg_facebook.png" alt="Lessthandot facebook"/></a> 
		<a href="http://lessthandot.com/rss.php" title="LessThanDot News Feed" ><img src="http://lessthandot.com/images/bdg_rss_icon.png" alt="Lessthandot rss"/></a> 
		</div>
		<p><em>Note: Watch for social icons on posts by your favorite authors to follow their postings on these and other social sites.</em></p>
	</div><div class="content-sidebar-section">
<h2>Tag cloud</h2>
	<p class="tag-cloud">
		<a href='/index.php/tag/net/' class='tag-link-245 tag-link-position-1' title='21 topics' style='font-size: 8.9565217391304pt;'>.net</a> <a href='/index.php/tag/asp-net/' class='tag-link-168 tag-link-position-2' title='21 topics' style='font-size: 8.9565217391304pt;'>asp.net</a> <a href='/index.php/tag/azure-2/' class='tag-link-321 tag-link-position-3' title='29 topics' style='font-size: 10.173913043478pt;'>azure</a> <a href='/index.php/tag/book/' class='tag-link-130 tag-link-position-4' title='26 topics' style='font-size: 9.7391304347826pt;'>book</a> <a href='/index.php/tag/business-intelligence-2/' class='tag-link-256 tag-link-position-5' title='30 topics' style='font-size: 10.260869565217pt;'>business intelligence</a> <a href='/index.php/tag/c/' class='tag-link-138 tag-link-position-6' title='40 topics' style='font-size: 11.304347826087pt;'>c#</a> <a href='/index.php/tag/database/' class='tag-link-134 tag-link-position-7' title='31 topics' style='font-size: 10.434782608696pt;'>database</a> <a href='/index.php/tag/excel/' class='tag-link-155 tag-link-position-8' title='16 topics' style='font-size: 8pt;'>excel</a> <a href='/index.php/tag/gotcha/' class='tag-link-240 tag-link-position-9' title='19 topics' style='font-size: 8.6086956521739pt;'>gotcha</a> <a href='/index.php/tag/how-to/' class='tag-link-272 tag-link-position-10' title='44 topics' style='font-size: 11.652173913043pt;'>how to</a> <a href='/index.php/tag/mongodb/' class='tag-link-765 tag-link-position-11' title='17 topics' style='font-size: 8.2608695652174pt;'>mongodb</a> <a href='/index.php/tag/nosql/' class='tag-link-775 tag-link-position-12' title='18 topics' style='font-size: 8.4347826086957pt;'>nosql</a> <a href='/index.php/tag/performance/' class='tag-link-179 tag-link-position-13' title='26 topics' style='font-size: 9.7391304347826pt;'>performance</a> <a href='/index.php/tag/security-2/' class='tag-link-398 tag-link-position-14' title='25 topics' style='font-size: 9.5652173913043pt;'>security</a> <a href='/index.php/tag/sql/' class='tag-link-132 tag-link-position-15' title='42 topics' style='font-size: 11.478260869565pt;'>sql</a> <a href='/index.php/tag/sql-advent-2012/' class='tag-link-1416 tag-link-position-16' title='18 topics' style='font-size: 8.4347826086957pt;'>sql advent 2012</a> <a href='/index.php/tag/sql-friday/' class='tag-link-377 tag-link-position-17' title='18 topics' style='font-size: 8.4347826086957pt;'>sql friday</a> <a href='/index.php/tag/sql-server/' class='tag-link-154 tag-link-position-18' title='145 topics' style='font-size: 16.086956521739pt;'>sql server</a> <a href='/index.php/tag/sql-server-2000/' class='tag-link-366 tag-link-position-19' title='45 topics' style='font-size: 11.739130434783pt;'>sql server 2000</a> <a href='/index.php/tag/sql-server-2005/' class='tag-link-327 tag-link-position-20' title='118 topics' style='font-size: 15.391304347826pt;'>sql server 2005</a> <a href='/index.php/tag/sql-server-2008/' class='tag-link-152 tag-link-position-21' title='237 topics' style='font-size: 18pt;'>sql server 2008</a> <a href='/index.php/tag/sql-server-2008-r2/' class='tag-link-548 tag-link-position-22' title='38 topics' style='font-size: 11.130434782609pt;'>sql server 2008 r2</a> <a href='/index.php/tag/sql-server-2012/' class='tag-link-1161 tag-link-position-23' title='76 topics' style='font-size: 13.739130434783pt;'>sql server 2012</a> <a href='/index.php/tag/ssis-2/' class='tag-link-501 tag-link-position-24' title='52 topics' style='font-size: 12.260869565217pt;'>ssis</a> <a href='/index.php/tag/ssms/' class='tag-link-640 tag-link-position-25' title='18 topics' style='font-size: 8.4347826086957pt;'>ssms</a> <a href='/index.php/tag/ssrs-2/' class='tag-link-557 tag-link-position-26' title='27 topics' style='font-size: 9.9130434782609pt;'>ssrs</a> <a href='/index.php/tag/syndicated/' class='tag-link-1407 tag-link-position-27' title='67 topics' style='font-size: 13.217391304348pt;'>syndicated</a> <a href='/index.php/tag/t-sql/' class='tag-link-185 tag-link-position-28' title='26 topics' style='font-size: 9.7391304347826pt;'>t-sql</a> <a href='/index.php/tag/tip/' class='tag-link-194 tag-link-position-29' title='46 topics' style='font-size: 11.826086956522pt;'>tip</a> <a href='/index.php/tag/unit-testing/' class='tag-link-162 tag-link-position-30' title='17 topics' style='font-size: 8.2608695652174pt;'>unit testing</a>	</p>
</div>		<div class="content-sidebar-section">
		<h2>Authors</h2>
			<ul class="author-list dimmed">
				<li><a href="/index.php/author/SQLDenis/" title="Posts by SQLDenis">SQLDenis</a> <a href="/index.php/author/SQLDenis/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (597)</li><li><a href="/index.php/author/onpnt/" title="Posts by Ted Krueger (onpnt)">Ted Krueger (onpnt)</a> <a href="/index.php/author/onpnt/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (355)</li><li><a href="/index.php/author/grrlgeek/" title="Posts by Jes Borland">Jes Borland</a> <a href="/index.php/author/grrlgeek/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (202)</li><li><a href="/index.php/author/tarwn/" title="Posts by Eli Weinstock-Herman (tarwn)">Eli Weinstock-Herman (tarwn)</a> <a href="/index.php/author/tarwn/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (190)</li><li><a href="/index.php/author/koenverbeeck/" title="Posts by Koen Verbeeck">Koen Verbeeck</a> <a href="/index.php/author/koenverbeeck/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (100)</li><li><a href="/index.php/author/alexcuse/" title="Posts by Alex Ullrich">Alex Ullrich</a> <a href="/index.php/author/alexcuse/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (55)</li><li><a href="/index.php/author/gmmastros/" title="Posts by George Mastros (gmmastros)">George Mastros (gmmastros)</a> <a href="/index.php/author/gmmastros/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (45)</li><li><a href="/index.php/author/axel8s/" title="Posts by Axel Achten (axel8s)">Axel Achten (axel8s)</a> <a href="/index.php/author/axel8s/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (28)</li><li><a href="/index.php/author/naomi/" title="Posts by Naomi Nosonovsky">Naomi Nosonovsky</a> <a href="/index.php/author/naomi/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (27)</li><li><a href="/index.php/author/thirster42/" title="Posts by David Forck (thirster42)">David Forck (thirster42)</a> <a href="/index.php/author/thirster42/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (24)</li><li><a href="/index.php/author/chopstik/" title="Posts by chopstik">chopstik</a> <a href="/index.php/author/chopstik/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (20)</li><li><a href="/index.php/author/kconan/" title="Posts by Kevin Conan">Kevin Conan</a> <a href="/index.php/author/kconan/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (18)</li><li><a href="/index.php/author/robearl/" title="Posts by Rob Earl">Rob Earl</a> <a href="/index.php/author/robearl/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (14)</li><li><a href="/index.php/author/thatrickguy/" title="Posts by ThatRickGuy">ThatRickGuy</a> <a href="/index.php/author/thatrickguy/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (12)</li><li><a href="/index.php/author/sqlarcher/" title="Posts by SQLArcher">SQLArcher</a> <a href="/index.php/author/sqlarcher/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (11)</li>                <li><a href="http://lessthandot.com/Stats/BlogAuthors.php">More...</a></li>
			</ul>
		</div>
				<div class="content-sidebar-section">
		<h2>Categories</h2>
			<ul class="categories-list">
					<li class="cat-item cat-item-10"><a href="/index.php/category/all/" >All Blogs</a>
</li>
	<li class="cat-item cat-item-5"><a href="/index.php/category/architect/" >Architecture, Design and Strategy</a>
</li>
	<li class="cat-item cat-item-1759"><a href="/index.php/category/artificial-intelligence/" >Artificial Intelligence</a>
</li>
	<li class="cat-item cat-item-6"><a href="/index.php/category/datamgmt/" >Data Management</a>
</li>
	<li class="cat-item cat-item-7"><a href="/index.php/category/desktopdev/" >Desktop Developer</a>
</li>
	<li class="cat-item cat-item-8"><a href="/index.php/category/enterprisedev/" >Enterprise Developer</a>
</li>
	<li class="cat-item cat-item-11"><a href="/index.php/category/itprofessionals/" >IT Professionals</a>
</li>
	<li class="cat-item cat-item-12"><a href="/index.php/category/itstudents/" >IT Students and Researchers</a>
</li>
	<li class="cat-item cat-item-1743"><a href="/index.php/category/management/" >Management</a>
</li>
	<li class="cat-item cat-item-9"><a href="/index.php/category/sysadmins/" >System Admins</a>
</li>
	<li class="cat-item cat-item-1"><a href="/index.php/category/uncategorized/" >Uncategorized</a>
</li>
	<li class="cat-item cat-item-4"><a href="/index.php/category/webdev/" >Web Developer</a>
</li>
			</ul>
		</div>
		</div><div class="content-main">
				<div class="post-navigation">
				<div class="post-navigation-forward"><a href="/index.php/datamgmt/datadesign/book-review-securing-sql-server/" rel="next">Book Review: Securing SQL Server By Denny Cherry</a> &raquo; </div>
				<div class="post-navigation-back">&laquo; <a href="/index.php/itprofessionals/itprocesses/the-stand-up-desk-year-2/" rel="prev">The Stand-up Desk &#8211; Year Two, Version Two</a></div>
			</div>
			<div class="post-area instapaper_body">
				<div class="post-title-line">
										<h1 class="instapaper_ignore"><a href="/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/" class="post-title">SQL Server Filegroup Piecemeal Restores</a></h1>
					<div class="post-byline">by <a href="/index.php/author/grrlgeek/" title="Posts by Jes Borland" rel="author">Jes Borland</a> on May 24, 2011 in category <a href="/index.php/category/datamgmt/dbadmin/" rel="category tag">Database Administration</a> <a href="/index.php/category/datamgmt/dbprogramming/mssqlserver/" rel="category tag">Microsoft SQL Server</a> <a href="/index.php/category/datamgmt/dbadmin/mssqlserveradmin/" rel="category tag">Microsoft SQL Server Admin</a>. Article views: 146,317 </div>
				</div>
				<div class="post-tagline"><a href="https://twitter.com/intent/tweet?url=/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/&text=RT @LessThanDot Blog - SQL Server Filegroup Piecemeal Restores by @grrl_geek" class="twitter-share-button-static" target="_blank"><i></i><span class="label">Tweet</span></a><a href="http://www.linkedin.com/shareArticle?mini=true&url=/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/&title=SQL Server Filegroup Piecemeal Restores&source=/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/" target="_blank" title="Share on LinkedIn" class="svg-button"><img alt="Share on LinkedIn"  src="http://lessthandot.com/images/LinkedIn.svg" /></a><a href="http://www.reddit.com/submit?url=/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/&title=SQL Server Filegroup Piecemeal Restores" target="_blank" title="Submit to Reddit" class="svg-button"><img alt="Submit to Reddit" src="http://lessthandot.com/images/Reddit.svg" /></a><a href="https://www.facebook.com/sharer/sharer.php?u=/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/&quote=SQL Server Filegroup Piecemeal Restores" title="Share on Facebook" target="_blank" class="svg-button"><img alt="Share on Facebook" src="http://lessthandot.com/images/Facebook.svg" /></a> <a href="http://www.instapaper.com/hello2?url=/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/&title=SQL Server Filegroup Piecemeal Restores" class="instapaper_button">Instapaper</a></div>

				<div class="post-content"><p>This is a follow-up to my previous post, <a href="/index.php/DataMgmt/DBAdmin/sql-server-filegroups-the-what">SQL Server Filegroups: The What, The Why and The How</a>. In that post, I described how you could create a database with multiple files spanning multiple filegroups, and how that can improve performance and administration. </p>
<p>In this post, I’m going to show you another benefit of creating databases with multiple filegroups: the ability to restore one filegroup at a time, allowing part of the database to be accessible while the rest is being restored. This is known as a piecemeal restore. </p>
<blockquote><p>Note: This feature is only available in SQL Server Enterprise Edition.</p></blockquote>
<p><strong>The Scenario </strong></p>
<p>I am going to create a database with four filegroups: Primary, FGFull2, FGFull3, and FGFull4. The Primary filegroup will be used only for system information. FGFull2 will be the default, and will contain order information from 2011. FGFull3 will contain order information from 2010. FGFull4 will contain order information from 2009, and will be read-only. </p>
<p>I will show you how to create the database with multiple filegroups, and how to set options like the default and read-only. Then, I’ll pretend I broke the database, and show you how to restore individual filegroups. </p>
<p>Ready? Grab a cup of coffee, and let’s go. </p>
<p><strong>Creating and Populating the Database</strong> </p>
<p>First, I’ll create a database with three filegroups, and one file per filegroup. </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="de1"><pre class="de1"><span class="kw1">USE</span> master;
GO
<span class="kw1">CREATE</span> <span class="kw1">DATABASE</span> FilegroupFull <span class="kw1">ON</span> <span class="kw1">PRIMARY</span>
<span class="br0">&#40;</span>NAME <span class="sy0">=</span> FGFull1_dat,
&nbsp;FILENAME <span class="sy0">=</span> <span class="st0">'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLDATAFGFull1_dat.mdf'</span><span class="br0">&#41;</span>,
FILEGROUP FGFullFG2
<span class="br0">&#40;</span>NAME <span class="sy0">=</span> FGFull2_dat,
&nbsp;FILENAME <span class="sy0">=</span> <span class="st0">'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLDATAFGFull2_dat.mdf'</span><span class="br0">&#41;</span>, 
FILEGROUP FGFullFG3 
&nbsp;<span class="br0">&#40;</span>NAME <span class="sy0">=</span> FGFull3_dat,
&nbsp;FILENAME <span class="sy0">=</span> <span class="st0">'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLDATAFGFull3_dat.mdf'</span><span class="br0">&#41;</span> 
<span class="kw2">LOG</span> <span class="kw1">ON</span>
<span class="br0">&#40;</span>NAME <span class="sy0">=</span> FGFull_log,
&nbsp;FILENAME <span class="sy0">=</span> <span class="st0">'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLDATAFGFull_log.ldf'</span><span class="br0">&#41;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">USE master;
GO
CREATE DATABASE FilegroupFull ON PRIMARY
(NAME = FGFull1_dat,
 FILENAME = 'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLDATAFGFull1_dat.mdf'),
FILEGROUP FGFullFG2
(NAME = FGFull2_dat,
 FILENAME = 'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLDATAFGFull2_dat.mdf'), 
FILEGROUP FGFullFG3 
 (NAME = FGFull3_dat,
 FILENAME = 'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLDATAFGFull3_dat.mdf') 
LOG ON
(NAME = FGFull_log,
 FILENAME = 'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLDATAFGFull_log.ldf')</pre></div></div>

<p>I want to make sure the database is in FULL recovery model, so I can take transaction log backups and restore them. </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
</pre></td><td class="de1"><pre class="de1"><span class="kw1">ALTER</span> <span class="kw1">DATABASE</span> FilegroupFull <span class="kw1">SET</span> RECOVERY <span class="kw1">FULL</span>;
GO</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">ALTER DATABASE FilegroupFull SET RECOVERY FULL;
GO</pre></div></div>

<p>You can easily add another filegroup and file to an existing database. I’m going to add a fourth. </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
</pre></td><td class="de1"><pre class="de1"><span class="kw1">ALTER</span> <span class="kw1">DATABASE</span> FilegroupFull <span class="kw1">ADD</span> FILEGROUP FGFullFG4 
<span class="kw1">ALTER</span> <span class="kw1">DATABASE</span> FilegroupFull <span class="kw1">ADD</span> <span class="kw1">FILE</span>
<span class="br0">&#40;</span>NAME <span class="sy0">=</span> FGFull4_dat,
&nbsp;FILENAME <span class="sy0">=</span> <span class="st0">'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLDATAFGFull4_dat.mdf'</span><span class="br0">&#41;</span>
<span class="kw1">TO</span> FILEGROUP FGFullFG4</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">ALTER DATABASE FilegroupFull ADD FILEGROUP FGFullFG4 
ALTER DATABASE FilegroupFull ADD FILE
(NAME = FGFull4_dat,
 FILENAME = 'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLDATAFGFull4_dat.mdf')
TO FILEGROUP FGFullFG4</pre></div></div>

<p>When an object is created in a database, it will be created in the DEFAULT filegroup. Initially, the filegroup PRIMARY is DEFAULT. I am going to change this so FGFullFG2 is DEFAULT. </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
</pre></td><td class="de1"><pre class="de1"><span class="kw1">ALTER</span> <span class="kw1">DATABASE</span> FilegroupFull
<span class="kw1">MODIFY</span> FILEGROUP FGFullFG2 <span class="kw1">DEFAULT</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">ALTER DATABASE FilegroupFull
MODIFY FILEGROUP FGFullFG2 DEFAULT</pre></div></div>

<p>To view my filegroups and files, I can query sys.filegroups. </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
</pre></td><td class="de1"><pre class="de1"><span class="kw1">USE</span> FilegroupFull;
GO
<span class="kw1">SELECT</span> name, data_space_id, type, type_desc, is_default, filegroup_guid, log_filegroup_id, is_read_only
<span class="kw1">FROM</span> sys.<span class="me1">filegroups</span>;</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">USE FilegroupFull;
GO
SELECT name, data_space_id, type, type_desc, is_default, filegroup_guid, log_filegroup_id, is_read_only
FROM sys.filegroups;</pre></div></div>

<div class="image_block"><a href="/wp-content/uploads/users/grrlgeek/Filegroup1.JPG?mtime=1306200506"><img alt="" src="/wp-content/uploads/users/grrlgeek/Filegroup1.JPG?mtime=1306200506" width="805" height="131" /></a></div>
<p>I can also access this information by right-clicking the database name in Object Explorer, selecting Properties, and then selecting Filegroups on the left. </p>
<div class="image_block"><a href="/wp-content/uploads/users/grrlgeek/Filegroup2.JPG?mtime=1306200507"><img alt="" src="/wp-content/uploads/users/grrlgeek/Filegroup2.JPG?mtime=1306200507" width="699" height="625" /></a></div>
<p>In your databases, you probably have Important Data that is accessed most frequently. This may be customer information, recent orders, or current stock. Your less-important data may be historical sales information, or a table listing ledger accounts in your accounting system. In the event of a disaster, during the recovery period, wouldn’t it be great to be able to get the 20% of the data that is used 80% of the time online and usable first, and then work on restoring the remaining data while the business continues to function? How long will it take to restore a filegroup with, say 20 GB of data, instead of 120 GB? With some advance planning, this is possible. </p>
<p>Next is creating tables and adding some orders. I am creating three tables. One will have orders for 2011, the second will have orders for 2010, and the third will be for 2009. This will be an example of how multiple filegroups can be useful, especially when combined with piecemeal restores.</p>
<p>First, I create the 2011 orders table. (If you are unfamiliar with CTEs, which I use to populate these tables, check out my blog post on <a href="/index.php/DataMgmt/DBProgramming/MSSQLServer/t-sql-tuesday-18-a">recursive CTEs</a>. </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
</pre></td><td class="de1"><pre class="de1"><span class="kw1">USE</span> FilegroupFull;
GO
<span class="kw1">CREATE</span> <span class="kw1">TABLE</span> Orders2011 
<span class="br0">&#40;</span>OrderID <span class="kw1">INT</span> <span class="sy0">NOT</span> <span class="sy0">NULL</span>, 
&nbsp;OrderDate <span class="kw1">DATETIME</span> <span class="sy0">NOT</span> <span class="sy0">NULL</span> 
&nbsp;<span class="kw1">CONSTRAINT</span> PKOrders <span class="kw1">PRIMARY</span> <span class="kw1">KEY</span> <span class="kw1">CLUSTERED</span> <span class="br0">&#40;</span>OrderID<span class="br0">&#41;</span><span class="br0">&#41;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">USE FilegroupFull;
GO
CREATE TABLE Orders2011 
(OrderID INT NOT NULL, 
 OrderDate DATETIME NOT NULL 
 CONSTRAINT PKOrders PRIMARY KEY CLUSTERED (OrderID))</pre></div></div>

<p>Let’s check which filegroup this is created on. Will it be created on PRIMARY? </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
</pre></td><td class="de1"><pre class="de1"><span class="kw1">SELECT</span> PA.<span class="kw2">OBJECT_ID</span>, FG.<span class="me1">name</span>
<span class="kw1">FROM</span> sys.<span class="me1">filegroups</span> FG
&nbsp; &nbsp; <span class="kw1">INNER</span> <span class="sy0">JOIN</span> sys.<span class="me1">allocation_units</span> AU <span class="kw1">ON</span> AU.<span class="me1">data_space_id</span> <span class="sy0">=</span> FG.<span class="me1">data_space_id</span>
&nbsp; &nbsp; <span class="kw1">INNER</span> <span class="sy0">JOIN</span> sys.<span class="me1">partitions</span> PA <span class="kw1">ON</span> PA.<span class="me1">partition_id</span> <span class="sy0">=</span> AU.<span class="me1">container_id</span>
<span class="kw1">WHERE</span> PA.<span class="kw2">OBJECT_ID</span> <span class="sy0">=</span>
&nbsp; &nbsp; <span class="br0">&#40;</span><span class="kw1">SELECT</span> <span class="kw2">OBJECT_ID</span><span class="br0">&#40;</span>N<span class="st0">'FilegroupFull.dbo.Orders2011'</span><span class="br0">&#41;</span><span class="br0">&#41;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">SELECT PA.OBJECT_ID, FG.name
FROM sys.filegroups FG
    INNER JOIN sys.allocation_units AU ON AU.data_space_id = FG.data_space_id
    INNER JOIN sys.partitions PA ON PA.partition_id = AU.container_id
WHERE PA.OBJECT_ID =
    (SELECT OBJECT_ID(N'FilegroupFull.dbo.Orders2011'))</pre></div></div>

<div class="image_block"><a href="/wp-content/uploads/users/grrlgeek/Filegroup3.JPG?mtime=1306200507"><img alt="" src="/wp-content/uploads/users/grrlgeek/Filegroup3.JPG?mtime=1306200507" width="189" height="71" /></a></div>
<p>Because I specified FGFullF2 as the default, that is where this table is created. </p>
<p>Let’s continue creating and populating tables. For my 2010 and 2009 tables, I will specify the filegroups I want them created on. </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre></td><td class="de1"><pre class="de1"><span class="kw1">CREATE</span> <span class="kw1">TABLE</span> Orders2010 
<span class="br0">&#40;</span>OrderID <span class="kw1">INT</span> <span class="sy0">NOT</span> <span class="sy0">NULL</span>, 
&nbsp;OrderDate <span class="kw1">DATETIME</span> <span class="sy0">NOT</span> <span class="sy0">NULL</span> 
&nbsp;<span class="kw1">CONSTRAINT</span> PKOrders2010 <span class="kw1">PRIMARY</span> <span class="kw1">KEY</span> <span class="kw1">CLUSTERED</span> <span class="br0">&#40;</span>OrderID<span class="br0">&#41;</span><span class="br0">&#41;</span> 
<span class="kw1">ON</span> FGFullFG3;
GO
&nbsp;
;<span class="kw1">WITH</span> InsertOrders <span class="br0">&#40;</span>OrderID, OrderDate<span class="br0">&#41;</span> <span class="kw1">AS</span> 
<span class="br0">&#40;</span>
<span class="kw1">SELECT</span> <span class="nu0">300100</span>, 
&nbsp; &nbsp; <span class="kw1">CAST</span><span class="br0">&#40;</span><span class="st0">'2010/05/01'</span> <span class="kw1">AS</span> <span class="kw1">DATETIME</span><span class="br0">&#41;</span>
<span class="kw1">UNION</span> <span class="sy0">ALL</span> 
<span class="kw1">SELECT</span> OrderID <span class="sy0">+</span> <span class="nu0">1</span>, 
&nbsp; &nbsp; <span class="kw2">DATEADD</span><span class="br0">&#40;</span>dd, <span class="nu0">1</span>, OrderDate<span class="br0">&#41;</span>
<span class="kw1">FROM</span> InsertOrders 
<span class="kw1">WHERE</span> <span class="kw2">DATEADD</span><span class="br0">&#40;</span>dd, <span class="nu0">1</span>, OrderDate<span class="br0">&#41;</span> <span class="sy0">&lt;=</span> <span class="kw2">DATEADD</span><span class="br0">&#40;</span>dd, <span class="nu0">100</span>, <span class="st0">'2010/05/01'</span><span class="br0">&#41;</span>
<span class="br0">&#41;</span>
<span class="kw1">INSERT</span> <span class="kw1">INTO</span> Orders2010 
<span class="kw1">SELECT</span> OrderID, OrderDate
<span class="kw1">FROM</span> InsertOrders 
<span class="kw1">OPTION</span> <span class="br0">&#40;</span>MAXRECURSION <span class="nu0">100</span><span class="br0">&#41;</span>;
<span class="kw1">CREATE</span> <span class="kw1">TABLE</span> Orders2009 
<span class="br0">&#40;</span>OrderID <span class="kw1">INT</span> <span class="sy0">NOT</span> <span class="sy0">NULL</span>, 
&nbsp;OrderDate <span class="kw1">DATETIME</span> <span class="sy0">NOT</span> <span class="sy0">NULL</span> 
&nbsp;<span class="kw1">CONSTRAINT</span> PKOrders2009 <span class="kw1">PRIMARY</span> <span class="kw1">KEY</span> <span class="kw1">CLUSTERED</span> <span class="br0">&#40;</span>OrderID<span class="br0">&#41;</span><span class="br0">&#41;</span> 
<span class="kw1">ON</span> FGFullFG4;
GO
&nbsp;
;<span class="kw1">WITH</span> InsertOrders <span class="br0">&#40;</span>OrderID, OrderDate<span class="br0">&#41;</span> <span class="kw1">AS</span> 
<span class="br0">&#40;</span>
<span class="kw1">SELECT</span> <span class="nu0">200100</span>, 
&nbsp; &nbsp; <span class="kw1">CAST</span><span class="br0">&#40;</span><span class="st0">'2009/05/01'</span> <span class="kw1">AS</span> <span class="kw1">DATETIME</span><span class="br0">&#41;</span>
<span class="kw1">UNION</span> <span class="sy0">ALL</span> 
<span class="kw1">SELECT</span> OrderID <span class="sy0">+</span> <span class="nu0">1</span>, 
&nbsp; &nbsp; <span class="kw2">DATEADD</span><span class="br0">&#40;</span>dd, <span class="nu0">1</span>, OrderDate<span class="br0">&#41;</span>
<span class="kw1">FROM</span> InsertOrders 
<span class="kw1">WHERE</span> <span class="kw2">DATEADD</span><span class="br0">&#40;</span>dd, <span class="nu0">1</span>, OrderDate<span class="br0">&#41;</span> <span class="sy0">&lt;=</span> <span class="kw2">DATEADD</span><span class="br0">&#40;</span>dd, <span class="nu0">100</span>, <span class="st0">'2009/05/01'</span><span class="br0">&#41;</span>
<span class="br0">&#41;</span>
<span class="kw1">INSERT</span> <span class="kw1">INTO</span> Orders2009
<span class="kw1">SELECT</span> OrderID, OrderDate
<span class="kw1">FROM</span> InsertOrders 
<span class="kw1">OPTION</span> <span class="br0">&#40;</span>MAXRECURSION <span class="nu0">100</span><span class="br0">&#41;</span>;</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">CREATE TABLE Orders2010 
(OrderID INT NOT NULL, 
 OrderDate DATETIME NOT NULL 
 CONSTRAINT PKOrders2010 PRIMARY KEY CLUSTERED (OrderID)) 
ON FGFullFG3;
GO
 
;WITH InsertOrders (OrderID, OrderDate) AS 
(
SELECT 300100, 
	CAST('2010/05/01' AS DATETIME)
UNION ALL 
SELECT OrderID + 1, 
	DATEADD(dd, 1, OrderDate)
FROM InsertOrders 
WHERE DATEADD(dd, 1, OrderDate) &lt;= DATEADD(dd, 100, '2010/05/01')
)
INSERT INTO Orders2010 
SELECT OrderID, OrderDate
FROM InsertOrders 
OPTION (MAXRECURSION 100);
CREATE TABLE Orders2009 
(OrderID INT NOT NULL, 
 OrderDate DATETIME NOT NULL 
 CONSTRAINT PKOrders2009 PRIMARY KEY CLUSTERED (OrderID)) 
ON FGFullFG4;
GO
 
;WITH InsertOrders (OrderID, OrderDate) AS 
(
SELECT 200100, 
	CAST('2009/05/01' AS DATETIME)
UNION ALL 
SELECT OrderID + 1, 
	DATEADD(dd, 1, OrderDate)
FROM InsertOrders 
WHERE DATEADD(dd, 1, OrderDate) &lt;= DATEADD(dd, 100, '2009/05/01')
)
INSERT INTO Orders2009
SELECT OrderID, OrderDate
FROM InsertOrders 
OPTION (MAXRECURSION 100);</pre></div></div>

<p>I’m going to mark FGFullFG4 as read-only, so I can show you the difference between restoring a read-write and a read-only filegroup. </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
</pre></td><td class="de1"><pre class="de1"><span class="kw1">ALTER</span> <span class="kw1">DATABASE</span> FilegroupFull <span class="kw1">SET</span> RESTRICTED_USER <span class="kw1">WITH</span> <span class="kw1">ROLLBACK</span> <span class="kw1">IMMEDIATE</span>;
GO
<span class="kw1">ALTER</span> <span class="kw1">DATABASE</span> FilegroupFull <span class="kw1">MODIFY</span> FILEGROUP FGFullFG4 READONLY;
GO
<span class="kw1">ALTER</span> <span class="kw1">DATABASE</span> FilegroupFull <span class="kw1">SET</span> MULTI_USER;
GO</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">ALTER DATABASE FilegroupFull SET RESTRICTED_USER WITH ROLLBACK IMMEDIATE;
GO
ALTER DATABASE FilegroupFull MODIFY FILEGROUP FGFullFG4 READONLY;
GO
ALTER DATABASE FilegroupFull SET MULTI_USER;
GO</pre></div></div>

<p><strong>Backing Up, and, More Importantly, Restoring</strong>  </p>
<p>I will start with a full database backup. (You <em>are </em>taking regular full backups of your databases, right?) </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
</pre></td><td class="de1"><pre class="de1"><span class="kw1">BACKUP</span> <span class="kw1">DATABASE</span> FilegroupFull <span class="kw1">TO</span> <span class="kw1">DISK</span> <span class="sy0">=</span> N<span class="st0">'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_full.bak'</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">BACKUP DATABASE FilegroupFull TO DISK = N'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_full.bak'</pre></div></div>

<p>Now, I’ll add a record to my Orders2011 table. </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
</pre></td><td class="de1"><pre class="de1"><span class="kw1">USE</span> FilegroupFull;
GO
<span class="kw1">INSERT</span> <span class="kw1">INTO</span> Orders2011 
<span class="kw1">VALUES</span><span class="br0">&#40;</span><span class="nu0">400201</span>, <span class="st0">'2011/08/28'</span><span class="br0">&#41;</span>;</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">USE FilegroupFull;
GO
INSERT INTO Orders2011 
VALUES(400201, '2011/08/28');</pre></div></div>

<p>Then, I perform a transaction log backup. (You <em>are </em>performing regular transaction log backups of your databases in FULL and BULK_LOGGED recovery model, right?) </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
</pre></td><td class="de1"><pre class="de1"><span class="kw1">BACKUP</span> <span class="kw2">LOG</span> FilegroupFull <span class="kw1">TO</span> <span class="kw1">DISK</span> <span class="sy0">=</span> N<span class="st0">'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_tlog1.trn'</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">BACKUP LOG FilegroupFull TO DISK = N'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_tlog1.trn'</pre></div></div>

<p>I’ll add one more record to the table. </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
</pre></td><td class="de1"><pre class="de1"><span class="kw1">INSERT</span> <span class="kw1">INTO</span> Orders2011 
<span class="kw1">VALUES</span><span class="br0">&#40;</span><span class="nu0">400202</span>, <span class="st0">'2011/08/29'</span><span class="br0">&#41;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">INSERT INTO Orders2011 
VALUES(400202, '2011/08/29')</pre></div></div>

<p>Then, I’ll do one more step that you may need to, depending on what scenario you are faced with. I am going to back up the tail of the transaction log. </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
</pre></td><td class="de1"><pre class="de1"><span class="kw1">BACKUP</span> <span class="kw2">LOG</span> FilegroupFull <span class="kw1">TO</span> <span class="kw1">DISK</span> <span class="sy0">=</span> N<span class="st0">'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_tlogtail.trn'</span> 
<span class="kw1">WITH</span> N<span class="sy0">OR</span>ECOVERY, NO_TRUNCATE;</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">BACKUP LOG FilegroupFull TO DISK = N'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_tlogtail.trn' 
WITH NORECOVERY, NO_TRUNCATE;</pre></div></div>

<p>Now, let’s talk disaster. You should have, and regularly test, a disaster recovery process. I will simulate a disaster by dropping the database. Then, I will begin the restore. </p>
<p>The first RESTORE statement in a piecemeal restore, which is known as a <em>partial-restore sequence</em>, must include the PRIMARY filegroup. It also must include the option WITH PARTIAL. You can restore as many filegroups as you want in the first restore. This is when testing your backups regularly comes into play. You should know how large your filegroups are, and how long they will take to restore, and how many you can restore at one time, to meet your company’s disaster recovery business requirements. </p>
<p>I’m going to begin with a restore of PRIMARY only. Because this database is in FULL recovery mode, I will need to restore the logs with every filegroup that is in read-write mode. </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="de1"><pre class="de1"><span class="kw1">RESTORE</span> <span class="kw1">DATABASE</span> FilegroupFull 
FILEGROUP <span class="sy0">=</span> <span class="st0">'Primary'</span>
<span class="kw1">FROM</span> <span class="kw1">DISK</span> <span class="sy0">=</span> N<span class="st0">'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_full.bak'</span> 
<span class="kw1">WITH</span> <span class="kw1">PARTIAL</span>, N<span class="sy0">OR</span>ECOVERY 
<span class="kw1">RESTORE</span> <span class="kw2">LOG</span> FilegroupFull 
<span class="kw1">FROM</span> <span class="kw1">DISK</span> <span class="sy0">=</span> N<span class="st0">'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_tlog1.trn'</span> 
<span class="kw1">WITH</span> N<span class="sy0">OR</span>ECOVERY 
<span class="kw1">RESTORE</span> <span class="kw2">LOG</span> FilegroupFull 
<span class="kw1">FROM</span> <span class="kw1">DISK</span> <span class="sy0">=</span> N<span class="st0">'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_tlogtail.trn'</span> 
<span class="kw1">WITH</span> RECOVERY;
GO</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">RESTORE DATABASE FilegroupFull 
FILEGROUP = 'Primary'
FROM DISK = N'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_full.bak' 
WITH PARTIAL, NORECOVERY 
RESTORE LOG FilegroupFull 
FROM DISK = N'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_tlog1.trn' 
WITH NORECOVERY 
RESTORE LOG FilegroupFull 
FROM DISK = N'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_tlogtail.trn' 
WITH RECOVERY;
GO</pre></div></div>

<p>I can check the status of each file by querying sys.database_files. </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
</pre></td><td class="de1"><pre class="de1"><span class="kw1">SELECT</span> <span class="br0">&#91;</span>name<span class="br0">&#93;</span>, <span class="br0">&#91;</span>state_desc<span class="br0">&#93;</span> 
<span class="kw1">FROM</span> FilegroupFull.<span class="me1">sys</span>.<span class="me1">database_files</span>;
GO</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">SELECT [name], [state_desc] 
FROM FilegroupFull.sys.database_files;
GO</pre></div></div>

<div class="image_block"><a href="/wp-content/uploads/users/grrlgeek/Filegroup4.JPG?mtime=1306200507"><img alt="" src="/wp-content/uploads/users/grrlgeek/Filegroup4.JPG?mtime=1306200507" width="269" height="141" /></a></div>
<p>At this point, what will happen if I try to select from the Orders2011 table? </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
</pre></td><td class="de1"><pre class="de1"><span class="kw1">USE</span> FilegroupFull;
GO
<span class="kw1">SELECT</span> OrderID, OrderDate
<span class="kw1">FROM</span> Orders2011 
<span class="kw1">WHERE</span> OrderID <span class="sy0">=</span> <span class="nu0">400189</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">USE FilegroupFull;
GO
SELECT OrderID, OrderDate
FROM Orders2011 
WHERE OrderID = 400189</pre></div></div>

<pre>&lt;span class="MT_red"&gt;Msg 8653, Level 16, State 1, Line 1
The query processor is unable to produce a plan for the table or view 'Orders2011'
because the table resides in a filegroup which is not online.&lt;/span&gt;</pre>
<p>I continue with a restore of the FGFullFG2 filegroup. This is a <em>filegroup-restore sequence</em>. </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="de1"><pre class="de1"><span class="kw1">USE</span> master;
GO
<span class="kw1">RESTORE</span> <span class="kw1">DATABASE</span> FilegroupFull 
FILEGROUP <span class="sy0">=</span> <span class="st0">'FGFullFG2'</span>
<span class="kw1">FROM</span> <span class="kw1">DISK</span> <span class="sy0">=</span> N<span class="st0">'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_full.bak'</span> 
<span class="kw1">WITH</span> N<span class="sy0">OR</span>ECOVERY
<span class="kw1">RESTORE</span> <span class="kw2">LOG</span> FilegroupFull 
<span class="kw1">FROM</span> <span class="kw1">DISK</span> <span class="sy0">=</span> N<span class="st0">'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_tlog1.trn'</span> 
<span class="kw1">WITH</span> N<span class="sy0">OR</span>ECOVERY 
<span class="kw1">RESTORE</span> <span class="kw2">LOG</span> FilegroupFull 
<span class="kw1">FROM</span> <span class="kw1">DISK</span> <span class="sy0">=</span> N<span class="st0">'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_tlogtail.trn'</span> 
<span class="kw1">WITH</span> RECOVERY;
GO</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">USE master;
GO
RESTORE DATABASE FilegroupFull 
FILEGROUP = 'FGFullFG2'
FROM DISK = N'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_full.bak' 
WITH NORECOVERY
RESTORE LOG FilegroupFull 
FROM DISK = N'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_tlog1.trn' 
WITH NORECOVERY 
RESTORE LOG FilegroupFull 
FROM DISK = N'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_tlogtail.trn' 
WITH RECOVERY;
GO</pre></div></div>

<p>Now, I am able to select from the Orders2011 table. </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
</pre></td><td class="de1"><pre class="de1"><span class="kw1">USE</span> FilegroupFull;
GO
<span class="kw1">SELECT</span> OrderID, OrderDate
<span class="kw1">FROM</span> Orders2011 
<span class="kw1">WHERE</span> OrderID <span class="sy0">=</span> <span class="nu0">400189</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">USE FilegroupFull;
GO
SELECT OrderID, OrderDate
FROM Orders2011 
WHERE OrderID = 400189</pre></div></div>

<div class="image_block"><a href="/wp-content/uploads/users/grrlgeek/Filegroup5.JPG?mtime=1306200508"><img alt="" src="/wp-content/uploads/users/grrlgeek/Filegroup5.JPG?mtime=1306200508" width="237" height="69" /></a></div>
<p>I am also able to INSERT. </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
</pre></td><td class="de1"><pre class="de1"><span class="kw1">INSERT</span> <span class="kw1">INTO</span> Orders2011 
<span class="kw1">VALUES</span><span class="br0">&#40;</span><span class="nu0">400203</span>, <span class="st0">'2011/08/30'</span><span class="br0">&#41;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">INSERT INTO Orders2011 
VALUES(400203, '2011/08/30')</pre></div></div>

<div class="image_block"><a href="/wp-content/uploads/users/grrlgeek/Filegroup6.JPG?mtime=1306200508"><img alt="" src="/wp-content/uploads/users/grrlgeek/Filegroup6.JPG?mtime=1306200508" width="225" height="67" /></a></div>
<p>At this point, my PRIMARY and default filegroups are online. Users could begin working with objects in those filegroups. Any data stored on the files in RECOVERY_PENDING status will be unavailable until those filegroup restores are complete. </p>
<p>Next up is a restore of FGFullFG3. This will bring the Orders2010 table online. </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="de1"><pre class="de1"><span class="kw1">USE</span> master;
GO
<span class="kw1">RESTORE</span> <span class="kw1">DATABASE</span> FilegroupFull 
FILEGROUP <span class="sy0">=</span> <span class="st0">'FGFullFG3'</span>
<span class="kw1">FROM</span> <span class="kw1">DISK</span> <span class="sy0">=</span> N<span class="st0">'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_full.bak'</span> 
<span class="kw1">WITH</span> N<span class="sy0">OR</span>ECOVERY
<span class="kw1">RESTORE</span> <span class="kw2">LOG</span> FilegroupFull 
<span class="kw1">FROM</span> <span class="kw1">DISK</span> <span class="sy0">=</span> N<span class="st0">'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_tlog1.trn'</span> 
<span class="kw1">WITH</span> N<span class="sy0">OR</span>ECOVERY 
<span class="kw1">RESTORE</span> <span class="kw2">LOG</span> FilegroupFull 
<span class="kw1">FROM</span> <span class="kw1">DISK</span> <span class="sy0">=</span> N<span class="st0">'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_tlogtail.trn'</span> 
<span class="kw1">WITH</span> RECOVERY;
GO </pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">USE master;
GO
RESTORE DATABASE FilegroupFull 
FILEGROUP = 'FGFullFG3'
FROM DISK = N'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_full.bak' 
WITH NORECOVERY
RESTORE LOG FilegroupFull 
FROM DISK = N'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_tlog1.trn' 
WITH NORECOVERY 
RESTORE LOG FilegroupFull 
FROM DISK = N'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_tlogtail.trn' 
WITH RECOVERY;
GO </pre></div></div>

<p>Last but not least, I will restore FGFullFG4. Remember, this filegroup is in read-only. Because of this, I will only need to restore from the full backup. I do not need to restore any of the log files. </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
</pre></td><td class="de1"><pre class="de1"><span class="kw1">USE</span> master;
GO
<span class="kw1">RESTORE</span> <span class="kw1">DATABASE</span> FilegroupFull 
FILEGROUP <span class="sy0">=</span> <span class="st0">'FGFullFG4'</span>
<span class="kw1">FROM</span> <span class="kw1">DISK</span> <span class="sy0">=</span> N<span class="st0">'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_full.bak'</span> 
<span class="kw1">WITH</span> RECOVERY;
GO</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">USE master;
GO
RESTORE DATABASE FilegroupFull 
FILEGROUP = 'FGFullFG4'
FROM DISK = N'C:Program FilesMicrosoft SQL ServerMSSQL10_50.MSSQLSERVERMSSQLBackupFilegroupFull_full.bak' 
WITH RECOVERY;
GO</pre></div></div>

<p>To test this, I will select from the Orders2009 table. </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
</pre></td><td class="de1"><pre class="de1"><span class="kw1">USE</span> FilegroupFull;
GO
<span class="kw1">SELECT</span> OrderID, OrderDate
<span class="kw1">FROM</span> Orders2009 
<span class="kw1">WHERE</span> OrderID <span class="sy0">=</span> <span class="nu0">200190</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">USE FilegroupFull;
GO
SELECT OrderID, OrderDate
FROM Orders2009 
WHERE OrderID = 200190</pre></div></div>

<div class="image_block"><a href="/wp-content/uploads/users/grrlgeek/Filegroup7.JPG?mtime=1306200508"><img alt="" src="/wp-content/uploads/users/grrlgeek/Filegroup7.JPG?mtime=1306200508" width="234" height="62" /></a></div>
<p>Success! </p>
<p>At this point, all of my filegroups are online, and files and objects are accessible. So, my database is fully functional. Users have been able to access the database since first filegroup was brought online, and were able to complete at least some work while I continued to restore the files. </p>
<p><strong>Think About It!</strong> </p>
<p>You should always be looking for ways to improve your database performance, simplify administration, and benefit the business. Using multiple filegroups may be one way to do all of this in your environment. Consider the possibilities! </p>
<p><strong>REFERENCES</strong></p>
<p>Performing Piecemeal Restores (<a href="http://msdn.microsoft.com/en-us/library/ms177425.aspx">http://msdn.microsoft.com/en-us/library/ms177425.aspx</a>)</p>
<p>Advanced BACKUP and RESTORE Options, Paul Randal (<a href="http://www.sqlmag.com/article/database-backup-and-recovery/advanced-backup-and-restore-options-129834">http://www.sqlmag.com/article/database-backup-and-recovery/advanced-backup-and-restore-options-129834</a>)</p>
<div class='rp4wp-related-posts'>
<h3>Related Posts</h3>
<ul>
<li><div class='rp4wp-related-post-content'>
<a href='/index.php/datamgmt/dbadmin/sql-server-filegroups-the-what/'>SQL Server Filegroups: The What, The Why and The How</a><p>A filegroup is a logical structure to group objects in a database. Don’t confuse filegroups&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-content'>
<a href='/index.php/datamgmt/dbadmin/mssqlserveradmin/restoring-multiple-transaction-log-backu/'>Restoring multiple transaction log backups</a><p>If you've ever had to restore log files and not use the restore to a&hellip;</p></div>
</li>
</ul>
</div>
</div>
				<div class="post-author">
					<div class="userInfo"><h2>About the Author</h2><img class="bioPic" src="/wp-content/uploads/2014/03/IMG_8755-300x300.jpg" alt="User bio image"/>Jes Borland is a Premier Field Engineer - SQL Server for Microsoft, where she is a trusted technical adviser, deep technical support, and teacher for her customers. Her experience as a DBA, consultant, and 5-time Data Platform MVP allow her to help the business and the IT teams reach their goals. She has worked with SQL Server as a developer, report writer, DBA, and consultant. Her favorite topics are administration, automation, and performance. She frequently presents at user groups, SQL Saturdays, and other community events. She is also an avid runner and chef.
<br style="clear: left" /><div class="bioSoc"><span class="bioSocTitle">Social Sitings</span><a href="http://twitter.com/grrl_geek" title="grrlgeek at Twitter" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_twitter.png" alt="Twitter" /></a><a href="http://www.linkedin.com/pub/jes-schultz-borland/9/393/705" title="grrlgeek at LinkedIn" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_linkedin.png" alt="LinkedIn" /></a><a href="/index.php/author/grrlgeek/feed/" title="Blog RSS feed for grrlgeek" class="bioSocLink"><img src="http://lessthandot.com/images/bdg_rss_icon.png" alt="LTD RSS Feed" /></a></div></div>				</div>
				<div class="post-foot instapaper_ignore">
					<div class="post-tagline">
						<div class="post-foot-views"><label>Article views:</label> 146,317 </div>
						<div class="post-foot-more-posts">
                            <a href="/index.php/author/grrlgeek/">Read More Posts by Jes Borland</a>
						</div>
					</div>
					<div>
						 
					</div>
					<div class="post-tagline" style="height: auto">
						<span class="social-button-label">Share:</span><a href="https://twitter.com/intent/tweet?url=/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/&text=RT @LessThanDot Blog - SQL Server Filegroup Piecemeal Restores by @grrl_geek" class="twitter-share-button-static" target="_blank"><i></i><span class="label">Tweet</span></a><a href="http://www.linkedin.com/shareArticle?mini=true&url=/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/&title=SQL Server Filegroup Piecemeal Restores&source=/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/" target="_blank" title="Share on LinkedIn" class="svg-button"><img alt="Share on LinkedIn"  src="http://lessthandot.com/images/LinkedIn.svg" /></a><a href="http://www.reddit.com/submit?url=/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/&title=SQL Server Filegroup Piecemeal Restores" target="_blank" title="Submit to Reddit" class="svg-button"><img alt="Submit to Reddit" src="http://lessthandot.com/images/Reddit.svg" /></a><a href="https://www.facebook.com/sharer/sharer.php?u=/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/&quote=SQL Server Filegroup Piecemeal Restores" title="Share on Facebook" target="_blank" class="svg-button"><img alt="Share on Facebook" src="http://lessthandot.com/images/Facebook.svg" /></a> <a href="http://www.instapaper.com/hello2?url=/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/&title=SQL Server Filegroup Piecemeal Restores" class="instapaper_button">Instapaper</a>					</div>			
				</div>
				<div class="comments-area instapaper_ignore">
	<h4 class="comments-title">
		6 Comments	</h4>
			<ol class="comments-list">
					<li class="comment even thread-even depth-1" id="comment-4304">
				<div id="div-comment-4304" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://2.gravatar.com/avatar/24e61bc20fbc369f9fe1630d0b0e34bb?s=64&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/24e61bc20fbc369f9fe1630d0b0e34bb?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Richard Armstrong-Finnerty</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/#comment-4304">
			December 10, 2011 at 7:24 am</a>		</div>

		<p>Thank you for taking the time to create this demonstration. Extremely useful.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/?replytocom=4304#respond' onclick='return addComment.moveForm( "div-comment-4304", "4304", "respond", "1187" )' aria-label='Reply to Richard Armstrong-Finnerty'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-4303">
				<div id="div-comment-4303" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://2.gravatar.com/avatar/830d743083da0693e4380273d7f61829?s=64&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/830d743083da0693e4380273d7f61829?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">baso</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/#comment-4303">
			November 10, 2012 at 4:59 am</a>		</div>

		<p>thank you very much&#8230; great article from great person.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/?replytocom=4303#respond' onclick='return addComment.moveForm( "div-comment-4303", "4303", "respond", "1187" )' aria-label='Reply to baso'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-4302">
				<div id="div-comment-4302" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/11c4555c914bc24832b7ef2dad012c99?s=64&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/11c4555c914bc24832b7ef2dad012c99?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Yasin</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/#comment-4302">
			August 20, 2013 at 9:21 am</a>		</div>

		<p>Thanks! For the people who dont have Enterprise Edition of SQL Server they can do the Piecemeal Restore outlined above but will not be able to see the filegroups Online as you go through the steps of restoring filegroups from Backup. Thats the difference, the filegroups and the containing data will be offline. The only change to the restore scripts above is to Restore each filegroup with NORECOVERY except for the last filegroup.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/?replytocom=4302#respond' onclick='return addComment.moveForm( "div-comment-4302", "4302", "respond", "1187" )' aria-label='Reply to Yasin'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-4911418">
				<div id="div-comment-4911418" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/72906ab1649adabba664eb012157356b?s=64&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/72906ab1649adabba664eb012157356b?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">ROSANNE WALCOTT</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/#comment-4911418">
			February 10, 2016 at 2:12 am</a>		</div>

		<p>Nice piece ! For what it&#8217;s worth , if others requires to merge are interested in merging of , my friend merged a service here <a href="http://www.altomerge.com/" rel="nofollow">ALTO-Merge</a>.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/?replytocom=4911418#respond' onclick='return addComment.moveForm( "div-comment-4911418", "4911418", "respond", "1187" )' aria-label='Reply to ROSANNE WALCOTT'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1 parent" id="comment-5078903">
				<div id="div-comment-5078903" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/6419f6e395ef070aa8248846d3443b90?s=64&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/6419f6e395ef070aa8248846d3443b90?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Sunil Kumar Machineni</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/#comment-5078903">
			June 6, 2016 at 6:45 am</a>		</div>

		<p>Thank you Jes, This is highly useful&#8230; and it helped me in resolving one of the issue in our production environment. Thank you so much for such a clear explanation. Looking forward for more posts like this.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/?replytocom=5078903#respond' onclick='return addComment.moveForm( "div-comment-5078903", "5078903", "respond", "1187" )' aria-label='Reply to Sunil Kumar Machineni'>Reply</a></div>
				</div>
		<ol class="children">
		<li class="comment byuser comment-author-grrlgeek bypostauthor odd alt depth-2" id="comment-5113060">
				<div id="div-comment-5113060" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/9a2d253ad20c63844964e14d3571d431?s=64&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/9a2d253ad20c63844964e14d3571d431?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Jes Borland</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/#comment-5113060">
			June 27, 2016 at 10:39 am</a>		</div>

		<p>I&#8217;m glad I could help! Thank you for letting me know.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/?replytocom=5113060#respond' onclick='return addComment.moveForm( "div-comment-5113060", "5113060", "respond", "1187" )' aria-label='Reply to Jes Borland'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		</ol>
						<div id="respond" class="comment-respond">
			<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/index.php/datamgmt/dbadmin/sql-server-filegroup-piecemeal-restores-1/#respond" style="display:none;">Cancel reply</a></small></h3>				<form action="/wp-comments-post.php" method="post" id="commentform" class="comment-form">
					<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" aria-required='true' required='required' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" maxlength="100" aria-describedby="email-notes" aria-required='true' required='required' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="text" value="" size="30" maxlength="200" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='1187' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><input type="hidden" id="killer_value" name="killer_value" value="621bf66ddb7c962aa0d22ac97d69b793"/><noscript>Sorry, but you are required to use a javascript enabled brower to comment here.</noscript>				</form>
					</div><!-- #respond -->
		</div>			</div>
				<br style="clear: both;" />
</div>
		</div>
		<div id="page-footer">
			<div id="botnav"><a href="http://lessthandot.com/" title="LessThanDot Launchpad">Launchpad</a> | <a href="http://lessthandot.com/account.php" title="Your Account Settings">My Account</a> | <a href="http://lessthandot.com/statistics.php" title="Statistics">Statistics</a> | <a href="http://lessthandot.com/donate.php" title="Donate">Donate</a> | <a href="http://lessthandot.com/contactus.php" title="Contact Us">Contact Us</a> | <a href="http://lessthandot.com/aboutus.php" title="About the LessThanDot Team">&copy;2008 - 2019 LessThanDot, LLC</a></div>

		<script type='text/javascript'>
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-4471405-1']);
		_gaq.push(['_trackPageview']);
		_gaq.push(['_setCustomVar', 1, 'Environment', 'lessthandot.com', 3]);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	  </script>			<div class="validator"><a href="http://validator.w3.org/check?uri=referer">Valid XHTML</a> | <a href="http://jigsaw.w3.org/css-validator/check/referer" title="Validate the CSS for this page at the W3C website">Valid CSS</a> | 2018-11-11 15:52</div>
		</div>
	</div>
</div>
<!-- <script type="text/javascript" src="http://apis.google.com/js/plusone.js"></script> -->
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.6.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var spam_destroyer = {"key":"159ff9dcc225580310c2de238cdd1f1a","lifetime":"3600","limit":"1552765882"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/plugins/spam-destroyer/kill.js?ver=1.2'></script>
</body>
</html>
