<!DOCTYPE html>
<html lang="en-US">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
		<link rel="shortcut icon" href="http://lessthandot.com/favicon.ico" type="image/vnd.microsoft.icon" />
	<title>Less Than Dot - Blog -   Creating a Semi-additive Measure over a Parent-child Hierarchy</title>
	<meta prefix="og: http://ogp.me/ns#" property="og:title" content="Less Than Dot - Blog -   Creating a Semi-additive Measure over a Parent-child Hierarchy" />
	<meta prefix="og: http://ogp.me/ns#" property="og:type" content="article" />
	<meta prefix="og: http://ogp.me/ns#" property="og:url" content="/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/" />
		<meta prefix="og: http://ogp.me/ns#" property="og:image" content="http://lessthandot.com/images/logo_prod.png" />
	<meta prefix="og: http://ogp.me/ns#" property="og:type" content="article" />
	<meta prefix="og: http://ogp.me/ns#" property="og:site_name" content="LessThanDot" />
	<meta prefix="og: http://ogp.me/ns#" property="og:description" content="Originally this blog post would have had the title “Disabling aggregations over a parent-child hierarchy”, but I thought it could create confusion with the Aggregation Design concept in Analysis Services (SSAS), which is something completely different.&hellip;" />
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/index.php/feed/" />
	<link rel="alternate" type="application/atom+xml" title="Atom" href="/index.php/feed/atom/" />

	<!-- this page is the canonical URL -->	
	<link rel="stylesheet" href="/wp-content/themes/lessthandot2009/style.css" type="text/css" />
	<link rel="stylesheet" href="http://lessthandot.com/includes/allsite.css" type="text/css" />
	<link rel="stylesheet" href="http://lessthandot.com/includes/allsiteprint.css" media="print" type="text/css" />

	<link rel='dns-prefetch' href='//ajax.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="LessthanDot &raquo; Creating a Semi-additive Measure over a Parent-child Hierarchy Comments Feed" href="/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.1"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='bwp-syntax-css'  href='/wp-content/plugins/better-wordpress-syntax-based-on-geshi/css/bwp-syntax-global.css?ver=4.6.1' type='text/css' media='all' />
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-content/plugins/better-wordpress-syntax-based-on-geshi/js/bwp-syntax.js?ver=4.6.1'></script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Adding Stackoverflow user feed to your homepage' href='/index.php/webdev/serverprogramming/adding-stackoverflow-user-feed-on/' />
<link rel='next' title='SQL Advent 2012 Day 17: No matter how long you are on the wrong path, go back' href='/index.php/datamgmt/dbprogramming/no-matter-how-long-you/' />
<meta name="generator" content="WordPress 4.6.1" />
<link rel="canonical" href="/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/" />
<link rel='shortlink' href='/?p=1844' />
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Findex.php%2Fdatamgmt%2Fdbprogramming%2Fmssqlserver%2Fcreating-a-semi-additive-measure%2F" />
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Findex.php%2Fdatamgmt%2Fdbprogramming%2Fmssqlserver%2Fcreating-a-semi-additive-measure%2F&#038;format=xml" />
<style type='text/css'>.rp4wp-related-posts ul{width:100%;padding:0;margin:0;float:left;}
.rp4wp-related-posts ul>li{list-style:none;padding:0;margin:0;padding-bottom:20px;clear:both;}
.rp4wp-related-posts ul>li>p{margin:0;padding:0;}
.rp4wp-related-post-image{width:35%;padding-right:25px;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;float:left;}</style>
	<script src="http://lessthandot.com/includes/allsite.js" type="text/javascript" ></script>
</head>
<body>
<div id="contain"><div id="subcontain"><div id="ttl"><div id="hdr"><div id="snav"><a href="http://lessthandot.com/login.php?backtrack=/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/?">Member Login</a>
</div><a href="http://lessthandot.com/" title="LessThanDot Launchpad" id="logoc"><img src="http://lessthandot.com/images/logo_prod.png" alt="LessThanDot Site Logo" border="0" /></a><h1>LessThanDot</h1><div class="pgsttl">A decade of helpful technical content</div></div><div id="nav">
<ul>
<li><a href="http://lessthandot.com/" title="LessThanDot Launchpad" id="h" ><span>Launchpad</span></a></li>
<li class="cur"><a href="/" title="LessThanDot Blogs" id="b" ><span>Blogs</span></a></li>
<li><a href="http://forum.lessthandot.com/" title="LessThanDot Community Forums" id="f" ><span>Forum</span></a></li>
<li><a href="http://wiki.lessthandot.com/" title="LessThanDot Wiki Articles" id="w" ><span>Wiki</span></a></li>
<li><a href="http://sqlcop.lessthandot.com/" title="LessThanDot SQLCop" id="a" ><span>SQLCop</span></a></li>
<li><a href="http://lessthandot.com/account.php" title="Your Account Settings" id="r"  class="l_ie"><span>My Account</span></a></li></ul></div>
</div><div id="content">
<div id="fac"><div id="fa">
		<p>Less Than Dot is a community of passionate IT professionals and enthusiasts dedicated to sharing technical knowledge, experience, and assistance. Inside you will find reference materials, interesting technical discussions, and expert tips and commentary.</p></div></div><div class="content-sidebar">
	<div id="social" class="sdsec">
		<h2>LTD Social Sitings</h2>
		<div>
		<a id="social_twitter" href="http://twitter.com/LessThanDot/" title="Follow us on Twitter" ><img src="http://lessthandot.com/images/bdg_twitter.png" alt="Lessthandot twitter"/></a> 
		<a href="http://www.linkedin.com/groups?home=&amp;gid=113440" title="Join us on LinkedIn" ><img src="http://lessthandot.com/images/bdg_linkedin.png" alt="Lessthandot Linkedin" /></a> 
		<a href="http://www.facebook.com/group.php?gid=19330511063" title="Join us on Facebook" ><img src="http://lessthandot.com/images/bdg_facebook.png" alt="Lessthandot facebook"/></a> 
		<a href="http://lessthandot.com/rss.php" title="LessThanDot News Feed" ><img src="http://lessthandot.com/images/bdg_rss_icon.png" alt="Lessthandot rss"/></a> 
		</div>
		<p><em>Note: Watch for social icons on posts by your favorite authors to follow their postings on these and other social sites.</em></p>
	</div><div class="content-sidebar-section">
<h2>Tag cloud</h2>
	<p class="tag-cloud">
		<a href='/index.php/tag/net/' class='tag-link-245 tag-link-position-1' title='21 topics' style='font-size: 8.9565217391304pt;'>.net</a> <a href='/index.php/tag/asp-net/' class='tag-link-168 tag-link-position-2' title='21 topics' style='font-size: 8.9565217391304pt;'>asp.net</a> <a href='/index.php/tag/azure-2/' class='tag-link-321 tag-link-position-3' title='29 topics' style='font-size: 10.173913043478pt;'>azure</a> <a href='/index.php/tag/book/' class='tag-link-130 tag-link-position-4' title='26 topics' style='font-size: 9.7391304347826pt;'>book</a> <a href='/index.php/tag/business-intelligence-2/' class='tag-link-256 tag-link-position-5' title='30 topics' style='font-size: 10.260869565217pt;'>business intelligence</a> <a href='/index.php/tag/c/' class='tag-link-138 tag-link-position-6' title='40 topics' style='font-size: 11.304347826087pt;'>c#</a> <a href='/index.php/tag/database/' class='tag-link-134 tag-link-position-7' title='31 topics' style='font-size: 10.434782608696pt;'>database</a> <a href='/index.php/tag/excel/' class='tag-link-155 tag-link-position-8' title='16 topics' style='font-size: 8pt;'>excel</a> <a href='/index.php/tag/gotcha/' class='tag-link-240 tag-link-position-9' title='19 topics' style='font-size: 8.6086956521739pt;'>gotcha</a> <a href='/index.php/tag/how-to/' class='tag-link-272 tag-link-position-10' title='44 topics' style='font-size: 11.652173913043pt;'>how to</a> <a href='/index.php/tag/mongodb/' class='tag-link-765 tag-link-position-11' title='17 topics' style='font-size: 8.2608695652174pt;'>mongodb</a> <a href='/index.php/tag/nosql/' class='tag-link-775 tag-link-position-12' title='18 topics' style='font-size: 8.4347826086957pt;'>nosql</a> <a href='/index.php/tag/performance/' class='tag-link-179 tag-link-position-13' title='26 topics' style='font-size: 9.7391304347826pt;'>performance</a> <a href='/index.php/tag/security-2/' class='tag-link-398 tag-link-position-14' title='25 topics' style='font-size: 9.5652173913043pt;'>security</a> <a href='/index.php/tag/sql/' class='tag-link-132 tag-link-position-15' title='42 topics' style='font-size: 11.478260869565pt;'>sql</a> <a href='/index.php/tag/sql-advent-2012/' class='tag-link-1416 tag-link-position-16' title='18 topics' style='font-size: 8.4347826086957pt;'>sql advent 2012</a> <a href='/index.php/tag/sql-friday/' class='tag-link-377 tag-link-position-17' title='18 topics' style='font-size: 8.4347826086957pt;'>sql friday</a> <a href='/index.php/tag/sql-server/' class='tag-link-154 tag-link-position-18' title='145 topics' style='font-size: 16.086956521739pt;'>sql server</a> <a href='/index.php/tag/sql-server-2000/' class='tag-link-366 tag-link-position-19' title='45 topics' style='font-size: 11.739130434783pt;'>sql server 2000</a> <a href='/index.php/tag/sql-server-2005/' class='tag-link-327 tag-link-position-20' title='118 topics' style='font-size: 15.391304347826pt;'>sql server 2005</a> <a href='/index.php/tag/sql-server-2008/' class='tag-link-152 tag-link-position-21' title='237 topics' style='font-size: 18pt;'>sql server 2008</a> <a href='/index.php/tag/sql-server-2008-r2/' class='tag-link-548 tag-link-position-22' title='38 topics' style='font-size: 11.130434782609pt;'>sql server 2008 r2</a> <a href='/index.php/tag/sql-server-2012/' class='tag-link-1161 tag-link-position-23' title='76 topics' style='font-size: 13.739130434783pt;'>sql server 2012</a> <a href='/index.php/tag/ssis-2/' class='tag-link-501 tag-link-position-24' title='52 topics' style='font-size: 12.260869565217pt;'>ssis</a> <a href='/index.php/tag/ssms/' class='tag-link-640 tag-link-position-25' title='18 topics' style='font-size: 8.4347826086957pt;'>ssms</a> <a href='/index.php/tag/ssrs-2/' class='tag-link-557 tag-link-position-26' title='27 topics' style='font-size: 9.9130434782609pt;'>ssrs</a> <a href='/index.php/tag/syndicated/' class='tag-link-1407 tag-link-position-27' title='67 topics' style='font-size: 13.217391304348pt;'>syndicated</a> <a href='/index.php/tag/t-sql/' class='tag-link-185 tag-link-position-28' title='26 topics' style='font-size: 9.7391304347826pt;'>t-sql</a> <a href='/index.php/tag/tip/' class='tag-link-194 tag-link-position-29' title='46 topics' style='font-size: 11.826086956522pt;'>tip</a> <a href='/index.php/tag/unit-testing/' class='tag-link-162 tag-link-position-30' title='17 topics' style='font-size: 8.2608695652174pt;'>unit testing</a>	</p>
</div>		<div class="content-sidebar-section">
		<h2>Authors</h2>
			<ul class="author-list dimmed">
				<li><a href="/index.php/author/SQLDenis/" title="Posts by SQLDenis">SQLDenis</a> <a href="/index.php/author/SQLDenis/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (597)</li><li><a href="/index.php/author/onpnt/" title="Posts by Ted Krueger (onpnt)">Ted Krueger (onpnt)</a> <a href="/index.php/author/onpnt/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (355)</li><li><a href="/index.php/author/grrlgeek/" title="Posts by Jes Borland">Jes Borland</a> <a href="/index.php/author/grrlgeek/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (202)</li><li><a href="/index.php/author/tarwn/" title="Posts by Eli Weinstock-Herman (tarwn)">Eli Weinstock-Herman (tarwn)</a> <a href="/index.php/author/tarwn/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (190)</li><li><a href="/index.php/author/koenverbeeck/" title="Posts by Koen Verbeeck">Koen Verbeeck</a> <a href="/index.php/author/koenverbeeck/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (100)</li><li><a href="/index.php/author/alexcuse/" title="Posts by Alex Ullrich">Alex Ullrich</a> <a href="/index.php/author/alexcuse/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (55)</li><li><a href="/index.php/author/gmmastros/" title="Posts by George Mastros (gmmastros)">George Mastros (gmmastros)</a> <a href="/index.php/author/gmmastros/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (45)</li><li><a href="/index.php/author/axel8s/" title="Posts by Axel Achten (axel8s)">Axel Achten (axel8s)</a> <a href="/index.php/author/axel8s/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (28)</li><li><a href="/index.php/author/naomi/" title="Posts by Naomi Nosonovsky">Naomi Nosonovsky</a> <a href="/index.php/author/naomi/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (27)</li><li><a href="/index.php/author/thirster42/" title="Posts by David Forck (thirster42)">David Forck (thirster42)</a> <a href="/index.php/author/thirster42/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (24)</li><li><a href="/index.php/author/chopstik/" title="Posts by chopstik">chopstik</a> <a href="/index.php/author/chopstik/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (20)</li><li><a href="/index.php/author/kconan/" title="Posts by Kevin Conan">Kevin Conan</a> <a href="/index.php/author/kconan/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (18)</li><li><a href="/index.php/author/robearl/" title="Posts by Rob Earl">Rob Earl</a> <a href="/index.php/author/robearl/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (14)</li><li><a href="/index.php/author/thatrickguy/" title="Posts by ThatRickGuy">ThatRickGuy</a> <a href="/index.php/author/thatrickguy/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (12)</li><li><a href="/index.php/author/sqlarcher/" title="Posts by SQLArcher">SQLArcher</a> <a href="/index.php/author/sqlarcher/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (11)</li>                <li><a href="http://lessthandot.com/Stats/BlogAuthors.php">More...</a></li>
			</ul>
		</div>
				<div class="content-sidebar-section">
		<h2>Categories</h2>
			<ul class="categories-list">
					<li class="cat-item cat-item-10"><a href="/index.php/category/all/" >All Blogs</a>
</li>
	<li class="cat-item cat-item-5"><a href="/index.php/category/architect/" >Architecture, Design and Strategy</a>
</li>
	<li class="cat-item cat-item-1759"><a href="/index.php/category/artificial-intelligence/" >Artificial Intelligence</a>
</li>
	<li class="cat-item cat-item-6"><a href="/index.php/category/datamgmt/" >Data Management</a>
</li>
	<li class="cat-item cat-item-7"><a href="/index.php/category/desktopdev/" >Desktop Developer</a>
</li>
	<li class="cat-item cat-item-8"><a href="/index.php/category/enterprisedev/" >Enterprise Developer</a>
</li>
	<li class="cat-item cat-item-11"><a href="/index.php/category/itprofessionals/" >IT Professionals</a>
</li>
	<li class="cat-item cat-item-12"><a href="/index.php/category/itstudents/" >IT Students and Researchers</a>
</li>
	<li class="cat-item cat-item-1743"><a href="/index.php/category/management/" >Management</a>
</li>
	<li class="cat-item cat-item-9"><a href="/index.php/category/sysadmins/" >System Admins</a>
</li>
	<li class="cat-item cat-item-1"><a href="/index.php/category/uncategorized/" >Uncategorized</a>
</li>
	<li class="cat-item cat-item-4"><a href="/index.php/category/webdev/" >Web Developer</a>
</li>
			</ul>
		</div>
		</div><div class="content-main">
				<div class="post-navigation">
				<div class="post-navigation-forward"><a href="/index.php/datamgmt/dbprogramming/no-matter-how-long-you/" rel="next">SQL Advent 2012 Day 17: No matter how long you are on the wrong path, go back</a> &raquo; </div>
				<div class="post-navigation-back">&laquo; <a href="/index.php/webdev/serverprogramming/adding-stackoverflow-user-feed-on/" rel="prev">Adding Stackoverflow user feed to your homepage</a></div>
			</div>
			<div class="post-area instapaper_body">
				<div class="post-title-line">
										<h1 class="instapaper_ignore"><a href="/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/" class="post-title">Creating a Semi-additive Measure over a Parent-child Hierarchy</a></h1>
					<div class="post-byline">by <a href="/index.php/author/koenverbeeck/" title="Posts by Koen Verbeeck" rel="author">Koen Verbeeck</a> on December 17, 2012 in category <a href="/index.php/category/webdev/business-intelligence/" rel="category tag">Business Intelligence</a> <a href="/index.php/category/datamgmt/dbprogramming/mssqlserver/" rel="category tag">Microsoft SQL Server</a> <a href="/index.php/category/datamgmt/ssas/" rel="category tag">SSAS</a>. Article views: 49,116 </div>
				</div>
				<div class="post-tagline"><a href="https://twitter.com/intent/tweet?url=/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/&text=RT @LessThanDot Blog - Creating a Semi-additive Measure over a Parent-child Hierarchy by @Ko_Ver" class="twitter-share-button-static" target="_blank"><i></i><span class="label">Tweet</span></a><a href="http://www.linkedin.com/shareArticle?mini=true&url=/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/&title=Creating a Semi-additive Measure over a Parent-child Hierarchy&source=/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/" target="_blank" title="Share on LinkedIn" class="svg-button"><img alt="Share on LinkedIn"  src="http://lessthandot.com/images/LinkedIn.svg" /></a><a href="http://www.reddit.com/submit?url=/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/&title=Creating a Semi-additive Measure over a Parent-child Hierarchy" target="_blank" title="Submit to Reddit" class="svg-button"><img alt="Submit to Reddit" src="http://lessthandot.com/images/Reddit.svg" /></a><a href="https://www.facebook.com/sharer/sharer.php?u=/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/&quote=Creating a Semi-additive Measure over a Parent-child Hierarchy" title="Share on Facebook" target="_blank" class="svg-button"><img alt="Share on Facebook" src="http://lessthandot.com/images/Facebook.svg" /></a> <a href="http://www.instapaper.com/hello2?url=/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/&title=Creating a Semi-additive Measure over a Parent-child Hierarchy" class="instapaper_button">Instapaper</a></div>

				<div class="post-content"><p style="text-align: justify;">Originally this blog post would have had the title <em>“Disabling aggregations over a parent-child hierarchy”</em>, but I thought it could create confusion with the Aggregation Design concept in Analysis Services (SSAS), which is something completely different.</p>
<p style="text-align: justify;">What I want to describe in this blog post is a method forcing a parent-child hierarchy in SSAS to show the parent’s own data value, instead of the sum of the aggregated values of its children. Why would I want to do such a thing? A client of mine once asked me to create a cube on some financial data. However, the data was delivered by a 3rd party and could not be changed. This means that a parent-child hierarchy – for example the chart of accounts on a Profit&amp;Loss report – should display the values from the database, not vpalues calculated or aggregated by SSAS. In most cases the values would have been the same, but sometimes it wouldn’t, hence the need to create an alternative solution.</p>
<p style="text-align: justify;">Basically I want to create some sort of semi-additive measure, which aggregates values for all dimensions, except the parent-child hierarchy. In this blog post I use sample data regarding some of the bloggers on this site:</p>
<div class="image_block" style="text-align: center;"><a href="/media/users/koenverbeeck/DisableAggregations/sampledata.PNG?mtime=1355177204"><img src="/wp-content/uploads/users/koenverbeeck/DisableAggregations/sampledata.PNG?mtime=1355177204" alt="" width="682" height="343" /></a></div>
<p style="text-align: justify;">The bloggers themselves have the following parent-child hierarchy. (Disclaimer: this is just a fabricated sample. It doesn’t represent any actual hierarchy 🙂 )</p>
<div class="image_block" style="text-align: center;"><a href="/media/users/koenverbeeck/DisableAggregations/Hierarchy_All.PNG?mtime=1355177164"><img src="/wp-content/uploads/users/koenverbeeck/DisableAggregations/Hierarchy_All.PNG?mtime=1355177164" alt="" width="188" height="151" /></a></div>
<p style="text-align: justify;">The following star schema is used to build the cube:</p>
<div class="image_block" style="text-align: center;"><a href="/media/users/koenverbeeck/DisableAggregations/DSV.PNG?mtime=1355177069"><img src="/wp-content/uploads/users/koenverbeeck/DisableAggregations/DSV.PNG?mtime=1355177069" alt="" width="413" height="522" /></a></div>
<p><span style="text-align: justify;">With the default values configured in the SSAS cube, we get this pivot table:</span></p>
<div class="image_block" style="text-align: center;"><a href="/media/users/koenverbeeck/DisableAggregations/Excel_AggTrue_VisibleData_NoCalc.PNG?mtime=1355177144"><img src="/wp-content/uploads/users/koenverbeeck/DisableAggregations/Excel_AggTrue_VisibleData_NoCalc.PNG?mtime=1355177144" alt="" width="248" height="207" /></a></div>
<p><span style="text-align: justify;">We can see SSAS has aggregated the values of the children to the parents, which is incorrect in our case. For example, at the time of writing SQLDenis had written 482 blog posts, not 501. Every parent is also repeated: once with the calculated aggregated value and once with its actual value. This tends to be very confusing for end users, so we want to avoid this.</span></p>
<p style="text-align: justify;"><strong>IsAggregatable</strong></p>
<p style="text-align: justify;">This is a dimension attribute property with a very promising name. However, the only visible effect it has is supplying an <em>(All)</em> level on the attribute hierarchy if this property is set to <em>True</em>.</p>
<div class="image_block" style="text-align: center;"><a href="/media/users/koenverbeeck/DisableAggregations/IsAggregatable.PNG?mtime=1355177185"><img src="/wp-content/uploads/users/koenverbeeck/DisableAggregations/IsAggregatable.PNG?mtime=1355177185" alt="" width="423" height="193" /></a></div>
<p><span style="text-align: justify;">If we set this property to False, we get the following hierarchy:</span></p>
<div class="image_block" style="text-align: center;"><a href="/media/users/koenverbeeck/DisableAggregations/Hierarchy_NoAll.PNG?mtime=1355177173"><img src="/wp-content/uploads/users/koenverbeeck/DisableAggregations/Hierarchy_NoAll.PNG?mtime=1355177173" alt="" width="177" height="134" /></a></div>
<p><span style="text-align: justify;">The </span><em>All</em><span style="text-align: justify;"> member is gone, Chrissie is at the top, but the results are still the same when we browse the cube:</span></p>
<div class="image_block" style="text-align: center;"><a href="/media/users/koenverbeeck/DisableAggregations/browsecube.PNG?mtime=1355177054"><img src="/wp-content/uploads/users/koenverbeeck/DisableAggregations/browsecube.PNG?mtime=1355177054" alt="" width="277" height="164" /></a></div>
<p><span style="font-weight: bold; text-align: justify;">MembersWithData</span></p>
<p class="MsoNormal" style="text-align: justify;"><span lang="EN-US">This parent-child hierarchy property specifies how members with data are treated. We have two options: <em>NonLeafDataVisible</em> (the default) and <em>NonLeafDataHidden</em>.</span></p>
<div class="image_block" style="text-align: center;"><a href="/media/users/koenverbeeck/DisableAggregations/MembersWithData.PNG?mtime=1355177194"><img src="/wp-content/uploads/users/koenverbeeck/DisableAggregations/MembersWithData.PNG?mtime=1355177194" alt="" width="359" height="192" /></a></div>
<p><span style="text-align: justify;">The default specifies if a parent has data, the parent is repeated as a child of its own. The child value will have the actual data, while the parent value will show the aggregated value of all its children. The </span><em>NonLeafDataHidden</em><span style="text-align: justify;"> setting will cause the parent-child hierarchy to show only the actual children of a parent and the parent itself with the aggregated value. This gives the following result in our sample:</span></p>
<div class="image_block" style="text-align: center;"><a href="/media/users/koenverbeeck/DisableAggregations/Excel_AggTrue_HiddenData_NoCalc.PNG?mtime=1355177121"><img src="/wp-content/uploads/users/koenverbeeck/DisableAggregations/Excel_AggTrue_HiddenData_NoCalc.PNG?mtime=1355177121" alt="" width="251" height="164" /></a></div>
<p><span style="text-align: justify;">This is even worse, as it’s not clear how a parent gets its value. For example, blogger onpnt has a value of 406, but grrlgeek has the value 108. The pivot table does not show how the value 406 is calculated, again leading to much confusion.</span></p>
<p class="MsoNormal" style="text-align: justify;"><strong><span lang="EN-US">Defining our semi-additive measure</span></strong><span lang="EN-US"> </span></p>
<p class="MsoNormal" style="text-align: justify;"><span lang="EN-US">SSAS has the possibility to </span><a href="http://msdn.microsoft.com/en-US/library/ms175356(v=sql.105).aspx" target="_blank"><span lang="EN-US">define semi-additive measures</span></a><span lang="EN-US"> – at least in the Enterprise edition for SQL Server 2008 R2 – but unfortunately this doesn’t work for our case: only the time dimension can be taken into account for semi-additive behavior.</span></p>
<p class="MsoNormal" style="text-align: justify;"><span lang="EN-US">So we need create our own calculated semi-additive measure. The following MDX does the trick:</span></p>
<pre>([Blogger].[Blogger].CURRENTMEMBER.DATAMEMBER,[Measures].[Blog Count])</pre>
<p class="MsoNormal" style="text-align: justify;"><span lang="EN-US">This calculated measure is the tuple of the normal additive measure </span><em>Blog </em>Count with the current data member of the parent-child hierarchy <em>Blogger</em>. This forces the cube to take the actual value of a member in the hierarchy instead of calculating an aggregate. We now get the following results:</p>
<div class="image_block" style="text-align: center;"><a href="/media/users/koenverbeeck/DisableAggregations/Excel_AggTrue_VisibleData_Calc.PNG?mtime=1355177136"><img src="/wp-content/uploads/users/koenverbeeck/DisableAggregations/Excel_AggTrue_VisibleData_Calc.PNG?mtime=1355177136" alt="" width="346" height="206" /></a></div>
<p><span style="text-align: justify;">We are on the right track: each parent displays its own actual value. However, the parents are duplicated. Remember the </span><em>NonLeafDataHidden</em><span style="text-align: justify;"> property? Let’s use this to get rid of those extra child members:</span></p>
<div class="image_block" style="text-align: center;">
<div class="image_block"><a href="/media/users/koenverbeeck/DisableAggregations/Excel_AggTrue_HiddenData_Calc.PNG?mtime=1355177107"><img src="/wp-content/uploads/users/koenverbeeck/DisableAggregations/Excel_AggTrue_HiddenData_Calc.PNG?mtime=1355177107" alt="" width="334" height="161" /></a></div>
</div>
<p><span style="text-align: justify;">Now every member of the parent-child hierarchy displays its own data. The semi-additive behavior of this solution is confirmed when browsing other dimensions:</span></p>
<div class="image_block" style="text-align: center;"><a href="/media/users/koenverbeeck/DisableAggregations/browseotherdimensions.PNG?mtime=1355177061"><img src="/wp-content/uploads/users/koenverbeeck/DisableAggregations/browseotherdimensions.PNG?mtime=1355177061" alt="" width="390" height="154" /></a></div>
<p><span style="text-align: justify;">There’s no difference between our calculated measure and the normal measure defined in the measure group. We can mix all the dimensions together and the values are still displayed correctly:</span></p>
<div class="image_block" style="text-align: center;"><a href="/media/users/koenverbeeck/DisableAggregations/Excel_Final.PNG?mtime=1355177155"><img src="/wp-content/uploads/users/koenverbeeck/DisableAggregations/Excel_Final.PNG?mtime=1355177155" alt="" width="599" height="216" /></a></div>
<p><span style="font-weight: bold; text-align: justify;">Conclusion</span></p>
<p class="MsoNormal" style="text-align: justify;"><span lang="EN-US">We can define semi-additive behavior on a parent-child hierarchy with a fairly easy calculated measure. The downside is that you end up with two measures in your cube: a correct one and a not entirely correct one from an end user point of view. This can be solved by using perspectives, if applicable.</span></p>
<p class="MsoNormal" style="text-align: justify;"><span lang="EN-US">Note: the sample project can be downloaded <a href="/media/users/koenverbeeck/DisableAggregations/CreatingSemiAdditiveMeasureOnPC.zip?mtime=1355178036" target="_blank">here</a>.</span></p>
<div class='rp4wp-related-posts'>
<h3>Related Posts</h3>
<ul>
<li><div class='rp4wp-related-post-content'>
<a href='/index.php/webdev/business-intelligence/sql-server-2012-business-intelligence/'>SQL Server 2012 Business Intelligence Whitepaper and Data Tools released</a><p>If you are into Business Intelligence, you are in luck, this week Microsoft has released&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-content'>
<a href='/index.php/datamgmt/dbadmin/sql-server-auditing-creating-a/'>SQL Server Auditing: Creating a Server Specification</a><p>Continuing onwards with the SQL Server auditing feature, let's start off by creating a simple&hellip;</p></div>
</li>
</ul>
</div>
</div>
				<div class="post-author">
					<div class="userInfo"><h2>About the Author</h2><img class="bioPic" src="/wp-content/uploads/2014/08/stickers-music-nirvana-s" alt="User bio image"/>Koen Verbeeck is a Microsoft Business Intelligence consultant at element61, helping clients to get insight in their data. Koen has a comprehensive knowledge of the SQL Server BI stack, with a particular love for Integration Services. He's also a speaker at various conferences.<br style="clear: left" /><div class="bioSoc"><span class="bioSocTitle">Social Sitings</span><a href="http://twitter.com/Ko_Ver" title="koenverbeeck at Twitter" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_twitter.png" alt="Twitter" /></a><a href="http://www.linkedin.com/in/kverbeeck" title="koenverbeeck at LinkedIn" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_linkedin.png" alt="LinkedIn" /></a><a href="/index.php/author/koenverbeeck/feed/" title="Blog RSS feed for koenverbeeck" class="bioSocLink"><img src="http://lessthandot.com/images/bdg_rss_icon.png" alt="LTD RSS Feed" /></a></div></div>				</div>
				<div class="post-foot instapaper_ignore">
					<div class="post-tagline">
						<div class="post-foot-views"><label>Article views:</label> 49,116 </div>
						<div class="post-foot-more-posts">
                            <a href="/index.php/author/koenverbeeck/">Read More Posts by Koen Verbeeck</a>
						</div>
					</div>
					<div>
						<label>Tags:</label> <a href="/index.php/tag/mdx/" rel="tag">mdx</a>, <a href="/index.php/tag/parent-child-hierarchy/" rel="tag">parent-child hierarchy</a>, <a href="/index.php/tag/semi-additive/" rel="tag">semi-additive</a>, <a href="/index.php/tag/ssas-2/" rel="tag">ssas</a> 
					</div>
					<div class="post-tagline" style="height: auto">
						<span class="social-button-label">Share:</span><a href="https://twitter.com/intent/tweet?url=/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/&text=RT @LessThanDot Blog - Creating a Semi-additive Measure over a Parent-child Hierarchy by @Ko_Ver" class="twitter-share-button-static" target="_blank"><i></i><span class="label">Tweet</span></a><a href="http://www.linkedin.com/shareArticle?mini=true&url=/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/&title=Creating a Semi-additive Measure over a Parent-child Hierarchy&source=/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/" target="_blank" title="Share on LinkedIn" class="svg-button"><img alt="Share on LinkedIn"  src="http://lessthandot.com/images/LinkedIn.svg" /></a><a href="http://www.reddit.com/submit?url=/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/&title=Creating a Semi-additive Measure over a Parent-child Hierarchy" target="_blank" title="Submit to Reddit" class="svg-button"><img alt="Submit to Reddit" src="http://lessthandot.com/images/Reddit.svg" /></a><a href="https://www.facebook.com/sharer/sharer.php?u=/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/&quote=Creating a Semi-additive Measure over a Parent-child Hierarchy" title="Share on Facebook" target="_blank" class="svg-button"><img alt="Share on Facebook" src="http://lessthandot.com/images/Facebook.svg" /></a> <a href="http://www.instapaper.com/hello2?url=/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/&title=Creating a Semi-additive Measure over a Parent-child Hierarchy" class="instapaper_button">Instapaper</a>					</div>			
				</div>
				<div class="comments-area instapaper_ignore">
	<h4 class="comments-title">
		3 Comments	</h4>
			<ol class="comments-list">
					<li class="comment even thread-even depth-1" id="comment-1496793">
				<div id="div-comment-1496793" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://2.gravatar.com/avatar/829fb2009bf3819b0d73942620728601?s=64&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/829fb2009bf3819b0d73942620728601?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Alexander</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/#comment-1496793">
			August 1, 2014 at 6:43 am</a>		</div>

		<p>Thank you very much for article. It&#8217;s exactly my case! )</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/?replytocom=1496793#respond' onclick='return addComment.moveForm( "div-comment-1496793", "1496793", "respond", "1844" )' aria-label='Reply to Alexander'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-3883051">
				<div id="div-comment-3883051" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/d6614dbf0cc36489ee2252905e37b3f6?s=64&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/d6614dbf0cc36489ee2252905e37b3f6?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Alex</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/#comment-3883051">
			March 3, 2015 at 12:24 pm</a>		</div>

		<p>This is an excellent approach.  It works great with one parent-child dimension.</p>
<p>However I could not make it work with than one parent child hierarchy in the cube.  Do you have any tips for that?</p>
<p>Thanks in advance!</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/?replytocom=3883051#respond' onclick='return addComment.moveForm( "div-comment-3883051", "3883051", "respond", "1844" )' aria-label='Reply to Alex'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-3883308">
				<div id="div-comment-3883308" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/d6614dbf0cc36489ee2252905e37b3f6?s=64&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/d6614dbf0cc36489ee2252905e37b3f6?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Alex</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/#comment-3883308">
			March 3, 2015 at 1:18 pm</a>		</div>

		<p>That would be &#8216;more than one parent child hierarchy&#8217;</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/?replytocom=3883308#respond' onclick='return addComment.moveForm( "div-comment-3883308", "3883308", "respond", "1844" )' aria-label='Reply to Alex'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		</ol>
						<div id="respond" class="comment-respond">
			<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/index.php/datamgmt/dbprogramming/mssqlserver/creating-a-semi-additive-measure/#respond" style="display:none;">Cancel reply</a></small></h3>				<form action="/wp-comments-post.php" method="post" id="commentform" class="comment-form">
					<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" aria-required='true' required='required' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" maxlength="100" aria-describedby="email-notes" aria-required='true' required='required' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="text" value="" size="30" maxlength="200" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='1844' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><input type="hidden" id="killer_value" name="killer_value" value="54a367d629152b720749e187b3eaa11b"/><noscript>Sorry, but you are required to use a javascript enabled brower to comment here.</noscript>				</form>
					</div><!-- #respond -->
		</div>			</div>
				<br style="clear: both;" />
</div>
		</div>
		<div id="page-footer">
			<div id="botnav"><a href="http://lessthandot.com/" title="LessThanDot Launchpad">Launchpad</a> | <a href="http://lessthandot.com/account.php" title="Your Account Settings">My Account</a> | <a href="http://lessthandot.com/statistics.php" title="Statistics">Statistics</a> | <a href="http://lessthandot.com/donate.php" title="Donate">Donate</a> | <a href="http://lessthandot.com/contactus.php" title="Contact Us">Contact Us</a> | <a href="http://lessthandot.com/aboutus.php" title="About the LessThanDot Team">&copy;2008 - 2019 LessThanDot, LLC</a></div>

		<script type='text/javascript'>
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-4471405-1']);
		_gaq.push(['_trackPageview']);
		_gaq.push(['_setCustomVar', 1, 'Environment', 'lessthandot.com', 3]);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	  </script>			<div class="validator"><a href="http://validator.w3.org/check?uri=referer">Valid XHTML</a> | <a href="http://jigsaw.w3.org/css-validator/check/referer" title="Validate the CSS for this page at the W3C website">Valid CSS</a> | 2018-11-11 15:52</div>
		</div>
	</div>
</div>
<!-- <script type="text/javascript" src="http://apis.google.com/js/plusone.js"></script> -->
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.6.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var spam_destroyer = {"key":"159ff9dcc225580310c2de238cdd1f1a","lifetime":"3600","limit":"1552765959"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/plugins/spam-destroyer/kill.js?ver=1.2'></script>
</body>
</html>
