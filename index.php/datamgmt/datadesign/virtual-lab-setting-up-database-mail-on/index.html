<!DOCTYPE html>
<html lang="en-US">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
		<link rel="shortcut icon" href="http://lessthandot.com/favicon.ico" type="image/vnd.microsoft.icon" />
	<title>Less Than Dot - Blog -   Virtual Lab: Setting up Database Mail on SQL Server 2008 R2</title>
	<meta prefix="og: http://ogp.me/ns#" property="og:title" content="Less Than Dot - Blog -   Virtual Lab: Setting up Database Mail on SQL Server 2008 R2" />
	<meta prefix="og: http://ogp.me/ns#" property="og:type" content="article" />
	<meta prefix="og: http://ogp.me/ns#" property="og:url" content="/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/" />
		<meta prefix="og: http://ogp.me/ns#" property="og:image" content="http://lessthandot.com/images/logo_prod.png" />
	<meta prefix="og: http://ogp.me/ns#" property="og:type" content="article" />
	<meta prefix="og: http://ogp.me/ns#" property="og:site_name" content="LessThanDot" />
	<meta prefix="og: http://ogp.me/ns#" property="og:description" content="After our installation of SQL Server 2008 R2 a few weeks ago, we mentioned that we still had some additional setup tasks before we could consider the server to be done. This article covers setting up DatabaseMail, the internal mail client that will allow us to use built-in alerts (among other things)." />
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/index.php/feed/" />
	<link rel="alternate" type="application/atom+xml" title="Atom" href="/index.php/feed/atom/" />

	<!-- this page is the canonical URL -->	
	<link rel="stylesheet" href="/wp-content/themes/lessthandot2009/style.css" type="text/css" />
	<link rel="stylesheet" href="http://lessthandot.com/includes/allsite.css" type="text/css" />
	<link rel="stylesheet" href="http://lessthandot.com/includes/allsiteprint.css" media="print" type="text/css" />

	<link rel='dns-prefetch' href='//ajax.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="LessthanDot &raquo; Virtual Lab: Setting up Database Mail on SQL Server 2008 R2 Comments Feed" href="/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.1"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='bwp-syntax-css'  href='/wp-content/plugins/better-wordpress-syntax-based-on-geshi/css/bwp-syntax-global.css?ver=4.6.1' type='text/css' media='all' />
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-content/plugins/better-wordpress-syntax-based-on-geshi/js/bwp-syntax.js?ver=4.6.1'></script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='MSDN Ultimate Subscription giveaway' href='/index.php/architect/hardwareinfrastructuredesign/msdn-ultimate-subscription-giveaway/' />
<link rel='next' title='MSDN Ultimate Subscription giveaway +1' href='/index.php/architect/hardwareinfrastructuredesign/msdn-ultimate-subscription-giveaway-2/' />
<meta name="generator" content="WordPress 4.6.1" />
<link rel="canonical" href="/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/" />
<link rel='shortlink' href='/?p=834' />
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Findex.php%2Fdatamgmt%2Fdatadesign%2Fvirtual-lab-setting-up-database-mail-on%2F" />
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Findex.php%2Fdatamgmt%2Fdatadesign%2Fvirtual-lab-setting-up-database-mail-on%2F&#038;format=xml" />
<style type='text/css'>.rp4wp-related-posts ul{width:100%;padding:0;margin:0;float:left;}
.rp4wp-related-posts ul>li{list-style:none;padding:0;margin:0;padding-bottom:20px;clear:both;}
.rp4wp-related-posts ul>li>p{margin:0;padding:0;}
.rp4wp-related-post-image{width:35%;padding-right:25px;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;float:left;}</style>
	<script src="http://lessthandot.com/includes/allsite.js" type="text/javascript" ></script>
</head>
<body>
<div id="contain"><div id="subcontain"><div id="ttl"><div id="hdr"><div id="snav"><a href="http://lessthandot.com/login.php?backtrack=/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/?">Member Login</a>
</div><a href="http://lessthandot.com/" title="LessThanDot Launchpad" id="logoc"><img src="http://lessthandot.com/images/logo_prod.png" alt="LessThanDot Site Logo" border="0" /></a><h1>LessThanDot</h1><div class="pgsttl">A decade of helpful technical content</div></div><div id="nav">
<ul>
<li><a href="http://lessthandot.com/" title="LessThanDot Launchpad" id="h" ><span>Launchpad</span></a></li>
<li class="cur"><a href="/" title="LessThanDot Blogs" id="b" ><span>Blogs</span></a></li>
<li><a href="http://forum.lessthandot.com/" title="LessThanDot Community Forums" id="f" ><span>Forum</span></a></li>
<li><a href="http://wiki.lessthandot.com/" title="LessThanDot Wiki Articles" id="w" ><span>Wiki</span></a></li>
<li><a href="http://sqlcop.lessthandot.com/" title="LessThanDot SQLCop" id="a" ><span>SQLCop</span></a></li>
<li><a href="http://lessthandot.com/account.php" title="Your Account Settings" id="r"  class="l_ie"><span>My Account</span></a></li></ul></div>
</div><div id="content">
<div id="fac"><div id="fa">
		<p>Less Than Dot is a community of passionate IT professionals and enthusiasts dedicated to sharing technical knowledge, experience, and assistance. Inside you will find reference materials, interesting technical discussions, and expert tips and commentary.</p></div></div><div class="content-sidebar">
	<div id="social" class="sdsec">
		<h2>LTD Social Sitings</h2>
		<div>
		<a id="social_twitter" href="http://twitter.com/LessThanDot/" title="Follow us on Twitter" ><img src="http://lessthandot.com/images/bdg_twitter.png" alt="Lessthandot twitter"/></a> 
		<a href="http://www.linkedin.com/groups?home=&amp;gid=113440" title="Join us on LinkedIn" ><img src="http://lessthandot.com/images/bdg_linkedin.png" alt="Lessthandot Linkedin" /></a> 
		<a href="http://www.facebook.com/group.php?gid=19330511063" title="Join us on Facebook" ><img src="http://lessthandot.com/images/bdg_facebook.png" alt="Lessthandot facebook"/></a> 
		<a href="http://lessthandot.com/rss.php" title="LessThanDot News Feed" ><img src="http://lessthandot.com/images/bdg_rss_icon.png" alt="Lessthandot rss"/></a> 
		</div>
		<p><em>Note: Watch for social icons on posts by your favorite authors to follow their postings on these and other social sites.</em></p>
	</div><div class="content-sidebar-section">
<h2>Tag cloud</h2>
	<p class="tag-cloud">
		<a href='/index.php/tag/net/' class='tag-link-245 tag-link-position-1' title='21 topics' style='font-size: 8.9565217391304pt;'>.net</a> <a href='/index.php/tag/asp-net/' class='tag-link-168 tag-link-position-2' title='21 topics' style='font-size: 8.9565217391304pt;'>asp.net</a> <a href='/index.php/tag/azure-2/' class='tag-link-321 tag-link-position-3' title='29 topics' style='font-size: 10.173913043478pt;'>azure</a> <a href='/index.php/tag/book/' class='tag-link-130 tag-link-position-4' title='26 topics' style='font-size: 9.7391304347826pt;'>book</a> <a href='/index.php/tag/business-intelligence-2/' class='tag-link-256 tag-link-position-5' title='30 topics' style='font-size: 10.260869565217pt;'>business intelligence</a> <a href='/index.php/tag/c/' class='tag-link-138 tag-link-position-6' title='40 topics' style='font-size: 11.304347826087pt;'>c#</a> <a href='/index.php/tag/database/' class='tag-link-134 tag-link-position-7' title='31 topics' style='font-size: 10.434782608696pt;'>database</a> <a href='/index.php/tag/excel/' class='tag-link-155 tag-link-position-8' title='16 topics' style='font-size: 8pt;'>excel</a> <a href='/index.php/tag/gotcha/' class='tag-link-240 tag-link-position-9' title='19 topics' style='font-size: 8.6086956521739pt;'>gotcha</a> <a href='/index.php/tag/how-to/' class='tag-link-272 tag-link-position-10' title='44 topics' style='font-size: 11.652173913043pt;'>how to</a> <a href='/index.php/tag/mongodb/' class='tag-link-765 tag-link-position-11' title='17 topics' style='font-size: 8.2608695652174pt;'>mongodb</a> <a href='/index.php/tag/nosql/' class='tag-link-775 tag-link-position-12' title='18 topics' style='font-size: 8.4347826086957pt;'>nosql</a> <a href='/index.php/tag/performance/' class='tag-link-179 tag-link-position-13' title='26 topics' style='font-size: 9.7391304347826pt;'>performance</a> <a href='/index.php/tag/security-2/' class='tag-link-398 tag-link-position-14' title='25 topics' style='font-size: 9.5652173913043pt;'>security</a> <a href='/index.php/tag/sql/' class='tag-link-132 tag-link-position-15' title='42 topics' style='font-size: 11.478260869565pt;'>sql</a> <a href='/index.php/tag/sql-advent-2012/' class='tag-link-1416 tag-link-position-16' title='18 topics' style='font-size: 8.4347826086957pt;'>sql advent 2012</a> <a href='/index.php/tag/sql-friday/' class='tag-link-377 tag-link-position-17' title='18 topics' style='font-size: 8.4347826086957pt;'>sql friday</a> <a href='/index.php/tag/sql-server/' class='tag-link-154 tag-link-position-18' title='145 topics' style='font-size: 16.086956521739pt;'>sql server</a> <a href='/index.php/tag/sql-server-2000/' class='tag-link-366 tag-link-position-19' title='45 topics' style='font-size: 11.739130434783pt;'>sql server 2000</a> <a href='/index.php/tag/sql-server-2005/' class='tag-link-327 tag-link-position-20' title='118 topics' style='font-size: 15.391304347826pt;'>sql server 2005</a> <a href='/index.php/tag/sql-server-2008/' class='tag-link-152 tag-link-position-21' title='237 topics' style='font-size: 18pt;'>sql server 2008</a> <a href='/index.php/tag/sql-server-2008-r2/' class='tag-link-548 tag-link-position-22' title='38 topics' style='font-size: 11.130434782609pt;'>sql server 2008 r2</a> <a href='/index.php/tag/sql-server-2012/' class='tag-link-1161 tag-link-position-23' title='76 topics' style='font-size: 13.739130434783pt;'>sql server 2012</a> <a href='/index.php/tag/ssis-2/' class='tag-link-501 tag-link-position-24' title='52 topics' style='font-size: 12.260869565217pt;'>ssis</a> <a href='/index.php/tag/ssms/' class='tag-link-640 tag-link-position-25' title='18 topics' style='font-size: 8.4347826086957pt;'>ssms</a> <a href='/index.php/tag/ssrs-2/' class='tag-link-557 tag-link-position-26' title='27 topics' style='font-size: 9.9130434782609pt;'>ssrs</a> <a href='/index.php/tag/syndicated/' class='tag-link-1407 tag-link-position-27' title='67 topics' style='font-size: 13.217391304348pt;'>syndicated</a> <a href='/index.php/tag/t-sql/' class='tag-link-185 tag-link-position-28' title='26 topics' style='font-size: 9.7391304347826pt;'>t-sql</a> <a href='/index.php/tag/tip/' class='tag-link-194 tag-link-position-29' title='46 topics' style='font-size: 11.826086956522pt;'>tip</a> <a href='/index.php/tag/unit-testing/' class='tag-link-162 tag-link-position-30' title='17 topics' style='font-size: 8.2608695652174pt;'>unit testing</a>	</p>
</div>		<div class="content-sidebar-section">
		<h2>Authors</h2>
			<ul class="author-list dimmed">
				<li><a href="/index.php/author/SQLDenis/" title="Posts by SQLDenis">SQLDenis</a> <a href="/index.php/author/SQLDenis/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (597)</li><li><a href="/index.php/author/onpnt/" title="Posts by Ted Krueger (onpnt)">Ted Krueger (onpnt)</a> <a href="/index.php/author/onpnt/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (355)</li><li><a href="/index.php/author/grrlgeek/" title="Posts by Jes Borland">Jes Borland</a> <a href="/index.php/author/grrlgeek/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (202)</li><li><a href="/index.php/author/tarwn/" title="Posts by Eli Weinstock-Herman (tarwn)">Eli Weinstock-Herman (tarwn)</a> <a href="/index.php/author/tarwn/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (190)</li><li><a href="/index.php/author/koenverbeeck/" title="Posts by Koen Verbeeck">Koen Verbeeck</a> <a href="/index.php/author/koenverbeeck/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (100)</li><li><a href="/index.php/author/alexcuse/" title="Posts by Alex Ullrich">Alex Ullrich</a> <a href="/index.php/author/alexcuse/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (55)</li><li><a href="/index.php/author/gmmastros/" title="Posts by George Mastros (gmmastros)">George Mastros (gmmastros)</a> <a href="/index.php/author/gmmastros/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (45)</li><li><a href="/index.php/author/axel8s/" title="Posts by Axel Achten (axel8s)">Axel Achten (axel8s)</a> <a href="/index.php/author/axel8s/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (28)</li><li><a href="/index.php/author/naomi/" title="Posts by Naomi Nosonovsky">Naomi Nosonovsky</a> <a href="/index.php/author/naomi/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (27)</li><li><a href="/index.php/author/thirster42/" title="Posts by David Forck (thirster42)">David Forck (thirster42)</a> <a href="/index.php/author/thirster42/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (24)</li><li><a href="/index.php/author/chopstik/" title="Posts by chopstik">chopstik</a> <a href="/index.php/author/chopstik/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (20)</li><li><a href="/index.php/author/kconan/" title="Posts by Kevin Conan">Kevin Conan</a> <a href="/index.php/author/kconan/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (18)</li><li><a href="/index.php/author/robearl/" title="Posts by Rob Earl">Rob Earl</a> <a href="/index.php/author/robearl/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (14)</li><li><a href="/index.php/author/thatrickguy/" title="Posts by ThatRickGuy">ThatRickGuy</a> <a href="/index.php/author/thatrickguy/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (12)</li><li><a href="/index.php/author/sqlarcher/" title="Posts by SQLArcher">SQLArcher</a> <a href="/index.php/author/sqlarcher/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (11)</li>                <li><a href="http://lessthandot.com/Stats/BlogAuthors.php">More...</a></li>
			</ul>
		</div>
				<div class="content-sidebar-section">
		<h2>Categories</h2>
			<ul class="categories-list">
					<li class="cat-item cat-item-10"><a href="/index.php/category/all/" >All Blogs</a>
</li>
	<li class="cat-item cat-item-5"><a href="/index.php/category/architect/" >Architecture, Design and Strategy</a>
</li>
	<li class="cat-item cat-item-1759"><a href="/index.php/category/artificial-intelligence/" >Artificial Intelligence</a>
</li>
	<li class="cat-item cat-item-6"><a href="/index.php/category/datamgmt/" >Data Management</a>
</li>
	<li class="cat-item cat-item-7"><a href="/index.php/category/desktopdev/" >Desktop Developer</a>
</li>
	<li class="cat-item cat-item-8"><a href="/index.php/category/enterprisedev/" >Enterprise Developer</a>
</li>
	<li class="cat-item cat-item-11"><a href="/index.php/category/itprofessionals/" >IT Professionals</a>
</li>
	<li class="cat-item cat-item-12"><a href="/index.php/category/itstudents/" >IT Students and Researchers</a>
</li>
	<li class="cat-item cat-item-1743"><a href="/index.php/category/management/" >Management</a>
</li>
	<li class="cat-item cat-item-9"><a href="/index.php/category/sysadmins/" >System Admins</a>
</li>
	<li class="cat-item cat-item-1"><a href="/index.php/category/uncategorized/" >Uncategorized</a>
</li>
	<li class="cat-item cat-item-4"><a href="/index.php/category/webdev/" >Web Developer</a>
</li>
			</ul>
		</div>
		</div><div class="content-main">
				<div class="post-navigation">
				<div class="post-navigation-forward"><a href="/index.php/architect/hardwareinfrastructuredesign/msdn-ultimate-subscription-giveaway-2/" rel="next">MSDN Ultimate Subscription giveaway +1</a> &raquo; </div>
				<div class="post-navigation-back">&laquo; <a href="/index.php/architect/hardwareinfrastructuredesign/msdn-ultimate-subscription-giveaway/" rel="prev">MSDN Ultimate Subscription giveaway</a></div>
			</div>
			<div class="post-area instapaper_body">
				<div class="post-title-line">
										<h1 class="instapaper_ignore"><a href="/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/" class="post-title">Virtual Lab: Setting up Database Mail on SQL Server 2008 R2</a></h1>
					<div class="post-byline">by <a href="/index.php/author/tarwn/" title="Posts by Eli Weinstock-Herman (tarwn)" rel="author">Eli Weinstock-Herman (tarwn)</a> on July 6, 2010 in category <a href="/index.php/category/datamgmt/datadesign/" rel="category tag">Data Modelling and Design</a>. Article views: 13,578 </div>
				</div>
				<div class="post-tagline"><a href="https://twitter.com/intent/tweet?url=/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/&text=RT @LessThanDot Blog - Virtual Lab: Setting up Database Mail on SQL Server 2008 R2 by @tarwn" class="twitter-share-button-static" target="_blank"><i></i><span class="label">Tweet</span></a><a href="http://www.linkedin.com/shareArticle?mini=true&url=/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/&title=Virtual Lab: Setting up Database Mail on SQL Server 2008 R2&source=/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/" target="_blank" title="Share on LinkedIn" class="svg-button"><img alt="Share on LinkedIn"  src="http://lessthandot.com/images/LinkedIn.svg" /></a><a href="http://www.reddit.com/submit?url=/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/&title=Virtual Lab: Setting up Database Mail on SQL Server 2008 R2" target="_blank" title="Submit to Reddit" class="svg-button"><img alt="Submit to Reddit" src="http://lessthandot.com/images/Reddit.svg" /></a><a href="https://www.facebook.com/sharer/sharer.php?u=/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/&quote=Virtual Lab: Setting up Database Mail on SQL Server 2008 R2" title="Share on Facebook" target="_blank" class="svg-button"><img alt="Share on Facebook" src="http://lessthandot.com/images/Facebook.svg" /></a> <a href="http://www.instapaper.com/hello2?url=/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/&title=Virtual Lab: Setting up Database Mail on SQL Server 2008 R2" class="instapaper_button">Instapaper</a></div>

				<div class="post-content"><div class="acc_header">
After our installation of SQL Server 2008 R2 <a href="/index.php/DataMgmt/DBAdmin/MSSQLServerAdmin/virtual-lab-creating-a-basic-sql-2008-r2" alt="Click here to catch up on that article if you missed it" target="_blank">a few weeks ago</a>, I mentioned that we still had some additional setup tasks before we could consider the server to be done. This article covers setting up DatabaseMail, the internal mail client/management system that will allow us to use built-in alerts (among other things).<br />
<br />
<label>Technical Area:</label> Accidental Database Administrator<br />
<label class="diff">Level of Difficulty: </label><img src="http://tiernok.com/LTDBlog/dr_basic.png" alt="Basic Difficulty" /><br />
<label>Additional Articles:</label><a href="http://wiki.lessthandot.com/index.php/Virtual_Lab" title="View the wiki entry">Virtual Lab entry on the LTD Wiki</a>
</div>
<p>Database Mail is a subsystem that acts like a <a href="http://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol" title="Simple Mail Transport Protocol">SMTP</a> client, allowing us to send emails from SQL Server processes and scripts. It replaces SQL Mail and doesn&#8217;t require a local installation of additional software (like Outlook, the quick fix) to function. </p>
<h2>Account, Profile, Service Broker, what?</h2>
<p>Database Mail expands on the concept of sending mail to include all of the features we wanted in SQLMail. This grown up version of mail uses SMTP to communicate with mail servers, no longer requiring a MAPI component to communicate messages (the reason we used to install products like Outlook to make SQLMail work). Behind the scenes, Database Mail uses Service Broker to manage email in queues, rather than trying an immediate send. Profiles allow us to define a chain of fail-over accounts to send from, so that messages are never left undelivered due to a primary email server being unavailable. And accounts are exactly what they sound like, individual, unique accounts that we can setup to use a variety of authentication and SMTP options.</p>
<h2>From the GUI</h2>
<p>Database Mail is something we want to setup immediately on creating a new server. When we are working with a relatively small number of servers, the GUI is not a bad option for setting up some accounts.</p>
<p>We&#8217;ll start by setting up an administrator profile with then intent to send critical notifications and alerts to this profile.</p>
<p>In SSMS we can right click the Database Mail entry under Management to begin the wizard.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/DatabaseMail/orig/01_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/DatabaseMail/01_config.png" alt="SSMS DatabaseMail" /></a><br />
	DatabaseMail Menu Item in SSMS
</div>
<p>The Intro screen is fairly boring, so lets press &#8220;Next&#8221; and head to the main configuration page. This being the first time we are configuring DatabaseMail on our new server, we want to leave the first option selected and continue.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/DatabaseMail/orig/02_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/DatabaseMail/02_config.png" alt="SSMS DatabaseMail Wizard" /></a><br />
	DatabaseMail Wizard in SSMS
</div>
<p>A quick check by the wizard and it determines that components for Database Mail aren&#8217;t available on the server yet, so it asks us if we want to go ahead and install them (yes).</p>
<div class="hint">
How did the server know Database Mail wasn&#8217;t configured, and what did it do when we pressed &#8216;Yes&#8217;? <br />
There is an advanced option in the system configurations called &#8216;Database Mail XPs&#8217;. When the option is set to &#8216;0&#8217; (which is the default), then the Database Mail process doesn&#8217;t run. So the dialog simply checked the current value and, when we selected &#8216;Yes&#8217;, updated the configuration to a value of &#8216;1&#8217;.
</div>
<p>Profiles are used to represent a set of email addresses which allows us to represent a single person (or system) with multiple fail-over accounts. If an error occurs when the system is attempting to send mail from the first account in a profile, it fails to the next and retries, continuing until it either runs out of accounts or successfully sends it&#8217;s message.</p>
<p>Lets enter a Profile Name of &#8220;The Accidental Admin&#8221;.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/DatabaseMail/orig/03_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/DatabaseMail/02_config.png" alt="SSMS DatabaseMail Wizard" /></a><br />
	DatabaseMail Wizard in SSMS
</div>
<p>Now we&#8217;ll add the first two accounts to this profile, each on a different network. Many admins will choose a non-local account with an external provider as their primary to reduce the chances that emails will not get through when other issues are happening. As many of you know, when a server room overheats the exchange server is always the first to go, so we will start with an external provider and fail-over to an internal one. Keep in mind that these are the accounts the database will send emails <i>from</i> when using the specified profile, not to.</p>
<p>Creating an account is fairly straightforward, simply enter the details for where you would like the email to be sent and any authentication options that are necessary. In this case we want to create a minimum of two accounts so the failover can work properly.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/DatabaseMail/orig/04_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/DatabaseMail/04_config.png" alt="SSMS DatabaseMail Wizard" /></a><br />
	DatabaseMail Wizard in SSMS &#8211; Account Entry
</div>
<p>Now that we have two accounts, we can move on.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/DatabaseMail/orig/05_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/DatabaseMail/05_config.png" alt="SSMS DatabaseMail Wizard" /></a><br />
	DatabaseMail Wizard in SSMS &#8211; Account View
</div>
<p>The next step is to decide whether our profile is going to be public or private. A public profile will be accessible to other people working on the system, whereas a private one will not. In this case we will make the profile public but be aware that this means anyone will be able to us the database server to send mail from this particular profile.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/DatabaseMail/orig/06_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/DatabaseMail/06_config.png" alt="SSMS DatabaseMail Wizard" /></a><br />
	DatabaseMail Wizard in SSMS &#8211; Profile Security
</div>
<p>The last interactive step is to confirm or modify some additional system parameters. This step is not specific to configuring an email profile and accounts, it is displayed as the final step of setting up DatabaseMail (when setting up for the first time). I suggest reviewing the settings to ensure your comfortable with each of them.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/DatabaseMail/orig/07_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/DatabaseMail/07_config.png" alt="SSMS DatabaseMail Wizard" /></a><br />
	DatabaseMail Wizard in SSMS &#8211; System Parameters
</div>
<p>After a final review screen, press the &#8216;Finish&#8217; button to implement the changes.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/DatabaseMail/orig/08_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/DatabaseMail/08_config.png" alt="SSMS DatabaseMail Wizard" /></a><br />
	DatabaseMail Wizard in SSMS &#8211; Finished
</div>
<p>The last step is to test our new setup. Right-click the Database Mail menu option in SSMS and select &#8220;Send Test Email&#8230;&#8221;.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/DatabaseMail/orig/09_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/DatabaseMail/09_config.png" alt="SSMS DatabaseMail - Test Email" /></a><br />
	SSMS Menu &#8211; Sending a Test Email
</div>
<p>After entering an email address for our test message, we can hit the &#8220;Send&#8221; button and wait for confirmation of our ability to hit &#8220;Next, Next, Finish&#8221;.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/DatabaseMail/orig/10_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/DatabaseMail/10_config.png" alt="SSMS DatabaseMail - Test Email Dialog" /></a><br />
	SSMS DatabaseMail &#8211; Test Email Dialog
</div>
<h2>or From a Script</h2>
<p>Doing this on one server is pretty quick. Banging through the dialog on 20 (or with multiple profiles) is not only going to be a bit slower but probably guarantees at least one bad entry along the way. Luckily there is nothing magical about what SSMS is doing to configure these accounts and profiles, just a wizard driving system procedures behind the scenes. We can follow the same process programmatically and create a setup script. Once we have a setup script, of course, we can then use it against multiple systems and if we save it then we not only can set up future servers the same way, but we have detailed documentation on exactly how our servers were setup when we need it 3 years later.</p>
<p>Here are the commands we will be using:</p>
<dl>
<dt><a href="http://msdn.microsoft.com/en-us/library/ms189631.aspx" onclick="_blank" title="Read more at MSDN">sp_configure</a></dt>
<dd>This procedure is used to change SQL Server configurations</dd>
<dt><a href="http://msdn.microsoft.com/en-us/library/ms188058.aspx" onclick="_blank" title="Read more at MSDN">sysmail_add_profile_sp</a></dt>
<dd>Used to create a Database Mail Profile</dd>
<dt><a href="http://msdn.microsoft.com/en-us/library/ms182804.aspx" onclick="_blank" title="Read more at MSDN">sysmail_add_account_sp</a></dt>
<dd>Used to create a Database Mail Account</dd>
<dt><a href="http://msdn.microsoft.com/en-us/library/ms186258.aspx" onclick="_blank" title="Read more at MSDN">sysmail_add_profileaccount_sp</a></dt>
<dd>Used to tie a Database Mail Account to a Profile (Tab A in Slot B)</dd>
<dt><a href="http://msdn.microsoft.com/en-us/library/ms187911.aspx" onclick="_blank" title="Read more at MSDN">sysmail_add_principalprofile_sp</a></dt>
<dd>Assign access rights to a Database Mail profile</dd>
<dt><a href="http://msdn.microsoft.com/en-us/library/ms190307.aspx" onclick="_blank" title="Read more at MSDN">sp_send_dbmail</a></dt>
<dd>And sending an email, of course</dd>
</dl>
<p>And if we put it all together then we can duplicate the wizardy approach above like so:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
</pre></td><td class="de1"><pre class="de1"><span class="co1">---- Enable the XPs for Database Mail</span>
<span class="kw1">EXECUTE</span> <span class="kw3">sp_configure</span> <span class="st0">'show advanced'</span>, <span class="nu0">1</span>;
<span class="kw1">RECONFIGURE</span>;
<span class="kw1">EXECUTE</span> <span class="kw3">sp_configure</span> <span class="st0">'Database Mail XPs'</span>,<span class="nu0">1</span>;
<span class="kw1">RECONFIGURE</span>;
<span class="kw1">EXECUTE</span> <span class="kw3">sp_configure</span> <span class="st0">'show advanced'</span>, <span class="nu0">0</span>;
<span class="kw1">RECONFIGURE</span>;
GO
&nbsp;
<span class="co1">---- Create our Default Profile</span>
<span class="kw1">DECLARE</span> @newProfileId <span class="kw1">int</span>;
<span class="kw1">EXECUTE</span> msdb.<span class="me1">dbo</span>.<span class="me1">sysmail_add_profile_sp</span>
&nbsp; &nbsp; @profile_name <span class="sy0">=</span> <span class="st0">'The Accidental Admin v2'</span>,
&nbsp; &nbsp; @description <span class="sy0">=</span> <span class="st0">'A second version of the DB Admin email profile'</span>,
&nbsp; &nbsp; @profile_id <span class="sy0">=</span> @newProfileId <span class="kw1">OUTPUT</span>;
<span class="kw1">print</span> <span class="st0">'Profile Created'</span>;
&nbsp;
<span class="co1">---- Create our accounts (You did plan on a minimum of two, right?)</span>
<span class="kw1">DECLARE</span> @newPriAccountId <span class="kw1">int</span>,
&nbsp; &nbsp; @newSecAccountId <span class="kw1">int</span>;
<span class="kw1">DECLARE</span> @sender <span class="kw1">varchar</span><span class="br0">&#40;</span><span class="nu0">50</span><span class="br0">&#41;</span>;
<span class="kw1">SELECT</span> @sender <span class="sy0">=</span> <span class="st0">'DB SERVER - '</span> <span class="sy0">+</span> <span class="kw2">@@SERVERNAME</span>;
&nbsp;
<span class="co1">-- External account using username/password</span>
<span class="kw1">EXECUTE</span> msdb.<span class="me1">dbo</span>.<span class="me1">sysmail_add_account_sp</span> &nbsp;
&nbsp; &nbsp; @account_name <span class="sy0">=</span> <span class="st0">'External DBAdmin'</span>,
&nbsp; &nbsp; @email_address <span class="sy0">=</span> <span class="st0">'AnAccount@ExternalService.com'</span>,
&nbsp; &nbsp; @display_name <span class="sy0">=</span> @sender,
&nbsp; &nbsp; @description <span class="sy0">=</span> <span class="st0">'Primary account for DB Admin profile'</span>,
&nbsp; &nbsp; @mailserver_name <span class="sy0">=</span> <span class="st0">'mail.ExternalService.com'</span>,
&nbsp; &nbsp; @username <span class="sy0">=</span> <span class="st0">'username'</span>,
&nbsp; &nbsp; @password <span class="sy0">=</span> <span class="st0">'password'</span>,
&nbsp; &nbsp; @account_id <span class="sy0">=</span> @newPriAccountId <span class="kw1">OUTPUT</span>;
&nbsp;
<span class="co1">-- Internal account using credentials from the account DB server is running under</span>
<span class="kw1">EXECUTE</span> msdb.<span class="me1">dbo</span>.<span class="me1">sysmail_add_account_sp</span> &nbsp;
&nbsp; &nbsp; @account_name <span class="sy0">=</span> <span class="st0">'Internal DBAdmin'</span>,
&nbsp; &nbsp; @email_address <span class="sy0">=</span> <span class="st0">'YourAccount@YourDomain.com'</span>,
&nbsp; &nbsp; @display_name <span class="sy0">=</span> @sender,
&nbsp; &nbsp; @description <span class="sy0">=</span> <span class="st0">'Secondary account for DB Admin profile'</span>,
&nbsp; &nbsp; @mailserver_name <span class="sy0">=</span> <span class="st0">'mail.YourDomain.com'</span>,
&nbsp; &nbsp; @use_default_credentials <span class="sy0">=</span> <span class="nu0">1</span>,
&nbsp; &nbsp; @account_id <span class="sy0">=</span> @newSecAccountId <span class="kw1">OUTPUT</span>;
&nbsp;
<span class="kw1">print</span> <span class="st0">'Accounts Created: '</span> <span class="sy0">+</span> @sender;
&nbsp;
&nbsp; &nbsp; 
<span class="co1">---- Add Accounts to Profile</span>
<span class="kw1">EXECUTE</span> msdb.<span class="me1">dbo</span>.<span class="me1">sysmail_add_profileaccount_sp</span>
&nbsp; &nbsp; @profile_id <span class="sy0">=</span> @newProfileId,
&nbsp; &nbsp; @account_id <span class="sy0">=</span> @newPriAccountId,
&nbsp; &nbsp; @sequence_number <span class="sy0">=</span> <span class="nu0">1</span>;
&nbsp;
<span class="kw1">EXECUTE</span> msdb.<span class="me1">dbo</span>.<span class="me1">sysmail_add_profileaccount_sp</span>
&nbsp; &nbsp; @profile_id <span class="sy0">=</span> @newProfileId,
&nbsp; &nbsp; @account_id <span class="sy0">=</span> @newSecAccountId,
&nbsp; &nbsp; @sequence_number <span class="sy0">=</span> <span class="nu0">2</span>;
&nbsp;
<span class="kw1">print</span> <span class="st0">'Accounts assigned to Profile'</span>;
&nbsp;
Go
&nbsp;
<span class="co1">---- And Then We Test</span>
<span class="co1">-- Make sure you update the profile name with the value from above</span>
<span class="kw1">EXECUTE</span> msdb.<span class="me1">dbo</span>.<span class="me1">sp_send_dbmail</span>
&nbsp; &nbsp; @profile_name <span class="sy0">=</span> <span class="st0">'The Accidental Admin v2'</span>,
&nbsp; &nbsp; @subject <span class="sy0">=</span> <span class="st0">'Test Database Mail Message'</span>,
&nbsp; &nbsp; @recipients <span class="sy0">=</span> <span class="st0">'You@YourDomain.Com'</span>,
&nbsp; &nbsp; @body <span class="sy0">=</span> <span class="st0">'Test Message'</span>;
<span class="kw1">print</span> <span class="st0">'Test Email Away!'</span>;
&nbsp;
GO&nbsp; </pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">---- Enable the XPs for Database Mail
EXECUTE sp_configure 'show advanced', 1;
RECONFIGURE;
EXECUTE sp_configure 'Database Mail XPs',1;
RECONFIGURE;
EXECUTE sp_configure 'show advanced', 0;
RECONFIGURE;
GO

---- Create our Default Profile
DECLARE @newProfileId int;
EXECUTE msdb.dbo.sysmail_add_profile_sp
	@profile_name = 'The Accidental Admin v2',
	@description = 'A second version of the DB Admin email profile',
	@profile_id = @newProfileId OUTPUT;
print 'Profile Created';

---- Create our accounts (You did plan on a minimum of two, right?)
DECLARE @newPriAccountId int,
	@newSecAccountId int;
DECLARE @sender varchar(50);
SELECT @sender = 'DB SERVER - ' + @@SERVERNAME;

-- External account using username/password
EXECUTE msdb.dbo.sysmail_add_account_sp  
	@account_name = 'External DBAdmin',
	@email_address = 'AnAccount@ExternalService.com',
	@display_name = @sender,
	@description = 'Primary account for DB Admin profile',
	@mailserver_name = 'mail.ExternalService.com',
	@username = 'username',
	@password = 'password',
	@account_id = @newPriAccountId OUTPUT;

-- Internal account using credentials from the account DB server is running under
EXECUTE msdb.dbo.sysmail_add_account_sp  
	@account_name = 'Internal DBAdmin',
	@email_address = 'YourAccount@YourDomain.com',
	@display_name = @sender,
	@description = 'Secondary account for DB Admin profile',
	@mailserver_name = 'mail.YourDomain.com',
	@use_default_credentials = 1,
	@account_id = @newSecAccountId OUTPUT;

print 'Accounts Created: ' + @sender;

    
---- Add Accounts to Profile
EXECUTE msdb.dbo.sysmail_add_profileaccount_sp
	@profile_id = @newProfileId,
	@account_id = @newPriAccountId,
	@sequence_number = 1;

EXECUTE msdb.dbo.sysmail_add_profileaccount_sp
	@profile_id = @newProfileId,
	@account_id = @newSecAccountId,
	@sequence_number = 2;

print 'Accounts assigned to Profile';

Go

---- And Then We Test
-- Make sure you update the profile name with the value from above
EXECUTE msdb.dbo.sp_send_dbmail
	@profile_name = 'The Accidental Admin v2',
	@subject = 'Test Database Mail Message',
	@recipients = 'You@YourDomain.Com',
	@body = 'Test Message';
print 'Test Email Away!';

GO	</pre></div></div>

<p>Running this script creates a setup similar to what we created in the first section, though some of the names have been changed (and I have removed my email address from the list so I don&#8217;t get server updates when someone comes along and forgets to swap out the addresses).</p>
<h2>And Now, Uses</h2>
<p>So now that we have Database Mail setup, what are we going to use it for? Well, besides creating our own monitoring and email scripts, the built in Alerts component in SQL Server uses Database mail to tell us when critical parts of our server have decided to misbehave. SQL Agent jobs have the option to notify us when they fail and they do so using, yep, Database Mail. Setting up Database Mail and using it in each of these situations won&#8217;t prevent problems from occurring, but it is the difference between finding out when the problem is occurring and finding out after the server has melted down. </p>
<p>Next week will be something interesting, but I haven&#8217;t determined what that will be yet, so we&#8217;ll figure it out as we go.</p>
<style>
.mylab, .hint{
   margin: .5em 2em;
   padding: 1em 1em 1em 90px;
}
.mylab{
   border: 2px solid #CCEECC;
   background-color: #DDFFDD;
   background-image: url(http://tiernok.com/LTDBlog/mylab.png);
   background-repeat: no-repeat;
   background-position: 20px 20px;
}
.hint{
   border: 2px solid #EEEECC;
   background-color: #FFFFDD;
   background-image: url(http://tiernok.com/LTDBlog/tip.png);
   background-repeat: no-repeat;
   background-position: 20px 20px;
}
.screenshot{
   text-align: center;
   font-size: .8em;
   margin-bottom: 1em;
}
.acc_header{ position: relative; }
.acc_header label{ float: left; width: 150px; font-weight: bold;}
.acc_header br{  clear: left; }
.acc_header .diff{ margin-top: 3px; }
.evo_post_text dt{ width: 220px; }
.evo_post_text dd{ margin-left: 230px; }
</style>
<div class='rp4wp-related-posts'>
<h3>Related Posts</h3>
<ul>
<li><div class='rp4wp-related-post-content'>
<a href='/index.php/datamgmt/dbprogramming/setting-up-sql-server-database/'>Setting up SQL Server Database Mail with gmail</a><p>If you want to mess around with Database Mail from your laptop and you don't&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-content'>
<a href='/index.php/datamgmt/datadesign/sql-server-2008-r2-sp2/'>SQL Server 2008 R2 SP2 Released</a><p>SQL Server 2008 R2 Service Pack 2 (SP2) has been released. Both the Service Pack&hellip;</p></div>
</li>
</ul>
</div>
</div>
				<div class="post-author">
					<div class="userInfo"><h2>About the Author</h2><img class="bioPic" src="http://www.tiernok.com/images/RedShirt_80.jpg" alt="User bio image"/>My roles have included accidental DBA, lone developer, systems architect, team lead, VP of Engineering, and general troublemaker. On the technical front I work in web development, distributed systems, test automation, and devop-sy areas like delivery pipelines and integration of all the auditable things. <br style="clear: left" /><div class="bioSoc"><span class="bioSocTitle">Social Sitings</span><a href="http://twitter.com/tarwn" title="tarwn at Twitter" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_twitter.png" alt="Twitter" /></a><a href="http://www.linkedin.com/in/eliweinstockherman" title="tarwn at LinkedIn" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_linkedin.png" alt="LinkedIn" /></a><a href="http://tiernok.com/" title="tarwn at HomePage" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_homepage.png" alt="HomePage" /></a><a href="https://plus.google.com/114520820167873768473" title="tarwn at Google Plus" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_gplus.png" alt="Google Plus" /></a><a href="/index.php/author/tarwn/feed/" title="Blog RSS feed for tarwn" class="bioSocLink"><img src="http://lessthandot.com/images/bdg_rss_icon.png" alt="LTD RSS Feed" /></a></div></div>				</div>
				<div class="post-foot instapaper_ignore">
					<div class="post-tagline">
						<div class="post-foot-views"><label>Article views:</label> 13,578 </div>
						<div class="post-foot-more-posts">
                            <a href="/index.php/author/tarwn/">Read More Posts by Eli Weinstock-Herman (tarwn)</a>
						</div>
					</div>
					<div>
						<label>Tags:</label> <a href="/index.php/tag/databasemail/" rel="tag">databasemail</a>, <a href="/index.php/tag/sqlserver-2008-r2/" rel="tag">sqlserver 2008 r2</a>, <a href="/index.php/tag/virtual-lab/" rel="tag">virtual lab</a> 
					</div>
					<div class="post-tagline" style="height: auto">
						<span class="social-button-label">Share:</span><a href="https://twitter.com/intent/tweet?url=/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/&text=RT @LessThanDot Blog - Virtual Lab: Setting up Database Mail on SQL Server 2008 R2 by @tarwn" class="twitter-share-button-static" target="_blank"><i></i><span class="label">Tweet</span></a><a href="http://www.linkedin.com/shareArticle?mini=true&url=/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/&title=Virtual Lab: Setting up Database Mail on SQL Server 2008 R2&source=/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/" target="_blank" title="Share on LinkedIn" class="svg-button"><img alt="Share on LinkedIn"  src="http://lessthandot.com/images/LinkedIn.svg" /></a><a href="http://www.reddit.com/submit?url=/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/&title=Virtual Lab: Setting up Database Mail on SQL Server 2008 R2" target="_blank" title="Submit to Reddit" class="svg-button"><img alt="Submit to Reddit" src="http://lessthandot.com/images/Reddit.svg" /></a><a href="https://www.facebook.com/sharer/sharer.php?u=/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/&quote=Virtual Lab: Setting up Database Mail on SQL Server 2008 R2" title="Share on Facebook" target="_blank" class="svg-button"><img alt="Share on Facebook" src="http://lessthandot.com/images/Facebook.svg" /></a> <a href="http://www.instapaper.com/hello2?url=/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/&title=Virtual Lab: Setting up Database Mail on SQL Server 2008 R2" class="instapaper_button">Instapaper</a>					</div>			
				</div>
				<div class="comments-area instapaper_ignore">
	<h4 class="comments-title">
		7 Comments	</h4>
			<ol class="comments-list">
					<li class="comment byuser comment-author-chrissie1 even thread-even depth-1" id="comment-2960">
				<div id="div-comment-2960" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/70e155e88e0ead5e2bdcb3e1c57506b4?s=64&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/70e155e88e0ead5e2bdcb3e1c57506b4?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Christiaan Baes (chrissie1)</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/#comment-2960">
			July 6, 2010 at 6:10 am</a>		</div>

		<p>I like Alt+Printscreen better ðŸ˜‰</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/?replytocom=2960#respond' onclick='return addComment.moveForm( "div-comment-2960", "2960", "respond", "834" )' aria-label='Reply to Christiaan Baes (chrissie1)'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-SQLDenis odd alt thread-odd thread-alt depth-1" id="comment-2961">
				<div id="div-comment-2961" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/7a49149d4d4b9242348b95a2c561c20d?s=64&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/7a49149d4d4b9242348b95a2c561c20d?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">SQLDenis</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/#comment-2961">
			July 6, 2010 at 6:45 am</a>		</div>

		<p>I prefer the script because I always have a primary and at least 1 backup, if I use the script I can just run it on both machines. </p>
<p>Who wants to click around in wizards on both machines and then by mistake not click exactly the same thing</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/?replytocom=2961#respond' onclick='return addComment.moveForm( "div-comment-2961", "2961", "respond", "834" )' aria-label='Reply to SQLDenis'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-2962">
				<div id="div-comment-2962" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/6d90b9ed7391ac6d4fbe61718218a0f7?s=64&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/6d90b9ed7391ac6d4fbe61718218a0f7?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">bonskijr</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/#comment-2962">
			July 6, 2010 at 6:54 am</a>		</div>

		<p>It awfully looks the same steps in Sql2005, or I missed something from the post?</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/?replytocom=2962#respond' onclick='return addComment.moveForm( "div-comment-2962", "2962", "respond", "834" )' aria-label='Reply to bonskijr'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-tarwn bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-2963">
				<div id="div-comment-2963" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/67511f6308748c8524ff82fa4ec1eb58?s=64&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/67511f6308748c8524ff82fa4ec1eb58?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Eli Weinstock-Herman (tarwn)</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/#comment-2963">
			July 6, 2010 at 6:57 am</a>		</div>

		<p>From what I can recall it is the same steps, but I hadn&#8217;t written one before and many people that are doing this for the first time will probably be more comfortable following instructions that quote the version they are likely to be working on. Plus I consider it part of the setup for a SQL Server install, so I didn&#8217;t want to skip it as part of building out my Virtual Lab setup.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/?replytocom=2963#respond' onclick='return addComment.moveForm( "div-comment-2963", "2963", "respond", "834" )' aria-label='Reply to Eli Weinstock-Herman (tarwn)'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-2964">
				<div id="div-comment-2964" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/dc9b3018ce55a4ae5ecb44d41f13a9ba?s=64&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/dc9b3018ce55a4ae5ecb44d41f13a9ba?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn"><a href='http://twitter.com/JaniceCLee' rel='external nofollow' class='url'>Janice Lee</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/#comment-2964">
			July 14, 2010 at 2:50 pm</a>		</div>

		<p>It&#8217;s definitely worth *not* skipping. Good article, Eli. Hey, it&#8217;s &#8220;next week&#8221; already. ðŸ™‚ Where&#8217;s our &#8220;something interesting&#8221;?</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/?replytocom=2964#respond' onclick='return addComment.moveForm( "div-comment-2964", "2964", "respond", "834" )' aria-label='Reply to Janice Lee'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-2958">
				<div id="div-comment-2958" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/c1ee26a44fc5740897477f23a314828b?s=64&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/c1ee26a44fc5740897477f23a314828b?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">james stokes</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/#comment-2958">
			July 12, 2011 at 2:06 pm</a>		</div>

		<p>I would like to know </p>
<p>by using only this<br />
EXECUTE msdb.dbo.sp_send_dbmail<br />
    @profile_name = &#8216;The Accidental Admin v2&#8217;,<br />
    @subject = &#8216;Test Database Mail Message&#8217;,<br />
    @recipients = &#8216;You@YourDomain.Com&#8217;,<br />
    @body = &#8216;Test Message&#8217;;<br />
PRINT &#8216;Test Email Away!&#8217;;</p>
<p>Is it possible to make a CALL to ANY email server<br />
or does the profile have to be setup first?</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/?replytocom=2958#respond' onclick='return addComment.moveForm( "div-comment-2958", "2958", "respond", "834" )' aria-label='Reply to james stokes'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-tarwn bypostauthor even thread-even depth-1" id="comment-2959">
				<div id="div-comment-2959" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/67511f6308748c8524ff82fa4ec1eb58?s=64&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/67511f6308748c8524ff82fa4ec1eb58?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Eli Weinstock-Herman (tarwn)</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/#comment-2959">
			July 12, 2011 at 3:53 pm</a>		</div>

		<p>The BOL entry for sp_send_dbmail answers this much better than I could. The short answer is no, but the long answer is sort of. If you don&#8217;t specify a profile then it will attempt to use whatever default profile is set up for the user and, failing that, the one set up for the server. So you can&#8217;t send email without any profiles set up, but if you have defaults setup you can call it without specifying one.</p>
<p><a href="http://msdn.microsoft.com/en-us/library/ms190307.aspx" rel="nofollow">http://msdn.microsoft.com/en-us/library/ms190307.aspx</a></p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/?replytocom=2959#respond' onclick='return addComment.moveForm( "div-comment-2959", "2959", "respond", "834" )' aria-label='Reply to Eli Weinstock-Herman (tarwn)'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		</ol>
						<div id="respond" class="comment-respond">
			<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/index.php/datamgmt/datadesign/virtual-lab-setting-up-database-mail-on/#respond" style="display:none;">Cancel reply</a></small></h3>				<form action="/wp-comments-post.php" method="post" id="commentform" class="comment-form">
					<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" aria-required='true' required='required' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" maxlength="100" aria-describedby="email-notes" aria-required='true' required='required' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="text" value="" size="30" maxlength="200" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='834' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><input type="hidden" id="killer_value" name="killer_value" value="84f7e69969dea92a925508f7c1f9579a"/><noscript>Sorry, but you are required to use a javascript enabled brower to comment here.</noscript>				</form>
					</div><!-- #respond -->
		</div>			</div>
				<br style="clear: both;" />
</div>
		</div>
		<div id="page-footer">
			<div id="botnav"><a href="http://lessthandot.com/" title="LessThanDot Launchpad">Launchpad</a> | <a href="http://lessthandot.com/account.php" title="Your Account Settings">My Account</a> | <a href="http://lessthandot.com/statistics.php" title="Statistics">Statistics</a> | <a href="http://lessthandot.com/donate.php" title="Donate">Donate</a> | <a href="http://lessthandot.com/contactus.php" title="Contact Us">Contact Us</a> | <a href="http://lessthandot.com/aboutus.php" title="About the LessThanDot Team">&copy;2008 - 2019 LessThanDot, LLC</a></div>

		<script type='text/javascript'>
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-4471405-1']);
		_gaq.push(['_trackPageview']);
		_gaq.push(['_setCustomVar', 1, 'Environment', 'lessthandot.com', 3]);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	  </script>			<div class="validator"><a href="http://validator.w3.org/check?uri=referer">Valid XHTML</a> | <a href="http://jigsaw.w3.org/css-validator/check/referer" title="Validate the CSS for this page at the W3C website">Valid CSS</a> | 2018-11-11 15:52</div>
		</div>
	</div>
</div>
<!-- <script type="text/javascript" src="http://apis.google.com/js/plusone.js"></script> -->
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.6.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var spam_destroyer = {"key":"159ff9dcc225580310c2de238cdd1f1a","lifetime":"3600","limit":"1552765933"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/plugins/spam-destroyer/kill.js?ver=1.2'></script>
</body>
</html>
