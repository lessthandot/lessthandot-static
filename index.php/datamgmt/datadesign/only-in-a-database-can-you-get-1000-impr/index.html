<!DOCTYPE html>
<html lang="en-US">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
		<link rel="shortcut icon" href="http://lessthandot.com/favicon.ico" type="image/vnd.microsoft.icon" />
	<title>Less Than Dot - Blog -   Only In A Database Can You Get 1000% + Improvement By Changing A Few Lines Of Code</title>
	<meta prefix="og: http://ogp.me/ns#" property="og:title" content="Less Than Dot - Blog -   Only In A Database Can You Get 1000% + Improvement By Changing A Few Lines Of Code" />
	<meta prefix="og: http://ogp.me/ns#" property="og:type" content="article" />
	<meta prefix="og: http://ogp.me/ns#" property="og:url" content="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/" />
		<meta prefix="og: http://ogp.me/ns#" property="og:image" content="http://lessthandot.com/images/logo_prod.png" />
	<meta prefix="og: http://ogp.me/ns#" property="og:type" content="article" />
	<meta prefix="og: http://ogp.me/ns#" property="og:site_name" content="LessThanDot" />
	<meta prefix="og: http://ogp.me/ns#" property="og:description" content="Take a look at this query. T-SQL1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 select * from &nbsp; &#40; &nbsp; select customer_id, 'MTD' [&hellip;]" />
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/index.php/feed/" />
	<link rel="alternate" type="application/atom+xml" title="Atom" href="/index.php/feed/atom/" />

	<!-- this page is the canonical URL -->	
	<link rel="stylesheet" href="/wp-content/themes/lessthandot2009/style.css" type="text/css" />
	<link rel="stylesheet" href="http://lessthandot.com/includes/allsite.css" type="text/css" />
	<link rel="stylesheet" href="http://lessthandot.com/includes/allsiteprint.css" media="print" type="text/css" />

	<link rel='dns-prefetch' href='//ajax.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="LessthanDot &raquo; Only In A Database Can You Get 1000% + Improvement By Changing A Few Lines Of Code Comments Feed" href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.1"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='bwp-syntax-css'  href='/wp-content/plugins/better-wordpress-syntax-based-on-geshi/css/bwp-syntax-global.css?ver=4.6.1' type='text/css' media='all' />
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-content/plugins/better-wordpress-syntax-based-on-geshi/js/bwp-syntax.js?ver=4.6.1'></script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='.NET Framework 3.5 SP1: LINQ perf improvements (LINQ to Objects and LINQ to SQL)' href='/index.php/datamgmt/datadesign/net-framework-3-5-sp1-linq-perf-improvem/' />
<link rel='next' title='How Do You Check If A Temporary Table Exists In SQL Server' href='/index.php/datamgmt/datadesign/how-do-you-check-if-a-temporary-table-ex/' />
<meta name="generator" content="WordPress 4.6.1" />
<link rel="canonical" href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/" />
<link rel='shortlink' href='/?p=109' />
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Findex.php%2Fdatamgmt%2Fdatadesign%2Fonly-in-a-database-can-you-get-1000-impr%2F" />
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Findex.php%2Fdatamgmt%2Fdatadesign%2Fonly-in-a-database-can-you-get-1000-impr%2F&#038;format=xml" />
<style type='text/css'>.rp4wp-related-posts ul{width:100%;padding:0;margin:0;float:left;}
.rp4wp-related-posts ul>li{list-style:none;padding:0;margin:0;padding-bottom:20px;clear:both;}
.rp4wp-related-posts ul>li>p{margin:0;padding:0;}
.rp4wp-related-post-image{width:35%;padding-right:25px;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;float:left;}</style>
	<script src="http://lessthandot.com/includes/allsite.js" type="text/javascript" ></script>
</head>
<body>
<div id="contain"><div id="subcontain"><div id="ttl"><div id="hdr"><div id="snav"><a href="http://lessthandot.com/login.php?backtrack=/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/?">Member Login</a>
</div><a href="http://lessthandot.com/" title="LessThanDot Launchpad" id="logoc"><img src="http://lessthandot.com/images/logo_prod.png" alt="LessThanDot Site Logo" border="0" /></a><h1>LessThanDot</h1><div class="pgsttl">A decade of helpful technical content</div></div><div id="nav">
<ul>
<li><a href="http://lessthandot.com/" title="LessThanDot Launchpad" id="h" ><span>Launchpad</span></a></li>
<li class="cur"><a href="/" title="LessThanDot Blogs" id="b" ><span>Blogs</span></a></li>
<li><a href="http://forum.lessthandot.com/" title="LessThanDot Community Forums" id="f" ><span>Forum</span></a></li>
<li><a href="http://wiki.lessthandot.com/" title="LessThanDot Wiki Articles" id="w" ><span>Wiki</span></a></li>
<li><a href="http://sqlcop.lessthandot.com/" title="LessThanDot SQLCop" id="a" ><span>SQLCop</span></a></li>
<li><a href="http://lessthandot.com/account.php" title="Your Account Settings" id="r"  class="l_ie"><span>My Account</span></a></li></ul></div>
</div><div id="content">
<div id="fac"><div id="fa">
		<p>Less Than Dot is a community of passionate IT professionals and enthusiasts dedicated to sharing technical knowledge, experience, and assistance. Inside you will find reference materials, interesting technical discussions, and expert tips and commentary.</p></div></div><div class="content-sidebar">
	<div id="social" class="sdsec">
		<h2>LTD Social Sitings</h2>
		<div>
		<a id="social_twitter" href="http://twitter.com/LessThanDot/" title="Follow us on Twitter" ><img src="http://lessthandot.com/images/bdg_twitter.png" alt="Lessthandot twitter"/></a> 
		<a href="http://www.linkedin.com/groups?home=&amp;gid=113440" title="Join us on LinkedIn" ><img src="http://lessthandot.com/images/bdg_linkedin.png" alt="Lessthandot Linkedin" /></a> 
		<a href="http://www.facebook.com/group.php?gid=19330511063" title="Join us on Facebook" ><img src="http://lessthandot.com/images/bdg_facebook.png" alt="Lessthandot facebook"/></a> 
		<a href="http://lessthandot.com/rss.php" title="LessThanDot News Feed" ><img src="http://lessthandot.com/images/bdg_rss_icon.png" alt="Lessthandot rss"/></a> 
		</div>
		<p><em>Note: Watch for social icons on posts by your favorite authors to follow their postings on these and other social sites.</em></p>
	</div><div class="content-sidebar-section">
<h2>Tag cloud</h2>
	<p class="tag-cloud">
		<a href='/index.php/tag/net/' class='tag-link-245 tag-link-position-1' title='21 topics' style='font-size: 8.9565217391304pt;'>.net</a> <a href='/index.php/tag/asp-net/' class='tag-link-168 tag-link-position-2' title='21 topics' style='font-size: 8.9565217391304pt;'>asp.net</a> <a href='/index.php/tag/azure-2/' class='tag-link-321 tag-link-position-3' title='29 topics' style='font-size: 10.173913043478pt;'>azure</a> <a href='/index.php/tag/book/' class='tag-link-130 tag-link-position-4' title='26 topics' style='font-size: 9.7391304347826pt;'>book</a> <a href='/index.php/tag/business-intelligence-2/' class='tag-link-256 tag-link-position-5' title='30 topics' style='font-size: 10.260869565217pt;'>business intelligence</a> <a href='/index.php/tag/c/' class='tag-link-138 tag-link-position-6' title='40 topics' style='font-size: 11.304347826087pt;'>c#</a> <a href='/index.php/tag/database/' class='tag-link-134 tag-link-position-7' title='31 topics' style='font-size: 10.434782608696pt;'>database</a> <a href='/index.php/tag/excel/' class='tag-link-155 tag-link-position-8' title='16 topics' style='font-size: 8pt;'>excel</a> <a href='/index.php/tag/gotcha/' class='tag-link-240 tag-link-position-9' title='19 topics' style='font-size: 8.6086956521739pt;'>gotcha</a> <a href='/index.php/tag/how-to/' class='tag-link-272 tag-link-position-10' title='44 topics' style='font-size: 11.652173913043pt;'>how to</a> <a href='/index.php/tag/mongodb/' class='tag-link-765 tag-link-position-11' title='17 topics' style='font-size: 8.2608695652174pt;'>mongodb</a> <a href='/index.php/tag/nosql/' class='tag-link-775 tag-link-position-12' title='18 topics' style='font-size: 8.4347826086957pt;'>nosql</a> <a href='/index.php/tag/performance/' class='tag-link-179 tag-link-position-13' title='26 topics' style='font-size: 9.7391304347826pt;'>performance</a> <a href='/index.php/tag/security-2/' class='tag-link-398 tag-link-position-14' title='25 topics' style='font-size: 9.5652173913043pt;'>security</a> <a href='/index.php/tag/sql/' class='tag-link-132 tag-link-position-15' title='42 topics' style='font-size: 11.478260869565pt;'>sql</a> <a href='/index.php/tag/sql-advent-2012/' class='tag-link-1416 tag-link-position-16' title='18 topics' style='font-size: 8.4347826086957pt;'>sql advent 2012</a> <a href='/index.php/tag/sql-friday/' class='tag-link-377 tag-link-position-17' title='18 topics' style='font-size: 8.4347826086957pt;'>sql friday</a> <a href='/index.php/tag/sql-server/' class='tag-link-154 tag-link-position-18' title='145 topics' style='font-size: 16.086956521739pt;'>sql server</a> <a href='/index.php/tag/sql-server-2000/' class='tag-link-366 tag-link-position-19' title='45 topics' style='font-size: 11.739130434783pt;'>sql server 2000</a> <a href='/index.php/tag/sql-server-2005/' class='tag-link-327 tag-link-position-20' title='118 topics' style='font-size: 15.391304347826pt;'>sql server 2005</a> <a href='/index.php/tag/sql-server-2008/' class='tag-link-152 tag-link-position-21' title='237 topics' style='font-size: 18pt;'>sql server 2008</a> <a href='/index.php/tag/sql-server-2008-r2/' class='tag-link-548 tag-link-position-22' title='38 topics' style='font-size: 11.130434782609pt;'>sql server 2008 r2</a> <a href='/index.php/tag/sql-server-2012/' class='tag-link-1161 tag-link-position-23' title='76 topics' style='font-size: 13.739130434783pt;'>sql server 2012</a> <a href='/index.php/tag/ssis-2/' class='tag-link-501 tag-link-position-24' title='52 topics' style='font-size: 12.260869565217pt;'>ssis</a> <a href='/index.php/tag/ssms/' class='tag-link-640 tag-link-position-25' title='18 topics' style='font-size: 8.4347826086957pt;'>ssms</a> <a href='/index.php/tag/ssrs-2/' class='tag-link-557 tag-link-position-26' title='27 topics' style='font-size: 9.9130434782609pt;'>ssrs</a> <a href='/index.php/tag/syndicated/' class='tag-link-1407 tag-link-position-27' title='67 topics' style='font-size: 13.217391304348pt;'>syndicated</a> <a href='/index.php/tag/t-sql/' class='tag-link-185 tag-link-position-28' title='26 topics' style='font-size: 9.7391304347826pt;'>t-sql</a> <a href='/index.php/tag/tip/' class='tag-link-194 tag-link-position-29' title='46 topics' style='font-size: 11.826086956522pt;'>tip</a> <a href='/index.php/tag/unit-testing/' class='tag-link-162 tag-link-position-30' title='17 topics' style='font-size: 8.2608695652174pt;'>unit testing</a>	</p>
</div>		<div class="content-sidebar-section">
		<h2>Authors</h2>
			<ul class="author-list dimmed">
				<li><a href="/index.php/author/SQLDenis/" title="Posts by SQLDenis">SQLDenis</a> <a href="/index.php/author/SQLDenis/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (597)</li><li><a href="/index.php/author/onpnt/" title="Posts by Ted Krueger (onpnt)">Ted Krueger (onpnt)</a> <a href="/index.php/author/onpnt/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (355)</li><li><a href="/index.php/author/grrlgeek/" title="Posts by Jes Borland">Jes Borland</a> <a href="/index.php/author/grrlgeek/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (202)</li><li><a href="/index.php/author/tarwn/" title="Posts by Eli Weinstock-Herman (tarwn)">Eli Weinstock-Herman (tarwn)</a> <a href="/index.php/author/tarwn/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (190)</li><li><a href="/index.php/author/koenverbeeck/" title="Posts by Koen Verbeeck">Koen Verbeeck</a> <a href="/index.php/author/koenverbeeck/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (100)</li><li><a href="/index.php/author/alexcuse/" title="Posts by Alex Ullrich">Alex Ullrich</a> <a href="/index.php/author/alexcuse/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (55)</li><li><a href="/index.php/author/gmmastros/" title="Posts by George Mastros (gmmastros)">George Mastros (gmmastros)</a> <a href="/index.php/author/gmmastros/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (45)</li><li><a href="/index.php/author/axel8s/" title="Posts by Axel Achten (axel8s)">Axel Achten (axel8s)</a> <a href="/index.php/author/axel8s/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (28)</li><li><a href="/index.php/author/naomi/" title="Posts by Naomi Nosonovsky">Naomi Nosonovsky</a> <a href="/index.php/author/naomi/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (27)</li><li><a href="/index.php/author/thirster42/" title="Posts by David Forck (thirster42)">David Forck (thirster42)</a> <a href="/index.php/author/thirster42/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (24)</li><li><a href="/index.php/author/chopstik/" title="Posts by chopstik">chopstik</a> <a href="/index.php/author/chopstik/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (20)</li><li><a href="/index.php/author/kconan/" title="Posts by Kevin Conan">Kevin Conan</a> <a href="/index.php/author/kconan/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (18)</li><li><a href="/index.php/author/robearl/" title="Posts by Rob Earl">Rob Earl</a> <a href="/index.php/author/robearl/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (14)</li><li><a href="/index.php/author/thatrickguy/" title="Posts by ThatRickGuy">ThatRickGuy</a> <a href="/index.php/author/thatrickguy/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (12)</li><li><a href="/index.php/author/sqlarcher/" title="Posts by SQLArcher">SQLArcher</a> <a href="/index.php/author/sqlarcher/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (11)</li>                <li><a href="http://lessthandot.com/Stats/BlogAuthors.php">More...</a></li>
			</ul>
		</div>
				<div class="content-sidebar-section">
		<h2>Categories</h2>
			<ul class="categories-list">
					<li class="cat-item cat-item-10"><a href="/index.php/category/all/" >All Blogs</a>
</li>
	<li class="cat-item cat-item-5"><a href="/index.php/category/architect/" >Architecture, Design and Strategy</a>
</li>
	<li class="cat-item cat-item-1759"><a href="/index.php/category/artificial-intelligence/" >Artificial Intelligence</a>
</li>
	<li class="cat-item cat-item-6"><a href="/index.php/category/datamgmt/" >Data Management</a>
</li>
	<li class="cat-item cat-item-7"><a href="/index.php/category/desktopdev/" >Desktop Developer</a>
</li>
	<li class="cat-item cat-item-8"><a href="/index.php/category/enterprisedev/" >Enterprise Developer</a>
</li>
	<li class="cat-item cat-item-11"><a href="/index.php/category/itprofessionals/" >IT Professionals</a>
</li>
	<li class="cat-item cat-item-12"><a href="/index.php/category/itstudents/" >IT Students and Researchers</a>
</li>
	<li class="cat-item cat-item-1743"><a href="/index.php/category/management/" >Management</a>
</li>
	<li class="cat-item cat-item-9"><a href="/index.php/category/sysadmins/" >System Admins</a>
</li>
	<li class="cat-item cat-item-1"><a href="/index.php/category/uncategorized/" >Uncategorized</a>
</li>
	<li class="cat-item cat-item-4"><a href="/index.php/category/webdev/" >Web Developer</a>
</li>
			</ul>
		</div>
		</div><div class="content-main">
				<div class="post-navigation">
				<div class="post-navigation-forward"><a href="/index.php/datamgmt/datadesign/how-do-you-check-if-a-temporary-table-ex/" rel="next">How Do You Check If A Temporary Table Exists In SQL Server</a> &raquo; </div>
				<div class="post-navigation-back">&laquo; <a href="/index.php/datamgmt/datadesign/net-framework-3-5-sp1-linq-perf-improvem/" rel="prev">.NET Framework 3.5 SP1: LINQ perf improvements (LINQ to Objects and LINQ to SQL)</a></div>
			</div>
			<div class="post-area instapaper_body">
				<div class="post-title-line">
										<h1 class="instapaper_ignore"><a href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/" class="post-title">Only In A Database Can You Get 1000% + Improvement By Changing A Few Lines Of Code</a></h1>
					<div class="post-byline">by <a href="/index.php/author/SQLDenis/" title="Posts by SQLDenis" rel="author">SQLDenis</a> on August 17, 2008 in category <a href="/index.php/category/datamgmt/datadesign/" rel="category tag">Data Modelling and Design</a>. Article views: 40,544 </div>
				</div>
				<div class="post-tagline"><a href="https://twitter.com/intent/tweet?url=/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/&text=RT @LessThanDot Blog - Only In A Database Can You Get 1000% + Improvement By Changing A Few Lines ... by @denisgobo" class="twitter-share-button-static" target="_blank"><i></i><span class="label">Tweet</span></a><a href="http://www.linkedin.com/shareArticle?mini=true&url=/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/&title=Only In A Database Can You Get 1000% + Improvement By Changing A Few Lines Of Code&source=/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/" target="_blank" title="Share on LinkedIn" class="svg-button"><img alt="Share on LinkedIn"  src="http://lessthandot.com/images/LinkedIn.svg" /></a><a href="http://www.reddit.com/submit?url=/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/&title=Only In A Database Can You Get 1000% + Improvement By Changing A Few Lines Of Code" target="_blank" title="Submit to Reddit" class="svg-button"><img alt="Submit to Reddit" src="http://lessthandot.com/images/Reddit.svg" /></a><a href="https://www.facebook.com/sharer/sharer.php?u=/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/&quote=Only In A Database Can You Get 1000% + Improvement By Changing A Few Lines Of Code" title="Share on Facebook" target="_blank" class="svg-button"><img alt="Share on Facebook" src="http://lessthandot.com/images/Facebook.svg" /></a> <a href="http://www.instapaper.com/hello2?url=/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/&title=Only In A Database Can You Get 1000% + Improvement By Changing A Few Lines Of Code" class="instapaper_button">Instapaper</a></div>

				<div class="post-content"><p>Take a look at this query.</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
</pre></td><td class="de1"><pre class="de1"><span class="kw1">select</span> <span class="sy0">*</span> <span class="kw1">from</span>
&nbsp;
<span class="br0">&#40;</span>
&nbsp;
<span class="kw1">select</span> customer_id, <span class="st0">'MTD'</span> <span class="kw1">as</span> record_type, <span class="kw2">count</span><span class="br0">&#40;</span><span class="sy0">*</span><span class="br0">&#41;</span>, <span class="kw2">sum</span><span class="br0">&#40;</span>...<span class="br0">&#41;</span>, <span class="kw2">avg</span><span class="br0">&#40;</span>...<span class="br0">&#41;</span>
&nbsp;
<span class="kw1">from</span> payment_table
&nbsp;
&nbsp;
<span class="kw1">where</span> <span class="kw1">year</span><span class="br0">&#40;</span>payment_dt<span class="br0">&#41;</span> <span class="sy0">=</span> <span class="kw1">year</span><span class="br0">&#40;</span><span class="kw2">getDate</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
and <span class="kw1">month</span><span class="br0">&#40;</span>payment_dt<span class="br0">&#41;</span> <span class="sy0">=</span> <span class="kw1">month</span><span class="br0">&#40;</span><span class="kw2">getDate</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> 
&nbsp;
<span class="kw1">group</span> <span class="kw1">by</span> customer_id<span class="br0">&#41;</span> MTD_payments
&nbsp;
<span class="kw1">UNION</span> <span class="sy0">ALL</span>
&nbsp;
<span class="br0">&#40;</span>
&nbsp;
<span class="kw1">select</span> customer_id, <span class="st0">'YTD'</span> <span class="kw1">as</span> record_type, <span class="kw2">count</span><span class="br0">&#40;</span><span class="sy0">*</span><span class="br0">&#41;</span>, <span class="kw2">sum</span><span class="br0">&#40;</span>...<span class="br0">&#41;</span>, <span class="kw2">avg</span><span class="br0">&#40;</span>...<span class="br0">&#41;</span>
&nbsp;
<span class="kw1">from</span> payment_table
&nbsp;
<span class="kw1">where</span> 
&nbsp;
<span class="kw1">where</span> <span class="kw1">year</span><span class="br0">&#40;</span>payment_dt<span class="br0">&#41;</span> <span class="sy0">=</span> <span class="kw1">year</span><span class="br0">&#40;</span><span class="kw2">getDate</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
<span class="kw1">group</span> <span class="kw1">by</span> customer_id<span class="br0">&#41;</span> YTD_payments
&nbsp;
<span class="kw1">UNION</span> <span class="sy0">ALL</span>
&nbsp;
<span class="br0">&#40;</span>
&nbsp;
<span class="kw1">select</span> customer_id, <span class="st0">'LTD'</span> <span class="kw1">as</span> record_type, <span class="kw2">count</span><span class="br0">&#40;</span><span class="sy0">*</span><span class="br0">&#41;</span>, <span class="kw2">sum</span><span class="br0">&#40;</span>...<span class="br0">&#41;</span>, <span class="kw2">avg</span><span class="br0">&#40;</span>...<span class="br0">&#41;</span>
&nbsp;
<span class="kw1">from</span> payment_table<span class="br0">&#41;</span> LTD_payments
&nbsp;
<span class="br0">&#41;</span> payments_report
&nbsp;
<span class="kw1">order</span> <span class="kw1">by</span> customer_id, record_type</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">select * from

(

select customer_id, 'MTD' as record_type, count(*), sum(...), avg(...)

from payment_table


where year(payment_dt) = year(getDate())

and month(payment_dt) = month(getDate()) 

group by customer_id) MTD_payments

UNION ALL

(

select customer_id, 'YTD' as record_type, count(*), sum(...), avg(...)

from payment_table

where 

where year(payment_dt) = year(getDate())

group by customer_id) YTD_payments

UNION ALL

(

select customer_id, 'LTD' as record_type, count(*), sum(...), avg(...)

from payment_table) LTD_payments

) payments_report

order by customer_id, record_type</pre></div></div>

<p>Can you see the problem?<br />
A person had this query, it would run for over 24 hours. Wow, that is pretty bad, I don&#8217;t think I had ever written something that ran over an hour, and the ones I did were mostly defragmentation and update statistics jobs.</p>
<p>The problem is that the following piece of code</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
</pre></td><td class="de1"><pre class="de1"><span class="kw1">where</span> <span class="kw1">year</span><span class="br0">&#40;</span>payment_dt<span class="br0">&#41;</span> <span class="sy0">=</span> <span class="kw1">year</span><span class="br0">&#40;</span><span class="kw2">getDate</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
and <span class="kw1">month</span><span class="br0">&#40;</span>payment_dt<span class="br0">&#41;</span> <span class="sy0">=</span> <span class="kw1">month</span><span class="br0">&#40;</span><span class="kw2">getDate</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">where year(payment_dt) = year(getDate())
and month(payment_dt) = month(getDate())</pre></div></div>

<p>is not sargable. First what does it mean to be sargable? A query is said to be sargable if the DBMS engine can take advantage of an index to speed up the execution of the query (using index seeks, not covering indexes). The term is derived from a contraction of Search ARGument Able.</p>
<p>This query is not sargable because there is a function on the column, whenever you use a function on the column you will not get an index seek but an index scan. The difference between an index seek and an index scan can be explained like this: when searching for something in a book, you go to the index in the back find the page number and go to the page, that is an index seek. When looking for something in a book you go from page one until the last page, read all the words on all the ages and get what you need, that was an index scan. Do you see how much more expensive in terms of performance that was?</p>
<p>Let&#8217;s get back to the query, what can we do to make this piece of code use an index seek?</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
</pre></td><td class="de1"><pre class="de1"><span class="kw1">where</span> <span class="kw1">year</span><span class="br0">&#40;</span>payment_dt<span class="br0">&#41;</span> <span class="sy0">=</span> <span class="kw1">year</span><span class="br0">&#40;</span><span class="kw2">getDate</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
and <span class="kw1">month</span><span class="br0">&#40;</span>payment_dt<span class="br0">&#41;</span> <span class="sy0">=</span> <span class="kw1">month</span><span class="br0">&#40;</span><span class="kw2">getDate</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">where year(payment_dt) = year(getDate())
and month(payment_dt) = month(getDate())</pre></div></div>

<p>You would change it to this:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
</pre></td><td class="de1"><pre class="de1"><span class="kw1">where</span> payment_dt <span class="sy0">&gt;=</span> <span class="kw2">dateadd</span><span class="br0">&#40;</span>mm, <span class="kw2">datediff</span><span class="br0">&#40;</span>mm, <span class="nu0">0</span>, <span class="kw2">getdate</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">+</span><span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">&#41;</span>
and payment_dt <span class="sy0">&lt;</span> <span class="kw2">dateadd</span><span class="br0">&#40;</span>mm, <span class="kw2">datediff</span><span class="br0">&#40;</span>mm, <span class="nu0">0</span>, <span class="kw2">getdate</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">+</span><span class="nu0">1</span>, <span class="nu0">0</span><span class="br0">&#41;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">where payment_dt &gt;= dateadd(mm, datediff(mm, 0, getdate())+0, 0)
and payment_dt &lt; dateadd(mm, datediff(mm, 0, getdate())+1, 0)</pre></div></div>

<p>You can see the complete question on the MSDN forum site here:<br />
http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/d8464d33-38cc-48ba-bd15-5e7d14eeb19c</p>
<p>The Person said that his query went from over 24 hours to 36 seconds. Wow!! That is very significant. hardware cannot help you out if you have bad queries like that.</p>
<p>The same exact day I answered a very similar question, take a look here: http://social.msdn.microsoft.com/Forums/en-US/transactsql/thread/6107ec5c-b671-485f-941e-4efdf3d2fc66</p>
<p>The person had this</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
</pre></td><td class="de1"><pre class="de1"><span class="sy0">AND</span> <span class="kw2">DATEDIFF</span><span class="br0">&#40;</span>d, <span class="st0">'08/10/2008'</span>, DateCreated<span class="br0">&#41;</span> <span class="sy0">&gt;=</span> <span class="nu0">0</span>
<span class="sy0">AND</span> <span class="kw2">DATEDIFF</span><span class="br0">&#40;</span>d, DateCreated, <span class="st0">'08/15/2008'</span><span class="br0">&#41;</span> <span class="sy0">&gt;=</span> <span class="nu0">0</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">AND DATEDIFF(d, '08/10/2008', DateCreated) &gt;= 0
AND DATEDIFF(d, DateCreated, '08/15/2008') &gt;= 0</pre></div></div>

<p>I told him to change it to this</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
</pre></td><td class="de1"><pre class="de1"><span class="sy0">AND</span> DateCreated <span class="sy0">&gt;=</span> <span class="st0">'08/10/2008'</span>
and DateCreated <span class="sy0">&lt;</span> <span class="st0">'08/16/2008'</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">AND DateCreated &gt;= '08/10/2008'
and DateCreated &lt; '08/16/2008'</pre></div></div>

<p>And that solved that query. If you are interested in some more performance, I have written some <a href="http://wiki.lessthandot.com/index.php/SQL_Server_Programming_Hacks_-_100%2B_List#Query_Optimization">Query Optimization</a>  items on the LessThanDot Wiki. Below are some direct links</p>
<pre>&lt;a href="http://wiki.lessthandot.com/index.php/Case_Sensitive_Search" title="Case Sensitive Search"&gt;Case Sensitive Search&lt;/a&gt;
&lt;a href="http://wiki.lessthandot.com/index.php/No_Functions_on_Left_Side_of_Operator" title="No Functions on Left Side of Operator"&gt;No Functions on Left Side of Operator&lt;/a&gt;
&lt;a href="http://wiki.lessthandot.com/index.php/Query_Optimizations_With_Dates" title="Query Optimizations With Dates"&gt;Query Optimizations With Dates&lt;/a&gt;
&lt;a href="http://wiki.lessthandot.com/index.php/Optimization:_Set_Nocount_On" title="Optimization: Set Nocount On"&gt;Optimization: Set Nocount On&lt;/a&gt;
&lt;a href="http://wiki.lessthandot.com/index.php/No_Math_In_Where_Clause" title="No Math In Where Clause"&gt;No Math In Where Clause&lt;/a&gt;
&lt;a href="http://wiki.lessthandot.com/index.php/Don%27t_Use_%28select_%2A%29%2C_but_List_Columns" title="Don't Use (select *), but List Columns"&gt;Don't Use (select *), but List Columns&lt;/a&gt;</pre>
<p>If you are interested in some blogposts about dates, take a look at these two which I wrote earlier<br />
<a href="/index.php/DataMgmt/DataDesign/how-are-dates-stored-in-sql-server">How Are Dates Stored In SQL Server?</a><br />
<a href="/index.php/DataMgmt/DataDesign/how-does-between-work-with-dates-in-sql-">Do You Know How Between Works With Dates?</a></p>
<div class='rp4wp-related-posts'>
<h3>Related Posts</h3>
<ul>
<li><div class='rp4wp-related-post-content'>
<a href='/index.php/datamgmt/dbprogramming/sargable-queries/'>SQL Advent 2012 Day 3: Sargable Queries</a><p>This is day three of the SQL Advent 2012 series of blog posts. Today we&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-content'>
<a href='/index.php/datamgmt/datadesign/how-does-between-work-with-dates-in-sql/'>How Does Between Work With Dates In SQL Server?</a><p>Do you use between to return data that has dates? Do you know that between&hellip;</p></div>
</li>
</ul>
</div>
</div>
				<div class="post-author">
					<div class="userInfo"><h2>About the Author</h2><img class="bioPic" src="http://www.gravatar.com/avatar/7a49149d4d4b9242348b95a2c561c20d.png" alt="User bio image"/>Denis has been working with SQL Server since version 6.5. Although he worked as an ASP/JSP/ColdFusion developer before the dot com bust, he has been working exclusively as a database developer/architect since 2002. In addition to English, Denis is also fluent in Croatian and Dutch, but he can curse in many other languages and dialects (just ask the SQL optimizer) He lives in Princeton, NJ with his wife and three kids.<br style="clear: left" /><div class="bioSoc"><span class="bioSocTitle">Social Sitings</span><a href="http://twitter.com/denisgobo" title="SQLDenis at Twitter" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_twitter.png" alt="Twitter" /></a><a href="http://www.facebook.com/profile.php?id=http://www.facebook.com/denis.gobo" title="SQLDenis at Facebook" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_facebook.png" alt="Facebook" /></a><a href="http://www.linkedin.com/in/denisgobo" title="SQLDenis at LinkedIn" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_linkedin.png" alt="LinkedIn" /></a><a href="http://denisgobo.blogspot.com/" title="SQLDenis at HomePage" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_homepage.png" alt="HomePage" /></a><a href="http://www.flickr.com/photos/denisgobo//" title="SQLDenis at Flickr" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_flickr.png" alt="Flickr" /></a><a href="/index.php/author/SQLDenis/feed/" title="Blog RSS feed for SQLDenis" class="bioSocLink"><img src="http://lessthandot.com/images/bdg_rss_icon.png" alt="LTD RSS Feed" /></a></div></div>				</div>
				<div class="post-foot instapaper_ignore">
					<div class="post-tagline">
						<div class="post-foot-views"><label>Article views:</label> 40,544 </div>
						<div class="post-foot-more-posts">
                            <a href="/index.php/author/SQLDenis/">Read More Posts by SQLDenis</a>
						</div>
					</div>
					<div>
						<label>Tags:</label> <a href="/index.php/tag/database/" rel="tag">database</a>, <a href="/index.php/tag/dates/" rel="tag">dates</a>, <a href="/index.php/tag/indexing/" rel="tag">indexing</a>, <a href="/index.php/tag/performance-tuning/" rel="tag">performance tuning</a>, <a href="/index.php/tag/rdbms/" rel="tag">rdbms</a>, <a href="/index.php/tag/sql/" rel="tag">sql</a>, <a href="/index.php/tag/t-sql/" rel="tag">t-sql</a>, <a href="/index.php/tag/temporal-data/" rel="tag">temporal data</a> 
					</div>
					<div class="post-tagline" style="height: auto">
						<span class="social-button-label">Share:</span><a href="https://twitter.com/intent/tweet?url=/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/&text=RT @LessThanDot Blog - Only In A Database Can You Get 1000% + Improvement By Changing A Few Lines ... by @denisgobo" class="twitter-share-button-static" target="_blank"><i></i><span class="label">Tweet</span></a><a href="http://www.linkedin.com/shareArticle?mini=true&url=/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/&title=Only In A Database Can You Get 1000% + Improvement By Changing A Few Lines Of Code&source=/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/" target="_blank" title="Share on LinkedIn" class="svg-button"><img alt="Share on LinkedIn"  src="http://lessthandot.com/images/LinkedIn.svg" /></a><a href="http://www.reddit.com/submit?url=/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/&title=Only In A Database Can You Get 1000% + Improvement By Changing A Few Lines Of Code" target="_blank" title="Submit to Reddit" class="svg-button"><img alt="Submit to Reddit" src="http://lessthandot.com/images/Reddit.svg" /></a><a href="https://www.facebook.com/sharer/sharer.php?u=/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/&quote=Only In A Database Can You Get 1000% + Improvement By Changing A Few Lines Of Code" title="Share on Facebook" target="_blank" class="svg-button"><img alt="Share on Facebook" src="http://lessthandot.com/images/Facebook.svg" /></a> <a href="http://www.instapaper.com/hello2?url=/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/&title=Only In A Database Can You Get 1000% + Improvement By Changing A Few Lines Of Code" class="instapaper_button">Instapaper</a>					</div>			
				</div>
				<div class="comments-area instapaper_ignore">
	<h4 class="comments-title">
		20 Comments	</h4>
			<ol class="comments-list">
					<li class="comment even thread-even depth-1" id="comment-191">
				<div id="div-comment-191" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/642402eedc47e6d99e4da189e278319a?s=64&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/642402eedc47e6d99e4da189e278319a?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn"><a href='http://apz.nofate.com/' rel='external nofollow' class='url'>Adam Zochowski</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/#comment-191">
			August 18, 2008 at 12:48 pm</a>		</div>

		<p>|| what can we do to make this piece <br />
|| of code use an index seek</p>
<p>|| WHERE YEAR(payment_dt) = YEAR(GETDATE())<br />
||  and MONTH(payment_dt) = MONTH(GETDATE())</p>
<p>why not </p>
<p>   create index idx_Year  on table (year(payment_dt))<br />
   create index idx_Month on table (month(payment_dt))</p>
<p>year(getDate()) is evaluted once (since getdate does not change per row, only per transaction), and year(payment_dt) would be evaluated through index?</p>
<p>
Why the ugly and hard to grok</p>
<p>WHERE payment_dt >= DATEADD(mm, DATEDIFF(mm, 0, GETDATE())+0, 0)</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/?replytocom=191#respond' onclick='return addComment.moveForm( "div-comment-191", "191", "respond", "109" )' aria-label='Reply to Adam Zochowski'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-192">
				<div id="div-comment-192" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/02a115c87f6be40b95728c446de7b550?s=64&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/02a115c87f6be40b95728c446de7b550?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Venshi</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/#comment-192">
			August 18, 2008 at 1:40 pm</a>		</div>

		<p>I hadn&#8217;t thought about this before. Is this true for all functions? I have a few statements with COALESCE on both sides but haven&#8217;t noticed any issues. I&#8217;ll have to see if I can improve on them.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/?replytocom=192#respond' onclick='return addComment.moveForm( "div-comment-192", "192", "respond", "109" )' aria-label='Reply to Venshi'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-SQLDenis bypostauthor even thread-even depth-1" id="comment-193">
				<div id="div-comment-193" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/7a49149d4d4b9242348b95a2c561c20d?s=64&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/7a49149d4d4b9242348b95a2c561c20d?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">SQLDenis</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/#comment-193">
			August 18, 2008 at 2:15 pm</a>		</div>

		<p>Adam, because the more indexes you add, the slower your inserts and updates will be</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/?replytocom=193#respond' onclick='return addComment.moveForm( "div-comment-193", "193", "respond", "109" )' aria-label='Reply to SQLDenis'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-SQLDenis bypostauthor odd alt thread-odd thread-alt depth-1" id="comment-194">
				<div id="div-comment-194" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/7a49149d4d4b9242348b95a2c561c20d?s=64&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/7a49149d4d4b9242348b95a2c561c20d?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">SQLDenis</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/#comment-194">
			August 18, 2008 at 2:17 pm</a>		</div>

		<p>Venshi,</p>
<p>Look at the execution plan to see if you get a seek or a scan</p>
<p>where coalesce(column,0) = 0 </p>
<p>should result in a scan</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/?replytocom=194#respond' onclick='return addComment.moveForm( "div-comment-194", "194", "respond", "109" )' aria-label='Reply to SQLDenis'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-195">
				<div id="div-comment-195" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/f288e2f97d8b8b26a356b464613599e3?s=64&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/f288e2f97d8b8b26a356b464613599e3?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Kenny</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/#comment-195">
			August 18, 2008 at 2:39 pm</a>		</div>

		<p>240000% improvement?</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/?replytocom=195#respond' onclick='return addComment.moveForm( "div-comment-195", "195", "respond", "109" )' aria-label='Reply to Kenny'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-196">
				<div id="div-comment-196" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://2.gravatar.com/avatar/56c6c7d4c5d82857593848725c5bd80f?s=64&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/56c6c7d4c5d82857593848725c5bd80f?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">j</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/#comment-196">
			August 18, 2008 at 2:59 pm</a>		</div>

		<p>the only thing i would add is that the analogy of the book surely is a bit misleading, because reading the book from start to the item you are looking for is analogous to a table scan whereas reading the index from beginning to what you are looking for is analogous to an index scan.</p>
<p>the use of functions causes this behaviour, because as in this case to find all the index items where the date has a certain month the db can&#8217;t use direct access. it&#8217;s analogous to finding all the index items in a book that contain &#8216;blah&#8217;. the solution is to limit the search to a range of dates, ie between two index items that can be accessed directly. i don&#8217;t think there is a way to convert my example so that the db can directly access index items.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/?replytocom=196#respond' onclick='return addComment.moveForm( "div-comment-196", "196", "respond", "109" )' aria-label='Reply to j'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-SQLDenis bypostauthor even thread-even depth-1" id="comment-197">
				<div id="div-comment-197" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/7a49149d4d4b9242348b95a2c561c20d?s=64&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/7a49149d4d4b9242348b95a2c561c20d?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">SQLDenis</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/#comment-197">
			August 18, 2008 at 3:45 pm</a>		</div>

		<p>Jürgen,</p>
<p>It also depends if the index is clustered or not</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/?replytocom=197#respond' onclick='return addComment.moveForm( "div-comment-197", "197", "respond", "109" )' aria-label='Reply to SQLDenis'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-198">
				<div id="div-comment-198" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/69714938a17318a96a5d4673da8892ec?s=64&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/69714938a17318a96a5d4673da8892ec?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Mark Brackett</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/#comment-198">
			August 18, 2008 at 5:21 pm</a>		</div>

		<p>While I understand the technicalities, I think it&#8217;s a pretty sad statement of affairs that after 20 years of development Sql Server (and other RDBMS&#8217;s) still can&#8217;t perform the following logic:</p>
<p>1. YEAR(GETDATE()) is deterministic (for a single statement, at least) returning 2008 &#8211; so it&#8217;s effectively a constant.<br />
2. (YEAR(datetime) = 2008) is exactly equal to (datetime BETWEEN &#8216;1/1/2008&#8242; AND &#8217;12/31/2008&#8217;). </p>
<p>I learned how to &#8220;solve for x&#8221; in 4th grade, and now I can even buy a $30 calculator that&#8217;ll do it for me. Is it too much to ask that my $5000 server, and $20000 software do the same?</p>
<p>For a supposed declarative language that touts it&#8217;s &#8220;Query Optimizer&#8221;, Sql sure is brain dead quite often.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/?replytocom=198#respond' onclick='return addComment.moveForm( "div-comment-198", "198", "respond", "109" )' aria-label='Reply to Mark Brackett'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-199">
				<div id="div-comment-199" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/96f4e1a6b175ac636e34463ca5645a2b?s=64&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/96f4e1a6b175ac636e34463ca5645a2b?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn"><a href='http://www.jerryhung.ca/' rel='external nofollow' class='url'>Jerry Hung</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/#comment-199">
			August 19, 2008 at 9:20 am</a>		</div>

		<p>I am surprised the person did not look at the Execution Plan to figure out what&#8217;s going on</p>
<p>A simple UNION query that runs 24 hours = something is SERIOUSLY wrong</p>
<p>I do agree, SQL should be smarter in Date-handling cases<br />
and YEAR(getdate()) and MONTH(getdate()) are essentially CONSTANT in the above query. The user should save them into a variable at least</p>
<p>I&#8217;ve learned to use BETWEEN if I can, versus Date functions or DATEDIFF/DATEPART</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/?replytocom=199#respond' onclick='return addComment.moveForm( "div-comment-199", "199", "respond", "109" )' aria-label='Reply to Jerry Hung'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-200">
				<div id="div-comment-200" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://2.gravatar.com/avatar/56c6c7d4c5d82857593848725c5bd80f?s=64&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/56c6c7d4c5d82857593848725c5bd80f?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">j</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/#comment-200">
			August 19, 2008 at 3:04 pm</a>		</div>

		<p>it&#8217;s not the YEAR(GETDATE()) and MONTH(getdate()) that&#8217;s the problem, but the YEAR(payment_dt) and MONTH(payment_dt).</p>
<p>But you might think that the query optimiser would know that YEAR(payment_dt) = YEAR(GETDATE()) was the same as payment_date BETWEEN &#8216;1-Jan-&#8216; + YEAR(GETDATE()) and &#8217;31-Dec-&#8216; + YEAR(GETDATE()) and MONTH(payment_dt) = MONTH(GETDATE()) in combination with YEAR(payment_dt) = YEAR(GETDATE()) is the same as payment_dt BETWEEN &#8216;1-&#8216; + DATENAME(m,GETDATE()) + &#8216;-&#8216; + CONVERT(varchar,YEAR(GETDATE())) and DATEADD(d,-1,DATEADD(m,1,&#8217;1-&#8216; + DATENAME(m,GETDATE()) + &#8216;-&#8216; + CONVERT(varchar,YEAR(GETDATE())))) (there is probably a nicer way of doing this).</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/?replytocom=200#respond' onclick='return addComment.moveForm( "div-comment-200", "200", "respond", "109" )' aria-label='Reply to j'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-201">
				<div id="div-comment-201" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://2.gravatar.com/avatar/56c6c7d4c5d82857593848725c5bd80f?s=64&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/56c6c7d4c5d82857593848725c5bd80f?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">j</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/#comment-201">
			August 19, 2008 at 3:21 pm</a>		</div>

		<p>i made a mistake with using BETWEEN in the previous comment, it should be:</p>
<p>payment_dt &gt;= &#8216;1-&#8216; + DATENAME(m,GETDATE()) + &#8216;-&#8216; + CONVERT(varchar,YEAR(GETDATE())) and payment_dt &lt; DATEADD(m,1,&#8217;1-&#8216; + DATENAME(m,GETDATE()) + &#8216;-&#8216; + CONVERT(varchar,YEAR(GETDATE())))</p>
<p>which is pretty much the same as your answer, but not as nice.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/?replytocom=201#respond' onclick='return addComment.moveForm( "div-comment-201", "201", "respond", "109" )' aria-label='Reply to j'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-emtucifor odd alt thread-odd thread-alt depth-1" id="comment-202">
				<div id="div-comment-202" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://2.gravatar.com/avatar/27d6e9660735af7bad858dbf2f1eecbc?s=64&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/27d6e9660735af7bad858dbf2f1eecbc?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Erik</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/#comment-202">
			August 20, 2008 at 11:39 am</a>		</div>

		<p>>> Why the ugly and hard to grok</p>
<p>It&#8217;s not ugly when the performance is so great *without adding any more indexes*! And it&#8217;s only hard to grok if you&#8217;re new to it. The concept is quite simple, in fact, much simpler than the code looks.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/?replytocom=202#respond' onclick='return addComment.moveForm( "div-comment-202", "202", "respond", "109" )' aria-label='Reply to Erik'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-203">
				<div id="div-comment-203" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://2.gravatar.com/avatar/8dc1dfdbfb46da170ac4fbe8f2b8afc6?s=64&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/8dc1dfdbfb46da170ac4fbe8f2b8afc6?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn"><a href='http://blog.perfectapi.com/' rel='external nofollow' class='url'>Steve Campbell</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/#comment-203">
			August 21, 2008 at 11:25 am</a>		</div>

		<p>The title should be &#8220;Only in a database is compiler optimization so poor that it cannot figure out a trivial transform&#8221;.</p>
<p>Really, from a developer perspective, it is *ridiculous* how poor the sql compiler is at making simple optimizations.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/?replytocom=203#respond' onclick='return addComment.moveForm( "div-comment-203", "203", "respond", "109" )' aria-label='Reply to Steve Campbell'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-chrissie1 odd alt thread-odd thread-alt depth-1" id="comment-204">
				<div id="div-comment-204" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/70e155e88e0ead5e2bdcb3e1c57506b4?s=64&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/70e155e88e0ead5e2bdcb3e1c57506b4?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Christiaan Baes (chrissie1)</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/#comment-204">
			August 21, 2008 at 1:03 pm</a>		</div>

		<p>Well Steve I&#8217;m sure MS will appreciate the patch you are going to give them ;-).</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/?replytocom=204#respond' onclick='return addComment.moveForm( "div-comment-204", "204", "respond", "109" )' aria-label='Reply to Christiaan Baes (chrissie1)'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment even thread-even depth-1" id="comment-205">
				<div id="div-comment-205" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/77f776c2eaf0cc691e8a0880bb8a191f?s=64&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/77f776c2eaf0cc691e8a0880bb8a191f?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn"><a href='http://www.brentozar.com/' rel='external nofollow' class='url'>Brent Ozar</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/#comment-205">
			August 30, 2008 at 10:35 am</a>		</div>

		<p>I&#8217;m chuckling about the angry developer comments above, complaining about why SQL Server can&#8217;t predict the results on year/getdate.  It&#8217;s a poor musician who blames his instrument&#8230;.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/?replytocom=205#respond' onclick='return addComment.moveForm( "div-comment-205", "205", "respond", "109" )' aria-label='Reply to Brent Ozar'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-206">
				<div id="div-comment-206" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://2.gravatar.com/avatar/50c83006f7f70f9da4c98df7bf07d6f6?s=64&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/50c83006f7f70f9da4c98df7bf07d6f6?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn"><a href='http://www.dl3m.com/' rel='external nofollow' class='url'>jbr</a></cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/#comment-206">
			September 7, 2008 at 3:42 pm</a>		</div>

		<p>thanks for posting</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/?replytocom=206#respond' onclick='return addComment.moveForm( "div-comment-206", "206", "respond", "109" )' aria-label='Reply to jbr'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-naomi even thread-even depth-1" id="comment-190">
				<div id="div-comment-190" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/61e248e3f536e25c08658d205808b113?s=64&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/61e248e3f536e25c08658d205808b113?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Naomi Nosonovsky</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/#comment-190">
			July 14, 2009 at 1:25 pm</a>		</div>

		<p>Great article and very important.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/?replytocom=190#respond' onclick='return addComment.moveForm( "div-comment-190", "190", "respond", "109" )' aria-label='Reply to Naomi Nosonovsky'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-188">
				<div id="div-comment-188" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://0.gravatar.com/avatar/cfe00dac6d7de7850c9b640472054d53?s=64&#038;d=mm&#038;r=g' srcset='http://0.gravatar.com/avatar/cfe00dac6d7de7850c9b640472054d53?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Will</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/#comment-188">
			March 30, 2010 at 6:58 am</a>		</div>

		<p>Great info here.. even almost 2 years later! Question &#8211; many of the tables I&#8217;m dealing with at work have broken up month, day, and year into three different fields: STAT_DAY, STAT_MONTH (indexed), and FOUR_DIGIT_YEAR (indexed). I&#8217;ve been tinkering around with the best way to get this year&#8217;s data, but I&#8217;ve primarily been using:</p>
<p>WHERE FOUR_DIGIT_YEAR=YEAR(GETDATE())</p>
<p>How would this fit into &#8220;sargable-ness&#8221;? Any better way to do it?</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/?replytocom=188#respond' onclick='return addComment.moveForm( "div-comment-188", "188", "respond", "109" )' aria-label='Reply to Will'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment byuser comment-author-SQLDenis bypostauthor even thread-even depth-1" id="comment-189">
				<div id="div-comment-189" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/7a49149d4d4b9242348b95a2c561c20d?s=64&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/7a49149d4d4b9242348b95a2c561c20d?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">SQLDenis</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/#comment-189">
			March 30, 2010 at 7:56 am</a>		</div>

		<p>Will, YEAR(GETDATE() should be fine since the functions is evaluated against a column but only one time</p>
<p>you could also do this</p>
<p>declare @Year int<br />
select @Year = YEAR(GETDATE())</p>
<p>&#8230;..<br />
&#8230;..<br />
WHERE FOUR_DIGIT_YEAR= @Year</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/?replytocom=189#respond' onclick='return addComment.moveForm( "div-comment-189", "189", "respond", "109" )' aria-label='Reply to SQLDenis'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		<li class="comment odd alt thread-odd thread-alt depth-1" id="comment-1979451">
				<div id="div-comment-1979451" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://2.gravatar.com/avatar/ee8efde1a56f111f5e86515c1bac6f13?s=64&#038;d=mm&#038;r=g' srcset='http://2.gravatar.com/avatar/ee8efde1a56f111f5e86515c1bac6f13?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Tim Lenz</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/#comment-1979451">
			September 30, 2014 at 6:57 pm</a>		</div>

		<p>I enjoyed reading the blog and all the comments. So has anything changed when using 2012 or 2014.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/?replytocom=1979451#respond' onclick='return addComment.moveForm( "div-comment-1979451", "1979451", "respond", "109" )' aria-label='Reply to Tim Lenz'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
		</ol>
						<div id="respond" class="comment-respond">
			<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/index.php/datamgmt/datadesign/only-in-a-database-can-you-get-1000-impr/#respond" style="display:none;">Cancel reply</a></small></h3>				<form action="/wp-comments-post.php" method="post" id="commentform" class="comment-form">
					<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" aria-required='true' required='required' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" maxlength="100" aria-describedby="email-notes" aria-required='true' required='required' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="text" value="" size="30" maxlength="200" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='109' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><input type="hidden" id="killer_value" name="killer_value" value="24b16fede9a67c9251d3e7c7161c83ac"/><noscript>Sorry, but you are required to use a javascript enabled brower to comment here.</noscript>				</form>
					</div><!-- #respond -->
		</div>			</div>
				<br style="clear: both;" />
</div>
		</div>
		<div id="page-footer">
			<div id="botnav"><a href="http://lessthandot.com/" title="LessThanDot Launchpad">Launchpad</a> | <a href="http://lessthandot.com/account.php" title="Your Account Settings">My Account</a> | <a href="http://lessthandot.com/statistics.php" title="Statistics">Statistics</a> | <a href="http://lessthandot.com/donate.php" title="Donate">Donate</a> | <a href="http://lessthandot.com/contactus.php" title="Contact Us">Contact Us</a> | <a href="http://lessthandot.com/aboutus.php" title="About the LessThanDot Team">&copy;2008 - 2019 LessThanDot, LLC</a></div>

		<script type='text/javascript'>
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-4471405-1']);
		_gaq.push(['_trackPageview']);
		_gaq.push(['_setCustomVar', 1, 'Environment', 'lessthandot.com', 3]);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	  </script>			<div class="validator"><a href="http://validator.w3.org/check?uri=referer">Valid XHTML</a> | <a href="http://jigsaw.w3.org/css-validator/check/referer" title="Validate the CSS for this page at the W3C website">Valid CSS</a> | 2018-11-11 15:52</div>
		</div>
	</div>
</div>
<!-- <script type="text/javascript" src="http://apis.google.com/js/plusone.js"></script> -->
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.6.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var spam_destroyer = {"key":"159ff9dcc225580310c2de238cdd1f1a","lifetime":"3600","limit":"1552765703"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/plugins/spam-destroyer/kill.js?ver=1.2'></script>
</body>
</html>
