<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>Security &#8211; LessthanDot</title>
	<atom:link href="/index.php/category/sysadmins/security/feed/" rel="self" type="application/rss+xml" />
	<link>/</link>
	<description>A Technical Community for IT Professionals</description>
	<lastBuildDate>Sat, 09 Mar 2019 12:50:36 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=4.6.1</generator>
	<item>
		<title>Review: Worm: The First Digital World War by Mark Bowden</title>
		<link>/index.php/sysadmins/security/review-worm-the-first-digital/</link>
		<comments>/index.php/sysadmins/security/review-worm-the-first-digital/#respond</comments>
		<pubDate>Sun, 22 Apr 2012 17:34:00 +0000</pubDate>
		<dc:creator><![CDATA[SQLDenis]]></dc:creator>
				<category><![CDATA[2003 Server]]></category>
		<category><![CDATA[Security]]></category>
		<category><![CDATA[conficker]]></category>
		<category><![CDATA[virus]]></category>
		<category><![CDATA[worm]]></category>

		<guid isPermaLink="false">/index.php/2012/04/review-worm-the-first-digital/</guid>
		<description><![CDATA[Worm: The First Digital World War by Mark Bowden

Do you still remember  Conficker, also known as Downup, Downadup and Kido? Conficker infected between 9 million and 15 million PCs
Here are just some examples that I pulled down from wikipedia

  In&#8230;]]></description>
				<content:encoded><![CDATA[<p><a href="http://www.amazon.com/gp/product/0802119832/ref=as_li_ss_tl?ie=UTF8&amp;tag=sql08-20&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0802119832">Worm: The First Digital World War</a> by Mark Bowden</p>
<p>Do you still remember  <a href="/index.php/SysAdmins/OS/win32-conficker-b-also-known-as-downadup">Conficker, also known as Downup, Downadup and Kido</a>? Conficker infected between 9 million and 15 million PCs<br />
Here are just some examples that I pulled down from <a href="http://en.wikipedia.org/wiki/Conficker#Impact_in_Europe">wikipedia</a></p>
<ul>
<li>Intramar, the French Navy computer network, was infected with Conficker on 15 January 2009. The network was subsequently quarantined, forcing aircraft at several airbases to be grounded because their flight plans could not be downloaded.</li>
<li>
The United Kingdom Ministry of Defence reported that some of its major systems and desktops were infected. The virus has spread across administrative offices, NavyStar/N* desktops aboard various Royal Navy warships and Royal Navy submarines, and hospitals across the city of Sheffield reported infection of over 800 computers.</li>
<li>
On 2 February 2009, the Bundeswehr, the unified armed forces of Germany reported that about one hundred of their computers were infected.</li>
<li>
An infection of Manchester City Council&#8217;s IT system caused an estimated Â£1.5m worth of disruption in February 2009. USB flash drives have since been banned, as this was believed to be the vector for the initial infection.</li>
</ul>
<p>I noticed the book <a href="http://www.amazon.com/gp/product/0802119832/ref=as_li_ss_tl?ie=UTF8&amp;tag=sql08-20&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0802119832">Worm: The First Digital World War</a> by Mark Bowden and decided to check it out since I already read <a href="http://www.amazon.com/gp/product/0142000957/ref=as_li_ss_tl?ie=UTF8&amp;tag=sql08-20&amp;linkCode=as2&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0142000957">Killing Pablo</a> which was written by Mark Bowden as well</p>
<p>The book is written for people who are not familiar with all the terms that most IT people know. Things like TCP/IP, ports, RPC and buffer overflow are all explained in very simple ways, an IT person might think that this book is too simple for him or her. The part of the book which I found of most interest is the infighting between the members of the <a href="http://www.confickerworkinggroup.org/wiki/">Conficker Cabal</a> (later renamed to the Conficker Working Group). The cluelessness from the US government was interesting as well.</p>
<p>The book takes you through how the Conficker worm started to infect computers to the cat and mouse game that followed between the Conficker creator and the Conficker Cabal. Also covered is a general history of worms and viruses/virii so that you can see that each virus is based on some elements of the previous one.</p>
<p>The book is only 245 pages and it is a very easy read with a nice size font. If you don&#8217;t know anything about Conficker, I think this is a good book to read. If you already know about Conficker and followed it then I don&#8217;t think you will find a lot of new things in this book that have not been discussed before, however I think that this book will still be of interest to you, the Conficker Cabal stuff was the most interesting part to me</p>
<p>In the end I would recommend this book and I think you will enjoy it.</p>
<p>To see all the books I have read so far in 2012 visit my pinterest board here: http://pinterest.com/denisgobo/books-i-read-in-2012/</p>
]]></content:encoded>
			<wfw:commentRss>/index.php/sysadmins/security/review-worm-the-first-digital/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>Don&#8217;t fall for the social engineering scam that makes you go to ammyy.com</title>
		<link>/index.php/sysadmins/security/don-t-fall-for-the/</link>
		<comments>/index.php/sysadmins/security/don-t-fall-for-the/#comments</comments>
		<pubDate>Sun, 18 Sep 2011 12:10:00 +0000</pubDate>
		<dc:creator><![CDATA[SQLDenis]]></dc:creator>
				<category><![CDATA[2003 Server]]></category>
		<category><![CDATA[Security]]></category>
		<category><![CDATA[Windows]]></category>
		<category><![CDATA[Windows 7]]></category>
		<category><![CDATA[XP]]></category>
		<category><![CDATA[scam]]></category>
		<category><![CDATA[security]]></category>
		<category><![CDATA[social engineering]]></category>

		<guid isPermaLink="false">/index.php/2011/09/don-t-fall-for-the/</guid>
		<description><![CDATA[I am pretty sure that none of our readers would fall for this social engineering scam that would make you share your computer with someone else, I am writing about it because I know of one person who had a call like this but she luckily hung up.

I he&#8230;]]></description>
				<content:encoded><![CDATA[<p>I am pretty sure that none of our readers would fall for this social engineering scam that would make you share your computer with someone else, I am writing about it because I know of one person who had a call like this but she luckily hung up.</p>
<p>I heard about this on Twit&#8217;s <a href="http://twit.tv/sn">Security Now</a>( With Steve Gibson and Leo Laporte ). Here is how it works, you will get a call from someone based in India working for Microsoft telling you that your computer is infected. The first thing they do is tell you to go to start/run box, type <em>eventvwr </em>and it will bring up Windows Event Viewer. Now they have you go to the aplication folder and look at all the errors that are there, this is because the computer is infected. </p>
<p>Of course everyone that has been using windows for a while will know that it will always have errors.</p>
<p>The next part is pretty funny&#8230;.</p>
<p>They will tell you to go back to the Run box and type &#8220;inf&#8221;, then they will tell you that inf stands for <strong>infected files</strong>.  They make you go to C:Windowsinf After you are there they will ask you if you can you see a lot of .inf and .pnf files in the INF directory. If you say yes, and you will, they will tell you that those are corrupted files. Next they will tell you to double-click one of the PNF files.  Once you double-click it, you will see an error message like the one below</p>
<div class="image_block"><a href="/wp-content/uploads/blogs/All/pnffile.PNG?mtime=1326496203"><img alt="" src="/wp-content/uploads/blogs/All/pnffile.PNG?mtime=1326496203" width="412" height="252" /></a></div>
<p>This, they will tell you is proof that your machine is infected.</p>
<p>After that they will tell you that to fix it you need to do the following. Go to the Run box and type www.ammyy.com. Ammyy Admin &#8211; is a popular config-zero free remote desktop sharing software. It&#8217;s used for system administration, webinars and instant remote desktop access. So next they will take over your system by using this tool</p>
<p>Here is a also a video that someone recorded</p>
[video:youtube:cueN1-2lANA]
<p>So if you or any of the people you know get any of these calls, just tell them to hung up.</p>
<p><strong>Update</strong> Microsoft dumps partner over support call scam, see here: http://www.pcpro.co.uk/news/370054/microsoft-dumps-partner-over-support-call-scam</p>
]]></content:encoded>
			<wfw:commentRss>/index.php/sysadmins/security/don-t-fall-for-the/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
		</item>
		<item>
		<title>Virtual Lab: 2008 R2 Domain Controller &#8211; Basic Tasks</title>
		<link>/index.php/sysadmins/security/virtual-lab-2008-r2-domain-controller-ba/</link>
		<comments>/index.php/sysadmins/security/virtual-lab-2008-r2-domain-controller-ba/#comments</comments>
		<pubDate>Thu, 17 Jun 2010 09:51:38 +0000</pubDate>
		<dc:creator><![CDATA[Eli Weinstock-Herman (tarwn)]]></dc:creator>
				<category><![CDATA[2008 Server]]></category>
		<category><![CDATA[Security]]></category>
		<category><![CDATA[Windows]]></category>

		<guid isPermaLink="false">/index.php/2010/06/virtual-lab-2008-r2-domain-controller-ba/</guid>
		<description><![CDATA[In the previous article we covered the creation of a basic Domain Controller for our Virtual Lab. Using this basic domain controller and a basic SQL Server machine, we will look at the creation of a basic user account, creating a service account, and ad&#8230;]]></description>
				<content:encoded><![CDATA[<div class="acc_header">
In the <a href="/index.php/SysAdmins/OS/Windows/2008Server/virtual-lab-creating-a-2008-r2-domain-co" target="_blank" title="Virtual Lab: Creating a 2008 R2 Domain Controller">previous article</a> we covered the creation of a basic Domain Controller for our Virtual Lab. Using this basic domain controller and a basic SQL Server machine, we will look at the creation of a basic user account, creating a service account, and addition of a system to the domain.<br />
<br />
<label>Technical Area:</label> Accidental Systems Administrator<br />
<label class="diff">Level of Difficulty: </label><img src="http://tiernok.com/LTDBlog/dr_basic.png" alt="Basic Difficulty" /><br />
<label>Additional Articles:</label><a href="http://wiki.lessthandot.com/index.php/Virtual_Lab" title="View the wiki entry">Virtual Lab entry on the LTD Wiki</a>
</div>
<p>This post picks up where the <a href="/index.php/All/?p=845">Virtual Lab: Creating a 2008 R2 Domain Controller</a> post left off. Now that we have a new domain up and running we need to add some systems and users.</p>
<h2>Creating Accounts</h2>
<p>After installing the Active Directory Directory Services role, there are several new tools available from the Administrative Tools section of the Start menu. Throughout the remainder of the article we will be working through the &#8220;Active Directory Users and Computers&#8221; tool.</p>
<h3>Domain Administrator Account</h3>
<p>The first account we are going to create on the new domain is a Domain Administrator account. Even though this is a virtual lab environment, we don&#8217;t want to get in the habit of using the built-in administrator account. </p>
<p>Open the &#8220;Active Directory User and Computers&#8221; screen and explore the default groups that have been created. As this is our first visit, there are no custom folders in our tree.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/BasicDC/0_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/BasicDC/0_config.png" alt="AD Users and Computers" /></a><br />
	AD &#8211; Users and Computers
</div>
<p>To add a new user to the default &#8220;Users&#8221; folder we will right-click on the folder, select &#8220;New&#8221;, and select &#8220;User&#8221;. This provides us with a dialog to enter the basic user information.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/BasicDC/1_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/BasicDC/1_config.png" alt="AD Adding a User" /></a><br />
	AD &#8211; Adding a User
</div>
<p>After entering the general user information and pressing next, we are presented with a request for the user&#8217;s password and password options. As we have not yet configured the password policy, the <a href="http://technet.microsoft.com/en-us/library/cc264456.aspx" title="Windows 2008 Password Policy Settings" target="_blank">default policy</a> is still in place.</p>
<p>Completing the wizard gives us a brand new member with basic Domain User permissions.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/BasicDC/2_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/BasicDC/2_config.png" alt="AD Adding a User" /></a><br />
	AD &#8211; Adding a User
</div>
<p>To elevate the permissions of the user across the domain, we will assign them membership to the Domain Admins group. Open the user&#8217;s properties panel (right-clicking the user and select &#8220;Properties&#8221;) and select the &#8220;Member Of&#8221; tab.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/BasicDC/3_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/BasicDC/3_config.png" alt="AD Configuring a User" /></a><br />
	AD &#8211; Configuring a User
</div>
<div class="hint">
	There are several default groups created when you install AD DS with default levels of permissions across the domain. There is a pretty good reference on the default groups available <a href="http://ss64.com/nt/syntax-security_groups.html" title="AD Security Groups" target="_blank">here</a>.
</div>
<p>Pressing the &#8220;Add&#8221; button brings up the search dialog. Enter &#8220;Domain Admins&#8221; and press &#8220;Check Names&#8221; to quickly find and select the Domain Admins group.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/BasicDC/4_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/BasicDC/4_config.png" alt="AD Configuring a User" /></a><br />
	AD &#8211; Configuring a User
</div>
<p>Press Ok twice and the user is now part of the Domain Admins group.</p>
<h3>Service Accounts</h3>
<p>Service accounts are an important part of a network. Many companies will rely on common accounts, like the built-in Administrator account, when they are setting up services on the Domain that require domain permissions. There are numerous reasons this is a bad idea:
<ul>
<li>Greater Impact &#8211; a change to a single user account suddenly has a much wider impact then is intended, potentially causing service outages in disparate places acros the network</li>
<li>Greater Impact, Frequently &#8211; how about password changes? Using one accuont for a wide range of services requires a wider set of work when a single password has to change</li>
<li>Documentation &#8211; using a single account for multiple services requires either good documentation, good guessing, or a lot of overtime</li>
<li>Security &#8211; providing an account with too much security is a potential security hole, a virus that uses a single application as an entry point suddenly has rights to everything on the network</li>
</ul>
<p>In order to make management of service accounts (and services) clearer, I suggest each service account only have the level of permission on the domain it absolutely needs and that it only be used for a single service or application. This requires more work up front, as you have to not only create individual accounts for each application and service, but more importantly determine what &#8220;minimum requirements&#8221; means for each one. On the other hand, minimizing planned and unplanned system outages in the future is worth a little extra time.</p>
<div class="hint">
Sometimes multiple services need access to a common resource, or a common service needs a few different permission profiles based on the use of the system (for instance, qa versus production SQL Server instances). Rather than add these permissions to each individual service account, consider creating a group that outlines the permissions and then give the service accounts membership in the group. Our goal is to minimize the number of configuration changes we will have to make when that configuration needs to change in the future.
</div>
<h4>Creating the Service User Account</h4>
<p>Our guinea pig in this section will be the basic SQL install from a <a href="/index.php/All/?p=845">previous article</a>. We are going to create a service account for the database server that has limited domain permissions but local administrative permissions. We will be using a middle-of-the-road configuration to create a single user account for all SQL Server services on our domain to run unser, what I would consider to be the minimum level of implementation.</p>
<div class="hint">
Larger networks may want to create groups to handle permissions and then create accounts for individual servers and assign them the correct group membership. This second route reduces risk but heightens the level of work necessary to manage the accounts. In this situation, I would suggest using Managed Service accounts rather than standard user accounts, as they can be assigned the same types of group permissions but reduce a portion of the overhead in administering the accounts.
</div>
<p>On the AD DS server open the &#8220;Active Directory User and Computers&#8221; screen again. While there is a &#8220;Users&#8221; container already available in the interface, we&#8217;re going to create a new Organizational Unit (OU) named &#8220;Service Accounts&#8221; to store these accounts.</p>
<p>To create the new OU, we right-click the Domain (in my case <em>avl.local</em>) and select New -&gt; Organizational Unit. In the dialog we enter the name, in my case &#8220;Service Accounts&#8221;, and press Ok.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/BasicDC/5_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/BasicDC/5_config.png" alt="Creating a new OU" /></a><br />
	AD &#8211; Creating a new OU
</div>
<p>Right clicking the new &#8220;Service Accounts&#8221; container and selecting New &gt; User opens the new user dialog.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/BasicDC/6_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/BasicDC/6_config.png" alt="Creating a new Service User" /></a><br />
	AD &#8211; Creating a new Service User
</div>
<p>As this is the domain account for our SQL Server services, I have chosen the name &#8220;SQL Server Service Account&#8221; and a username of &#8220;sqladmin&#8221;.</p>
<p>On the next step we will also ensure that our password won&#8217;t expire in the middle of the night by verifying the checked defaults and modifying a few.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/BasicDC/7_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/BasicDC/7_config.png" alt="Creating a new Service User" /></a><br />
	AD &#8211; Creating a new Service User
</div>
<p>After viewing the summary in the final step, we press Ok and create the new user. As the user is not going to have any special, domain-wide permissions we do not need to modify their group memberships or other settings. In fact we are done with the account creation until we bring our database server onto the domain and set up the local permissions for the user on that server.</p>
<h2>Joining the Domain</h2>
<p>Joining a server to the domain is a fairly straightforward process. In this case we will join our database server from <a href="http://wiki.lessthandot.com/index.php/Virtual_Lab" title="See the list of prior articles" target="_blank">prior articles</a> and then we will configure our domain account from the previous section to serve as the administrative account for the database services.</p>
<p>The first step will be to change the network properties of the virtual server. When we first created it we used DHCP and that means that it received a dynamic address and DNS entries other than our new controller. </p>
<div class="mylab">
In my personal lab I am still serving DHCP requests from my core switch and have not configured it to direct DNS requests at my virtual DC because there is no guarantee that the DC will be on and later on it will be moved behind a virtual firewall and will be inaccessible to the other physical systems on my network.
</div>
<p>On the SQL Server machine we open the network settings for our adapter, select the &#8220;Internet Protocol Version 4 (TCP/IPv4)&#8221; value, and press &#8220;Properties&#8221;. </p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/BasicDC/8_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/BasicDC/8_config.png" alt="SQL Server VM - Network Settings" /></a><br />
	SQL Server VM &#8211; Network Settings
</div>
<p>Assign the server a static IP address on the network and point the DNS settings to the DC. At this point it would also be a good idea to check the &#8220;Validate&#8221; button to let Windows test the settings when you press Ok.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/BasicDC/9_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/BasicDC/9_config.png" alt="SQL Server VM - Network Settings" /></a><br />
	SQL Server VM &#8211; Network Settings
</div>
<p>In my server the validation resulted in a message indicating that Windows couldn&#8217;t identify the problem, this translates to &#8220;Yes It Works&#8221;.</p>
<p>Next we will open the System Properties. </p>
<div class="hint">
One of the 90 ways you can get to the System Properties panel is to press the &#8220;Server Manager&#8221; icon that is pinned to the toolbar, then in the console highlight &#8220;Server manager&#8221; in the left side to display the high level dashboard on the right, followed by selecting &#8220;Change System Properties&#8221; on the right side of that dash.
</div>
<p>Now we want to press the &#8220;Change&#8221; button on the &#8220;Computer Name&#8221; tab. Select the &#8220;Domain&#8221; radio button and type in the name of the domain from your domain controller.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/BasicDC/10_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/BasicDC/10_config.png" alt="SQL Server VM - Join Domain" /></a><br />
	SQL Server VM &#8211; Join Domain
</div>
<p>On pressing &#8220;Ok&#8221; we are asked to enter domain credentials with permission to join the network. </p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/BasicDC/11_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/BasicDC/11_config.png" alt="SQL Server VM - Join Domain" /></a><br />
	SQL Server VM &#8211; Join Domain
</div>
<p>Once we enter our credentials and press &#8220;Ok&#8221; the system is accepted to the Domain and provides us with the customary reboot request.</p>
<p>back on the Domain Controller in the &#8220;Users and Computers&#8221; console, the server has been automatically added under the &#8220;Computers&#8221; container. This being a simple setup, we have not created our own containers to store our servers in, so we will leave it in the default one (for now).</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/BasicDC/12_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/BasicDC/12_config.png" alt="SQL Server VM - Join Domain" /></a><br />
	SQL Server VM &#8211; Join Domain
</div>
<p>When the SQL Server has finished rebooting we will log in for the first time with our Domain credentials. In the &#8220;Server Manager&#8221; we now see that the full computer name and Domain entries reflect the name of the domain.</p>
<h2>Applying the SQL Service Account</h2>
<p>The last step after adding a database server to the domain is to reconfigure it&#8217;s services to use the domain service account we created above. This will allow us to later create domain resourcs that all of our SQL Server systems need to access without having to manage each one individually.</p>
<p>Currently our service account has no permissions on the server, other than as a basic Domain User (and for some of you, it may not even have that level). So the first step is to provide that domain account with local administrator permissions on our database server.</p>
<div class="hint">
Before continuing further make sure you log into the server once with the service account above. Several folders and files are created when the account logs in and not doing so (or not manually doing some trickery with the Users sub-directory and an NTLog file) appears to upset WMI when your assigning users to the services. Don&#8217;t stay logged in as this user, as you will then end up battling UAC the rest of the day.
</div>
<p>From the open &#8220;Server Manager&#8221; console, expand the &#8220;Configuration&#8221; and then &#8220;Local Users and Groups&#8221; containers, selecting the &#8220;Groups&#8221; folder. Right click the &#8220;Administartors&#8221; group on the right side and select &#8220;Properties&#8221;.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/BasicDC/13_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/BasicDC/13_config.png" alt="SQL Server VM - Service Account" /></a><br />
	SQL Server VM &#8211; Service Account
</div>
<p>We enter the name of the domain account (in this case AVLsqladmin) and press the &#8220;Check Names&#8221; button to ensure the account could be found.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/BasicDC/14_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/BasicDC/14_config.png" alt="SQL Server VM - Service Account" /></a><br />
	SQL Server VM &#8211; Service Account
</div>
<p>Press &#8220;Ok&#8221; and &#8220;Ok&#8221; and we are back in the Server Manager again.</p>
<p>The last step is to configure our services to use the Domain account, however this is done a little differently for SQL Server than you might expect.</p>
<div class="hint">
While it is technically possible to change the service accounts directly from the Windows &#8220;Services&#8221; console, there are a number of extra steps that have to be completed in order for it to work properly, as there are also various registry and application settings that have to be set outside of the Services console. Microsoft has published a <a href="http://support.microsoft.com/kb/283811" title="Read the KB article" target="_blank">knowledge base article</a> on this for 2005, I have not been able to locate a similar document for 2008.
</div>
<p>Open the &#8220;SQL Server Configuration Manager&#8221; from the Start Menu (this would also be a good time to pin it to the taskbar).</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/BasicDC/15_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/BasicDC/15_config.png" alt="SQL Server VM - Service Account" /></a><br />
	SQL Server VM &#8211; Service Account
</div>
<div class="hint">
Ah, the wonders of UAC. Don&#8217;t get me wrong, I actually like the concept, unfortunately the implementation leaves a little to be desired in Enterprise or Domain setups. Accounts in the Domain Admins (and a few others?) groups don&#8217;t receive the level of rights you would expect and, in fact, it doesn&#8217;t seem possible to grant them the abilities of the built-in administrator, which has strange and mystical powers that are turned on by default and can only be turned off in the policy settings, not applied to other accounts. You will receive a number of errors when you try to escalate with a variety of different settings, and all of the recommendations [I have found] end with either turning off UAC, using the Right-Click &#8220;Run As Administrator&#8221;, or appear to have been written by people logged in as a Local Administrator.<br />
To make matters worse, file access escalation (if it works) creates a mess of local folder permissions, so it&#8217;s highly suggested that you read <a href="http://blog.akinstech.com/understanding-windows-7-and-2008-r2-uac-and-permissions" title="Read this post on making your own Local Admin group for file access" target="_blank">this workaround</a>.
</div>
<p>In the <a href="/index.php/All/?p=840" title="Review the Basic SQL Virtual Machine post">Basic SQL Server Virtual Lab post</a> we only installed a few services and configured SQL Server and SQL Agent to use a local account.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/BasicDC/16_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/BasicDC/16_config.png" alt="SQL Server VM - Service Account" /></a><br />
	SQL Server VM &#8211; Server Configuration Manager
</div>
<p>Right-click on each service and select Properties to open the properties panel. Enter the domain account we created above in the Service Accounts section and it&#8217;s password, then press Apply. The system will then warn us that a restart to the services is required to continue.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/BasicDC/17_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/BasicDC/17_config.png" alt="SQL Server VM - Service Account" /></a><br />
	SQL Server VM &#8211; Changing the Account
</div>
<p>Follow the same instructions for each of the services and we son have all of our services running under the DOmain account.</p>
<div class="screenshot">
	<a href="http://tiernok.com/LTDBlog/BasicDC/18_config.png" title="View Fullsize" target="_blank"><img src="http://tiernok.com/LTDBlog/BasicDC/18_config.png" alt="SQL Server VM - Service Account" /></a><br />
	SQL Server VM &#8211; Finished
</div>
<h2>Wrapping Up</h2>
<p>Now that we have the Domain Controller running, we&#8217;ve created some accounts, and we have joined our first database server to the domain, it&#8217;s time to switch focus back to our database server for a while. Upcoming weeks will focus on some administrative tasks, such as configuring database mail and alerts and building out some scripts to monitor current state and state-over-time values for a few critical performance indicators.</p>
<p><label>Additional Articles:</label><a href="http://wiki.lessthandot.com/index.php/Virtual_Lab" title="View the wiki entry">Virtual Lab entry on the LTD Wiki</a></p>
<style>
.mylab, .hint{
   margin: .5em 2em;
   padding: 1em 1em 1em 90px;
}
.mylab{
   border: 2px solid #CCEECC;
   background-color: #DDFFDD;
   background-image: url(http://tiernok.com/LTDBlog/mylab.png);
   background-repeat: no-repeat;
   background-position: 20px 20px;
}
.hint{
   border: 2px solid #EEEECC;
   background-color: #FFFFDD;
   background-image: url(http://tiernok.com/LTDBlog/tip.png);
   background-repeat: no-repeat;
   background-position: 20px 20px;
}
.screenshot{
   text-align: center;
   font-size: .8em;
   margin-bottom: 1em;
}
.acc_header{ position: relative; }
.acc_header label{ float: left; width: 150px; font-weight: bold;}
.acc_header br{  clear: left; }
.acc_header .diff{ margin-top: 3px; }
</style>
]]></content:encoded>
			<wfw:commentRss>/index.php/sysadmins/security/virtual-lab-2008-r2-domain-controller-ba/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
		<item>
		<title>How To Modify The Host File In Windows 7 Or Vista</title>
		<link>/index.php/sysadmins/security/how-to-modify-the-host-file-in-windows-7/</link>
		<comments>/index.php/sysadmins/security/how-to-modify-the-host-file-in-windows-7/#comments</comments>
		<pubDate>Tue, 29 Dec 2009 01:02:58 +0000</pubDate>
		<dc:creator><![CDATA[SQLDenis]]></dc:creator>
				<category><![CDATA[Security]]></category>
		<category><![CDATA[Vista]]></category>
		<category><![CDATA[Windows]]></category>
		<category><![CDATA[Windows 7]]></category>
		<category><![CDATA[host file]]></category>
		<category><![CDATA[malware]]></category>
		<category><![CDATA[protection]]></category>
		<category><![CDATA[security]]></category>
		<category><![CDATA[spyware]]></category>

		<guid isPermaLink="false">/index.php/2009/12/how-to-modify-the-host-file-in-windows-7/</guid>
		<description><![CDATA[One way I stay protected from bad sites is that I use a modified host file. In Vista and Windows 7 you cannot just open the file in notepad and save it anymore, you will get an error. Someone had this happen at work on Windows Server 2008 last week and&#8230;]]></description>
				<content:encoded><![CDATA[<p>One way I stay protected from bad sites is that I use a modified host file. In Vista and Windows 7 you cannot just open the file in notepad and save it anymore, you will get an error. Someone had this happen at work on Windows Server 2008 last week and just today someone asked about it in our forums here: <a href="http://forum.lessthandot.com/viewtopic.php?f=139&amp;t=9275">Can&#8217;t modify the host file on Windows 7</a> </p>
<p>I decided to create a short little blog post explaining how you can modify this file.</p>
<p>If you open the host file in the following location C:WindowsSystem32driversetc with notepad and then you want to save it you will get one of these errors in Win 7/Vista/Server 2008</p>
<p><strong>Access to C:WindowsSystem32driversetchosts was denied</strong></p>
<p><strong>Cannot create the C:WindowsSystem32driversetchosts file.<br />
Make sure that the path and file name are correct.</strong></p>
<p>I am getting the following error on my Windows 7 machine</p>
<div class="image_block"><img src="/wp-content/uploads/blogs/SysAdmins/error.png" alt="" title="" width="395" height="184" /></div>
<p>In order to fix this you first need to run notepad as an adminstrator. Here is how you do this. Click Start&#8211;>All Programs&#8211;>Accessories, right-click on Notepad, and then click Run as administrator. This might ask you for a password, enter it</p>
<div class="image_block"><img src="/wp-content/uploads/blogs/SysAdmins//RunAsAdmin.png" alt="" title="" width="270" height="162" /></div>
<p>Now from notepad press CTRL + O (or File&#8211;> Open) and navigate to the host file after you make your changes save it..that should work.</p>
<p>I like to use the MVPS HOSTS file, this file is pretty extensive, it has over 16000 entries. Since my PC is used by my wife and my oldest son this is some extra protection that I have in case they get to a bad site.</p>
<p>Here is just a small sample of entries in this host file</p>
<p><em># [Rogue/Suspect Anti-Spyware Products]<br />
127.0.0.1  6d-antivirus.com<br />
127.0.0.1  www.6d-antivirus.com<br />
127.0.0.1  www.ad-purge.com #[thespywareshield.com]<br />
127.0.0.1  www.adware-remover.net #[ADS Adware Remover]<br />
127.0.0.1  antiadwarepro.com<br />
127.0.0.1  www.antiadwarepro.com<br />
127.0.0.1  buylicensekey.com<br />
127.0.0.1  www.codeclean.co.kr #[Adware-CodeClean]<br />
127.0.0.1  www.doctorvaccine.co.kr #[McAfee.DoctorVaccine]<br />
127.0.0.1  errordoctor.com<br />
127.0.0.1  www.errordoctor.com #[Win32/Adware.ErrorDoctor]<br />
127.0.0.1  www.esunsofttechnologies.com #[Symantec.MyBugFreePc]</em></p>
<p>Here is the link to the file in plain text <a href="http://www.mvps.org/winhelp2002/hosts.txt">http://www.mvps.org/winhelp2002/hosts.txt</a></p>
<p>What about you, do you use the host file to block bad sites?</p>
]]></content:encoded>
			<wfw:commentRss>/index.php/sysadmins/security/how-to-modify-the-host-file-in-windows-7/feed/</wfw:commentRss>
		<slash:comments>4</slash:comments>
		</item>
		<item>
		<title>Vulnerability in Microsoft Video ActiveX control could allow remote code execution</title>
		<link>/index.php/sysadmins/os/vulnerability-in-microsoft-video-activex/</link>
		<comments>/index.php/sysadmins/os/vulnerability-in-microsoft-video-activex/#respond</comments>
		<pubDate>Wed, 08 Jul 2009 11:15:21 +0000</pubDate>
		<dc:creator><![CDATA[SQLDenis]]></dc:creator>
				<category><![CDATA[2003 Server]]></category>
		<category><![CDATA[Operating Systems]]></category>
		<category><![CDATA[Security]]></category>
		<category><![CDATA[XP]]></category>
		<category><![CDATA[activex]]></category>
		<category><![CDATA[security]]></category>

		<guid isPermaLink="false">/index.php/2009/07/vulnerability-in-microsoft-video-activex/</guid>
		<description><![CDATA[This is a bad one if you are running Windows XP or Windows Server 2003 with Internet Explorer. If you are running Windows Vista, Windows 7 or Windows Server 2008 then you are not affected The bad part about this is that all it takes for you is to visit a bad site. If you [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>This is a bad one if you are running Windows XP or Windows Server 2003 with Internet Explorer. If you are running Windows Vista, Windows 7 or Windows Server 2008 then you are not affected</p>
<p>The bad part about this is that all it takes for you is to visit a bad site. If you are using Chrome (like me), FireFox or Safari then you are not affected by this. Microsoft really should redesign IE from scratch and get rid of all that ActiveX baggage/nonsense, it is not worth it, it only causes troubles. Almost every IE vulnerability is ActiveX based.</p>
<p><em>Mitigating Factors:</p>
<p>Customers who are using Windows Vista or Windows Server 2008 are not affected because the ability to pass data to this control within Internet Explorer has been restricted.</p>
<p>By default, Internet Explorer on Windows Server 2003 and 2008 runs in a restricted mode that is known as Enhanced Security Configuration. Enhanced Security Configuration is a group of preconfigured settings in Internet Explorer that can reduce the likelihood of a user or administrator downloading and running specially crafted Web content on a server. This is a mitigating factor for Web sites that you have not added to the Internet Explorer Trusted sites zone. See also Managing Internet Explorer Enhanced Security Configuration.</p>
<p>By default, all supported versions of Microsoft Outlook and Microsoft Outlook Express open HTML e-mail messages in the Restricted sites zone. The Restricted sites zone helps mitigate attacks that could try to exploit this vulnerability by preventing Active Scripting and ActiveX controls from being used when reading HTML e-mail messages. However, if a user clicks a link in an e-mail message, the user could still be vulnerable to exploitation of this vulnerability through the Web-based attack scenario.</p>
<p>In a Web-based attack scenario, an attacker could host a Web site that contains a Web page that is used to exploit this vulnerability. In addition, compromised Web sites and Web sites that accept or host user-provided content or advertisements could contain specially crafted content that could exploit this vulnerability. In all cases, however, an attacker would have no way to force users to visit these Web sites. Instead, an attacker would have to persuade users to visit the Web site, typically by getting them to click a link in an e-mail message or Instant Messenger message that takes users to the attacker&#8217;s Web site.</p>
<p>An attacker who successfully exploited this vulnerability could gain the same user rights as the local user. Users whose accounts are configured to have fewer user rights on the system could be less impacted than users who operate with administrative user rights.</em></p>
<p><strong>There are 2 ways to do something about this</strong><br />
1) Visit <a href="http://www.microsoft.com/technet/security/advisory/972890.mspx">Microsoft Security Advisory (972890)</a> and look in the workaround section where you will find a way so that you can disable attempts to instantiate a COM object in Internet Explorer by setting the kill bit for the control in the registry.</p>
<p>2) Use the fix it button on this page  http://support.microsoft.com/default.aspx/kb/972890</p>
<p>Here is a partial list of domains that are exploiting this hole</p>
<p>q23r.cn<br />
wf3gr.8800.org<br />
ads.v8dc.com<br />
name81.8u60.8u.cn<br />
wvg7.cn<br />
ma.o524q.cn<br />
laibuji.w528e.cn<br />
girlfired.d821e.cn<br />
w1.7777ee.com<br />
w2.7777ee.com<br />
w3.7777ee.com<br />
w8.7777ee.com<br />
w9.7777ee.com<br />
milllk.com<br />
haha999b.com<br />
babi2009.com<br />
haha888l.com<br />
xin765.com</p>
<p>A complete list can be found here: http://isc.sans.org/diary.html?storyid=6739</p>
]]></content:encoded>
			<wfw:commentRss>/index.php/sysadmins/os/vulnerability-in-microsoft-video-activex/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
	</channel>
</rss>
