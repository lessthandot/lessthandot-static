<?xml version="1.0" encoding="UTF-8"?><feed
  xmlns="http://www.w3.org/2005/Atom"
  xmlns:thr="http://purl.org/syndication/thread/1.0"
  xml:lang="en-US"
  xml:base="/wp-atom.php"
   >
	<title type="text">Enterprise Architecture &#8211; LessthanDot</title>
	<subtitle type="text">A Technical Community for IT Professionals</subtitle>

	<updated>2019-03-09T12:50:36Z</updated>

	<link rel="alternate" type="text/html" href="/" />
	<id>/index.php/feed/atom/</id>
	<link rel="self" type="application/atom+xml" href="/index.php/category/architect/enterprisearchitecture/feed/atom/" />

	<generator uri="https://wordpress.org/" version="4.6.1">WordPress</generator>
	<entry>
		<author>
			<name>damber</name>
					</author>
		<title type="html"><![CDATA[Software Development Survey 2017]]></title>
		<link rel="alternate" type="text/html" href="/index.php/webdev/software-development-survey-2017/" />
		<id>/?p=8651</id>
		<updated>2017-05-30T19:28:11Z</updated>
		<published>2017-05-31T17:10:36Z</published>
		<category scheme="/" term="All Blogs" /><category scheme="/" term="Architecture, Design and Strategy" /><category scheme="/" term="Data Management" /><category scheme="/" term="Designing Multi-Application Solutions" /><category scheme="/" term="Designing Software" /><category scheme="/" term="Enterprise Architecture" /><category scheme="/" term="Enterprise Developer" /><category scheme="/" term="Enterprise Development" /><category scheme="/" term="IT Professionals" /><category scheme="/" term="Management" /><category scheme="/" term="Web Developer" />		<summary type="html"><![CDATA[&#160; So, you’re a developer? or an architect? or maybe even a technical delivery manager? Great 🙂 I need you! I’m currently doing some research for an upcoming book, and for a new software product, and who better to ask than those that are building and delivering software solutions each and every day? So I’d like [&#8230;]]]></summary>
		<content type="html" xml:base="/index.php/webdev/software-development-survey-2017/"><![CDATA[<p class="graf graf--p graf-after--figure"><img class="aligncenter size-large wp-image-8652" src="/wp-content/uploads/2017/05/shutterstock_374219557-small-1024x683.jpg" alt="Person having a bright idea" width="800" height="533" srcset="/wp-content/uploads/2017/05/shutterstock_374219557-small-1024x683.jpg 1024w, /wp-content/uploads/2017/05/shutterstock_374219557-small-300x200.jpg 300w, /wp-content/uploads/2017/05/shutterstock_374219557-small-768x512.jpg 768w, /wp-content/uploads/2017/05/shutterstock_374219557-small.jpg 1440w" sizes="(max-width: 800px) 100vw, 800px" /></p>
<p>&nbsp;</p>
<p id="f163" class="graf graf--p graf-after--figure">So, you’re a developer? or an architect? or maybe even a technical delivery manager?</p>
<p id="654c" class="graf graf--p graf-after--p">Great <img src="https://s.w.org/images/core/emoji/2/72x72/1f642.png" alt="🙂" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p id="e525" class="graf graf--p graf-after--p">I need you!</p>
<p id="4ba4" class="graf graf--p graf-after--p">I’m currently doing some research for an upcoming book, and for a new software product, and who better to ask than those that are building and delivering software solutions each and every day?</p>
<p id="4b38" class="graf graf--p graf-after--p">So I’d like you to share the wisdom of your experience, by filling in a survey that will take you about 10–15 minutes to complete, about your experiences with designing, building, running and managing software. Start-ups and Enterprises both welcome.</p>
<p id="5c00" class="graf graf--p graf-after--p">There is a prize draw for an Amazon Echo, which you can opt into, as a thank-you for taking the time.</p>
<p id="8b54" class="graf graf--p graf-after--p">So, if you design, build or manage software on a regular basis, I would like to hear from you…</p>
<p id="3ecf" class="graf graf--p graf-after--p">Do you think you can help?</p>
<p id="1415" class="graf graf--p graf-after--p graf--trailing"><a class="markup--anchor markup--p-anchor" href="https://enterprisecore.io/page/making-systems-work-survey-2017" target="_blank" rel="noopener">https://enterprisecore.io/page/making-systems-work-survey-2017</a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
]]></content>
			<link rel="replies" type="text/html" href="/index.php/webdev/software-development-survey-2017/#comments" thr:count="2"/>
		<link rel="replies" type="application/atom+xml" href="/index.php/webdev/software-development-survey-2017/feed/atom/" thr:count="2"/>
		<thr:total>2</thr:total>
		</entry>
		<entry>
		<author>
			<name>Ted Krueger (onpnt)</name>
					</author>
		<title type="html"><![CDATA[Availability Groups Setup and Configuration from A to Z]]></title>
		<link rel="alternate" type="text/html" href="/index.php/architect/availability-groups-setup-and-configuration-from-a-to-z/" />
		<id>/?p=2434</id>
		<updated>2014-06-04T02:31:24Z</updated>
		<published>2014-06-04T01:56:40Z</published>
		<category scheme="/" term="Architecture, Design and Strategy" /><category scheme="/" term="Database Administration" /><category scheme="/" term="Enterprise Architecture" /><category scheme="/" term="Microsoft SQL Server" /><category scheme="/" term="Microsoft SQL Server Admin" />		<summary type="html"><![CDATA[Availability Groups were introduced in SQL Server 2012 and have quickly become the forefront of high availability for the SQL Server Database Engine Services.  In prior versions of SQL Server, true high availability was not a complete solution packaged with the native installation and feature set.  While mirroring was introduced in SQL Server 2005 and [&#8230;]]]></summary>
		<content type="html" xml:base="/index.php/architect/availability-groups-setup-and-configuration-from-a-to-z/"><![CDATA[<p>Availability Groups were introduced in SQL Server 2012 and have quickly become the forefront of high availability for the SQL Server Database Engine Services.  In prior versions of SQL Server, true high availability was not a complete solution packaged with the native installation and feature set.  While mirroring was introduced in SQL Server 2005 and provided a much-needed advance towards achieving highly available data services, mirroring still required much customization to effectively provide a true high availability solution.</p>
<p>It’s important to define high availability as it pertains to database level services – database high availability requires the means of retaining data services to users, applications and services within a defined allowable interruption of data services.  This equates simply as, are data services available to <i>any</i> connection within a given tolerance.  The <i>nines </i>has always been the flavor of measuring availability in the way of uptime.  “<i>My database server achieved four nines availability last year!” </i> This achievement is essentially stating the database services were not available for an estimated .01% of the total operating hours in a year or, 52 minutes.  Remember, this achievement is based on service level agreements that can have vast variations.  While even Full Clustered Instances of SQL Server implement a level of high availability, there is still the single point of failure that is of highest importance to the data services – the database.  Points of failure and focusing on where they may occur, begins allowing a visual representation of how availability achievements can be achieved.</p>
<p>Points of Failure</p>
<ul>
<ul>
<li>Hardware</li>
<li>Operating System</li>
<li>Data Corruption</li>
<li>Data Loss</li>
<li>Network</li>
</ul>
</ul>
<p>These five possible points of failure are specific to almost all data services.  As discussed, Full Clustered Instances is a protection against hardware and operating system failures, mirroring is protection against data loss and corruption events, and geo-clustering can be utilized to prevent network failure events.  However, even combining all of these technologies or features, the concept of data connectivity is still of concern as customization is needed if a single point of connection is not available to an application or user.</p>
<p>As stated already, pre-SQL Server 2012, even a four nines achievement was difficult.  This was due to the customization that was needed to maintain a mirror failover event.  Given that SQL Server is mirroring from instance name to instance name, and there is no single entry point for applications, some manual or programmatic intervention would be needed to handle the fact that a data server name could change.  While connection strings built in certain frameworks could allow for a failover partner attribute, not all connectivity types and providers supported them.  This forced coding changes, monitoring needs and much effort to manage a complete, seamless failover of one designated primary database server.</p>
<p>Availability Groups in SQL Server 2012 combats these issues directly by joining clustering and mirroring technologies and associating them into a group that coexist and all rely on each other in order to maintain availability.  The concept of applying a cluster design and including single instances acting on their own, begins to remove failure points in all areas of availability.</p>
<p>With Availability Groups and Windows Server Failover Clustering, we can look at the same failure points differently, asking how they allow for availability to be retained at any point of failure.</p>
<ul>
<ul>
<li>Hardware
<ul>
<li>Prevention be implementing the same level of protection in FCI but with WSFC</li>
</ul>
</li>
<li>Operating System
<ul>
<li>Prevention be implementing the same level of protection in FCI but with WSFC</li>
</ul>
</li>
<li>Data Corruption
<ul>
<li>Prevention with mirrored databases between each instance in the group</li>
</ul>
</li>
<li>Data Loss
<ul>
<li>Prevention with mirrored databases standing on unique disk subsystems</li>
</ul>
</li>
<li>Network
<ul>
<li>Allowance of multi-subnet clustering for added protection of network loss</li>
</ul>
</li>
</ul>
</ul>
<p>The following step-by-step illustration has been composed for a general setup and configuration need of Availability Groups in SQL Server 2012.  This is essential to becoming familiar with Availability Groups and determining how they fit into specific high availability needs and how data services are being used.  The specific setup and configuration for the Availability Group, SQLAG located on the network, has been utilized to document the needed setup and configurations.  Use this document for setup and configuration of new Availability Groups or the model in place on the network for the Availability Group SQLAG.</p>
<p>Availability Groups are being utilized for three primary objectives:</p>
<ol>
<ol>
<li>Achieve High Availability</li>
<li>Offload read-only queries (or requests)</li>
<li>Achieve a Disaster and Recovery solution</li>
</ol>
</ol>
<p>In order to meet all three objectives, a 4-Node Availability Group has been designed, based on a node and share majority solution.</p>
<p><a href="/wp-content/uploads/2014/06/ag1.png"><img class="aligncenter wp-image-2688 size-full" src="/wp-content/uploads/2014/06/ag1.png" alt="ag1" width="624" height="267" srcset="/wp-content/uploads/2014/06/ag1.png 624w, /wp-content/uploads/2014/06/ag1-300x128.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a></p>
<p>In the Availability Group solution pictured above, the following scenarios Availability Group can be achieved:</p>
<ol>
<ol>
<ol>
<li>Loss of primary database or physical hardware
<ul>
<li>Automatic failover to synchronous node 2</li>
</ul>
</li>
<li>Loss of primary database or physical hardware and loss of secondary automatic synchronous node 2
<ul>
<li>Manual failover to node 3 secondary or node 4 secondary</li>
</ul>
</li>
<li>Loss of primary database or physical hardware
<ul>
<li>Manual failover to node 3 secondary or node 4 secondary</li>
</ul>
</li>
<li>Loss of primary database or physical hardware and loss of file share
<ul>
<li>Automatic failover to synchronous node 2</li>
<li>Manual failover to any other node provided 3 nodes maintain connectivity</li>
</ul>
</li>
</ol>
</ol>
</ol>
<p>Note: Failover scenarios are extended to any node and cluster services maintained provided file share resources are online.  This failure scenario will maintain the cluster and listener resources of up to 2 nodes.  File share loss lowers a maximum node failure loss of one node.  If file share loss occurs and 2 nodes are lost, the cluster cannot be maintained.</p>
<p>&nbsp;</p>
<h1>Windows Server Failover Clustering and Availability Group Information</h1>
<p>Setup of the Availability Groups in the structure covers one or more databases.  The naming conventions utilized are listed below along with each setting that has been configured in this setup per node.</p>
<h2>Windows Server Failover Cluster (WSFC)</h2>
<h3 style="padding-left: 30px">Lab Server Build &#8211; Ensure to search for new hotfixes</h3>
<ul>
<ul>
<li>Windows Server 2008 R2 Enterprise Service Pack 1
<ul>
<li>Physical Memory – 4.00 GB</li>
<li>64-bit Operating System</li>
<li>Processor – Intel Xeon X5660 @ 2.80Ghx
<ul>
<li>1 CPU allocation (Logical count = 1)</li>
</ul>
</li>
</ul>
</li>
<li>Hotfix patches applied
<ul>
<li>KB2494036
<ul>
<li>A hotfix is available to let you configure a cluster node that does not have quorum votes in Windows Server 2008 and in Windows Server 2008 R2</li>
</ul>
</li>
<li>KB2687741
<ul>
<li>A hotfix that improves the performance of the &#8220;AlwaysOn Availability Group&#8221; feature in SQL Server 2012 is available for Windows Server 2008 R2</li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
<h3 style="padding-left: 30px">Server names</h3>
<ul style="padding-left: 30px">
<ul>
<li>NODE1</li>
<li>NODE2</li>
<li>NODE3</li>
<li>NODE4</li>
</ul>
</ul>
<h3 style="padding-left: 30px">Cluster Name</h3>
<ul>
<ul>
<li>SQLCLSTR</li>
</ul>
</ul>
<h3 style="padding-left: 30px">Quorum configuration for WSFC</h3>
<ul>
<ul>
<li>Node Majority File Share</li>
</ul>
</ul>
<h3 style="padding-left: 30px">Network Configuration</h3>
<ul>
<ul>
<li>Cluster Network 1<b></b></li>
<li>Cluster Access IP – 10.2.4.71
<ul>
<li>Subnet 10.2.4.0/24
<ul>
<li>NODE1
<ul>
<li>10.2.4.31</li>
</ul>
</li>
<li>NODE2
<ul>
<li>10.2.4.34</li>
</ul>
</li>
<li>NODE3
<ul>
<li>10.2.4.50</li>
</ul>
</li>
<li>NODE4
<ul>
<li>10.2.4.55</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
<h2>SQL Server Availability Groups</h2>
<h3 style="padding-left: 30px">SQL Server Instances</h3>
<ul>
<ul>
<li>Microsoft SQL Server Enterprise (64-bit)</li>
<li>Build 11.0.2100.0</li>
<li>Named Instances</li>
</ul>
</ul>
<ul>
<ul>
<ul>
<li>NODE1\SHAREPOINT2013</li>
<li>NODE2\SHAREPOINT2013</li>
<li>NODE3\SHAREPOINT2013</li>
<li>NODE4\SHAREPOINT2013</li>
</ul>
</ul>
</ul>
<p>&nbsp;</p>
<h2>Availability Group (AG)</h2>
<ul>
<ul>
<li>AG Name
<ul style="padding-left: 60px">
<li>SQLAG</li>
<li>Timeout configuration for all replicas – 10 seconds</li>
<li>Endpoint port utilized – 5022</li>
</ul>
</li>
<li>AG Listener Name
<ul style="padding-left: 60px">
<li>SQLAGLISTENER</li>
<li>10.2.4.72</li>
</ul>
</li>
<li>AG Replicas
<ul>
<li>NODE1
<ul style="padding-left: 60px">
<li>Primary</li>
<li>Synchronous Role</li>
<li>Automatic Failover</li>
</ul>
</li>
<li>NODE2
<ul style="padding-left: 60px">
<li>Secondary</li>
<li>Synchronous Role</li>
<li>Automatic Failover</li>
</ul>
</li>
<li>NODE3
<ul style="padding-left: 60px">
<li>Secondary</li>
<li>Synchronous Role</li>
<li>Read Only</li>
<li>Read-intent only</li>
<li>Manual Failover</li>
</ul>
</li>
<li>NODE4
<ul style="padding-left: 60px">
<li>Secondary</li>
<li>Asynchronous Role</li>
<li>Manual Failover</li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
<h1>WSFC Setup and Configuration</h1>
<h2>Cluster Setup</h2>
<p>Four servers are acting as nodes in the Windows Server Failover Cluster (WSFC).  The servers are all located on the subnet 10.2.4.x.  Each server has the failover clustering full feature installation.</p>
<p>Configuring the WSFC cluster first requires each server to have the Failover Clustering feature installed.  To perform this installation, follow these steps.</p>
<p>Connect to each server or open Server Manager for remote access to each server. In Server Manager, go to the Features node and click the Add Features link.</p>
<p><a href="/wp-content/uploads/2014/06/ag2.png"><img class="size-full wp-image-2689 aligncenter" src="/wp-content/uploads/2014/06/ag2.png" alt="ag2" width="624" height="156" srcset="/wp-content/uploads/2014/06/ag2.png 624w, /wp-content/uploads/2014/06/ag2-300x75.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a></p>
<p style="text-align: center">In the Select Features wizard, check “Failover Clustering” and click Install.</p>
<p><a href="/wp-content/uploads/2014/06/ag3.png"><img class="size-full wp-image-2690 aligncenter" src="/wp-content/uploads/2014/06/ag3.png" alt="ag3" width="519" height="377" srcset="/wp-content/uploads/2014/06/ag3.png 519w, /wp-content/uploads/2014/06/ag3-300x217.png 300w" sizes="(max-width: 519px) 100vw, 519px" /></a></p>
<p style="text-align: center">Once the installation is completed, a restart of the server is not required but highly recommended.</p>
<p style="text-align: center">Perform these steps for every server that will be enlisted in the WSFC.</p>
<h2>Configure the Cluster</h2>
<p>The following steps are used to configure the cluster containing the four logical servers that have the failover clustering features installed.</p>
<p>On a local computer with Failover Manager installed, or one of the servers that will be in the cluster, click Start&#8211;&gt;Administrative Tools&#8211;&gt;Failover Cluster Manager.</p>
<p>(The Failover Cluster Manager can also be opened by using the MMC snap-in.)</p>
<p><a href="/wp-content/uploads/2014/06/ag4.png"><img class="alignnone size-full wp-image-2691" src="/wp-content/uploads/2014/06/ag4.png" alt="ag4" width="402" height="459" srcset="/wp-content/uploads/2014/06/ag4.png 402w, /wp-content/uploads/2014/06/ag4-262x300.png 262w" sizes="(max-width: 402px) 100vw, 402px" /></a></p>
<p><a href="/wp-content/uploads/2014/06/ag5.png"><img class="alignnone size-full wp-image-2692" src="/wp-content/uploads/2014/06/ag5.png" alt="ag5" width="326" height="263" srcset="/wp-content/uploads/2014/06/ag5.png 326w, /wp-content/uploads/2014/06/ag5-300x242.png 300w" sizes="(max-width: 326px) 100vw, 326px" /></a></p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>(If the welcome screen is shown, click Next.)</p>
<p>Enter in each server’s name that will be part of the cluster.  Click Add after typing in the server name or utilize the Browse button to search the domain for registered server names.</p>
<p><a href="/wp-content/uploads/2014/06/ag6.png"><img class="size-full wp-image-2693 aligncenter" src="/wp-content/uploads/2014/06/ag6.png" alt="ag6" width="624" height="374" srcset="/wp-content/uploads/2014/06/ag6.png 624w, /wp-content/uploads/2014/06/ag6-300x179.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a></p>
<p>Click Next to review the Validation Warning options.</p>
<p>In the Validation Warning screen, if validation tests have not been executed yut, select Yes and click Next to run the validation tests.  This will review the servers for all configurations and options, as they pertain to the server being set up correctly for participation in a cluster.</p>
<p><a href="/wp-content/uploads/2014/06/ag7.png"><img class="size-full wp-image-2694 aligncenter" src="/wp-content/uploads/2014/06/ag7.png" alt="ag7" width="624" height="360" srcset="/wp-content/uploads/2014/06/ag7.png 624w, /wp-content/uploads/2014/06/ag7-300x173.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a></p>
<p>Select No to bypass the validation warning review</p>
<p>In the Access Point for Administering the Cluster, enter the name of the cluster and the network information needed.  If multiple subnets will be utilized, add both in this screen.</p>
<p><a href="/wp-content/uploads/2014/06/ag8.png"><img class="size-full wp-image-2695 aligncenter" src="/wp-content/uploads/2014/06/ag8.png" alt="ag8" width="581" height="331" srcset="/wp-content/uploads/2014/06/ag8.png 581w, /wp-content/uploads/2014/06/ag8-300x170.png 300w" sizes="(max-width: 581px) 100vw, 581px" /></a></p>
<p>Click Next and confirm the settings are accurate. If any changes are required, click Back to make adjustments.</p>
<p>Click Next to create the cluster.</p>
<p><a href="/wp-content/uploads/2014/06/ag9.png"><img class="size-full wp-image-2696 aligncenter" src="/wp-content/uploads/2014/06/ag9.png" alt="ag9" width="582" height="315" srcset="/wp-content/uploads/2014/06/ag9.png 582w, /wp-content/uploads/2014/06/ag9-300x162.png 300w" sizes="(max-width: 582px) 100vw, 582px" /></a></p>
<p>Once completed, click Finish.</p>
<h2>Configuring the Quorum</h2>
<p>&nbsp;</p>
<p>To configure the quorum settings for the new cluster, right click the cluster name in Cluster Manager. Scroll to More Actions and select Configure Cluster Quorum Settings.  Click Next to the Before You Begin screen if it is shown.</p>
<p><a href="/wp-content/uploads/2014/06/ag10.png"><img class="alignnone size-full wp-image-2697" src="/wp-content/uploads/2014/06/ag10.png" alt="ag10" width="624" height="332" srcset="/wp-content/uploads/2014/06/ag10.png 624w, /wp-content/uploads/2014/06/ag10-300x159.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a></p>
<p>In the Select Quorum Configuration screen, chose which type of quorum should be utilized.  If a disk or file share resource has not been added, the only selection available will be Node Majority.  Note: to create a share resource, the share must be located outside of the servers in the cluster.  For this configuration, we want a file share as a fifth node to retain a healthy quorum in the event of node losses.</p>
<p><a href="/wp-content/uploads/2014/06/ag11.png"><img class="alignnone size-full wp-image-2698" src="/wp-content/uploads/2014/06/ag11.png" alt="ag11" width="491" height="337" srcset="/wp-content/uploads/2014/06/ag11.png 491w, /wp-content/uploads/2014/06/ag11-300x205.png 300w" sizes="(max-width: 491px) 100vw, 491px" /></a></p>
<p>Select Node and File Share Majority (for clusters with special configurations)</p>
<p><a href="/wp-content/uploads/2014/06/ag12.png"><img class="alignnone size-full wp-image-2699" src="/wp-content/uploads/2014/06/ag12.png" alt="ag12" width="493" height="341" srcset="/wp-content/uploads/2014/06/ag12.png 493w, /wp-content/uploads/2014/06/ag12-300x207.png 300w" sizes="(max-width: 493px) 100vw, 493px" /></a></p>
<p>Click Next to confirm settings and click Next again to configure the settings.</p>
<p><a href="/wp-content/uploads/2014/06/ag13.png"><img class="alignnone size-full wp-image-2700" src="/wp-content/uploads/2014/06/ag13.png" alt="ag13" width="289" height="200" /></a>      <a href="/wp-content/uploads/2014/06/ag14.png"><img class="alignnone size-full wp-image-2701" src="/wp-content/uploads/2014/06/ag14.png" alt="ag14" width="287" height="200" /></a></p>
<h1>SQL Server 2012 Availability Group Setup and Configuration</h1>
<h2>Configure the SQL Server Availability Group</h2>
<p>In order to configure an Availability Group, the following steps are required in this sequence.</p>
<p>Each server that will take part as a replica must be in a WSFC.</p>
<ol>
<ol>
<li>A network name should be created to act as the listener (the name by which applications and users will connect to SQL Server and the databases in the Availability Group).  A listener can be created from the wizard if the listener is not created beforehand.</li>
<li>Security should be set up for the administrator that will be executing the AG setup.  This account must be in the sysadmin server role on all SQL Server instances that are acting as replicas and have access to read the domain Active Directory services.  If a listener is not prepared before creating the AG, the account is required to be a domain admin.</li>
<li>Each server that will act as a replica must have AlwaysOn features enabled in SQL Server.</li>
<li> The database(s) that will be in the Availability Group should be restored or created on the replica that will act as the primary.  These database(s) should be in RECOVERY mode and set to a recovery model of Full.</li>
<li>Each database on the primary requires a full backup to be executed.</li>
<li>A share should be created to retain the full backup of the primary replica’s database(s).  This share can be located on any of the replica servers or an external share resource.</li>
</ol>
</ol>
<p>Once the above security and required resources are available, continue with the steps below to create the AG.</p>
<p>Remote into each server that will act as a replica in the Availability Group and configure SQL Server for AlwaysOn features to be enabled. (Warning: This setting requires SQL Server to be restarted.)</p>
<p>Open SQL Server Configuration Manager.</p>
<p>Select SQL Server Services in the tree view.  Right click the SQL Server instance to be configured and select Properties.</p>
<p><a href="/wp-content/uploads/2014/06/ag15.png"><img class="alignnone size-full wp-image-2702" src="/wp-content/uploads/2014/06/ag15.png" alt="ag15" width="527" height="272" srcset="/wp-content/uploads/2014/06/ag15.png 527w, /wp-content/uploads/2014/06/ag15-300x154.png 300w" sizes="(max-width: 527px) 100vw, 527px" /></a></p>
<p>In the SQL Server Properties window, select the AlwaysOn High Availability tab. Check Enable AlwaysOn Availability Groups.  The Windows failover cluster name should default to the cluster that the server is part of.  If this does not auto-populate, the server is not in a WSFC and is required to be added before this step is performed.</p>
<p><a href="/wp-content/uploads/2014/06/ag16.png"><img class="alignnone size-full wp-image-2703" src="/wp-content/uploads/2014/06/ag16.png" alt="ag16" width="413" height="483" srcset="/wp-content/uploads/2014/06/ag16.png 413w, /wp-content/uploads/2014/06/ag16-256x300.png 256w" sizes="(max-width: 413px) 100vw, 413px" /></a></p>
<p>Click OK and restart the SQL Server services.</p>
<p>(Perform the above steps for each SQL Server that will be in the Availability Group.)</p>
<p>Connect to SQL Server via SQL Server Management Studio (SSMS) on the server that will act as the primary replica in the Availability Group.  Restore or create the database(s) that are required to be in the Availability Group.  Perform a full back up on each database.  (Note: ensure each database is in Full Recovery Model)</p>
<p>Expand the AlwaysOn High Availability node.  Right click the Availability Groups node and select New Availability Group Wizard</p>
<p><a href="/wp-content/uploads/2014/06/ag17.png"><img class="alignnone size-full wp-image-2704" src="/wp-content/uploads/2014/06/ag17.png" alt="ag17" width="378" height="296" srcset="/wp-content/uploads/2014/06/ag17.png 378w, /wp-content/uploads/2014/06/ag17-300x234.png 300w" sizes="(max-width: 378px) 100vw, 378px" /></a></p>
<p>Click Next if shown the Introduction window.</p>
<p><a href="/wp-content/uploads/2014/06/ag18.png"><img class="alignnone size-full wp-image-2705" src="/wp-content/uploads/2014/06/ag18.png" alt="ag18" width="346" height="321" srcset="/wp-content/uploads/2014/06/ag18.png 346w, /wp-content/uploads/2014/06/ag18-300x278.png 300w" sizes="(max-width: 346px) 100vw, 346px" /></a></p>
<p>Enter the name chosen for the Availability Groups and click Next.</p>
<p><a href="/wp-content/uploads/2014/06/ag19.png"><img class="alignnone size-full wp-image-2706" src="/wp-content/uploads/2014/06/ag19.png" alt="ag19" width="624" height="287" srcset="/wp-content/uploads/2014/06/ag19.png 624w, /wp-content/uploads/2014/06/ag19-300x137.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a></p>
<p>Ensure each database that will take part in the Availability Group passes validations.  If a database does not pass the validation process that is required to be added to an Availability Group, the list to the right of each database will show what is required.  For example: if a full backup was not performed, the link will read, “Full backup is required”.</p>
<p><a href="/wp-content/uploads/2014/06/ag20.png"><img class="alignnone size-full wp-image-2707" src="/wp-content/uploads/2014/06/ag20.png" alt="ag20" width="624" height="92" srcset="/wp-content/uploads/2014/06/ag20.png 624w, /wp-content/uploads/2014/06/ag20-300x44.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a></p>
<p>After performing the required prerequisites, click Refresh to re-validate the databases.  Once the validation process states, “Meets prerequisites”, check each database that is required and click Next.</p>
<p><a href="/wp-content/uploads/2014/06/ag21.png"><img class="alignnone size-full wp-image-2708" src="/wp-content/uploads/2014/06/ag21.png" alt="ag21" width="567" height="361" srcset="/wp-content/uploads/2014/06/ag21.png 567w, /wp-content/uploads/2014/06/ag21-300x191.png 300w" sizes="(max-width: 567px) 100vw, 567px" /></a></p>
<p>In the Specify Replicas screen, click the Add Replica…button to add the replicas that will be part of the Availability Group.</p>
<p>Make the configuration changes as shown below</p>
<ol>
<ol>
<li>Primary 01 – check Automatic failover, Synchronous Commit</li>
<li>Secondary 02 – check Automatic failover, Synchronous Commit</li>
<li>Secondary 03 – check synchronous Commit and select Readable Secondary option “Read-intent only”</li>
<li>Secondary 04 – Leave all options as default</li>
</ol>
</ol>
<p><a href="/wp-content/uploads/2014/06/ag22.png"><img class="alignnone size-full wp-image-2709" src="/wp-content/uploads/2014/06/ag22.png" alt="ag22" width="624" height="179" srcset="/wp-content/uploads/2014/06/ag22.png 624w, /wp-content/uploads/2014/06/ag22-300x86.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a></p>
<p>Click the Endpoints tab to ensure all settings are populated</p>
<p><a href="/wp-content/uploads/2014/06/ag23.png"><img class="alignnone size-full wp-image-2710" src="/wp-content/uploads/2014/06/ag23.png" alt="ag23" width="624" height="155" srcset="/wp-content/uploads/2014/06/ag23.png 624w, /wp-content/uploads/2014/06/ag23-300x74.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a></p>
<p>If changes are required due to network needs or port configurations, make them in this window.  For example: if port 5022 is used for other communications, adjust to port 5023 or another free port.</p>
<p>Click the Backup preferences tab.</p>
<p>Check Secondary only option for backup preferences and check the checkbox for Replica NODE3.</p>
<p><a href="/wp-content/uploads/2014/06/ag24.png"><img class="alignnone size-full wp-image-2711" src="/wp-content/uploads/2014/06/ag24.png" alt="ag24" width="624" height="361" srcset="/wp-content/uploads/2014/06/ag24.png 624w, /wp-content/uploads/2014/06/ag24-300x173.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a></p>
<p>Click the Listener tab.  If the listener was created prior to configuring the Availability Group, leave “Do not create an Availability Group listener now”.  If a listen should be created, check the “Create an Availability Group listener” and enter the required information.  Note: domain admin privileges are required to create the domain name if choosing to create the listener at this time.</p>
<p><a href="/wp-content/uploads/2014/06/ag25.png"><img class="alignnone size-full wp-image-2712" src="/wp-content/uploads/2014/06/ag25.png" alt="ag25" width="624" height="283" srcset="/wp-content/uploads/2014/06/ag25.png 624w, /wp-content/uploads/2014/06/ag25-300x136.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a></p>
<p>Click Next to save the replica settings.</p>
<p>In the Select Initial Data Synchronization window, enter a location for the full backup and log backup to be stored to initialize the other replicas in the Availability Group.  This location can be a drive or share on any of the replicas or an external share.  In the example below, replica 04 is used with the admin share to the T Drive.</p>
<p><a href="/wp-content/uploads/2014/06/ag26.png"><img class="alignnone size-full wp-image-2713" src="/wp-content/uploads/2014/06/ag26.png" alt="ag26" width="624" height="203" srcset="/wp-content/uploads/2014/06/ag26.png 624w, /wp-content/uploads/2014/06/ag26-300x97.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a></p>
<p>Click Next to run the validation process from the settings saved so far.  The only warning should be if the listener was chosen not to be created at the time of the setup.</p>
<p><a href="/wp-content/uploads/2014/06/ag27.png"><img class="alignnone size-full wp-image-2714" src="/wp-content/uploads/2014/06/ag27.png" alt="ag27" width="624" height="404" srcset="/wp-content/uploads/2014/06/ag27.png 624w, /wp-content/uploads/2014/06/ag27-300x194.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a></p>
<p>If a warning or error has been found, click the link to review the message and act accordingly.</p>
<p>Click Next to review the choices that will be executed upon clicking Finish to create the Availability Group and initialize the replicas.</p>
<p><a href="/wp-content/uploads/2014/06/ag28.png"><img class="alignnone size-full wp-image-2715" src="/wp-content/uploads/2014/06/ag28.png" alt="ag28" width="624" height="405" srcset="/wp-content/uploads/2014/06/ag28.png 624w, /wp-content/uploads/2014/06/ag28-300x194.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a></p>
<p>Note: it is recommended to click the Script button at this time and save the script generated by the wizard to a secure location for future recovery.</p>
<p><a href="/wp-content/uploads/2014/06/ag29.png"><img class="alignnone size-full wp-image-2716" src="/wp-content/uploads/2014/06/ag29.png" alt="ag29" width="392" height="103" srcset="/wp-content/uploads/2014/06/ag29.png 392w, /wp-content/uploads/2014/06/ag29-300x78.png 300w" sizes="(max-width: 392px) 100vw, 392px" /></a></p>
<p>Once Finish is clicked, the Availability Group and all replicas will be initialized and created.  This process can take some time depending on the size of each database in the Availability Group.</p>
<p>The process will execute in this order</p>
<ol>
<ol>
<li>Endpoints will be configured/created</li>
<li>Extended Events for monitoring an AG will be created</li>
<li>The Availability Group will be created</li>
<li>The Availability Group will be brought online</li>
<li>Secondary replicas will be added to the Availability Group</li>
<li>The WSFC quorum will be validated for votes of each replica server</li>
<li>A full backup of the database in the Availability Group will be taken</li>
<li>Steps repeated in this order for each replica</li>
</ol>
</ol>
<ul>
<ul>
<ul>
<li>A backup will be restored to the secondary replica</li>
<li>The tail-end log backup will be taken from the primary</li>
<li>The tail-end log backup will be restored to the secondary replica</li>
<li>Database will be joined to the Availability Group</li>
</ul>
</ul>
</ul>
<p><a href="/wp-content/uploads/2014/06/ag30.png"><img class="alignnone size-full wp-image-2717" src="/wp-content/uploads/2014/06/ag30.png" alt="ag30" width="624" height="269" srcset="/wp-content/uploads/2014/06/ag30.png 624w, /wp-content/uploads/2014/06/ag30-300x129.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a></p>
<p>Given the even number of node votes in this wizard driven setup, we will need to configure the voting weight of the nodes at a later point.  With the even number the warning is shown as “Validating WSFC quorum vote configuration”.</p>
<h2>Configure the Listener</h2>
<p>If the listener was not created in the initial wizard setup, perform these steps to assign the listener to the Availability Group.</p>
<ol>
<ol>
<ol>
<li>Open SSMS 2012</li>
<li>Execute the statement below to assign the listener name and IP to the Availability Group</li>
</ol>
</ol>
</ol>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
</pre></td><td class="de1"><pre class="de1"><span class="kw1">USE</span> <span class="br0">&#91;</span>master<span class="br0">&#93;</span>
GO
<span class="kw1">ALTER</span> AVAILABILITY <span class="kw1">GROUP</span> <span class="br0">&#91;</span>SQLAG<span class="br0">&#93;</span>
<span class="kw1">ADD</span> LISTENER N<span class="st0">'SQLAGLISTENER'</span> <span class="br0">&#40;</span>
<span class="kw1">WITH</span> IP
<span class="br0">&#40;</span><span class="br0">&#40;</span>N<span class="st0">'10.2.4.72'</span>, N<span class="st0">'255.255.255.0'</span><span class="br0">&#41;</span>
<span class="br0">&#41;</span>
, P<span class="sy0">OR</span>T<span class="sy0">=</span><span class="nu0">1433</span><span class="br0">&#41;</span>;
GO</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">USE [master]
GO
ALTER AVAILABILITY GROUP [SQLAG]
ADD LISTENER N'SQLAGLISTENER' (
WITH IP
((N'10.2.4.72', N'255.255.255.0')
)
, PORT=1433);
GO</pre></div></div>

<p>Note: Assign the IP as needed in this step.  This is the IP that will translate for any connection being made to the Availability Group containing all databases.</p>
<h2>Configure Read Routing for Read-Intent Connections</h2>
<p>Multiple replicas can be configured for read-intent only connections.  This configuration is used to route connections that specify in the connection string the “read-intent” setting.  For example: the following connection string is set for read-intent and will be routed to a read-only secondary replica.</p>
<div>
<p>Server=SQLAGLISTENER;Database=_Cache;IntegratedSecurity=SSPI;<b>ApplicationIntent=ReadOnly</b></p>
</div>
<p>&nbsp;</p>
<p>To configure a replica for read-intent only connections, a primary and secondary role must be set.  Each replica in an Availability Group has both a primary and secondary role.  By default, the primary role for all replicas is All Connections.  This allows for every secondary or primary to be utilized in the event of a disaster as a primary connection with full read/write capabilities.  For read-only with read-intent configurations, there are two or more replicas that are configured for the role of primary with all connections and then a secondary role as a read routing for read-intent purposes.</p>
<p><a href="/wp-content/uploads/2014/06/ag31.png"><img class="size-full wp-image-2718 aligncenter" src="/wp-content/uploads/2014/06/ag31.png" alt="ag31" width="440" height="671" srcset="/wp-content/uploads/2014/06/ag31.png 440w, /wp-content/uploads/2014/06/ag31-196x300.png 196w" sizes="(max-width: 440px) 100vw, 440px" /></a></p>
<p>In the following configuration, the diagram illustrates the 2-node read routing configuration.</p>
<p>Note: Each replica requires the secondary role to be configured in a read-intent configuration.  In this configuration, the primary replica has a secondary role of read-intent.  In the case of the automatic failover to the secondary node, read-intent connections would be routed back to the secondary node.</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td><td class="de1"><pre class="de1"><span class="kw1">ALTER</span> AVAILABILITY <span class="kw1">GROUP</span> SQLAG
<span class="kw1">MODIFY</span> REPLICA <span class="kw1">ON</span>
N<span class="st0">'NODE1\SHAREPOINT2013'</span> <span class="kw1">WITH</span>
<span class="br0">&#40;</span>SECONDARY_ROLE <span class="br0">&#40;</span><span class="sy0">ALL</span>OW_CONNECTIONS <span class="sy0">=</span> READ_ONLY<span class="br0">&#41;</span><span class="br0">&#41;</span>;
<span class="kw1">ALTER</span> AVAILABILITY <span class="kw1">GROUP</span> SQLAG
<span class="kw1">MODIFY</span> REPLICA <span class="kw1">ON</span>
N<span class="st0">'NODE1\SHAREPOINT2013'</span> <span class="kw1">WITH</span>
<span class="br0">&#40;</span>SECONDARY_ROLE <span class="br0">&#40;</span>READ_ONLY_ROUT<span class="sy0">IN</span>G_URL <span class="sy0">=</span> N<span class="st0">'TCP://NODE1.ONPNT.TedsDomain.com:1433'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;<span class="sy0">&lt;/</span>code<span class="sy0">&gt;</span>
&nbsp;
<span class="kw1">ALTER</span> AVAILABILITY <span class="kw1">GROUP</span> SQLAG
<span class="kw1">MODIFY</span> REPLICA <span class="kw1">ON</span>
N<span class="st0">'NODE3\SHAREPOINT2013'</span> <span class="kw1">WITH</span>
<span class="br0">&#40;</span>SECONDARY_ROLE <span class="br0">&#40;</span><span class="sy0">ALL</span>OW_CONNECTIONS <span class="sy0">=</span> READ_ONLY<span class="br0">&#41;</span><span class="br0">&#41;</span>;
<span class="kw1">ALTER</span> AVAILABILITY <span class="kw1">GROUP</span> SQLAG
<span class="kw1">MODIFY</span> REPLICA <span class="kw1">ON</span>
N<span class="st0">'NODE3\SHAREPOINT2013'</span> <span class="kw1">WITH</span>
<span class="br0">&#40;</span>SECONDARY_ROLE <span class="br0">&#40;</span>READ_ONLY_ROUT<span class="sy0">IN</span>G_URL <span class="sy0">=</span> N<span class="st0">'TCP://NODE3.ONPNT.TedsDomain.com:1433'</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
&nbsp;
<span class="kw1">ALTER</span> AVAILABILITY <span class="kw1">GROUP</span> SQLAG
<span class="kw1">MODIFY</span> REPLICA <span class="kw1">ON</span>
N<span class="st0">'NODE1\SHAREPOINT2013'</span> <span class="kw1">WITH</span>
<span class="br0">&#40;</span>PRIMARY_ROLE <span class="br0">&#40;</span>READ_ONLY_ROUT<span class="sy0">IN</span>G_LIST<span class="sy0">=</span><span class="br0">&#40;</span><span class="st0">'NODE3\SHAREPOINT2013'</span>,<span class="st0">'NODE1\SHAREPOINT2013'</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
&nbsp;
<span class="kw1">ALTER</span> AVAILABILITY <span class="kw1">GROUP</span> SQLAG
<span class="kw1">MODIFY</span> REPLICA <span class="kw1">ON</span>
N<span class="st0">'NODE3\SHAREPOINT2013'</span> <span class="kw1">WITH</span>
<span class="br0">&#40;</span>PRIMARY_ROLE <span class="br0">&#40;</span>READ_ONLY_ROUT<span class="sy0">IN</span>G_LIST<span class="sy0">=</span><span class="br0">&#40;</span><span class="st0">'NODE1\SHAREPOINT2013'</span>,<span class="st0">'NODE3\SHAREPOINT2013'</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
GO</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">ALTER AVAILABILITY GROUP SQLAG
MODIFY REPLICA ON
N'NODE1\SHAREPOINT2013' WITH
(SECONDARY_ROLE (ALLOW_CONNECTIONS = READ_ONLY));
ALTER AVAILABILITY GROUP SQLAG
MODIFY REPLICA ON
N'NODE1\SHAREPOINT2013' WITH
(SECONDARY_ROLE (READ_ONLY_ROUTING_URL = N'TCP://NODE1.ONPNT.TedsDomain.com:1433'));&lt;/code&gt;

ALTER AVAILABILITY GROUP SQLAG
MODIFY REPLICA ON
N'NODE3\SHAREPOINT2013' WITH
(SECONDARY_ROLE (ALLOW_CONNECTIONS = READ_ONLY));
ALTER AVAILABILITY GROUP SQLAG
MODIFY REPLICA ON
N'NODE3\SHAREPOINT2013' WITH
(SECONDARY_ROLE (READ_ONLY_ROUTING_URL = N'TCP://NODE3.ONPNT.TedsDomain.com:1433'));

ALTER AVAILABILITY GROUP SQLAG
MODIFY REPLICA ON
N'NODE1\SHAREPOINT2013' WITH
(PRIMARY_ROLE (READ_ONLY_ROUTING_LIST=('NODE3\SHAREPOINT2013','NODE1\SHAREPOINT2013')));

ALTER AVAILABILITY GROUP SQLAG
MODIFY REPLICA ON
N'NODE3\SHAREPOINT2013' WITH
(PRIMARY_ROLE (READ_ONLY_ROUTING_LIST=('NODE1\SHAREPOINT2013','NODE3\SHAREPOINT2013')));
GO</pre></div></div>

<p>&nbsp;</p>
<h2>Connecting to SQL Server and the Availability Group</h2>
<p>Every Availability Group utilizes the listener for connectivity between an external source and the actual database(s) enrolled in the Availability Group.  It is possible, for administrative purposes only, to connect directly to each replica’s SQL Server instance directly.  These direct connections should be performed for instance level configurations such as MAXDOP, memory and so on.  Configuring or making changes to the Availability Group should also be performed on the primary replica by directly connecting to it.  For example: the primary in the configuration is NODE1 and this would be the instance to connect to for configuration of the Availability Group.</p>
<p>For database level changes such as security, connect to the database through the listener name.</p>
<p>For application or service connections, no other changes are needed beyond the normal connection strings utilized for connecting directly to either a named instanced, default instance or clustered instances of SQL Server.  However, if a read-intent connection is desired, the ApplicationIntent=ReadOnly, attribute is required in the connection string for read routing to take place. <b></b></p>
<p>&nbsp;</p>
<h2>Modifying the Availability Group</h2>
<h4>Add a database to an existing Availability Group</h4>
<p>To add or remove a database from a pre-existing Availability Group, connect to the SQL Server instance acting as the primary replica via SSMS.</p>
<p>Expand the AlwaysOn High Availability node and expand the Availability Group that you wish change.</p>
<p><a href="/wp-content/uploads/2014/06/ag32.png"><img class="alignnone size-full wp-image-2719" src="/wp-content/uploads/2014/06/ag32.png" alt="ag32" width="361" height="307" srcset="/wp-content/uploads/2014/06/ag32.png 361w, /wp-content/uploads/2014/06/ag32-300x255.png 300w" sizes="(max-width: 361px) 100vw, 361px" /></a></p>
<p>Right click Availability Databases and click Add Database.</p>
<p><a href="/wp-content/uploads/2014/06/ag33.png"><img class="alignnone size-full wp-image-2720" src="/wp-content/uploads/2014/06/ag33.png" alt="ag33" width="370" height="360" srcset="/wp-content/uploads/2014/06/ag33.png 370w, /wp-content/uploads/2014/06/ag33-300x291.png 300w" sizes="(max-width: 370px) 100vw, 370px" /></a></p>
<p>The Add Database to Availability Group wizard will be shown.  This wizard is the same as the initial Availability Group setup.  Each database must follow the same requirements of being in full recovery model and having a full backup taken.</p>
<p>Follow the screens and fill in each required piece of information that is specific to the database(s) you wish to add to the Availability Group</p>
<p><a href="/wp-content/uploads/2014/06/ag34.png"><img class="alignnone size-full wp-image-2721" src="/wp-content/uploads/2014/06/ag34.png" alt="ag34" width="624" height="275" srcset="/wp-content/uploads/2014/06/ag34.png 624w, /wp-content/uploads/2014/06/ag34-300x132.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a></p>
<p>When the wizard has completed, the database will have a full backup taken and restored to all replicas, and a tail-end log backup will be taken, before it is added to the Availability Group.  During this time the other databases and the Availability Group will be available to all connections.  There are no requirements beyond these steps to add a database to the Availability Group.</p>
<p>To remove a database, right click the database in the listing and select Remove Database from Availability Group.  Note: this will remove the database from the Availability Group only.  This will not delete the physical database located on all replicas.  The primary database will persist allowing direct connections and all replica databases will be in a NORECOVERY state (restoring…).</p>
<p><a href="/wp-content/uploads/2014/06/ag35.png"><img class="alignnone size-full wp-image-2676" src="/wp-content/uploads/2014/06/ag35.png" alt="ag35" width="506" height="311" srcset="/wp-content/uploads/2014/06/ag35.png 506w, /wp-content/uploads/2014/06/ag35-300x184.png 300w" sizes="(max-width: 506px) 100vw, 506px" /></a></p>
<h3>Modifying Availability Group Settings</h3>
<p>All modifications to the Availability Group should be performed on the primary replica.   To modify settings for a specific Availability Group, connect to the primary replica via SSMS 2012, expand the AlwaysOn High Availability list and expand the Availability Groups node.</p>
<p>Right click the Availability Group requiring modifications and click Properties.</p>
<p><a href="/wp-content/uploads/2014/06/ag36.png"><img class="alignnone size-full wp-image-2677" src="/wp-content/uploads/2014/06/ag36.png" alt="ag36" width="370" height="422" srcset="/wp-content/uploads/2014/06/ag36.png 370w, /wp-content/uploads/2014/06/ag36-263x300.png 263w" sizes="(max-width: 370px) 100vw, 370px" /></a></p>
<p>All changes should be performed in the Availability Group properties window.</p>
<p><a href="/wp-content/uploads/2014/06/ag37.png"><img class="alignnone size-full wp-image-2678" src="/wp-content/uploads/2014/06/ag37.png" alt="ag37" width="624" height="320" srcset="/wp-content/uploads/2014/06/ag37.png 624w, /wp-content/uploads/2014/06/ag37-300x153.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a></p>
<p>Changes that can be performed</p>
<p style="padding-left: 60px">1)      Add or remove replicas</p>
<p style="padding-left: 60px">2)      Enable read-only or read-intent replicas</p>
<p style="padding-left: 60px">3)      Switch between synchronous and asynchronous committing between replicas</p>
<p style="padding-left: 60px">4)      Modify endpoint utilization (Note: endpoints cannot be altered in this window. To modify an endpoint, go to server objectsàendpoints in SSMS.)</p>
<p style="padding-left: 60px">5)      Backup Preferences</p>
<p style="padding-left: 60px">6)      Primary and Secondary roles</p>
<p style="padding-left: 60px">7)      Permissions</p>
<h2>Failover Testing and Monitoring</h2>
<h3>Initiate a Failover</h3>
<p>To simulate and test a failover scenario, connect to the primary or listener via SSMS 2012.  Expand the AlawaysOn High Availability list and Availability Groups’ node.  Right click the Availability Group to be tested and select Failover.</p>
<p><a href="/wp-content/uploads/2014/06/ag38.png"><img class="alignnone size-full wp-image-2679" src="/wp-content/uploads/2014/06/ag38.png" alt="ag38" width="423" height="466" srcset="/wp-content/uploads/2014/06/ag38.png 423w, /wp-content/uploads/2014/06/ag38-272x300.png 272w" sizes="(max-width: 423px) 100vw, 423px" /></a></p>
<p>The failover wizard will be displayed.</p>
<p>Select the replica to failover to and complete the wizard.</p>
<p><a href="/wp-content/uploads/2014/06/ag39.png"><img class="alignnone size-full wp-image-2680" src="/wp-content/uploads/2014/06/ag39.png" alt="ag39" width="624" height="266" srcset="/wp-content/uploads/2014/06/ag39.png 624w, /wp-content/uploads/2014/06/ag39-300x127.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a></p>
<h3>Monitoring Availability Groups</h3>
<p>When Availability Groups are enabled on SQL Server 2012, Extended Events are implemented for monitoring the state and health of the mirroring sessions and other session states.  To review the information that is being collected, connect to the listener name through SSMS and right click AlwaysOn High Availability and click Show Dashboard.</p>
<p><a href="/wp-content/uploads/2014/06/ag40.png"><img class="alignnone size-full wp-image-2681" src="/wp-content/uploads/2014/06/ag40.png" alt="ag40" width="423" height="266" srcset="/wp-content/uploads/2014/06/ag40.png 423w, /wp-content/uploads/2014/06/ag40-300x188.png 300w" sizes="(max-width: 423px) 100vw, 423px" /></a></p>
<p>A list of Availability Groups available to monitor will be shown.</p>
<p>Warning: The dashboard works on a refresh rate.  The queries pulling information may have an impact on performance if too many dashboards are active.  I do not recommend leaving any one dashboard open for a long period of time.</p>
<p><a href="/wp-content/uploads/2014/06/ag41.png"><img class="alignnone size-full wp-image-2682" src="/wp-content/uploads/2014/06/ag41.png" alt="ag41" width="624" height="139" srcset="/wp-content/uploads/2014/06/ag41.png 624w, /wp-content/uploads/2014/06/ag41-300x66.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a></p>
<p>Click the Availability Group to review the health and status.</p>
<p>The overall health of the Availability Group, databases and replicas will be shown.</p>
<p><a href="/wp-content/uploads/2014/06/ag42.png"><img class="alignnone size-full wp-image-2683" src="/wp-content/uploads/2014/06/ag42.png" alt="ag42" width="624" height="336" srcset="/wp-content/uploads/2014/06/ag42.png 624w, /wp-content/uploads/2014/06/ag42-300x161.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a></p>
<p>To review the extended health events, click the “View AlwaysOn Health Events” link.</p>
<p><a href="/wp-content/uploads/2014/06/ag43.png"><img class="alignnone size-full wp-image-2684" src="/wp-content/uploads/2014/06/ag43.png" alt="ag43" width="250" height="123" /></a></p>
<p>Review the events being captured by selecting each one to show the details.</p>
<p><a href="/wp-content/uploads/2014/06/ag44.png"><img class="alignnone size-full wp-image-2685" src="/wp-content/uploads/2014/06/ag44.png" alt="ag44" width="624" height="601" srcset="/wp-content/uploads/2014/06/ag44.png 624w, /wp-content/uploads/2014/06/ag44-300x288.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a></p>
<p>To review the quorum configuration and votes per replica in the cluster, click the View Cluster Quorum Information link.</p>
<p><a href="/wp-content/uploads/2014/06/ag45.png"><img class="alignnone size-full wp-image-2686" src="/wp-content/uploads/2014/06/ag45.png" alt="ag45" width="624" height="415" srcset="/wp-content/uploads/2014/06/ag45.png 624w, /wp-content/uploads/2014/06/ag45-300x199.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a></p>
<p>To make modifications to the quorum or votes (NodeWeight), use the Failover Cluster Manager or PowerShell.  For example: the following PowerShell statement is used to configure the votes shown above for NODE4 to have no votes in the health of the cluster.  This is a common configuration for a disaster and recovery replica node in the cluster and Availability Group setup.</p>
<p><a href="/wp-content/uploads/2014/06/ag46.png"><img class="alignnone size-full wp-image-2687" src="/wp-content/uploads/2014/06/ag46.png" alt="ag46" width="624" height="99" srcset="/wp-content/uploads/2014/06/ag46.png 624w, /wp-content/uploads/2014/06/ag46-300x47.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a></p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="powershell"><thead><tr><td colspan="2"  class="head">PowerShell</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
</pre></td><td class="de1"><pre class="de1">Import<span class="sy0">-</span>Module FailoverClusters
<span class="br0">&#40;</span>Get<span class="sy0">-</span>ClusterNode NODE4<span class="br0">&#41;</span>.NodeWeight<span class="sy0">=</span><span class="nu0">0</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">Import-Module FailoverClusters
(Get-ClusterNode NODE4).NodeWeight=0</pre></div></div>

<h2 style="margin: 2pt 0in 0pt"><span style="color: #000000;font-family: Calibri Light;font-size: large">What&#8217;s next?</span></h2>
<p style="margin: 0in 0in 8pt"><span style="color: #000000;font-family: Calibri;font-size: medium">Following this example of setting up a lab to test on with Availability groups, we’ll show how to script this entire solution with PoSh and T-SQL to ensure the setup, configuration and additional databases placed on the group, are not as long-winded of a process.</span></p>
]]></content>
			<link rel="replies" type="text/html" href="/index.php/architect/availability-groups-setup-and-configuration-from-a-to-z/#comments" thr:count="6"/>
		<link rel="replies" type="application/atom+xml" href="/index.php/architect/availability-groups-setup-and-configuration-from-a-to-z/feed/atom/" thr:count="6"/>
		<thr:total>6</thr:total>
		</entry>
		<entry>
		<author>
			<name>Ted Krueger (onpnt)</name>
					</author>
		<title type="html"><![CDATA[MSDN Ultimate Subscription giveaway +1]]></title>
		<link rel="alternate" type="text/html" href="/index.php/architect/hardwareinfrastructuredesign/msdn-ultimate-subscription-giveaway-2/" />
		<id>/index.php/2010/07/msdn-ultimate-subscription-giveaway-2/</id>
		<updated>2010-07-06T21:35:00Z</updated>
		<published>2010-07-06T21:35:00Z</published>
		<category scheme="/" term="Designing Multi-Application Solutions" /><category scheme="/" term="Designing Software" /><category scheme="/" term="Enterprise Architecture" /><category scheme="/" term="Hardware and Infrastructure Design" /><category scheme="/" term="Information and Integration Architecture" /><category scheme="/" term="Introduction to Architecture and Design" /><category scheme="/" term="giveaway" /><category scheme="/" term="msdn" /><category scheme="/" term="visual studio 2010" />		<summary type="html"><![CDATA[I was fortunate enough to receive MSDN Ultimate Subscriptions as well as SQLDenis.  I Think Denis's idea and contest to see who we can give these to is excellent.  To support Denis and his idea, I'm adding another subscription that will be handed over once we read over the responses.  That means your chances just got much better to enjoy the subscriptions and the benefits Visual Studio 2010 has to offer!]]></summary>
		<content type="html" xml:base="/index.php/architect/hardwareinfrastructuredesign/msdn-ultimate-subscription-giveaway-2/"><![CDATA[<div class="image_block"><img src="/wp-content/uploads/blogs/Architect/msdn_notforresale.gif" alt="" title="" width="250" height="145" align="left" /></div>
<p>I was fortunate enough to receive MSDN Ultimate Subscriptions as well as SQLDenis (<a href="/index.php/All/?disp=authdir&amp;author=4">blog</a> | <a href="http://twitter.com/denisgobo/">Twitter</a>).  I Think Denis&#8217;s idea and contest to see who we can give these to is excellent.  To support Denis and his idea, I&#8217;m adding another subscription that will be handed over once we read over the responses.  That means your chances just got much better to enjoy the subscriptions and the benefits Visual Studio 2010 has to offer!</p>
<p>
</p>
<p>To go over what the response should consist of again…</p>
<ol>
<li>Why do you need this, what are you going to build with this, will it help other people&#8217;s lives?</li>
<li>What specific functionality that is only part of Ultimate are you going to use?</li>
<li>You need to have a technical blog and provide the URL to that blog, if you are an active member of the technical community (stackoverflow, msdn forums etc etc) then also include those links.</li>
</ol>
<p>Leave a comment <a href="/index.php/Architect/HardwareInfrastructureDesign/msdn-ultimate-subscription-giveaway">here</a>, you will also have to join the forums, that way I will have your email to contact you and I will able to ask you questions about your answers if needed. I created a thread in the forums here: http://forum.lessthandot.com/viewtopic.php?f=121&amp;t=11456</p>
<blockquote><p><span class="MT_red">Note: Click, <a href="/index.php/Architect/HardwareInfrastructureDesign/msdn-ultimate-subscription-giveaway">here</a> to leave your comment on the original blog post and add a comment to the forums to indicate you have done so.  Do not put your comment on this blog post</span></p></blockquote>
<p><i>And as in the original blog post, the results will be judged by the LessThanDot owners/management group</i></p>
<p>
These MSDN Subscriptions are more than just something you will leave to start playing with 6 months from now.  I can honestly say, even with the price tag they come with retail on the shelf, they are worth it.  The Visual Studio and .NET Framework product team are really outdoing themselves this time by sending these out to us so we can find community members that will really take advantage of them.
</p>
<p><strong>Good luck and I look forward to reading your responses!</strong></p>
]]></content>
			<link rel="replies" type="text/html" href="/index.php/architect/hardwareinfrastructuredesign/msdn-ultimate-subscription-giveaway-2/#comments" thr:count="0"/>
		<link rel="replies" type="application/atom+xml" href="/index.php/architect/hardwareinfrastructuredesign/msdn-ultimate-subscription-giveaway-2/feed/atom/" thr:count="0"/>
		<thr:total>0</thr:total>
		</entry>
		<entry>
		<author>
			<name>SQLDenis</name>
					</author>
		<title type="html"><![CDATA[Visual Studio 2010 Concurrency Profiling And Parallel Programming]]></title>
		<link rel="alternate" type="text/html" href="/index.php/architect/enterprisearchitecture/visual-studio-2010-concurrency-profiling/" />
		<id>/index.php/2010/03/visual-studio-2010-concurrency-profiling/</id>
		<updated>2010-03-14T11:03:56Z</updated>
		<published>2010-03-14T11:03:56Z</published>
		<category scheme="/" term="Enterprise Architecture" /><category scheme="/" term="c#" /><category scheme="/" term="concurrency" /><category scheme="/" term="multi core" /><category scheme="/" term="parallel programming" /><category scheme="/" term="pling" /><category scheme="/" term="profiling" />		<summary type="html"><![CDATA[Visual Studio 2010 and .NET 4.0 are almost released, one of the new things that ship with this release is Parallel Programming. Since you can't buy a machine anymore with just one core it is time that we developers get intimate with concurrent programmi&#8230;]]></summary>
		<content type="html" xml:base="/index.php/architect/enterprisearchitecture/visual-studio-2010-concurrency-profiling/"><![CDATA[<p>Visual Studio 2010 and .NET 4.0 are almost released, one of the new things that ship with this release is Parallel Programming. Since you can&#8217;t buy a machine anymore with just one core it is time that we developers get intimate with concurrent programming. I decided to play around with this a little today, this is not a real technical post, I mostly show you how you can get started and what new tools are available.</p>
<h2>Getting to know Parallel Programming with the .NET Framework 4</h2>
<p>The best way to learn about new additions to a framework is to look at some code. There are 22 samples for Parallel Programming with the .NET Framework 4 available on the  msdn code library. You can download the .NET Framework 4 Parallel Programming samples here: <a href="http://code.msdn.microsoft.com/ParExtSamples">Samples for Parallel Programming with the .NET Framework 4</a></p>
<p>Here is a screen shot of the Mandelbrot Fractals sample.<br />
<img src="/wp-content/uploads/blogs/Architect//Fractal.png" alt="" title="" width="407" height="405" /></p>
<p>If you run the sample on a 2 core machine you will see that the parallel execution is about 60% faster than the sequential one.</p>
<p>After I was done with the Mandelbrot Fractals sample, I decided to open up the ComputePi sample, after all it is Pi day today (2010.3.14)</p>
<p>Here is the code for the different ways of calculating Pi which is part of the ComputePi sample.</p>
<p><strong>Estimates the value of PI using a LINQ-based implementation</strong>.</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="csharp"><thead><tr><td colspan="2"  class="head">C#</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
</pre></td><td class="de1"><pre class="de1">&nbsp;
&nbsp; &nbsp; <span class="kw1">static</span> <span class="kw4">double</span> SerialLinqPi<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">double</span> step <span class="sy0">=</span> <span class="nu0">1.0</span> <span class="sy0">/</span> <span class="br0">&#40;</span><span class="kw4">double</span><span class="br0">&#41;</span>num_steps<span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="br0">&#40;</span><span class="kw1">from</span> i <span class="kw1">in</span> Enumerable<span class="sy0">.</span><span class="me1">Range</span><span class="br0">&#40;</span><span class="nu0">0</span>, num_steps<span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let x <span class="sy0">=</span> <span class="br0">&#40;</span>i <span class="sy0">+</span> <span class="nu0">0.5</span><span class="br0">&#41;</span> <span class="sy0">*</span> step
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">select</span> <span class="nu0">4.0</span> <span class="sy0">/</span> <span class="br0">&#40;</span><span class="nu0">1.0</span> <span class="sy0">+</span> x <span class="sy0">*</span> x<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">.</span><span class="me1">Sum</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">*</span> step<span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse"> 
    static double SerialLinqPi()
    {
        double step = 1.0 / (double)num_steps;
        return (from i in Enumerable.Range(0, num_steps)
                let x = (i + 0.5) * step
                select 4.0 / (1.0 + x * x)).Sum() * step;
    }</pre></div></div>

<p><strong>Estimates the value of PI using a PLINQ-based implementation.</strong></p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="csharp"><thead><tr><td colspan="2"  class="head">C#</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
</pre></td><td class="de1"><pre class="de1">&nbsp; &nbsp; 
&nbsp; &nbsp; <span class="kw1">static</span> <span class="kw4">double</span> ParallelLinqPi<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">double</span> step <span class="sy0">=</span> <span class="nu0">1.0</span> <span class="sy0">/</span> <span class="br0">&#40;</span><span class="kw4">double</span><span class="br0">&#41;</span>num_steps<span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> <span class="br0">&#40;</span><span class="kw1">from</span> i <span class="kw1">in</span> ParallelEnumerable<span class="sy0">.</span><span class="me1">Range</span><span class="br0">&#40;</span><span class="nu0">0</span>, num_steps<span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; let x <span class="sy0">=</span> <span class="br0">&#40;</span>i <span class="sy0">+</span> <span class="nu0">0.5</span><span class="br0">&#41;</span> <span class="sy0">*</span> step
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">select</span> <span class="nu0">4.0</span> <span class="sy0">/</span> <span class="br0">&#40;</span><span class="nu0">1.0</span> <span class="sy0">+</span> x <span class="sy0">*</span> x<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">.</span><span class="me1">Sum</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">*</span> step<span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">    
    static double ParallelLinqPi()
    {
        double step = 1.0 / (double)num_steps;
        return (from i in ParallelEnumerable.Range(0, num_steps)
                let x = (i + 0.5) * step
                select 4.0 / (1.0 + x * x)).Sum() * step;
    }</pre></div></div>

<p><strong>Estimates the value of PI using a for loop.</strong></p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="csharp"><thead><tr><td colspan="2"  class="head">C#</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="de1"><pre class="de1">&nbsp; &nbsp; 
&nbsp; &nbsp; <span class="kw1">static</span> <span class="kw4">double</span> SerialPi<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">double</span> sum <span class="sy0">=</span> <span class="nu0">0.0</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">double</span> step <span class="sy0">=</span> <span class="nu0">1.0</span> <span class="sy0">/</span> <span class="br0">&#40;</span><span class="kw4">double</span><span class="br0">&#41;</span>num_steps<span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> num_steps<span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">double</span> x <span class="sy0">=</span> <span class="br0">&#40;</span>i <span class="sy0">+</span> <span class="nu0">0.5</span><span class="br0">&#41;</span> <span class="sy0">*</span> step<span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sum <span class="sy0">=</span> sum <span class="sy0">+</span> <span class="nu0">4.0</span> <span class="sy0">/</span> <span class="br0">&#40;</span><span class="nu0">1.0</span> <span class="sy0">+</span> x <span class="sy0">*</span> x<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> step <span class="sy0">*</span> sum<span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">    
    static double SerialPi()
    {
        double sum = 0.0;
        double step = 1.0 / (double)num_steps;
        for (int i = 0; i &lt; num_steps; i++)
        {
            double x = (i + 0.5) * step;
            sum = sum + 4.0 / (1.0 + x * x);
        }
        return step * sum;
    }</pre></div></div>

<p><strong>Estimates the value of PI using a Parallel.For.</strong></p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="csharp"><thead><tr><td colspan="2"  class="head">C#</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="de1"><pre class="de1">&nbsp; &nbsp; <span class="kw1">static</span> <span class="kw4">double</span> ParallelPi<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">double</span> sum <span class="sy0">=</span> <span class="nu0">0.0</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">double</span> step <span class="sy0">=</span> <span class="nu0">1.0</span> <span class="sy0">/</span> <span class="br0">&#40;</span><span class="kw4">double</span><span class="br0">&#41;</span>num_steps<span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">object</span> monitor <span class="sy0">=</span> <span class="kw3">new</span> <span class="kw4">object</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; Parallel<span class="sy0">.</span><span class="kw1">For</span><span class="br0">&#40;</span><span class="nu0">0</span>, num_steps, <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">=&gt;</span> <span class="nu0">0.0</span>, <span class="br0">&#40;</span>i, state, local<span class="br0">&#41;</span> <span class="sy0">=&gt;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">double</span> x <span class="sy0">=</span> <span class="br0">&#40;</span>i <span class="sy0">+</span> <span class="nu0">0.5</span><span class="br0">&#41;</span> <span class="sy0">*</span> step<span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> local <span class="sy0">+</span> <span class="nu0">4.0</span> <span class="sy0">/</span> <span class="br0">&#40;</span><span class="nu0">1.0</span> <span class="sy0">+</span> x <span class="sy0">*</span> x<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>, local <span class="sy0">=&gt;</span> <span class="br0">&#123;</span> <span class="kw1">lock</span> <span class="br0">&#40;</span>monitor<span class="br0">&#41;</span> sum <span class="sy0">+=</span> local<span class="sy0">;</span> <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> step <span class="sy0">*</span> sum<span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">    static double ParallelPi()
    {
        double sum = 0.0;
        double step = 1.0 / (double)num_steps;
        object monitor = new object();
        Parallel.For(0, num_steps, () =&gt; 0.0, (i, state, local) =&gt;
        {
            double x = (i + 0.5) * step;
            return local + 4.0 / (1.0 + x * x);
        }, local =&gt; { lock (monitor) sum += local; });
        return step * sum;
    }</pre></div></div>

<p><strong>Estimates the value of PI using a Parallel.ForEach and a range partitioner.</strong></p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="csharp"><thead><tr><td colspan="2"  class="head">C#</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre></td><td class="de1"><pre class="de1">&nbsp; &nbsp; 
&nbsp; &nbsp; <span class="kw1">static</span> <span class="kw4">double</span> ParallelPartitionerPi<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">double</span> sum <span class="sy0">=</span> <span class="nu0">0.0</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">double</span> step <span class="sy0">=</span> <span class="nu0">1.0</span> <span class="sy0">/</span> <span class="br0">&#40;</span><span class="kw4">double</span><span class="br0">&#41;</span>num_steps<span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">object</span> monitor <span class="sy0">=</span> <span class="kw3">new</span> <span class="kw4">object</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; Parallel<span class="sy0">.</span><span class="kw1">ForEach</span><span class="br0">&#40;</span>Partitioner<span class="sy0">.</span><span class="me1">Create</span><span class="br0">&#40;</span><span class="nu0">0</span>, num_steps<span class="br0">&#41;</span>, <span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">=&gt;</span> <span class="nu0">0.0</span>, <span class="br0">&#40;</span>range, state, local<span class="br0">&#41;</span> <span class="sy0">=&gt;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy0">=</span> range<span class="sy0">.</span><span class="me1">Item1</span><span class="sy0">;</span> i <span class="sy0">&lt;</span> range<span class="sy0">.</span><span class="me1">Item2</span><span class="sy0">;</span> i<span class="sy0">++</span><span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#123;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw4">double</span> x <span class="sy0">=</span> <span class="br0">&#40;</span>i <span class="sy0">+</span> <span class="nu0">0.5</span><span class="br0">&#41;</span> <span class="sy0">*</span> step<span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; local <span class="sy0">+=</span> <span class="nu0">4.0</span> <span class="sy0">/</span> <span class="br0">&#40;</span><span class="nu0">1.0</span> <span class="sy0">+</span> x <span class="sy0">*</span> x<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> local<span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="br0">&#125;</span>, local <span class="sy0">=&gt;</span> <span class="br0">&#123;</span> <span class="kw1">lock</span> <span class="br0">&#40;</span>monitor<span class="br0">&#41;</span> sum <span class="sy0">+=</span> local<span class="sy0">;</span> <span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">return</span> step <span class="sy0">*</span> sum<span class="sy0">;</span>
&nbsp; &nbsp; <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">    
    static double ParallelPartitionerPi()
    {
        double sum = 0.0;
        double step = 1.0 / (double)num_steps;
        object monitor = new object();
        Parallel.ForEach(Partitioner.Create(0, num_steps), () =&gt; 0.0, (range, state, local) =&gt;
        {
            for (int i = range.Item1; i &lt; range.Item2; i++)
            {
                double x = (i + 0.5) * step;
                local += 4.0 / (1.0 + x * x);
            }
            return local;
        }, local =&gt; { lock (monitor) sum += local; });
        return step * sum;
    }
}</pre></div></div>

<p>Here are the results when you run the sample. The first column is the time in seconds and the second column has the method name.</p>
<pre>03.3369869: SerialLinqPi
02.1516130: ParallelLinqPi
01.0522855: SerialPi
00.6457441: ParallelPi
00.7098180: ParallelPartitionerPi</pre>
<p>Again these were from my dual core laptop, you might get a bigger difference if you run it on a quad core box.</p>
<h2>Profiling Performance</h2>
<p>Visual Studio 2010 ships with a couple of tools that will make your life easier if you do parallel programming. Launch the Performance Wizard from Tools&#8211;>Launch Performance Wizard<br />
<br /><img src="/wp-content/uploads/blogs/Architect//LaunchWizard.PNG" alt="" title="" width="479" height="217" /></p>
<p>After that a wizard will launch and you will see a window like the one in the sreenshot below<br />
<br /><img src="/wp-content/uploads/blogs/Architect//Profile Wizard.png" alt="" title="" width="647" height="556" /></p>
<p>Pick concurrency and visualize the behaviour of a multithreaded application.</p>
<p>After you are done, start your app and when you close the app, reports will be generated.<br />
If you don&#8217;t see the reports then do the following; click on View&#8211;>Other Windows&#8211;>Performance Explorer. </p>
<p>FYI, You need to run as admin to generate these report and if you are on a 64bit machine then you need to set the platform target to x86 in order to be able to generate these reports. I was greeted with the following message: <em>To enable complete call stacks on x64 platforms, executive paging must be disabled. A reboot is then required. To make this change, click &#8220;Yes&#8221;, save your work, and then reboot. For more information, see http://go.microsoft.com/fwlink/?LinkId=157265 </em>. After I rebooted everything worked.</p>
<p>There are 3 types of reports that you will see. Here is what the CPU Utilization report looks like.<br />
<img src="/wp-content/uploads/blogs/Architect//CPUUtil.PNG" alt="" title="" width="459" height="293" /></p>
<p>There is a report for threads<br />
<img src="/wp-content/uploads/blogs/Architect//Threads.PNG" alt="" title="" width="741" height="596" /></p>
<p>Finally there is also a report for cores<br />
<img src="/wp-content/uploads/blogs/Architect//Cores.PNG" alt="" title="" width="662" height="522" /></p>
<p>Instead of having 20 images embedded I decided that a video would be more useful. This video is about 1 minute and 52 seconds and it shows you what the tool looks like when I am clicking around in it.</p>
<p>Here is the HD Video version, I would suggest you click on the video and watch in on YouTube in 720P full screen format<br />
[video:youtube:Bofk3ecJOtk]</p>
<p></p>
<h2>Learning more about Concurrency Profiling and Parallel Programming</h2>
<p>To finalize this post, here are some links to technical resources that will help you with  Concurrency Profiling and Parallel Programming.</p>
<p>The <a href="http://social.msdn.microsoft.com/forums/en-us/vstsprofiler">Visual Studio Performance Tools (Profiler) msdn forum</a></p>
<p>The <a href="http://blogs.msdn.com/visualizeparallel/">Parallel Computing, Profiling and Debugging blog</a></p>
<p>Below is a 10 part blog post series by Reed Copsey, Jr about parallelism in .net</p>
<p><a title=Introduction href="http://reedcopsey.com/2010/01/19/parallelism-in-net-introduction/">Introduction</a></p>
<p><a title="Part 1, Decomposition" href="http://reedcopsey.com/2010/01/19/parallelism-in-net-part-1-decomposition/">Part 1, Decomposition</a><u><font color=#0066cc>&nbsp;</font></u></p>
<p><a href="http://reedcopsey.com/2010/01/20/parallelism-in-net-part-2-simple-imperative-data-parallelism/">Part 2, Simple Imperative Data Parallelism</a></p>
<p><a href="http://reedcopsey.com/2010/01/22/parallelism-in-net-part-3-imperative-data-parallelism-early-termination/">Part 3, Imperative Data Parallelism: Early Termination</a></p>
<p><a href="http://reedcopsey.com/2010/01/22/parallelism-in-net-part-4-imperative-data-parallelism-aggregation/">Part 4, Imperative Data Parallelism: Aggregation</a></p>
<p><a href="http://reedcopsey.com/2010/01/26/parallelism-in-net-part-5-partitioning-of-work/">Part 5, Partitioning of Work</a></p>
<p><a href="http://reedcopsey.com/2010/01/26/parallelism-in-net-part-6-declarative-data-parallelism/">Part 6, Declarative Data Parallelism</a></p>
<p><a href="http://reedcopsey.com/2010/01/28/parallelism-in-net-part-7-some-differences-between-plinq-and-linq-to-objects/">Part 7, Some Differences between PLINQ and LINQ to Objects</a></p>
<p><a href="http://reedcopsey.com/2010/02/03/parallelism-in-net-part-8-plinqs-forall-method/">Part 8, PLINQ’s ForAll Method</a></p>
<p><a href="http://reedcopsey.com/2010/02/11/parallelism-in-net-part-9-configuration-in-plinq-and-tpl/">Part 9, Configuration in PLINQ and TPL</a></p>
<p><a href="http://reedcopsey.com/2010/02/17/parallelism-in-net-part-10-cancellation-in-plinq-and-the-parallel-class/">Part 10, Cancellation in PLINQ and the Parallel class</a></p>
<p>So hopefully this post will spark your interest and you will take a look at these interesting technologies and tools.</p>
<p>Happy &#960; day ,and today is also Albert Einstein&#8217;s birthday.</p>
<p><img src="/wp-content/uploads/blogs/Architect//Pi_Pie.jpg" alt="" title="" width="577" height="576" /></p>
]]></content>
			<link rel="replies" type="text/html" href="/index.php/architect/enterprisearchitecture/visual-studio-2010-concurrency-profiling/#comments" thr:count="3"/>
		<link rel="replies" type="application/atom+xml" href="/index.php/architect/enterprisearchitecture/visual-studio-2010-concurrency-profiling/feed/atom/" thr:count="3"/>
		<thr:total>3</thr:total>
		</entry>
		<entry>
		<author>
			<name>damber</name>
					</author>
		<title type="html"><![CDATA[Simple advice for choosing an ESB]]></title>
		<link rel="alternate" type="text/html" href="/index.php/architect/enterprisearchitecture/simple-advice-for-choosing-an-esb/" />
		<id>/index.php/2009/04/simple-advice-for-choosing-an-esb/</id>
		<updated>2009-04-06T18:54:28Z</updated>
		<published>2009-04-06T18:54:28Z</published>
		<category scheme="/" term="Enterprise Architecture" /><category scheme="/" term="Information and Integration Architecture" /><category scheme="/" term="esb" /><category scheme="/" term="ibm" /><category scheme="/" term="integration" /><category scheme="/" term="open source" /><category scheme="/" term="oracle fusion" /><category scheme="/" term="sap xi" /><category scheme="/" term="webmethods" />		<summary type="html"><![CDATA[I thought I would share a recent question that was raised on LinkedIn, which asked:


Starting the Holy Wars on ESB? Who brings the best package deal to the table i.e IBM, MSFT...... Look at this way " A mid sized cash crunched has to implement ESB w&#8230;]]></summary>
		<content type="html" xml:base="/index.php/architect/enterprisearchitecture/simple-advice-for-choosing-an-esb/"><![CDATA[<p>I thought I would share a recent question that was raised on LinkedIn, which asked:</p>
<blockquote><p>
<em><strong>Starting the Holy Wars on ESB? Who brings the best package deal to the table i.e IBM, MSFT&#8230;&#8230; Look at this way &#8221; A mid sized cash crunched has to implement ESB what are the options it has&#8221; or rather who should it be married to. Any thoughts</strong></em></p>
<p>Tons of ESB from various players are in the market IBM, MSFT, Oracle , SAP but remember its a cash crunched company which requires the ESB. I can provide more details on the technical side. The idea is to throw open the debate to get various perspective.
</p></blockquote>
<p>Well, let&#8217;s forget for the moment that the question was raised by a Microsoft employee, and focus more on the general principle of the question&#8230; What should companies look for in an <a href="http://en.wikipedia.org/wiki/Enterprise_service_bus">ESB</a>?  In my brief answer, I aim to get across the point that asking which ESB vendor you should be &#8220;Married to&#8221; is very much the wrong question to ask, and to consider that there is more to solving this problem intelligently (and thus cost effectively) than simply &#8216;buying technology&#8217;. No single technology will solve your problem out of the box, so be careful not to expect or ask it to do so.  </p>
<p>Here&#8217;s the Answer in full:</p>
<blockquote><p>
As always&#8230; understand the problem first&#8230;</p>
<p>Step 1: Understand the problem you are trying to solve (e.g. Imperatives, Current Pain Points, As-Is Landscape, Use Cases, etc)<br />
Step 2: Design a Target Architecture (NOT based on a particular technology) that solves this problem, including reference models, design patterns, architecture paradigms, principles, etc<br />
Step 3: Create a high level Roadmap to get from your current environment to your target architecture<br />
Step 4: Now&#8230; Search for a technology that will support this need.</p>
<p>I would highly recommend not starting by talking to vendors about how they will solve your problem. Strangely enough, their products always have the answer <img src="https://s.w.org/images/core/emoji/2/72x72/1f642.png" alt="🙂" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p>ok.. let&#8217;s look at what integration is all about:</p>
<p>Openness<br />
Interoperability<br />
Standardisation<br />
Flexibility</p>
<p>&#8211; This is where you need to really think about why you have an integration problem in the first place&#8230; closed, insular approaches to application design. This indicates that we want an OPEN and INTEROPERABLE environment which is based on STANDARDS to give you FLEXIBILITY.</p>
<p>The problem with a lot of products on the market if not understood or used properly is that you can very soon become (in your words) &#8220;Married&#8221; to that vendor&#8217;s solution. This destroys the core principles of what integration is all about &#8211; you are simply adding the same problem on top of the original problems.</p>
<p>In many ways the open source integration solutions (incl. ESBs &#8211; e.g. SOPERA (commercial and more advanced version of Eclipse Swordfish), Apache FUSE, JBoss,etc) lend themselves to these principles very well, however this does not guarantee they will fit your need, or perform to the level of some COTS/Closed Source options.</p>
<p>Additionally, you need to consider that properly integrating your environment is not just about purchasing / implementing an ESB. This is just one component of the overall solution, which should consider the need for MDM, Data Architecture and Canonicalisation, Portals, Business Rules, Registry/Repository, Modelling Tools, Business Process Management and Orchestration, amongst others. The commercial vendors will be more than willing to sell you complete stacks for these things, but be prepared to do things their way, and have a certain amount of lock-in to that vendor.</p>
<p>As you work there, I&#8217;m sure you realise that Microsoft is very Microsoft focused, so is only really sensible for Microsoft only environments. However, your recent deal with SOPERA now gives support for both native .NET and Java environments. Maybe there is hope&#8230;</p>
<p>Oracle and SAP have some good concepts, but unfortunately they are again very insular &#8211; if you only have SAP then XI will be wonderful for you, same with Oracle Fusion and their AIA offering &#8211; extending outside the environment is possible, but often ugly.</p>
<p>IBM is (imho) conceptually better at being application/solution agnostic, as it doesn&#8217;t sell applications to integrate, therefore focuses on supporting a diverse range of approaches. However, they have a history of a somewhat convoluted and overlapping solution set.</p>
<p>Webmethods provides you with a well integrated set of tools and features, again application agnostic, though it&#8217;s sweet spot is Process Management, and isn&#8217;t the most open/standards compliant.</p>
<p>If a company is really strapped for cash&#8230; then an open source option may be best. But you may have to work harder to get a complete solution up and running.</p>
<p>You can get all of the components to integrate your environment for free &#8211; but you have to implement them, they may not be that pretty/easy to use, or performant, and if you choose not to pay for ongoing support then you are putting your company at risk.</p>
<p>You also have to ask yourself if you are really doing pure SOA, or whether you are needing to do application integration&#8230;</p>
<p>above all, the right architecture will win over a technology choice
</p></blockquote>
<p>So, the answer was as you would expect for a general Q&amp;A site &#8211; relatively simple/brief (there is a post size limit!) and a little on the generic side to cater for the limited information available.  </p>
<p>I touch briefly on a couple of points I want to highlight here.  </p>
<p><strong>The first point</strong> being the potential benefit but also risk of using Open Source integration technologies.  Put simply, open source&#8217;s core principles are very much aligned with those of integration, and as such makes an excellent candidate for the technology that glues together all of our other bits and pieces of technology.  But, as it is in it&#8217;s relative infancy, there are some potential risks.  These are rapidly being addressed technically, and given a few more years of well rounded practical implementations, many of these issues will be addressed.  Although I wont go into detail in this post, I suggest having a look at some of the open source options available, including:</p>
<p><a href="http://www.sopera.com/">SOPERA</a> &#8211; very open modular design, with a strong plugin architecture, with integrations to many other software components, including Microsoft .NET &#8211; this is the product behind Eclipse Swordfish.<br />
<a href="http://www.jboss.com/products/platforms/soa/">JBoss</a> &#8211; a well known middleware/application server vendor with parent company Redhat.  A well rounded offering, though slightly immature ESB.</p>
<p>There are others (e.g. Apache FUSE), though I&#8217;ll save the details for another day &#8211; check out the above and see how it may suit your needs.</p>
<p><strong>The second point</strong> is the question of whether you are really doing pure SOA or not, or whether you&#8217;re either doing application integration (not too dissimilar in objective, but different in concept) or just &#8216;web services&#8217;.  Have a think about that&#8230; what exactly is SOA to you?  And do you think everyone else thinks the same?  Feel free to post your thoughts below&#8230;</p>
<p><em>The full Q&amp;A from linkedin here:</em><br />
http://www.linkedin.com/answers/technology/enterprise-software/TCH_ENT/441250-2894850?browseIdx=1&#038;sik=1239049806947</p>
]]></content>
			<link rel="replies" type="text/html" href="/index.php/architect/enterprisearchitecture/simple-advice-for-choosing-an-esb/#comments" thr:count="4"/>
		<link rel="replies" type="application/atom+xml" href="/index.php/architect/enterprisearchitecture/simple-advice-for-choosing-an-esb/feed/atom/" thr:count="4"/>
		<thr:total>4</thr:total>
		</entry>
		<entry>
		<author>
			<name>damber</name>
					</author>
		<title type="html"><![CDATA[Danger in Design: Why bother with Architecture ?]]></title>
		<link rel="alternate" type="text/html" href="/index.php/architect/hardwareinfrastructuredesign/why-bother-with-architecture/" />
		<id>/index.php/2008/06/why-bother-with-architecture/</id>
		<updated>2008-06-30T10:36:11Z</updated>
		<published>2008-06-30T10:36:11Z</published>
		<category scheme="/" term="Designing Multi-Application Solutions" /><category scheme="/" term="Designing Software" /><category scheme="/" term="Enterprise Architecture" /><category scheme="/" term="Hardware and Infrastructure Design" /><category scheme="/" term="Information and Integration Architecture" /><category scheme="/" term="Introduction to Architecture and Design" /><category scheme="/" term="architecture" /><category scheme="/" term="methodologies" /><category scheme="/" term="rationale" />		<summary type="html"><![CDATA[Creativity is a wonderful thing. It&#8217;s also something different for each of us, which is why sometimes our perspectives on the world can produce conflicting ideas on what is the right way and the wrong way to do things. This is a very common facet of the IT world, in particular making computer software, solutions [&#8230;]]]></summary>
		<content type="html" xml:base="/index.php/architect/hardwareinfrastructuredesign/why-bother-with-architecture/"><![CDATA[<p>Creativity is a wonderful thing.  It&#8217;s also something different for each of us, which is why sometimes our perspectives on the world can produce conflicting ideas on what is the right way and the wrong way to do things.  This is a very common facet of the IT world, in particular making computer software, solutions and services.  </p>
<h1>We don&#8217;t need architects!  &#8230;Do we ?</h1>
<p>It&#8217;s important for us to remember that we develop software to &#8220;do something&#8221; that we want it to do. In which case we need to continually review the success of that software or solution by evaluating it&#8217;s ability to meet our needs.  But who gets to say what those needs are, and how well they are met?  More importantly, what makes IT solutions good or bad ?  Is it how big they are ? Or how easy to use they are ?  Or maybe how efficiently they operate ? Or what about how well measured and managed they are ?  Or even how easy it is to change the way they work ?  What about all of the above, and much more&#8230;?</p>
<p>Getting to a point where a) you understand what success looks like, and b) you have a solution that delivers that success, can be achieved by using an Architect to facilitate and coordinate the construction of a design and resulting solution.  But that&#8217;s not always what happens. Apart from the many varying definitions of an architect&#8217;s role (and the different types of architects.. e.g. Enterprise Architect, Solutions Architect, Application Architect, Technical Architect,etc), there&#8217;s also often a perception from developers that architects are generally away with the fairies, dreaming up blue sky designs that are just not grounded in reality or worthwhile bothering with.  Additionally, a lot of businesses (too many unfortunately), just don&#8217;t understand the value of using an architect&#8230; Why pay someone to design the solution, when you&#8217;ve got business systems analysts and developers that can work it out between themselves ?</p>
<p> </p>
<h1>Winchester Mystery House, San Jose, CA</h1>
<p>Why indeed&#8230;  well, I thought it may be useful to post a little analogy with the &#8216;real world&#8217; &#8211; where architects and builders have been working together for many years to produce wonderful (and not so wonderful) buildings.</p>
<p>Firstly, let me introduce the Winchester Mystery House, of the Winchester Guns family fame:</p>
<div class="image_block"><img src="/wp-content/uploads/blogs/Architect/images/winchesterhouse.png" alt="" title="" width="440" height="286" /></div>
<p></p>
<h2>Functionally Rich</h2>
<ul>
<li>160 Rooms</li>
<li>47 Fireplaces</li>
<li>17 Chimneys</li>
<li>6 kitchens</li>
<li>10,000 windows</li>
</ul>
<p></p>
<h2>State of the Art Technology (at the time)</h2>
<ul>
<li>Wall Insulation</li>
<li>Push button gas lights</li>
<li>No-clog sink patent</li>
<li>Intercoms</li>
<li>Modern Heating &amp; Sewage</li>
</ul>
<p></p>
<h2>Total Cost</h2>
<p style="font-size: 1em;">$5.5m (~<span style="font-weight:800;">$300m</span> today) over <span style="font-weight: 800;">38 years</span> (1884 &#8211; 1922)</p>
<p></p>
<h2>But&#8230; <span style="color:#ff0000;">No Interoperability</span></h2>
<ul>
<li>65 doors to blank walls</li>
<li>13 abandoned staircases</li>
<li>24 skylights in floors</li>
<li>Rooms &#8220;build-around&#8221; other rooms</li>
<li>Enough keys to fill 2 large buckets</li>
</ul>
<p></p>
<p>Ouch.</p>
<p></p>
<h2>Due to the division of labour</h2>
<ul>
<li>Builders: 147</li>
<li>Architects: <span style="font-weight:800;text-decoration:underline;">0</span></li>
</ul>
<p></p>
<h2>Sound Familiar ?</h2>
<p>We&#8217;ve all worked on a project with something like this.  Usually because the system wasn&#8217;t really &#8216;designed&#8217; it just &#8216;happened&#8217;.  Maybe if we spent a little more time designing, and a little less building things would work a little better.  I bet they had some very talented builders working on this too &#8211; but their perspective wasn&#8217;t to make a solid overall design, it was to simply get on and do what they were tasked with.. sound familiar ?  How often do users come to a technical forum and ask for a solution to their problem to be faced with answers like &#8220;you need to normalise your database&#8221; etc, to which they simply retort &#8220;that&#8217;s not part of this project&#8221; ?  Too many, but sadly understandably so.</p>
<p>
A favourite Project Manager quote is &#8220;Failing to Plan is Planning to Fail&#8221;.  And they are generally right &#8211; not having a consistent, well thought out and planned design can lead to very complicated and difficult to manage, change or even use software.  Most architects will have come across solutions or applications that weren&#8217;t &#8216;designed&#8217; and just evolved, and will know just how much of a problem those applications really are.  This is <a href="http://www.sciam.com/article.cfm?id=softwares-dirty-little-secret&amp;sc=rss">Software&#8217;s Dirty Little Secret</a> &#8211; many systems have just &#8220;happened&#8221; without real thought to the design of the software.  And for that matter, haven&#8217;t thought about the application as part of a composite solution either &#8211; this is actually quite rare, even today with all the SOA hype of the last few years.
</p>
<h3>The Architect&#8217;s hand</h3>
<p>
Sometimes it might seem strange to developers that an architect wants to make a project use standards compliant technologies, standardised, re-usable or existing components, such as a Business Rules Engine, Reporting &amp; BI, Service Bus, Messaging Gateway, Portlets, etc &#8211; but this is what architecture is all about &#8211; not thinking about the one, single application or issue, but thinking about it&#8217;s co-existence in a much bigger world &#8211; not just the here and now functional requirements, but tomorrows new direction and demands.  Simplifying and standardising, Rationalising and Re-Using, Conceptualising and Componentising&#8230; the best architectures are easily understood, simple solutions that achieve a kind of elegance in concept and practicality in implementation.
</p>
<p>
There are several methodologies to use for developing an architecture &#8211; personally I use TOGAF which is more for generalist Enterprise &amp; Solutions Architecture development but the <acronym title="Architecture Development Methodology">ADM</acronym> can be applied in concept to designing most solutions/systems/applications.
</p>
<h2>So we do need to &#8220;do architecture&#8221; then?</h2>
<p>In short, Yes.  But how you actually &#8220;do architecture&#8221; depends greatly on the context.  There is a simple lesson here &#8211; architecture is all about simplifying and standardising the problem domain to provide an efficient, re-usable and consistent answer.  The important difference between a formal &#8220;architect&#8221; and a &#8220;builder&#8221; is not of technical expertise, but of perspective, so don&#8217;t assume that your most expert Java Programmer is naturally the architect to your solutions.  This doesn&#8217;t mean that an architect of all types shouldn&#8217;t possess good technical abilities and experience.</p>
<p>There is a nice <a href="http://msdn.microsoft.com/en-us/arcjournal/cc505968.aspx">overview of the different types of Architects</a> at the Microsoft Architecture Journal (which is often surprisingly not MS biased) written by IASA Sweden, however this misses out the technical/infrastructure architect from their Roles diagram, which is a key architect in any IT implementation.  Also, another article on the Architect Journal talks about <a href="http://msdn.microsoft.com/en-us/arcjournal/cc505974.aspx">what an architect actually is</a>, however is a little Software Architect focused.  Both interesting reads, especially for non-architects to understand how to &#8216;use&#8217; an architect (well, work with one effectively at least <img src="https://s.w.org/images/core/emoji/2/72x72/1f609.png" alt="😉" class="wp-smiley" style="height: 1em; max-height: 1em;" /> ). </p>
<h3>Some Exceptions..</h3>
<p>There are times when a formal architecture process is more of a hindrance than a help, and that is in R &amp; D contexts where rapid prototyping and proof of concept solutions are all about unrestricted creativity &#8211; in these cases architecture experience and knowledge is a good backdrop to help organise and focus ideas and channel that creativity into creating something unique.  (But&#8230; Remember that this is not production ready, it is a prototype in need of architectural design to create a production capable solution.  This is where too many rapid prototyping approaches get a bad name.)</p>
<p>
One thing I will write about soon is the risk of &#8216;over-designing&#8217; a solution, because sometimes it is easy to get carried away with design-pattern addiction and framework-itis and actually miss the whole point of the exercise.  Doing &#8216;too much&#8217; architecture can be as bad, and even worse than doing none.
</p>
<h2>And Finally&#8230;</h2>
<p>So&#8230; Yes &#8211; Sometimes it&#8217;s nice to just set out in your car and drive wherever the wind takes you until the fuel runs out.  But other times, and almost always when it is on &#8216;business time&#8217;, wandering aimlessly in the hope of finding something that might be useful is just not acceptable.  Having that vision, aspiration, direction and roadmap an architecture can bring to your project might seem like a chore and &#8220;impossible&#8221; to achieve to some people.. but how else will you get there, without ever actively and knowingly moving toward it ? Chance ?  Good Luck with that&#8230;</p>
<p>So, the next time you think about just winging it, and not bothering with architecture, just think about your software product as your own house that you wish to build &#8211; would you really just start building ?  Or even just draw up your own plans on visio and ask the builders to &#8216;sort it out&#8217; ?  </p>
<p><em>N.B. In the Winchester House example, strange as it may seem, the design actually met the brief &#8211; the needs of the owner weren&#8217;t really to design an architecturally great building, but just to have something creative to do.. it doesn&#8217;t matter that it wasn&#8217;t consistent, or standardised or even usable &#8211; it was the pleasure of doing that was needed, not the objective of greatness in form and function.  But have a think about that&#8230; when was the last time your boss suggested you design something for the fun of it, at the company&#8217;s expense, regardless of whether it results in some sort of throw-away chimera ? </em></p>
]]></content>
			<link rel="replies" type="text/html" href="/index.php/architect/hardwareinfrastructuredesign/why-bother-with-architecture/#comments" thr:count="3"/>
		<link rel="replies" type="application/atom+xml" href="/index.php/architect/hardwareinfrastructuredesign/why-bother-with-architecture/feed/atom/" thr:count="3"/>
		<thr:total>3</thr:total>
		</entry>
		<entry>
		<author>
			<name>damber</name>
					</author>
		<title type="html"><![CDATA[Information Unity in the Canonical Form]]></title>
		<link rel="alternate" type="text/html" href="/index.php/architect/designingmultiapplicationsolutions/information-unity-in-the-canonical-form/" />
		<id>/index.php/2008/06/information-unity-in-the-canonical-form/</id>
		<updated>2008-06-02T06:50:28Z</updated>
		<published>2008-06-02T06:50:28Z</published>
		<category scheme="/" term="Designing Multi-Application Solutions" /><category scheme="/" term="Enterprise Architecture" /><category scheme="/" term="Information and Integration Architecture" /><category scheme="/" term="canonical" /><category scheme="/" term="data modelling" /><category scheme="/" term="integration" /><category scheme="/" term="standards" />		<summary type="html"><![CDATA[So what is a CDM ?&#8230; A Canonical Data Model is most simply explained as a standardised way of representing data that generically applies to multiple systems and data models &#8211; kind of like the master data model, but for semantics aswell as content. It can be used as a data model standard template for [&#8230;]]]></summary>
		<content type="html" xml:base="/index.php/architect/designingmultiapplicationsolutions/information-unity-in-the-canonical-form/"><![CDATA[<h2>So what is a CDM ?&#8230; </h2>
<p>A Canonical Data Model is most simply explained as a standardised way of representing data that generically applies to multiple systems and data models &#8211; kind of like the master data model, but for semantics aswell as content.  It can be used as a data model standard template for new systems development, or as an intermediary serialised data format &#8211; which is the aspect I&#8217;ll focus on mostly here.</p>
<p>Here&#8217;s an Example of using the CDM as an intermediary data format to integrate six systems with different data format requirements: Canonical Data Model</p>
<p><img src="http://www.damber.net/blog/files/imgs/canonical_diagram_simple.gif" alt="CDM Example" /></p>
<p>In this example, where serialised data is being passed between systems, it uses the standardised format as a middle ground, meaning that each adapter only needs to be able to translate into or out of the CDM format (rather than each individual target/source) for it to be able to understand (and therefore integrate) with other systems &#8216;talking&#8217; in the same context (e.g. a specific functional domain, like shipments, invoices, orders etc).  This creates semantic interoperability between the system by abstracting the differences at the perimeter of the integration solution, and re-using existing components.</p>
<h2>So what ?</h2>
<p>It&#8217;s not always clear when first thinking about this design why it is so important to the implementation of upstream architectures such as SOA, or why this has such impact on everyday integration.. even the more traditional hub based point-to-point integration patterns.   But hopefully that realisation is starting to emerge, because it really is key to building truly flexible, seamless and invisible integration solutions.</p>
<h2>Some of the key objectives</h2>
<ul>
<li>Maximise Re-Use of Components</li>
<li>Minimise Redundant Code</li>
<li>Facilitate the concept of &#8216;Plug-And-Play&#8217; interfaces</li>
<li>Standardise knowledge, terminology and domain concepts (talk the same language)</li>
<li>Facilitate SOA through an information architecture (IOA) foundation</li>
</ul>
<h2>Some of the Key Benefits and Advantages</h2>
<p><span style="font-weight:800;text-decoration:underline;">Connect Once, Integrate Many</span> &#8211; once connected to the information network via the canonical adapter, you can communicate with any other connected system as long as it is in context (e.g. order requests aren&#8217;t likely to work with Proof of Delivery)&#8230; but having said that, things do become somewhat adaptable, even out of context&#8230; for example: an order quite often contains customer information and product information, as well as being an outline of the shipment.  With this in mind you *could* (and that doesn&#8217;t mean *should* <img src="https://s.w.org/images/core/emoji/2/72x72/1f600.png" alt="😀" class="wp-smiley" style="height: 1em; max-height: 1em;" /> ) feed a customer master or CRM application with the customer information, a Product Master or Stock Management application with the product information &#8216;just-in-time&#8217; for the order to be processed should the information not have been provided before (unlikely for the product master, but you get the idea).  You could even feed a shipment scheduling system, shipment event tracking system and plenty of others just from that single message (the most valuable might be your data warehouse).</p>
<p>Here&#8217;s a comparison of point to point integration versus a canonical model:</p>
<p><img src="http://www.damber.net/blog/files/imgs/ptp_v_cdm.gif" alt="point to point vs Canonical" /></p>
<h2>CDM v Point to Point Comparison</h2>
<p>As you can see, the point to point method (bottom image) creates a LOT of components and complexity.  Taking this example and doing the Math:</p>
<h5>Point-To-Point Integration for 3 sending systems and 3 receiving systems:</h5>
<p>3 (sources) * 3 (targets) = 9 (components)</p>
<h5>CDM Based Integration for 3 sending systems and 3 receiving systems:</h5>
<p>3 (sources) * 1 (adapter &#8211; the CDM is now the virtual target)  +  3 (targets) * 1 (adapter &#8211; the CDM is now the virtual source) = 6 (components)</p>
<p>Or put more simply:<br />
PTP Integration: sources MULTIPLIED by targets<br />
CDM Integration: sources PLUS targets
</p>
<p>This starts to demonstrate itself very quickly when you look at 10 sources and 10 targets&#8230; would you prefer to build 20 components, or 100 ?</p>
<p><span style="font-weight:800;text-decoration:underline;">Standardised Information Architecture Foundation</span> &#8211; the concept and importance of an Information Oriented Architecture (IOA) should not be understated.  Architecture within an IT environment is mostly about abstraction, generalisation and standardisation of concepts to deliver sustainable, re-usable solutions and technology.  One of the most popular architectures in previous years has been the N-Tier architecture where layers of the solution are packaged into abstracted levels that are &#8216;theoretically&#8217; interchangeable etc.  Furthermore, the more recent Service Oriented Architecture (SOA) expands / explodes that concept somewhat (there&#8217;s a bit more to it, but for examples sake..) into a distributed network oriented environment, with the addition of a bus to provide the glue that binds all the interchangeable parts together.  In both of these concepts, information should be standardised, or if not possible (e.g. from multiple sources, which SOA is very prone to) then to abstract the differences between the data sources and present (e.g. via the Data Access Tier, Business Data Objects, Composite Services etc) a standardised version.</p>
<p>There are products that will help to do this on a READ basis &#8211; generally called data federation, it allows multiple sources of data to be combined into a single &#8216;view&#8217; despite the underlying technologies (e.g. RDBMS, XML, CSV, Web Service, etc).  This is great, and a useful tool, but it is not enough to satisfy the needs of a true SOA environment.  There are also technologies that will help do this on a more general basis, which are much more applicable, such as business data objects, which can be used to &#8216;mimic&#8217; a SOA like environment without all the standards stack.  Then you have the SOA concept, which implements data and functionality as services, but really is founded on those data sources, and their role within the solution (sometimes data sources are not the authority on the data).  Hence, a solid information architecture is the foundation of your SOA.</p>
<p>Whichever way you look at it, having this standard model helps to bring your enterprise solutions together whilst minimising diversity and maximising re-use.</p>
<p>For example, you could implement a Data Warehouse by simply adding a canonical adapter for the data warehouse feeds, and directing existing data (coming via other canonical adapters) to this point &#8211; if you have 20 or so systems that are already in your network you can start to see how this would make your life easier !</p>
<p>It also helps when designing and developing new applications &amp; data sources, as you can simply implement the CDM template, and you have 80-90% of your data model (there are always application specific data tables required by a system). </p>
<h2>Some Things to Consider About the Design of a CDM</h2>
<ul>
<li>Version Control needs to be closely managed</li>
<li>You should be able to change the CDM Format without &#8216;breaking&#8217; existing adapters &#8211; otherwise changes will become more and more of a risk/impact</li>
<li>Data content (as well as the syntax and semantics) should be standardised within the CDM boundaries  (transformed on entry) &#8211; this is where Master Data Management becomes essential &#8211; for example, you want to ensure that timezones are clearly included with time/dates, customer IDs are the same, country codes, currency codes and so on are all the same</li>
<li>Technology needs to support then dynamic and flexible nature of this &#8211; XML is a prime candidate, coupled with XSLT, Xpath and Xquery</li>
<li>Data Models should be based on REAL LIFE &#8211; not on existing applications or the buzz-de-jour &#8211; speaking to the business is an essential part of building lasting and truly representational models</li>
<li>Use Standards where possible &#8211; but don&#8217;t think there is an off the shelf model and solution that will fit your business perfectly.  Things like BODs are interesting and useful, but not necessarily what you need</li>
<li>Consider the data serialisation approach &#8211; message centric (like an EDI Message) or entity centric (like a database) &#8211; how normalised do you want that serialised format ?  For example a Customer would appear in both orders and invoices (plus many other things) &#8211; do you want &#8216;Customers&#8217; to be a separate entity, or an embedded entity ?  An entity centric approach is more appropriately served by developing a Semantic Ontology, using technologies such as RDF and OWL.</li>
</ul>
<h2>So, what next ?</h2>
<p>Delivering a CDM can be challenging &#8211; especially when delivered as part of a full information architecture overhaul.  My advice ?  Take little steps.</p>
<p>Start with a vision &#8211; think about (and ask) what the business really needs from information, then conceptualise, agree and communicate it.</p>
<p>Then (ideally) you want to define an information architecture strategy as thoroughly as possible upfront, so you have a good framework to work from.  Try to be as far reaching (in terms of your business units etc) as possible with the analysis for this, but don&#8217;t get bogged down in specifics &#8211; just get the framework for how things should be done and the strategy around managing, governing, delivering etc. </p>
<p>Once you have a good framework and strategy, you can start analysing the detail and pulling together a Requirements Analysis Spec and the Architecture/Design for the solution.   BUT.. this bit should be done in small manageable chunks &#8211; that way a) you minimise risk of failure  b) minimise impact if things do go wrong and c) show fast, measurable results to encourage people to continue to take-up this strategy.  I&#8217;ll post again soon with more detailed steps to this approach</p>
<p>I hope this has either inspired you to look at implementing a Canonical Data Model as part of your enterprise Information Architecture strategy, or enraged you enough to think of some better way&#8230; </p>
]]></content>
			<link rel="replies" type="text/html" href="/index.php/architect/designingmultiapplicationsolutions/information-unity-in-the-canonical-form/#comments" thr:count="2"/>
		<link rel="replies" type="application/atom+xml" href="/index.php/architect/designingmultiapplicationsolutions/information-unity-in-the-canonical-form/feed/atom/" thr:count="2"/>
		<thr:total>2</thr:total>
		</entry>
	</feed>
