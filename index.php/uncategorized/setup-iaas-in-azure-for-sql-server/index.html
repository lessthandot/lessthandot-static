<!DOCTYPE html>
<html lang="en-US">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# article: http://ogp.me/ns/article#">
		<link rel="shortcut icon" href="http://lessthandot.com/favicon.ico" type="image/vnd.microsoft.icon" />
	<title>Less Than Dot - Blog -   Setup IaaS in Azure for SQL Server</title>
	<meta prefix="og: http://ogp.me/ns#" property="og:title" content="Less Than Dot - Blog -   Setup IaaS in Azure for SQL Server" />
	<meta prefix="og: http://ogp.me/ns#" property="og:type" content="article" />
	<meta prefix="og: http://ogp.me/ns#" property="og:url" content="/index.php/uncategorized/setup-iaas-in-azure-for-sql-server/" />
		<meta prefix="og: http://ogp.me/ns#" property="og:image" content="http://lessthandot.com/images/logo_prod.png" />
	<meta prefix="og: http://ogp.me/ns#" property="og:type" content="article" />
	<meta prefix="og: http://ogp.me/ns#" property="og:site_name" content="LessThanDot" />
	<meta prefix="og: http://ogp.me/ns#" property="og:description" content="Prior to full support for availability group listeners in Azure, we were forced to use availability groups without a key feature that makes them truly valuable – listener entry points.  A listener is the same concept as a cluster name in the FCI days.  Essentially, we look at a listener as the single point of [&hellip;]" />
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="/index.php/feed/" />
	<link rel="alternate" type="application/atom+xml" title="Atom" href="/index.php/feed/atom/" />

	<!-- this page is the canonical URL -->	
	<link rel="stylesheet" href="/wp-content/themes/lessthandot2009/style.css" type="text/css" />
	<link rel="stylesheet" href="http://lessthandot.com/includes/allsite.css" type="text/css" />
	<link rel="stylesheet" href="http://lessthandot.com/includes/allsiteprint.css" media="print" type="text/css" />

	<link rel='dns-prefetch' href='//ajax.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link rel="alternate" type="application/rss+xml" title="LessthanDot &raquo; Setup IaaS in Azure for SQL Server Comments Feed" href="/index.php/uncategorized/setup-iaas-in-azure-for-sql-server/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2\/svg\/","svgExt":".svg","source":{"concatemoji":"\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.6.1"}};
			!function(a,b,c){function d(a){var c,d,e,f,g,h=b.createElement("canvas"),i=h.getContext&&h.getContext("2d"),j=String.fromCharCode;if(!i||!i.fillText)return!1;switch(i.textBaseline="top",i.font="600 32px Arial",a){case"flag":return i.fillText(j(55356,56806,55356,56826),0,0),!(h.toDataURL().length<3e3)&&(i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,65039,8205,55356,57096),0,0),c=h.toDataURL(),i.clearRect(0,0,h.width,h.height),i.fillText(j(55356,57331,55356,57096),0,0),d=h.toDataURL(),c!==d);case"diversity":return i.fillText(j(55356,57221),0,0),e=i.getImageData(16,16,1,1).data,f=e[0]+","+e[1]+","+e[2]+","+e[3],i.fillText(j(55356,57221,55356,57343),0,0),e=i.getImageData(16,16,1,1).data,g=e[0]+","+e[1]+","+e[2]+","+e[3],f!==g;case"simple":return i.fillText(j(55357,56835),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode8":return i.fillText(j(55356,57135),0,0),0!==i.getImageData(16,16,1,1).data[0];case"unicode9":return i.fillText(j(55358,56631),0,0),0!==i.getImageData(16,16,1,1).data[0]}return!1}function e(a){var c=b.createElement("script");c.src=a,c.type="text/javascript",b.getElementsByTagName("head")[0].appendChild(c)}var f,g,h,i;for(i=Array("simple","flag","unicode8","diversity","unicode9"),c.supports={everything:!0,everythingExceptFlag:!0},h=0;h<i.length;h++)c.supports[i[h]]=d(i[h]),c.supports.everything=c.supports.everything&&c.supports[i[h]],"flag"!==i[h]&&(c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&c.supports[i[h]]);c.supports.everythingExceptFlag=c.supports.everythingExceptFlag&&!c.supports.flag,c.DOMReady=!1,c.readyCallback=function(){c.DOMReady=!0},c.supports.everything||(g=function(){c.readyCallback()},b.addEventListener?(b.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1)):(a.attachEvent("onload",g),b.attachEvent("onreadystatechange",function(){"complete"===b.readyState&&c.readyCallback()})),f=c.source||{},f.concatemoji?e(f.concatemoji):f.wpemoji&&f.twemoji&&(e(f.twemoji),e(f.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='bwp-syntax-css'  href='/wp-content/plugins/better-wordpress-syntax-based-on-geshi/css/bwp-syntax-global.css?ver=4.6.1' type='text/css' media='all' />
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-content/plugins/better-wordpress-syntax-based-on-geshi/js/bwp-syntax.js?ver=4.6.1'></script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Split a Query Window in SSMS' href='/index.php/datamgmt/dbprogramming/split-a-query-window-in-ssms/' />
<link rel='next' title='The Magic Alt Button' href='/index.php/datamgmt/dbprogramming/mssqlserver/the-magic-alt-button/' />
<meta name="generator" content="WordPress 4.6.1" />
<link rel="canonical" href="/index.php/uncategorized/setup-iaas-in-azure-for-sql-server/" />
<link rel='shortlink' href='/?p=2942' />
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Findex.php%2Funcategorized%2Fsetup-iaas-in-azure-for-sql-server%2F" />
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Findex.php%2Funcategorized%2Fsetup-iaas-in-azure-for-sql-server%2F&#038;format=xml" />
<style type='text/css'>.rp4wp-related-posts ul{width:100%;padding:0;margin:0;float:left;}
.rp4wp-related-posts ul>li{list-style:none;padding:0;margin:0;padding-bottom:20px;clear:both;}
.rp4wp-related-posts ul>li>p{margin:0;padding:0;}
.rp4wp-related-post-image{width:35%;padding-right:25px;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box;float:left;}</style>
	<script src="http://lessthandot.com/includes/allsite.js" type="text/javascript" ></script>
</head>
<body>
<div id="contain"><div id="subcontain"><div id="ttl"><div id="hdr"><div id="snav"><a href="http://lessthandot.com/login.php?backtrack=/index.php/uncategorized/setup-iaas-in-azure-for-sql-server/?">Member Login</a>
</div><a href="http://lessthandot.com/" title="LessThanDot Launchpad" id="logoc"><img src="http://lessthandot.com/images/logo_prod.png" alt="LessThanDot Site Logo" border="0" /></a><h1>LessThanDot</h1><div class="pgsttl">A decade of helpful technical content</div></div><div id="nav">
<ul>
<li><a href="http://lessthandot.com/" title="LessThanDot Launchpad" id="h" ><span>Launchpad</span></a></li>
<li class="cur"><a href="/" title="LessThanDot Blogs" id="b" ><span>Blogs</span></a></li>
<li><a href="http://forum.lessthandot.com/" title="LessThanDot Community Forums" id="f" ><span>Forum</span></a></li>
<li><a href="http://wiki.lessthandot.com/" title="LessThanDot Wiki Articles" id="w" ><span>Wiki</span></a></li>
<li><a href="http://sqlcop.lessthandot.com/" title="LessThanDot SQLCop" id="a" ><span>SQLCop</span></a></li>
<li><a href="http://lessthandot.com/account.php" title="Your Account Settings" id="r"  class="l_ie"><span>My Account</span></a></li></ul></div>
</div><div id="content">
<div id="fac"><div id="fa">
		<p>Less Than Dot is a community of passionate IT professionals and enthusiasts dedicated to sharing technical knowledge, experience, and assistance. Inside you will find reference materials, interesting technical discussions, and expert tips and commentary.</p></div></div><div class="content-sidebar">
	<div id="social" class="sdsec">
		<h2>LTD Social Sitings</h2>
		<div>
		<a id="social_twitter" href="http://twitter.com/LessThanDot/" title="Follow us on Twitter" ><img src="http://lessthandot.com/images/bdg_twitter.png" alt="Lessthandot twitter"/></a> 
		<a href="http://www.linkedin.com/groups?home=&amp;gid=113440" title="Join us on LinkedIn" ><img src="http://lessthandot.com/images/bdg_linkedin.png" alt="Lessthandot Linkedin" /></a> 
		<a href="http://www.facebook.com/group.php?gid=19330511063" title="Join us on Facebook" ><img src="http://lessthandot.com/images/bdg_facebook.png" alt="Lessthandot facebook"/></a> 
		<a href="http://lessthandot.com/rss.php" title="LessThanDot News Feed" ><img src="http://lessthandot.com/images/bdg_rss_icon.png" alt="Lessthandot rss"/></a> 
		</div>
		<p><em>Note: Watch for social icons on posts by your favorite authors to follow their postings on these and other social sites.</em></p>
	</div><div class="content-sidebar-section">
<h2>Tag cloud</h2>
	<p class="tag-cloud">
		<a href='/index.php/tag/net/' class='tag-link-245 tag-link-position-1' title='21 topics' style='font-size: 8.9565217391304pt;'>.net</a> <a href='/index.php/tag/asp-net/' class='tag-link-168 tag-link-position-2' title='21 topics' style='font-size: 8.9565217391304pt;'>asp.net</a> <a href='/index.php/tag/azure-2/' class='tag-link-321 tag-link-position-3' title='29 topics' style='font-size: 10.173913043478pt;'>azure</a> <a href='/index.php/tag/book/' class='tag-link-130 tag-link-position-4' title='26 topics' style='font-size: 9.7391304347826pt;'>book</a> <a href='/index.php/tag/business-intelligence-2/' class='tag-link-256 tag-link-position-5' title='30 topics' style='font-size: 10.260869565217pt;'>business intelligence</a> <a href='/index.php/tag/c/' class='tag-link-138 tag-link-position-6' title='40 topics' style='font-size: 11.304347826087pt;'>c#</a> <a href='/index.php/tag/database/' class='tag-link-134 tag-link-position-7' title='31 topics' style='font-size: 10.434782608696pt;'>database</a> <a href='/index.php/tag/excel/' class='tag-link-155 tag-link-position-8' title='16 topics' style='font-size: 8pt;'>excel</a> <a href='/index.php/tag/gotcha/' class='tag-link-240 tag-link-position-9' title='19 topics' style='font-size: 8.6086956521739pt;'>gotcha</a> <a href='/index.php/tag/how-to/' class='tag-link-272 tag-link-position-10' title='44 topics' style='font-size: 11.652173913043pt;'>how to</a> <a href='/index.php/tag/mongodb/' class='tag-link-765 tag-link-position-11' title='17 topics' style='font-size: 8.2608695652174pt;'>mongodb</a> <a href='/index.php/tag/nosql/' class='tag-link-775 tag-link-position-12' title='18 topics' style='font-size: 8.4347826086957pt;'>nosql</a> <a href='/index.php/tag/performance/' class='tag-link-179 tag-link-position-13' title='26 topics' style='font-size: 9.7391304347826pt;'>performance</a> <a href='/index.php/tag/security-2/' class='tag-link-398 tag-link-position-14' title='25 topics' style='font-size: 9.5652173913043pt;'>security</a> <a href='/index.php/tag/sql/' class='tag-link-132 tag-link-position-15' title='42 topics' style='font-size: 11.478260869565pt;'>sql</a> <a href='/index.php/tag/sql-advent-2012/' class='tag-link-1416 tag-link-position-16' title='18 topics' style='font-size: 8.4347826086957pt;'>sql advent 2012</a> <a href='/index.php/tag/sql-friday/' class='tag-link-377 tag-link-position-17' title='18 topics' style='font-size: 8.4347826086957pt;'>sql friday</a> <a href='/index.php/tag/sql-server/' class='tag-link-154 tag-link-position-18' title='145 topics' style='font-size: 16.086956521739pt;'>sql server</a> <a href='/index.php/tag/sql-server-2000/' class='tag-link-366 tag-link-position-19' title='45 topics' style='font-size: 11.739130434783pt;'>sql server 2000</a> <a href='/index.php/tag/sql-server-2005/' class='tag-link-327 tag-link-position-20' title='118 topics' style='font-size: 15.391304347826pt;'>sql server 2005</a> <a href='/index.php/tag/sql-server-2008/' class='tag-link-152 tag-link-position-21' title='237 topics' style='font-size: 18pt;'>sql server 2008</a> <a href='/index.php/tag/sql-server-2008-r2/' class='tag-link-548 tag-link-position-22' title='38 topics' style='font-size: 11.130434782609pt;'>sql server 2008 r2</a> <a href='/index.php/tag/sql-server-2012/' class='tag-link-1161 tag-link-position-23' title='76 topics' style='font-size: 13.739130434783pt;'>sql server 2012</a> <a href='/index.php/tag/ssis-2/' class='tag-link-501 tag-link-position-24' title='52 topics' style='font-size: 12.260869565217pt;'>ssis</a> <a href='/index.php/tag/ssms/' class='tag-link-640 tag-link-position-25' title='18 topics' style='font-size: 8.4347826086957pt;'>ssms</a> <a href='/index.php/tag/ssrs-2/' class='tag-link-557 tag-link-position-26' title='27 topics' style='font-size: 9.9130434782609pt;'>ssrs</a> <a href='/index.php/tag/syndicated/' class='tag-link-1407 tag-link-position-27' title='67 topics' style='font-size: 13.217391304348pt;'>syndicated</a> <a href='/index.php/tag/t-sql/' class='tag-link-185 tag-link-position-28' title='26 topics' style='font-size: 9.7391304347826pt;'>t-sql</a> <a href='/index.php/tag/tip/' class='tag-link-194 tag-link-position-29' title='46 topics' style='font-size: 11.826086956522pt;'>tip</a> <a href='/index.php/tag/unit-testing/' class='tag-link-162 tag-link-position-30' title='17 topics' style='font-size: 8.2608695652174pt;'>unit testing</a>	</p>
</div>		<div class="content-sidebar-section">
		<h2>Authors</h2>
			<ul class="author-list dimmed">
				<li><a href="/index.php/author/SQLDenis/" title="Posts by SQLDenis">SQLDenis</a> <a href="/index.php/author/SQLDenis/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (597)</li><li><a href="/index.php/author/onpnt/" title="Posts by Ted Krueger (onpnt)">Ted Krueger (onpnt)</a> <a href="/index.php/author/onpnt/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (355)</li><li><a href="/index.php/author/grrlgeek/" title="Posts by Jes Borland">Jes Borland</a> <a href="/index.php/author/grrlgeek/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (202)</li><li><a href="/index.php/author/tarwn/" title="Posts by Eli Weinstock-Herman (tarwn)">Eli Weinstock-Herman (tarwn)</a> <a href="/index.php/author/tarwn/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (190)</li><li><a href="/index.php/author/koenverbeeck/" title="Posts by Koen Verbeeck">Koen Verbeeck</a> <a href="/index.php/author/koenverbeeck/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (100)</li><li><a href="/index.php/author/alexcuse/" title="Posts by Alex Ullrich">Alex Ullrich</a> <a href="/index.php/author/alexcuse/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (55)</li><li><a href="/index.php/author/gmmastros/" title="Posts by George Mastros (gmmastros)">George Mastros (gmmastros)</a> <a href="/index.php/author/gmmastros/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (45)</li><li><a href="/index.php/author/axel8s/" title="Posts by Axel Achten (axel8s)">Axel Achten (axel8s)</a> <a href="/index.php/author/axel8s/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (28)</li><li><a href="/index.php/author/naomi/" title="Posts by Naomi Nosonovsky">Naomi Nosonovsky</a> <a href="/index.php/author/naomi/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (27)</li><li><a href="/index.php/author/thirster42/" title="Posts by David Forck (thirster42)">David Forck (thirster42)</a> <a href="/index.php/author/thirster42/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (24)</li><li><a href="/index.php/author/chopstik/" title="Posts by chopstik">chopstik</a> <a href="/index.php/author/chopstik/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (20)</li><li><a href="/index.php/author/kconan/" title="Posts by Kevin Conan">Kevin Conan</a> <a href="/index.php/author/kconan/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (18)</li><li><a href="/index.php/author/robearl/" title="Posts by Rob Earl">Rob Earl</a> <a href="/index.php/author/robearl/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (14)</li><li><a href="/index.php/author/thatrickguy/" title="Posts by ThatRickGuy">ThatRickGuy</a> <a href="/index.php/author/thatrickguy/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (12)</li><li><a href="/index.php/author/sqlarcher/" title="Posts by SQLArcher">SQLArcher</a> <a href="/index.php/author/sqlarcher/feed/"><img src="http://lessthandot.com/images/bdg_rss_icon_sm.png" style="border: none;" /></a> (11)</li>                <li><a href="http://lessthandot.com/Stats/BlogAuthors.php">More...</a></li>
			</ul>
		</div>
				<div class="content-sidebar-section">
		<h2>Categories</h2>
			<ul class="categories-list">
					<li class="cat-item cat-item-10"><a href="/index.php/category/all/" >All Blogs</a>
</li>
	<li class="cat-item cat-item-5"><a href="/index.php/category/architect/" >Architecture, Design and Strategy</a>
</li>
	<li class="cat-item cat-item-1759"><a href="/index.php/category/artificial-intelligence/" >Artificial Intelligence</a>
</li>
	<li class="cat-item cat-item-6"><a href="/index.php/category/datamgmt/" >Data Management</a>
</li>
	<li class="cat-item cat-item-7"><a href="/index.php/category/desktopdev/" >Desktop Developer</a>
</li>
	<li class="cat-item cat-item-8"><a href="/index.php/category/enterprisedev/" >Enterprise Developer</a>
</li>
	<li class="cat-item cat-item-11"><a href="/index.php/category/itprofessionals/" >IT Professionals</a>
</li>
	<li class="cat-item cat-item-12"><a href="/index.php/category/itstudents/" >IT Students and Researchers</a>
</li>
	<li class="cat-item cat-item-1743"><a href="/index.php/category/management/" >Management</a>
</li>
	<li class="cat-item cat-item-9"><a href="/index.php/category/sysadmins/" >System Admins</a>
</li>
	<li class="cat-item cat-item-1"><a href="/index.php/category/uncategorized/" >Uncategorized</a>
</li>
	<li class="cat-item cat-item-4"><a href="/index.php/category/webdev/" >Web Developer</a>
</li>
			</ul>
		</div>
		</div><div class="content-main">
				<div class="post-navigation">
				<div class="post-navigation-forward"><a href="/index.php/datamgmt/dbprogramming/mssqlserver/the-magic-alt-button/" rel="next">The Magic Alt Button</a> &raquo; </div>
				<div class="post-navigation-back">&laquo; <a href="/index.php/datamgmt/dbprogramming/split-a-query-window-in-ssms/" rel="prev">Split a Query Window in SSMS</a></div>
			</div>
			<div class="post-area instapaper_body">
				<div class="post-title-line">
										<h1 class="instapaper_ignore"><a href="/index.php/uncategorized/setup-iaas-in-azure-for-sql-server/" class="post-title">Setup IaaS in Azure for SQL Server</a></h1>
					<div class="post-byline">by <a href="/index.php/author/onpnt/" title="Posts by Ted Krueger (onpnt)" rel="author">Ted Krueger (onpnt)</a> on September 18, 2014 in category <a href="/index.php/category/uncategorized/" rel="category tag">Uncategorized</a>. Article views: 5,942 </div>
				</div>
				<div class="post-tagline"><a href="https://twitter.com/intent/tweet?url=/index.php/uncategorized/setup-iaas-in-azure-for-sql-server/&text=RT @LessThanDot Blog - Setup IaaS in Azure for SQL Server by @onpnt" class="twitter-share-button-static" target="_blank"><i></i><span class="label">Tweet</span></a><a href="http://www.linkedin.com/shareArticle?mini=true&url=/index.php/uncategorized/setup-iaas-in-azure-for-sql-server/&title=Setup IaaS in Azure for SQL Server&source=/index.php/uncategorized/setup-iaas-in-azure-for-sql-server/" target="_blank" title="Share on LinkedIn" class="svg-button"><img alt="Share on LinkedIn"  src="http://lessthandot.com/images/LinkedIn.svg" /></a><a href="http://www.reddit.com/submit?url=/index.php/uncategorized/setup-iaas-in-azure-for-sql-server/&title=Setup IaaS in Azure for SQL Server" target="_blank" title="Submit to Reddit" class="svg-button"><img alt="Submit to Reddit" src="http://lessthandot.com/images/Reddit.svg" /></a><a href="https://www.facebook.com/sharer/sharer.php?u=/index.php/uncategorized/setup-iaas-in-azure-for-sql-server/&quote=Setup IaaS in Azure for SQL Server" title="Share on Facebook" target="_blank" class="svg-button"><img alt="Share on Facebook" src="http://lessthandot.com/images/Facebook.svg" /></a> <a href="http://www.instapaper.com/hello2?url=/index.php/uncategorized/setup-iaas-in-azure-for-sql-server/&title=Setup IaaS in Azure for SQL Server" class="instapaper_button">Instapaper</a></div>

				<div class="post-content"><p>Prior to full support for availability group listeners in Azure, we were forced to use availability groups without a key feature that makes them truly valuable – listener entry points.  A listener is the same concept as a cluster name in the FCI days.  Essentially, we look at a listener as the single point of entry into the solution or grouping of active databases.  active means: databases currently involved in a high availability solution, promoting data service uptime.  Due to the lack of being capable of using a listener on availability groups, methods like the failover switch in connection strings or custom coding to validate which database was accepting read-write actively.  When we look at this, we’re essentially looking at a fancy mirroring session with a few bonus features like read-copy databases and offloading some types of backups.  In all, this wasn&#8217;t enough to sell much of availability groups for an Infrastructure as a Service (IaaS) in Azure.</p>
<p>Fortunately, support was released for listeners in Azure.  However the debilitating effects of how that support was generated, they are now available and with work, can be secure.</p>
<p>Another fortunate aspect to IaaS in Azure is, we can utilize a trial period to work with becoming familiar with setting this type of solution up. Similar to a simple software evaluation period. As with any subscription, just ensure you pay attention to the end dates of the trial period and when cost may begin to add up.  Aside from all of the trial or if a subscription is readily available, the following steps are how you can run through a quick setup of using full-featured availability groups in Azure virtual machines – IaaS.</p>
<p>After you have a subscription ready, the first step will be to configure your virtual network.  As with the SQL Server Lab configurations, the least amount of work needed can be done, just to get things going.  Although little work is needed, attention is needed to each step.  This attention is pointed out as we run through this setup.</p>
<p>Your virtual network will be maintained internally to Azure.  Keep this in mind as your setup flows and how accessing the systems within the Azure environment are performed.</p>
<p><strong>Virtual Network</strong></p>
<p>To create a new virtual network, simply click the, New button, at the bottom of the Azure portal page, while in the networks page.<br />
<a href="/wp-content/uploads/2014/09/azure_1.png"><img src="/wp-content/uploads/2014/09/azure_1.png" alt="azure_1" width="624" height="310" class="alignnone size-full wp-image-2946" srcset="/wp-content/uploads/2014/09/azure_1.png 624w, /wp-content/uploads/2014/09/azure_1-300x149.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a><br />
We can take a very simplistic approach to how this test area will be setup.  Keeping that in mind, the new network will be named MyDevNetwork and then take on an address space of 192.168.x.x.  This will indicate that my internal IP structure will be effectively in 192.168.  So, if I have a SQL Server VM and a Domain Controller VM, the IP structure could be 192.168.1.5 and 192.168.1.6, respectfully.<br />
<a href="/wp-content/uploads/2014/09/azure_2.png"><img src="/wp-content/uploads/2014/09/azure_2.png" alt="azure_2" width="624" height="275" class="alignnone size-full wp-image-2947" srcset="/wp-content/uploads/2014/09/azure_2.png 624w, /wp-content/uploads/2014/09/azure_2-300x132.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a><br />
At this point, hitting the, create a virtual network, would be all that is needed to begin creating the remainder of the infrastructure.</p>
<p><strong>Cloud Service</strong></p>
<p>The next step will be setting up a cloud service.  In this case, the cloud service will contain the SQL Server services and the active directory server.  This is done to maintain them on the same subnet for this example only.  Typically, cloud services will be segmented for each specific grouping of a service.  For example, if there were five WSFC clusters and each had an availability group, this would be probably setup as five cloud services.  The configuration of how this infrastructure setup truly depends on how you will be utilizing it.</p>
<p>To create the cloud service, go to the cloud service page and then click the New button towards the bottom left corner.  There isn&#8217;t much that is required when setting up the cloud service.  Simply enter a name, it will validate if the name is available, and complete the creation.<br />
<a href="/wp-content/uploads/2014/09/azure_3.png"><img src="/wp-content/uploads/2014/09/azure_3.png" alt="azure_3" width="624" height="215" class="alignnone size-full wp-image-2948" srcset="/wp-content/uploads/2014/09/azure_3.png 624w, /wp-content/uploads/2014/09/azure_3-300x103.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a><br />
The test setup is now ready for virtual machines to be created.  The virtual machine creation would follow a sequence of creations as follows and utilize the Windows Server 2012 R2 images</p>
<p>1)      Active Directory and DNS<br />
2)      SQL Server Node 1<br />
3)      SQL Server Node 2</p>
<p>To show how quickly a Windows VM can be created, Azure has the availability of images to create quick Windows servers.  While in the virtual machines page, again, click the New button in the lower left corner.</p>
<p>This will show the options available for the new VM you wish to create.  The option to select will be the “From Gallery” option.  This will load another set of screens with preloaded images to select from.<br />
<a href="/wp-content/uploads/2014/09/azure_4.png"><img src="/wp-content/uploads/2014/09/azure_4.png" alt="azure_4" width="624" height="195" class="alignnone size-full wp-image-2949" srcset="/wp-content/uploads/2014/09/azure_4.png 624w, /wp-content/uploads/2014/09/azure_4-300x93.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a><br />
As shown, there are numerous available images from Windows Server 2012 R2 to Windows Server 2012 with SQL Server 2014 installed already.  Although these images work very well, in this case, we will be using Developer Edition of SQL Server 2014.  This requires SQL Server to be installed separately from the actual image however, we can use the Windows Server 2012 R2 image to advance the setup and ease of getting Windows going.<br />
<a href="/wp-content/uploads/2014/09/azure_5.png"><img src="/wp-content/uploads/2014/09/azure_5.png" alt="azure_5" width="624" height="397" class="alignnone size-full wp-image-2950" srcset="/wp-content/uploads/2014/09/azure_5.png 624w, /wp-content/uploads/2014/09/azure_5-300x190.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a><br />
Once the image is selected, click the right arrow to move to the naming of the VM.<br />
<a href="/wp-content/uploads/2014/09/azure_6.png"><img src="/wp-content/uploads/2014/09/azure_6.png" alt="azure_6" width="472" height="513" class="alignnone size-full wp-image-2951" srcset="/wp-content/uploads/2014/09/azure_6.png 472w, /wp-content/uploads/2014/09/azure_6-276x300.png 276w" sizes="(max-width: 472px) 100vw, 472px" /></a><br />
In this case we enter a virtual name and selected the A3 size for the VM.  Note – A3 is an absolute minimum for running a SQL Server instance.  Ensure for any real production or development Azure IaaS setups, a proper sized VM is selected.  Although this is a value easily altered later, with a reboot of the VM, it is something to be managed and size beforehand.</p>
<p>In the fourth screen, we now have the opportunity to select the cloud service created earlier.  This will automatically place the VM into the subnet and assign an IP that allows the VMs all to communicate without addition routing needed.<br />
<a href="/wp-content/uploads/2014/09/azure_7.png"><img src="/wp-content/uploads/2014/09/azure_7.png" alt="azure_7" width="624" height="395" class="alignnone size-full wp-image-2952" srcset="/wp-content/uploads/2014/09/azure_7.png 624w, /wp-content/uploads/2014/09/azure_7-300x189.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a><br />
At this point, leave the endpoint options as the default.  Later, the endpoint for SQL Server will be created but this will be done using Windows PowerShell for Azure.</p>
<p>To complete the VM setup, click the right arrow once again and then the check button to execute the provisioning and starting of the VM.</p>
<p><em>Note – one slight annoyance here is the ability to only run so many virtual machine provisioning events at once given the storage account utilized and so on.  If you attempt to try to create several at once, they will more than likely fail and you will have to perform the sections in the wizard over again. </em></p>
<p>For this test setup, we are primarily concerned with seeing how the listener functions and those stages of the in-depth setup.  Given this, we will not go through how to configure active directory services and DNS settings.  For the active directory server, DNS services are also configured.  The active directory is not much more than utilizing the wizard setup by going to the add roles and features of Windows Server 2012 R2 and adding domain services.  It is recommended not to go too far into the weeds here, on the domain server.  The primary reasoning for this test setup is the utilization of availability groups and using listeners so, the base setup is sufficient.</p>
<p>SQL Server Developer Edition is also installed and configured to meet the guidelines of what resources the A3 size VM has to offer.</p>
<p>For domain users and groups – an active directory group of SQLAdmin was setup and a user of SQLService was added to this group.  This group, SQLAdmin, will be the group added to control SQL Server services and sysadmin rights on the instances.</p>
<p><strong>Configure Clustering and Availability Groups</strong></p>
<p>Up to this point, an infrastructure has been built.  This infrastructure, in all, takes around 4-8 hours.  The time to completion truly depends on the number of servers you intend to add, the complexity of the virtual network and the number of cloud services in addition to the test service implemented.  If we took that and compared the amount of time to promote a physical test environment of the same conceptual infrastructure, the time and savings of cost is something that is undeniably, great.</p>
<p>The next major configuration to manage is, configuring the cluster and then, availability groups.</p>
<p>Connecting to your new SQL Server VM is quite simple.  Each VM has been assigned an endpoint when it was created.  That endpoint is set for remote desktop management.  These endpoint are unique to each VM.  The entry point for all the VMs is through the cloud service.  The port specified then directs the connection to the port listening and promotes the transmission requested.  For example, the port 56811 may be an RDP port on SQLPRIMARY and the cloud services is SQLDomain.  To connect the VM of SQLPRIMARY, you issue SQLDomain.cloudapp.net:56811.  This routes to the SQLPRIMARY VM and initiates an RDP session.</p>
<p>To utilize the portal to connect and create an RDP file for later use, select the SQLPRIMARY VM (or name you provided for one of your SQL Server VMs) and click the Connect button on the bottom menu.<br />
<a href="/wp-content/uploads/2014/09/azure_8.png"><img src="/wp-content/uploads/2014/09/azure_8.png" alt="azure_8" width="624" height="75" class="alignnone size-full wp-image-2953" srcset="/wp-content/uploads/2014/09/azure_8.png 624w, /wp-content/uploads/2014/09/azure_8-300x36.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a><br />
This will provide the RDP file to either download or use at that time to launch the RDP session<br />
<a href="/wp-content/uploads/2014/09/azure_9.png"><img src="/wp-content/uploads/2014/09/azure_9.png" alt="azure_9" width="624" height="113" class="alignnone size-full wp-image-2954" srcset="/wp-content/uploads/2014/09/azure_9.png 624w, /wp-content/uploads/2014/09/azure_9-300x54.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a><br />
After connecting and successfully initiating the RDP session, configuring the cluster is required.  All nodes that are to act in the availability group, must be an active node in a cluster prior to allowing the configuration of them.</p>
<p>Setting up a Windows Server Failover Cluster (WSFC) can be complex or simplistic, depending on how far and the needs of the cluster.  In this test setup, a simple WSFC is all that is needed.  To accomplish creating the cluster, ensure the login used to remote into the VM is a domain administrator or in the least, has the rights to create the DNS and Domain entries that the cluster wizard will initiate.</p>
<p>Once the cluster is configured and active, you will be required to enable AlwaysOn High Availability option, found in the SQL Server Configuration Manager.</p>
<p>For a complete, step-by-step setup of the WSFC and Availability Groups, refer to: <a href="/index.php/architect/availability-groups-setup-and-configuration-from-a-to-z/">Availability Groups Setup and Configuration from A to Z</a></p>
<p><strong>Note – Do not create a listener when the option is available.  </strong></p>
<p><strong>Configuring the Listener</strong></p>
<p>At this point, a cluster has been configured and an availability group has also been configured.  With this landscape, a fully functional database solution has been accomplished in Azure.  However, this solution persists the same issue that we discussed in the beginning – manually determining which SQL Server is active.  We can add the listener in Azure with a few steps by using Windows PowerShell for Azure. The steps to accomplish the listener are well documented here: <a href="http://blogs.msdn.com/b/sqlalwayson/archive/2013/08/06/availability-group-listener-in-windows-azure-now-supported-and-scripts-for-cloud-only-configuration.aspx">Availability Groups Listener in Windows Azure Now Supported!</a>  To take this further, this setup will show the values in which the scripts require to functionally bring the listener online.</p>
<p>The way the listener is supported in Azure is maintained in a rerouting solution, in a sense.  When a request comes into SQL Server and the listener, it is routed through the cloud services public IP address.  This routing sends the transmission through another type of an endpoint – load balanced endpoint.  A load balanced endpoint allows for the redirection to a VM for which is actively accepting connections.  This brings up an interesting nuisance you may run into.  Given the load balanced endpoints path, if you attempt to connect to a listener while on a secondary instance in the availability group, the connection will fail.  This is due to the route not functionally working while on the secondary server.</p>
<p>Again, we can follow the support release blog to create the listener except, due to utilizing Windows Server 2012 R2, the hotfix that is specified in the release, is not required.  Earlier versions will require the hotfix though.</p>
<p>With the hotfix not being required, there are only two primary steps to accomplish.  The load balanced endpoint creation and the implementation of the listener.</p>
<p>The first PowerShell script below is the script that creates the load balanced endpoint.  This script requires it to be run remotely using Windows PowerShell for Azure.  You can download the setup <a href="http://go.microsoft.com/?linkid=9811175&amp;clcid=0x409">Here</a>.</p>
<p>The below execution of the creation for the load balanced endpoint sets the following parameters based on the following environment:</p>
<p>$AGNodes is set to the two SQL Server VMs that are in the availability group.  In this case, SQLPRIMARY and SQLSECONDARY.</p>
<p>$ServiceName is set to the cloud service created in the second step of our IaaS setup.  SQLDomain.  This can be found by clicking the cloud services page in the windows azure portal.</p>
<p>$EndpointName is any name you intend to give the endpoint and thus, will also be used in the load balanced endpoint by appending –LB to the endpoint name.<br />
<a href="/wp-content/uploads/2014/09/azure_10.png"><img src="/wp-content/uploads/2014/09/azure_10.png" alt="azure_10" width="624" height="298" class="alignnone size-full wp-image-2955" srcset="/wp-content/uploads/2014/09/azure_10.png 624w, /wp-content/uploads/2014/09/azure_10-300x143.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a><br />
As shown above, both endpoints and the load balanced endpoint were successfully created.</p>
<p>To complete the remaining step of creating the listener, the second script in the release notes is used.  This script is executed on the primary replica be making an RDP session to the server and then executing the script in a Windows PowerShell command window that is executed as administrator (use Run As Administrator when opening PowerShell)</p>
<p>The last script and the parameters needed are the availability group, “$ag being the availability group name you used”, the cluster network name, which is typically Cluster Network 1 by default.  With these changed, you can execute the script and it will functionally work.  However, it is recommended to change the listener port.</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="powershell"><thead><tr><td colspan="2"  class="head">PowerShell</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
</pre></td><td class="de1"><pre class="de1">&nbsp;
<span class="co1"># Define variables</span>
&nbsp;
<span class="re0">$ag</span> <span class="sy0">=</span> <span class="st0">&quot;SQLAG_DEV01&quot;</span> <span class="co1"># The availability group name</span>
&nbsp;
<span class="re0">$serviceName</span> <span class="sy0">=</span> <span class="st0">&quot;SQLDomain&quot;</span> <span class="co1"># The cloud service name</span>
&nbsp;
<span class="re0">$networkName</span> <span class="sy0">=</span> <span class="st0">&quot;Cluster Network 1&quot;</span> <span class="co1"># The cluster network name, usually &quot;Cluster Network 1&quot; if the nodes are in the same subnet</span>
&nbsp;
<span class="re0">$listenerPort</span> <span class="sy0">=</span> <span class="st0">&quot;10000&quot;</span> <span class="co1"># Listener port. Same as the endpoint port.</span>
&nbsp;
 
&nbsp;
<span class="re0">$aglistener</span> <span class="sy0">=</span> <span class="re0">$ag</span> <span class="sy0">+</span> <span class="st0">&quot;Listener&quot;</span>
&nbsp;
<span class="re0">$agendpoint</span> <span class="sy0">=</span> <span class="br0">&#40;</span>Resolve<span class="sy0">-</span>DnsName <span class="kw5">-Name</span> <span class="st0">&quot;$serviceName.cloudapp.net&quot;</span><span class="br0">&#41;</span>.IPAddress
&nbsp;
Import<span class="sy0">-</span>Module FailoverClusters
&nbsp;
<span class="co1"># Add IP address resource for the listener to AG resource group. The probe port is set so the AG owner node will respond to probes from Windows Azure.</span>
&nbsp;
Add<span class="sy0">-</span>ClusterResource <span class="st0">&quot;IP Address $agendpoint&quot;</span> <span class="sy0">-</span>ResourceType <span class="st0">&quot;IP Address&quot;</span> <span class="sy0">-</span><span class="kw2">Group</span> <span class="re0">$ag</span> <span class="sy0">|</span> Set<span class="sy0">-</span>ClusterParameter <span class="sy0">-</span>Multiple <span class="sy0">@</span><span class="br0">&#123;</span><span class="st0">&quot;Address&quot;</span><span class="sy0">=</span><span class="st0">&quot;$agendpoint&quot;</span>;<span class="st0">&quot;ProbePort&quot;</span><span class="sy0">=</span><span class="st0">&quot;59999&quot;</span>;SubnetMask<span class="sy0">=</span><span class="st0">&quot;255.255.255.255&quot;</span>;<span class="st0">&quot;Network&quot;</span><span class="sy0">=</span><span class="st0">&quot;$networkName&quot;</span>;<span class="st0">&quot;OverrideAddressMatch&quot;</span><span class="sy0">=</span><span class="nu0">1</span>;<span class="st0">&quot;EnableDhcp&quot;</span><span class="sy0">=</span><span class="nu0">0</span><span class="br0">&#125;</span>
&nbsp;
<span class="co1"># Add Network Name resource for the listener to AG resource group</span>
&nbsp;
Add<span class="sy0">-</span>ClusterResource <span class="kw5">-Name</span> <span class="re0">$aglistener</span> <span class="sy0">-</span>ResourceType <span class="st0">&quot;Network Name&quot;</span> <span class="sy0">-</span><span class="kw2">Group</span> <span class="re0">$ag</span> <span class="sy0">|</span> Set<span class="sy0">-</span>ClusterParameter <span class="sy0">-</span>Multiple <span class="sy0">@</span><span class="br0">&#123;</span><span class="st0">&quot;Name&quot;</span><span class="sy0">=</span><span class="re0">$aglistener</span>;<span class="st0">&quot;DnsName&quot;</span><span class="sy0">=</span><span class="re0">$aglistener</span><span class="br0">&#125;</span>
&nbsp;
<span class="co1"># Set dependency for the Network Name resource on the IP address resource</span>
&nbsp;
Get<span class="sy0">-</span>ClusterResource <span class="kw5">-Name</span> <span class="re0">$aglistener</span> <span class="sy0">|</span> Set<span class="sy0">-</span>ClusterResourceDependency <span class="st0">&quot;[IP Address $agendpoint]&quot;</span>
&nbsp;
<span class="co1"># Start the listener resource</span>
&nbsp;
Start<span class="sy0">-</span>ClusterResource <span class="kw5">-Name</span> <span class="re0">$aglistener</span>
&nbsp;
<span class="co1"># Set dependency for the AG resource group on the listener's network name</span>
&nbsp;
Get<span class="sy0">-</span>ClusterResource <span class="kw5">-Name</span> <span class="re0">$ag</span> <span class="sy0">|</span> Set<span class="sy0">-</span>ClusterResourceDependency <span class="st0">&quot;[$aglistener]&quot;</span>
&nbsp;
<span class="co1"># Change port number on the listener to 1433</span>
&nbsp;
Set<span class="sy0">-</span>SqlAvailabilityGroupListener <span class="kw5">-Path</span> SQLSERVER:\SQL\<span class="re0">$env</span>:COMPUTERNAME\DEFAULT\AvailabilityGroups\<span class="re0">$ag</span>\AvailabilityGroupListeners\<span class="re0">$aglistener</span> <span class="sy0">-</span>Port $listenerPort</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse"> 
# Define variables

$ag = "SQLAG_DEV01" # The availability group name

$serviceName = "SQLDomain" # The cloud service name

$networkName = "Cluster Network 1" # The cluster network name, usually "Cluster Network 1" if the nodes are in the same subnet

$listenerPort = "10000" # Listener port. Same as the endpoint port.

 

$aglistener = $ag + "Listener"

$agendpoint = (Resolve-DnsName -Name "$serviceName.cloudapp.net").IPAddress

Import-Module FailoverClusters

# Add IP address resource for the listener to AG resource group. The probe port is set so the AG owner node will respond to probes from Windows Azure.

Add-ClusterResource "IP Address $agendpoint" -ResourceType "IP Address" -Group $ag | Set-ClusterParameter -Multiple @{"Address"="$agendpoint";"ProbePort"="59999";SubnetMask="255.255.255.255";"Network"="$networkName";"OverrideAddressMatch"=1;"EnableDhcp"=0}

# Add Network Name resource for the listener to AG resource group

Add-ClusterResource -Name $aglistener -ResourceType "Network Name" -Group $ag | Set-ClusterParameter -Multiple @{"Name"=$aglistener;"DnsName"=$aglistener}

# Set dependency for the Network Name resource on the IP address resource

Get-ClusterResource -Name $aglistener | Set-ClusterResourceDependency "[IP Address $agendpoint]"

# Start the listener resource

Start-ClusterResource -Name $aglistener

# Set dependency for the AG resource group on the listener's network name

Get-ClusterResource -Name $ag | Set-ClusterResourceDependency "[$aglistener]"

# Change port number on the listener to 1433

Set-SqlAvailabilityGroupListener -Path SQLSERVER:\SQL\$env:COMPUTERNAME\DEFAULT\AvailabilityGroups\$ag\AvailabilityGroupListeners\$aglistener -Port $listenerPort</pre></div></div>

<p>Once the script executes successfully, test the listener by connecting to the listener name from SSMS on the primary SQL Server in the availability group.<br />
<a href="/wp-content/uploads/2014/09/azure_11.png"><img src="/wp-content/uploads/2014/09/azure_11.png" alt="azure_11" width="624" height="346" class="alignnone size-full wp-image-2956" srcset="/wp-content/uploads/2014/09/azure_11.png 624w, /wp-content/uploads/2014/09/azure_11-300x166.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a><br />
Within the Failover Cluster Manager, the cloud service IP should also be visible now, under the resources of the availability group role.<br />
<a href="/wp-content/uploads/2014/09/azure_12.png"><img src="/wp-content/uploads/2014/09/azure_12.png" alt="azure_12" width="624" height="350" class="alignnone size-full wp-image-2957" srcset="/wp-content/uploads/2014/09/azure_12.png 624w, /wp-content/uploads/2014/09/azure_12-300x168.png 300w" sizes="(max-width: 624px) 100vw, 624px" /></a><br />
At this point, a fully functional environment has been completed, with SQL Server availability groups and a functional listener.  When reviewing the steps and amount of work involved to get a test environment like this functional, there is a great deal of advantage to the rapid nature and value in savings.</p>
<p><strong>Summary</strong></p>
<p>The amount of time to setup this Azure driven environment compared to the amount of time it may have taken given a physical implementation, shows a great deal of value in the use of Azure for IaaS.  Even when utilizing on premise virtualization environments, there are still a great deal of savings from administration down to the power usage required.</p>
<p>Utilize the <a href="http://azure.microsoft.com/en-us/pricing/free-trial/">Azure trial subscription</a> credits to take advantage of setting this same environment up, become familiar with it, move to more advanced configurations in all the major components, and plan for how to best take advantage of the cloud services and savings they can bring.</p>
<div class='rp4wp-related-posts'>
<h3>Related Posts</h3>
<ul>
<li><div class='rp4wp-related-post-content'>
<a href='/index.php/datamgmt/dbadmin/acl-azure-availability-groups/'>ACL added security for Availability Group Listener in Azure</a><p>Prior to the release of supporting listeners for availability groups in Azure running Windows Server&hellip;</p></div>
</li>
<li><div class='rp4wp-related-post-content'>
<a href='/index.php/architect/availability-groups-setup-and-configuration-from-a-to-z/'> Availability Groups Setup and Configuration from A to Z</a><p>Availability Groups were introduced in SQL Server 2012 and have quickly become the forefront of&hellip;</p></div>
</li>
</ul>
</div>
</div>
				<div class="post-author">
					<div class="userInfo"><h2>About the Author</h2>Ted Krueger is a SQL Server MVP and Author that has been working in development and database administration and the owner of a successful consulting business, DataMetrics Consulting.  Specialties range from High Availability and Disaster / Recovery setup and testing methods down to custom assembly development for SQL Server Reporting Services.  Ted blogs and is also one of the founders of LessThanDot.com technology community.  Some of the articles focused on are Backup / Recovery, Security, SSIS and working on SQL Server and using all of the SQL Server features available to create stable and scalable database services.  <br style="clear: left" /><div class="bioSoc"><span class="bioSocTitle">Social Sitings</span><a href="http://twitter.com/onpnt" title="onpnt at Twitter" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_twitter.png" alt="Twitter" /></a><a href="http://www.facebook.com/profile.php?id=https://www.facebook.com/onpntfirearms" title="onpnt at Facebook" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_facebook.png" alt="Facebook" /></a><a href="http://www.linkedin.com/pub/ted-krueger/2/183/b66" title="onpnt at LinkedIn" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_linkedin.png" alt="LinkedIn" /></a><a href="http://www.datametricsconsulting.com/" title="onpnt at HomePage" class="bioSocLink" rel="author"><img src="http://lessthandot.com/images/bdg_homepage.png" alt="HomePage" /></a><a href="/index.php/author/onpnt/feed/" title="Blog RSS feed for onpnt" class="bioSocLink"><img src="http://lessthandot.com/images/bdg_rss_icon.png" alt="LTD RSS Feed" /></a></div></div>				</div>
				<div class="post-foot instapaper_ignore">
					<div class="post-tagline">
						<div class="post-foot-views"><label>Article views:</label> 5,942 </div>
						<div class="post-foot-more-posts">
                            <a href="/index.php/author/onpnt/">Read More Posts by Ted Krueger (onpnt)</a>
						</div>
					</div>
					<div>
						 
					</div>
					<div class="post-tagline" style="height: auto">
						<span class="social-button-label">Share:</span><a href="https://twitter.com/intent/tweet?url=/index.php/uncategorized/setup-iaas-in-azure-for-sql-server/&text=RT @LessThanDot Blog - Setup IaaS in Azure for SQL Server by @onpnt" class="twitter-share-button-static" target="_blank"><i></i><span class="label">Tweet</span></a><a href="http://www.linkedin.com/shareArticle?mini=true&url=/index.php/uncategorized/setup-iaas-in-azure-for-sql-server/&title=Setup IaaS in Azure for SQL Server&source=/index.php/uncategorized/setup-iaas-in-azure-for-sql-server/" target="_blank" title="Share on LinkedIn" class="svg-button"><img alt="Share on LinkedIn"  src="http://lessthandot.com/images/LinkedIn.svg" /></a><a href="http://www.reddit.com/submit?url=/index.php/uncategorized/setup-iaas-in-azure-for-sql-server/&title=Setup IaaS in Azure for SQL Server" target="_blank" title="Submit to Reddit" class="svg-button"><img alt="Submit to Reddit" src="http://lessthandot.com/images/Reddit.svg" /></a><a href="https://www.facebook.com/sharer/sharer.php?u=/index.php/uncategorized/setup-iaas-in-azure-for-sql-server/&quote=Setup IaaS in Azure for SQL Server" title="Share on Facebook" target="_blank" class="svg-button"><img alt="Share on Facebook" src="http://lessthandot.com/images/Facebook.svg" /></a> <a href="http://www.instapaper.com/hello2?url=/index.php/uncategorized/setup-iaas-in-azure-for-sql-server/&title=Setup IaaS in Azure for SQL Server" class="instapaper_button">Instapaper</a>					</div>			
				</div>
				<div class="comments-area instapaper_ignore">
	<h4 class="comments-title">
		2 Comments	</h4>
			<ol class="comments-list">
					<li class="comment even thread-even depth-1 parent" id="comment-2377426">
				<div id="div-comment-2377426" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/7daed90f1f8c39681630400635b948d2?s=64&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/7daed90f1f8c39681630400635b948d2?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Jamie</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/uncategorized/setup-iaas-in-azure-for-sql-server/#comment-2377426">
			October 31, 2014 at 12:28 pm</a>		</div>

		<p>Hi,</p>
<p>Thanks for the article.  Very informative.  I cam accross it having struggled with the MS Listener Tutorial.  <a href="http://msdn.microsoft.com/en-us/library/azure/dn425027.aspx" rel="nofollow">http://msdn.microsoft.com/en-us/library/azure/dn425027.aspx</a></p>
<p>I have tried running your script and am still having the same problems.  I was wondering if you have any suggestions.</p>
<p>I am only able to connect to the listener from the Primary server in the availability group.  I took not you said it was not possible to connect from the secondary node.  </p>
<p>I tried from a web server and was able to connect either.  Windows FWALL off all sql network protocols enabled.</p>
<p>If it helps there are no dependencies listed under the listener IP.  is this correct?</p>
<p>Thanks for any suggestions.<br />
Jamie.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/uncategorized/setup-iaas-in-azure-for-sql-server/?replytocom=2377426#respond' onclick='return addComment.moveForm( "div-comment-2377426", "2377426", "respond", "2942" )' aria-label='Reply to Jamie'>Reply</a></div>
				</div>
		<ol class="children">
		<li class="comment odd alt depth-2" id="comment-2497139">
				<div id="div-comment-2497139" class="comment-body">
				<div class="comment-author vcard">
			<img alt='' src='http://1.gravatar.com/avatar/7daed90f1f8c39681630400635b948d2?s=64&#038;d=mm&#038;r=g' srcset='http://1.gravatar.com/avatar/7daed90f1f8c39681630400635b948d2?s=128&amp;d=mm&amp;r=g 2x' class='avatar avatar-64 photo' height='64' width='64' />			<cite class="fn">Jamie</cite> <span class="says">says:</span>		</div>
		
		<div class="comment-meta commentmetadata"><a href="/index.php/uncategorized/setup-iaas-in-azure-for-sql-server/#comment-2497139">
			November 7, 2014 at 9:21 am</a>		</div>

		<p>I can reply to myself as i found out the answer myself. 🙂<br />
I was unable to connect to the listener from any machines in the save cloud service.  it has to be in a defferent one.  to test this i needed to create a new machine in a different service.  it worked.  This means any web servers etc need to be in a different cloud service.  Took a long time to find somthing simple out.</p>

		<div class="reply"><a rel='nofollow' class='comment-reply-link' href='/index.php/uncategorized/setup-iaas-in-azure-for-sql-server/?replytocom=2497139#respond' onclick='return addComment.moveForm( "div-comment-2497139", "2497139", "respond", "2942" )' aria-label='Reply to Jamie'>Reply</a></div>
				</div>
		</li><!-- #comment-## -->
</ol><!-- .children -->
</li><!-- #comment-## -->
		</ol>
						<div id="respond" class="comment-respond">
			<h3 id="reply-title" class="comment-reply-title">Leave a Reply <small><a rel="nofollow" id="cancel-comment-reply-link" href="/index.php/uncategorized/setup-iaas-in-azure-for-sql-server/#respond" style="display:none;">Cancel reply</a></small></h3>				<form action="/wp-comments-post.php" method="post" id="commentform" class="comment-form">
					<p class="comment-notes"><span id="email-notes">Your email address will not be published.</span> Required fields are marked <span class="required">*</span></p><p class="comment-form-comment"><label for="comment">Comment</label> <textarea id="comment" name="comment" cols="45" rows="8" maxlength="65525" aria-required="true" required="required"></textarea></p><p class="comment-form-author"><label for="author">Name <span class="required">*</span></label> <input id="author" name="author" type="text" value="" size="30" maxlength="245" aria-required='true' required='required' /></p>
<p class="comment-form-email"><label for="email">Email <span class="required">*</span></label> <input id="email" name="email" type="text" value="" size="30" maxlength="100" aria-describedby="email-notes" aria-required='true' required='required' /></p>
<p class="comment-form-url"><label for="url">Website</label> <input id="url" name="url" type="text" value="" size="30" maxlength="200" /></p>
<p class="form-submit"><input name="submit" type="submit" id="submit" class="submit" value="Post Comment" /> <input type='hidden' name='comment_post_ID' value='2942' id='comment_post_ID' />
<input type='hidden' name='comment_parent' id='comment_parent' value='0' />
</p><input type="hidden" id="killer_value" name="killer_value" value="fe9fc289c3ff0af142b6d3bead98a923"/><noscript>Sorry, but you are required to use a javascript enabled brower to comment here.</noscript>				</form>
					</div><!-- #respond -->
		</div>			</div>
				<br style="clear: both;" />
</div>
		</div>
		<div id="page-footer">
			<div id="botnav"><a href="http://lessthandot.com/" title="LessThanDot Launchpad">Launchpad</a> | <a href="http://lessthandot.com/account.php" title="Your Account Settings">My Account</a> | <a href="http://lessthandot.com/statistics.php" title="Statistics">Statistics</a> | <a href="http://lessthandot.com/donate.php" title="Donate">Donate</a> | <a href="http://lessthandot.com/contactus.php" title="Contact Us">Contact Us</a> | <a href="http://lessthandot.com/aboutus.php" title="About the LessThanDot Team">&copy;2008 - 2019 LessThanDot, LLC</a></div>

		<script type='text/javascript'>
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-4471405-1']);
		_gaq.push(['_trackPageview']);
		_gaq.push(['_setCustomVar', 1, 'Environment', 'lessthandot.com', 3]);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	  </script>			<div class="validator"><a href="http://validator.w3.org/check?uri=referer">Valid XHTML</a> | <a href="http://jigsaw.w3.org/css-validator/check/referer" title="Validate the CSS for this page at the W3C website">Valid CSS</a> | 2018-11-11 15:52</div>
		</div>
	</div>
</div>
<!-- <script type="text/javascript" src="http://apis.google.com/js/plusone.js"></script> -->
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.6.1'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var spam_destroyer = {"key":"159ff9dcc225580310c2de238cdd1f1a","lifetime":"3600","limit":"1552765718"};
/* ]]> */
</script>
<script type='text/javascript' src='/wp-content/plugins/spam-destroyer/kill.js?ver=1.2'></script>
</body>
</html>
