<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>webmatrix &#8211; LessthanDot</title>
	<atom:link href="/index.php/tag/webmatrix/feed/" rel="self" type="application/rss+xml" />
	<link>/</link>
	<description>A Technical Community for IT Professionals</description>
	<lastBuildDate>Sat, 09 Mar 2019 12:50:36 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=4.6.1</generator>
	<item>
		<title>&#8216;LocalSqlServer&#8217; Error Deploying WebSecurity in WebMatrix/Web Pages</title>
		<link>/index.php/webdev/serverprogramming/localsqlserver-error-deploying-websecurity/</link>
		<comments>/index.php/webdev/serverprogramming/localsqlserver-error-deploying-websecurity/#respond</comments>
		<pubDate>Tue, 09 Aug 2011 10:52:00 +0000</pubDate>
		<dc:creator><![CDATA[Eli Weinstock-Herman (tarwn)]]></dc:creator>
				<category><![CDATA[Server Programming]]></category>
		<category><![CDATA[error]]></category>
		<category><![CDATA[razor]]></category>
		<category><![CDATA[web pages]]></category>
		<category><![CDATA[webmatrix]]></category>
		<category><![CDATA[websecurity]]></category>

		<guid isPermaLink="false">/index.php/2011/08/localsqlserver-error-deploying-websecurity/</guid>
		<description><![CDATA[Several weeks ago I was working on a sample site in Web Matrix and ran into a brick wall when I attempted to implement WebSecurity against my website. It seemed no matter what I tried I was getting errors about my database, errors about a database I didn't know about, errors trying to deploy the config file at all.]]></description>
				<content:encoded><![CDATA[<p>Several weeks ago I was working on a sample site in Web Matrix and ran into a brick wall when I attempted to implement WebSecurity against my website. It seemed no matter what I tried I was getting errors about my database, errors about a database I didn&#8217;t know about, errors trying to deploy the config file at all. After hours of debugging and random attempts at web.config hackery, I finally tried the basic starter sites and found out that those, too, suffered from problems when you attempt to deploy them.</p>
<blockquote><p>
<strong>Configuration Error</strong><br />
<strong>Description:</strong> An error occurred during the processing of a configuration file required to service this request. Please review the specific error details below and modify your configuration file appropriately.</p>
<p><strong>Parser Error Message:</strong> The connection name &#8216;LocalSqlServer&#8217; was not found in the applications configuration or the connection string is empty.
</p></blockquote>
<p>Today I managed to solve it based on an <a href="http://forum.winhost.com/archive/index.php/t-8697.html">archived forum post</a> I found through google. </p>
<p>The solution is to add the following section to your web.config:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="xml"><thead><tr><td colspan="2"  class="head">XML</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
</pre></td><td class="de1"><pre class="de1"><span class="sc-1">&lt;!-- Added in an attempt to make simple security work --&gt;</span>
<span class="sc3"><span class="re1">&lt;connectionStrings<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;remove</span> <span class="re0">name</span>=<span class="st0">&quot;LocalSqlServer&quot;</span> <span class="re2">/&gt;</span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;add</span> <span class="re0">name</span>=<span class="st0">&quot;LocalSqlServer&quot;</span> <span class="re0">connectionString</span>=<span class="st0">&quot;Data Source=.App_DataMyJunk.sdf&quot;</span> <span class="re0">providerName</span>=<span class="st0">&quot;System.Data.SqlServerCe.4.0&quot;</span> <span class="re2">/&gt;</span></span>
<span class="sc3"><span class="re1">&lt;/connectionStrings<span class="re2">&gt;</span></span></span>
<span class="sc3"><span class="re1">&lt;appSettings<span class="re2">&gt;</span></span></span>
&nbsp; &nbsp; <span class="sc3"><span class="re1">&lt;add</span> <span class="re0">key</span>=<span class="st0">&quot;enableSimpleMembership&quot;</span> <span class="re0">value</span>=<span class="st0">&quot;true&quot;</span> <span class="re2">/&gt;</span></span>
<span class="sc3"><span class="re1">&lt;/appSettings<span class="re2">&gt;</span></span></span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">&lt;!-- Added in an attempt to make simple security work --&gt;
&lt;connectionStrings&gt;
	&lt;remove name="LocalSqlServer" /&gt;
	&lt;add name="LocalSqlServer" connectionString="Data Source=.App_DataMyJunk.sdf" providerName="System.Data.SqlServerCe.4.0" /&gt;
&lt;/connectionStrings&gt;
&lt;appSettings&gt;
	&lt;add key="enableSimpleMembership" value="true" /&gt;
&lt;/appSettings&gt;</pre></div></div>

<p>Basically what is happening is that my web host has a machine.config with a SQL Connection string called &#8220;LocalSqlServer&#8221; (it&#8217;s created by default by the .Net framework). For some reason when we use anything Membership related, it attempts to access the configured connection string for Membership, even though WebSecurity is provided it&#8217;s own connection string on initialization.</p>
<p>So the solution is to remove the settings that has been applied to our site from the host&#8217;s machine.config and apply a new one. From what I can tell, it doesn&#8217;t seem to matter if the new connection string is accurate, only that it exists.</p>
<p>Yep, this means I don&#8217;t actually have a SQLCE database named, MyJunk. I can tell you&#8217;re disappointed. Also I don&#8217;t know if ./ would work in this path, so please don&#8217;t use this as a how-to guide on how to create a working SQLCE connection string.</p>
]]></content:encoded>
			<wfw:commentRss>/index.php/webdev/serverprogramming/localsqlserver-error-deploying-websecurity/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>WebMatrix &#8211; Routing and Magic Pages</title>
		<link>/index.php/webdev/serverprogramming/aspnet/webmatrix-routing-and-magic-pages/</link>
		<comments>/index.php/webdev/serverprogramming/aspnet/webmatrix-routing-and-magic-pages/#comments</comments>
		<pubDate>Thu, 07 Jul 2011 09:42:00 +0000</pubDate>
		<dc:creator><![CDATA[Eli Weinstock-Herman (tarwn)]]></dc:creator>
				<category><![CDATA[ASP.NET]]></category>
		<category><![CDATA[razor]]></category>
		<category><![CDATA[webmatrix]]></category>

		<guid isPermaLink="false">/index.php/2011/07/webmatrix-routing-and-magic-pages/</guid>
		<description><![CDATA[So I've been working on a practice site using WebMatrix. The basic premise was that I would create a site that had some similar functionality to Delicious to help me track the various articles, podcasts, books, and so on. This would also give me something practical to work on as I try to get a handle on this whole WebMatrix thing.]]></description>
				<content:encoded><![CDATA[<p>So I&#8217;ve been working on a practice site using WebMatrix. The basic premise was that I would create a site that had some similar functionality to Delicious to help me track the various articles, podcasts, books, and so on. This would also give me something practical to work on as I try to get a handle on this whole WebMatrix thing.</p>
<p>So here&#8217;s a couple tips, tricks, and the occasional slip in the mud I picked up along the way.</p>
<p>Chrissie started us off with <a href="/index.php/WebDev/UIDevelopment/AJAX/trying-out-webmatrix-and-razor" title="Chissie on Trying Out Webmatrix and Razor">this post</a>, so I&#8217;m skipping right past the making of files and digging into the first layer of how things work (and/or how I broke them).</p>
<p><i>Note: I know in my <a href="/index.php/WebDev/ServerProgramming/the-many-functions-of-webmatrix" title="Read the Webmatrix Overview post">last post</a> I said the application was WebMatrix and the programming framework was WebPages, but no one calls it WebPages (apparently that name is hard to search for or something), so for the remainder of this post I&#8217;ll call it WebMatrix. Feel free to call me names later.</i></p>
<h2>Magic Routing</h2>
<p>The first problem I had when I deployed my site to a live host was getting the darn pages to work. No matter how I typed the paths, the cshtml pages wouldn&#8217;t stop reporting a 404. So of course I started digging into the IIS settings. And fixed the meta settings. And fixed the extension. And fixed something else. And then found out I wasn&#8217;t supposed to fix it and the real problem was the guy sitting behind my keyboard typing instead of reading the manual. Oops.</p>
<p>When we build a razor site (or is it a WebPages site? WebMatrix site? argh&#8230;), it takes advantage of additions in the 4.0 Framework to provide routing automatically. Every cshtml file we create automatically becomes part of the route check when a request comes into IIS. This is similar to the ASP.Net MVC routing, but instead requires no up front work, running 100% on pixie dust.</p>
<p>Say I ask for http://MyAwesomeSite.com/blueberries/and/cream. Note that we don&#8217;t include the .cshtml extension. Behind the scenes, my webserver basically has this conversation with itself:</p>
<blockquote><p>
Do I have a file named /blueberries/and/cream.cshtml?<br />
No.<br />
How about /blueberries/and.cshtml?<br />
Nope.<br />
How about /blueberries.cshtml?<br />
Nope.<br />
Maybe there was a default file at the root level?<br />
Ah, ok.<br />
Are you busy tomorrow night&#8230;<br />
Yep.<br />
Oh&#8230;er, ok, well here&#8217;s your file then.
</p></blockquote>
<p>The most specific file match wins, without the need for setting up routing ahead of time. Simply drop an appropriately named file in a folder and point an href at it. </p>
<p>Any trailing portion of the URL is then stored in an array for easy access (which we will see later). What this allows us to do is create very easy, semantic URLs. </p>
<p>Example: my application will show me the list of all activities when I go to http://notmyrealurl.com/Activities but will filter the list for the &#8220;razor&#8221; tag when I go to http://notmyrealurl.com/Activities/razor.</p>
<p>The exception is files that begin with underscores. Underscored files are not accessible, as they are used to protect our Magic Files in the next section.</p>
<h2>Magic Pages</h2>
<p>Ok, so this part I&#8217;m less enamored of, but there are some good parts. There are two classes of special files in WebMatrix, layout files and lifecycle pages. </p>
<h3>Layout Files</h3>
<p>Layout files allow us to define a common layout that we want to apply to our website, basically a template or master file. Inside the layout file we can define where we want the main body to be rendered (the file that was requested), as well as additional required or optional sections the original page needs to provide. A minimal layout file would look something like this:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="text"><thead><tr><td colspan="2"  class="head">Text</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="de1"><pre class="de1">&lt;!DOCTYPE html&gt;
&lt;html&gt;
&nbsp; &lt;head&gt;
&nbsp; &nbsp; &lt;title&gt; @PageData[&quot;Title&quot;] &lt;/title&gt;
&nbsp; &lt;/head&gt;
&nbsp; &lt;body&gt;
&nbsp; &nbsp; @RenderPage(&quot;~/Shared/_Header.cshtml&quot;)
&nbsp; &nbsp; &lt;div id=&quot;sidepane&quot;&gt;
&nbsp; &nbsp; &nbsp; &nbsp; @RenderSection(&quot;SidePane&quot;, required: false)
&nbsp; &nbsp; &lt;/div&gt;
&nbsp; &nbsp; &lt;div id=&quot;main&quot;&gt;
&nbsp; &nbsp; &nbsp; @RenderBody()
&nbsp; &nbsp; &lt;/div&gt;
&nbsp; &nbsp; &lt;/div&gt;
&nbsp; &nbsp; @RenderPage(&quot;~/Shared/_Footer.cshtml&quot;)
&lt;/body&gt;
&lt;/html&gt;</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
	&lt;title&gt; @PageData["Title"] &lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
	@RenderPage("~/Shared/_Header.cshtml")
	&lt;div id="sidepane"&gt;
		@RenderSection("SidePane", required: false)
	&lt;/div&gt;
	&lt;div id="main"&gt;
	  @RenderBody()
	&lt;/div&gt;
	&lt;/div&gt;
	@RenderPage("~/Shared/_Footer.cshtml")
&lt;/body&gt;
&lt;/html&gt;</pre></div></div>

<p>A basic page that includes a header file, an optional section named &#8220;SidePane&#8221;, and body of the original page, and finally an included footer file. In this sample I am keeping my _Header, _Footer, and _MainLayout files in a subfolder called Shared. To use this layout, I could make a sample page like this:</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="text"><thead><tr><td colspan="2"  class="head">Text</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
</pre></td><td class="de1"><pre class="de1">@{
Layout = &quot;~/Shared/_MainLayout.cshtml&quot;;
PageData[&quot;Title&quot;] = &quot;My Awesome Hello World&quot;;
}
&lt;b&gt;&lt;blink&gt;This stuff is in my main body, Hello!&lt;/blink&gt;&lt;/b&gt;</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">@{
Layout = "~/Shared/_MainLayout.cshtml";
PageData["Title"] = "My Awesome Hello World";
}
&lt;b&gt;&lt;blink&gt;This stuff is in my main body, Hello!&lt;/blink&gt;&lt;/b&gt;</pre></div></div>

<p>And if I wanted to both show off the presence of any extra URL data you put in the URL as well as the optional sidepane?</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="text"><thead><tr><td colspan="2"  class="head">Text</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="de1"><pre class="de1">@{
Layout = &quot;~/Shared/_MainLayout.cshtml&quot;;
PageData[&quot;Title&quot;] = &quot;My Awesome Hello World&quot;;
}
&lt;b&gt;&lt;blink&gt;This stuff is in my main body, Hello!&lt;/blink&gt;&lt;/b&gt;
&nbsp;
@section SidePane{
&nbsp; &nbsp; @if(UrlData.Count &gt; 0){
&nbsp; &nbsp; &nbsp; &nbsp; &lt;text&gt;
&nbsp; &nbsp; &nbsp; &nbsp; &lt;marquee&gt;Bam!&lt;/marquee&gt;
&nbsp; &nbsp; &nbsp; &nbsp; First one: @UrlData[0]&lt;br/&gt;
&nbsp; &nbsp; &nbsp; &nbsp; All of them: @(String.Join(&quot;,&quot;,UrlData))&lt;br/&gt;
&nbsp; &nbsp; &nbsp; &nbsp; &lt;/text&gt;
&nbsp; &nbsp; }
}</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">@{
Layout = "~/Shared/_MainLayout.cshtml";
PageData["Title"] = "My Awesome Hello World";
}
&lt;b&gt;&lt;blink&gt;This stuff is in my main body, Hello!&lt;/blink&gt;&lt;/b&gt;

@section SidePane{
	@if(UrlData.Count &gt; 0){
        &lt;text&gt;
		&lt;marquee&gt;Bam!&lt;/marquee&gt;
        First one: @UrlData[0]&lt;br/&gt;
        All of them: @(String.Join(",",UrlData))&lt;br/&gt;
        &lt;/text&gt;
	}
}</pre></div></div>

<p>Yeah, I just used a blink and a marquee, that&#8217;s how exciting this part is. You&#8217;ll notice I also put a value in the PageData dictionary at the top of the page, which was then regurgitated by the layout and used as the title. When files are being rendered or included, they receive a copy of the PageData and can access the values we squirreled away. Handy.</p>
<p>There&#8217;s also a Page dynamic property in WebBasePage that we can assign stuff to. So far that hasn&#8217;t blown up in my face.</p>
<p>If I think back to the classic ASP days I can remember a time when we desperately wanted this type of functionality. A clean, straightforward way to define some sitewide layout templates separately from our actual page, and here it is. It&#8217;s like ASP 4.0.</p>
<p>And I only just now noticed that interesting conjunction in ASP and ASP.Net numbering schemes, hmm.</p>
<h3>Lifecycle Pages</h3>
<p>Then there are the lifecycle pages. Where layout files give us a handy way to do templating, these provide us some basic global capabilities for the site. There are three main files that we are concerned with:</p>
<dl>
<dt>~/web.config</dt>
<dd>This holds configurations for the site, like any ASP.Net site</dd>
<dt>~/_AppStart.cshtml</dt>
<dd>Contains logic to run the first time any page is requested from the site</dd>
<dt>~/_PageStart.cshtml</dt>
<dd>Contains logic to run when a page in the current or child directory is requested</dd>
</dl>
<p>AppStart is handy for setting values or creating objects that will have global application scope. For example, when using the SimpleSecurity helpers, you will want to put an initialization call here to initialize the authentication system. </p>
<p><i>And if you are me you will comment them out when you find out your webhosts machine.config fubars settings relevant to ASP.Net membership.</i></p>
<p>PageStart is trickier in a couple ways. First, PageStart is a bit of a misnomer. It does execute at the start of the page, but it can also be convinced  to encapsulate the execution of the requested page, running both before and after the main page is rendered. </p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="text"><thead><tr><td colspan="2"  class="head">Text</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
</pre></td><td class="de1"><pre class="de1">@{
&nbsp; &nbsp; &lt;b&gt;I'm Before&lt;/b&gt;
&nbsp; &nbsp; RunPage();
&nbsp; &nbsp; &lt;text&gt;I'm after&lt;/text&gt;
}</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">@{
    &lt;b&gt;I'm Before&lt;/b&gt;
    RunPage();
    &lt;text&gt;I'm after&lt;/text&gt;
}</pre></div></div>

<p>If you specifically include the RunPage() line, then your page will be run in between the code above and below it. If you don&#8217;t include this directive then the entire PageStart file will be run before calling the requested page.</p>
<p>The next trick is that _PageStart runs in a nested sequence from the root level to the level of the file that has been requested. Basically the engine traverses each directory from the root to the folder your requested file is in and, if a _PageStart file is present, executes it. It&#8217;s similar to those nesting dolls (or recursion, oohh).</p>
<p>But the magic is not done yet, and this was one of those pits of mud I fell into.</p>
<p>Even though you can wrap the execution of the page inside a _PageStart, the execution of the page and PageStart finish before the Layout is applied and executed.</p>
<p>Lets try that again (I lost 2 hours of my life to this feature).</p>
<p>Say we have a _PageStart that wraps around the RunPage call, a Main page, and a referenced _LayoutMain file and we request http://myevilpitofmud.com/Main. The execution would look like:</p>
<ol>
<li>Top part of _PageStart</li>
<li>Main file</li>
<li>Bottom part of _PageStart</li>
<li>Layout file</li>
</ol>
<p>Yeah.</p>
<h2>But what else did you do?</h2>
<p>There&#8217;s more. I&#8217;ve spent 17 hours on my sample site so far, which includes implementing a SQL Compact database, implementing and removing WebSecurity authentication, and a score of other things. I&#8217;ve found out the hard way that getting fancy can bite you and that it is actually possible to install a 10 inch tailpipe on the WebMatrix hatchback (which I just realized could refer to two different things I&#8217;ve done, hmmm, tailpipe and a <strike>shopping cart handle</strike> spoiler then). </p>
<p>Unfortunately because I had issues with the authentication I can&#8217;t post a live link yet, the next post will have to cover all the fun that has gone into trying to get a certified host for WebMatrix to run correctly (hint, not all <a href="http://www.microsoft.com/web/hosting/home" title="See hosting options at Microsoft">&#8216;SpotLight&#8217; hosts</a> can run the included, basic example sites).</p>
]]></content:encoded>
			<wfw:commentRss>/index.php/webdev/serverprogramming/aspnet/webmatrix-routing-and-magic-pages/feed/</wfw:commentRss>
		<slash:comments>1</slash:comments>
		</item>
		<item>
		<title>The Many Functions of WebMatrix</title>
		<link>/index.php/webdev/serverprogramming/the-many-functions-of-webmatrix/</link>
		<comments>/index.php/webdev/serverprogramming/the-many-functions-of-webmatrix/#respond</comments>
		<pubDate>Thu, 23 Jun 2011 11:42:00 +0000</pubDate>
		<dc:creator><![CDATA[Eli Weinstock-Herman (tarwn)]]></dc:creator>
				<category><![CDATA[ASP.NET]]></category>
		<category><![CDATA[Classic ASP]]></category>
		<category><![CDATA[Server Programming]]></category>
		<category><![CDATA[asp.net]]></category>
		<category><![CDATA[razor]]></category>
		<category><![CDATA[webmatrix]]></category>

		<guid isPermaLink="false">/index.php/2011/06/the-many-functions-of-webmatrix/</guid>
		<description><![CDATA[Several weeks ago I started digging into WebMatrix. Over the course of a weekend I was able to put together a quick, functioning website, pick up some basics of working with WebMatrix and the deployment tool, and play with a few other technologies as well. Then I stepped back and realized I was only using a percentage of it's capabilities.]]></description>
				<content:encoded><![CDATA[<p>Several weeks ago I started digging into WebMatrix. Over the course of a weekend I was able to put together a quick, functioning website, pick up some basics of working with WebMatrix and the deployment tool, and play with a few other technologies as well. Then I stepped back and realized I was only using a percentage of it&#8217;s capabilities.</p>
<p>I&#8217;ve read a lot of blogs and articles on Web Matrix and none of them prepared me for the sheer range of capabilities this little tool offers. One would mention writing a web page, another would talk about deployment, a third about WordPress&#8230;it wasn&#8217;t until I started playing with it and went to write a blog entry of my own that I realized how much capability was packed into this one &#8216;little&#8217; tool. </p>
<p>This isn&#8217;t a deep dive, there&#8217;s plenty of those. This is a shallow float across the surface of what is actually a quite impressive (and don&#8217;t forget free) tool.</p>
<h2>What is WebMatrix?</h2>
<p>WebMatrix is a free web development tool from Microsoft that helps you create and publish websites.</p>
<p>So is it a tool? A set of templates? A language? A publication engine?</p>
<p>Yes.</p>
<p>And an IIS express manager, database configurator, generator of CMS-driven sites &#8230;The kitchen sink is in there somewhere.</p>
<h2>Building Sites</h2>
<p>WebMatrix works around the concept of a Site. A site can start as an entry in the gallery of pre-built packages or as a template and/or blank code files. </p>
<div style="border: 1px solid #AAAAAA; font-size: 80%; color: #666666; text-align: center; padding: 8px; margin: 8px;">
<img src="http://tiernok.com/LTDBlog/webmatrix/WebGallery.png" alt="Web Gallery" style="padding-bottom: 5px;" /><br />
Web Gallery in Web Matrix
</div>
<p>The Gallery option presents a list of 52 CMS, blogging, eCommerce, (the list goes on) packages that can be installed simply by selectig them. If I select the WordPress option, WebMatrix detects that I don&#8217;t have MyQSL installed and asks if I want to install it or have access to a remote installation. Other gallery options offer similar interactions for their own requirements, with the goal being a completely running system in only a few clicks. In the case of WordPress it will also detect whether you have PHP installed (more on that later) and install that as well.</p>
<div style="border: 1px solid #AAAAAA; font-size: 80%; color: #666666; text-align: center; padding: 8px; margin: 8px;">
<img src="http://tiernok.com/LTDBlog/webmatrix/Installing.png" alt="WordPress Install" style="padding-bottom: 5px;" /><br />
Installing WordPress
</div>
<p>With a download, a few button clicks, administrative permissions, and entry of some basic settings, I just installed a fully customizeable version of WordPress. Which is really cool, but also kind of scary if you think about how little technical knowledge I really needed and that there are dozens of other packages available.</p>
<p><em>Note: it was at this point I noticed my MySQL installation was annoyed and not running properly, leaving me stuck partway on the WordPress Install. So a big YMMV may be necessary here, as it seems my skill at causing things to break has managed to break yet another &#8220;Next, Next, Next&#8221; wizardy dialog.</em></p>
<p><strong>More Depth:</strong> <a href="http://drewby.com/a-wordpress-blog-in-15-minutes-with-webmatrix" title="A WordPress Blog in 15 Minutes with WebMatrix">A WordPress Blog in 15 Minutes with WebMatrix</a></p>
<h2>Building Sites &#8211; But Wait, There&#8217;s More</h2>
<p>Ok, so what if we want to build our own site?</p>
<div style="border: 1px solid #AAAAAA; font-size: 80%; color: #666666; text-align: center; padding: 8px; margin: 8px;">
<img src="http://tiernok.com/LTDBlog/webmatrix/SiteFromTemplate.png" alt="Creating Site From Template" style="padding-bottom: 5px;" /><br />
Creating Site from Template
</div>
<p>The other side of the Site creation process is the option to create one from a template. This offers five options ranging from &#8220;Empty Site&#8221; to &#8220;Start Site and even &#8220;Bakery&#8221;. If you start with one of the non-Empty sites you will be given all the files and folders for a fully functioning site. These sites are based on the new WebPages framework and written in the C#-style razor syntax. The WebPages framework was released in conjunction with WebMatrix and joins Web Forms and MVC as an available ASP.Net framework.</p>
<p>If we select the empty site option we&#8217;ll be presented with one lonely little robots.txt file and an empty folder. The interesting part is what happens when we ask to add a file. We receive a file creation dialog (which should be familiar to Visual Studio users) and, given what I have seen so far and my Visual Studio background, I expect a list of CSHTML files, CSS, and maybe a JS or HTML. </p>
<p>Nope.</p>
<p>HTML, CSS, JScript, and CSHTML are present, but so are (huge breath): VBHTML, 2 ASPX&#8217;s (VB + C#), Classic ASP, PHP, TXT, XML, 2 Class Files (VB + C#), 3 Global ASA[X]&#8217;s, 3 Master Pages, SQL, User Controls (VB + C#), and 4 web configs (.Net 2, 3, 3.5, 4).</p>
<p>The CSHTML and VBHTML options are using the new <a href="http://weblogs.asp.net/scottgu/archive/2010/07/02/introducing-razor.aspx" title="Razor engine announcement">razor engine</a> and this is the most commonly documented option both on the <a href="http://www.asp.net/web-pages" title="Resources at ASP.Net">ASP.Net website</a> and in blogs. The PHP option offers you a choice between installation of PHP 5.2 and 5.3 (enable it in IIS by checking the lonely PHP checkbox in the IIS/site settings) and away we go with some PHP-ing. </p>
<p>And to be honest I haven&#8217;t even had time to try the rest, but they all seem fairly self-explanatory and, if I could get PHP running in a new MS web tool in just a few moments, I don&#8217;t expect to see too many surprises from the cast of MS Web technologies. Although I do want to try the Classic ASP one, for nostalgia if nothing else.</p>
<p><strong>More Depth:</strong> <a href="http://www.asp.net/webmatrix/tutorials" title="WebMatrix Tutorials at ASP.net">Web Matrix Tutorials (CSHTML) at ASP.Net</a><br />
<strong>More Depth:</strong> <a href="http://blogs.msdn.com/b/brian_swan/archive/2010/07/12/creating-php-websites-with-webmatrix.aspx" title="Creating PHP Websites with WebMatrix">Creating PHP Websites with WebMatrix</a><br />
<strong>More Depth:</strong> <a href="/index.php/WebDev/UIDevelopment/AJAX/trying-out-webmatrix-and-razor" title="Chrissie - Trying Out WebMatrix and Razor">Trying Out WebMatrix and Razor</a> by Chrissie<br />
<strong>More Depth:</strong> Not finding a good Classic ASP link&#8230;</p>
<p>Unfortunately intellisense is either non-existent or just extremely limited and not noticeable after a day using Visual Studio. However, if you have Visual Studio available then you can click the Visual Studio button on the WebMatrix tool bar and the project and file you are currently working on will immediately open in Visual Studio, allowing you to take advantage of it&#8217;s more extensive editing (and of course intellisense) capabilities.</p>
<h2>Running and Debugging Sites</h2>
<p>With so many different options, running these sites must require jumping through a hoop, on fire, balancing a water balloon on our nose, right?</p>
<p>Not so much.</p>
<p>WebMatrix uses IIS Express internally and offers a simple interface to hook into just a few settings that will cover most of our needs. Press the &#8220;Run&#8221; button and we&#8217;re greeted with the current page run in whatever our default browser is. </p>
<div style="border: 1px solid #AAAAAA; font-size: 80%; color: #666666; text-align: center; padding: 8px; margin: 8px;">
<img src="http://tiernok.com/LTDBlog/webmatrix/Toolbar.png" alt="WebMatrix Files Toolbar" style="padding-bottom: 5px; max-width: 750px;" /><br />
WebMatrix Files Toolbar
</div>
<p>PHP? CSHTML? Text file? Doesn&#8217;t matter. Because IIS Express is running in the background, all WebMatrix has to do is fire a URL at a browser and we&#8217;re there. </p>
<p>Another advantage to this setup is that we don&#8217;t have to dig through yet another revision of the IIS management interface. Which is great for me, as I have been downgraded to just a programmer for the last few years and left most of my IIS management experience rusting away on the older IIS 6/5/4-style interface.</p>
<div style="border: 1px solid #AAAAAA; font-size: 80%; color: #666666; text-align: center; padding: 8px; margin: 8px;">
<img src="http://tiernok.com/LTDBlog/webmatrix/requests.png" alt="WebMatrix Requests Page" style="padding-bottom: 5px;" /><br />
IIS Requests Page
</div>
<p>Basic settings are available to manage our default site pages, enable PHP, change the .Net framework version, enable SSL, and so on. A page is also available to view the HTTP requests that are being made to the IIS instance, letting us see the lonely calls for a favicon go forever unanswered or the execution time for each individual HTTP request.</p>
<h2>Managing Data</h2>
<p>So we have web pages and a way to host them, what about managing the database behind the site? Yep, WebMatrix is there too.</p>
<p>The Databases tab will show you any connections we have configured for the site, as well as any SQL Compact databases (SDF files) available to the site. In our WordPress example this means we have a configured connection to a MySQL (5?) database. For my first sample site I have a SQL Compact database with the ability to manage the tables from inside Web Matrix. I haven&#8217;t connected to SQL Server from inside yet, so I can&#8217;t say whether it offers just a view of the connection, like MySQL, or more extensive management of the tables and queries like SQL Compact or an MDF in Visual Studio.</p>
<div style="border: 1px solid #AAAAAA; font-size: 80%; color: #666666; text-align: center; padding: 8px; margin: 8px;">
<img src="http://tiernok.com/LTDBlog/webmatrix/database.png" alt="SQL Compact View" style="padding-bottom: 5px;" /><br />
SQL Compact DB
</div>
<p>Later on when we deploy we get an interesting option for SDF files. They are treated separately from the main files and are not automatically selected as part of the sync (limiting the chances of a low-coffee-foot-shooting incident).</p>
<p><strong>More Depth:</strong> <a href=http://www.microsoft.com/web/post/connecting-to-a-sql-server-or-mysql-database-in-webmatrix"" title="Connecting to a SQL Server or MySQL Database in WebMatrix">Database Connections at Microsot.com</a><br />
<strong>More Depth:</strong> <a href="http://erikej.blogspot.com/" title="Everything SQL Server Compact">Everything SQL Server Compact site</a><br />
<strong>More Depth:</strong> <a href="https://xosfaere.wordpress.com/2011/01/30/entity-framework-code-first-development-with-sql-ce-4-0/" title="Code-First Development (EF) w/ SQL CE 4.0">Code-First Development (EF) w/ SQL CE 4.0</a> &#8211; I wonder, if you do it DB-first is the code actually larger than the DB?</p>
<h2>Site Reports</h2>
<p>To be honest I haven&#8217;t spent more than about 15 minutes in the site reports because there is just so much to Web Matrix.</p>
<p>I had difficulty creating reports for some sites because it seemed like the report engine would immediately run out and start trying to index the internet. Once I got that under control I was able to run a report of my site and get back some meaningful (and some not) information.</p>
<div style="border: 1px solid #AAAAAA; font-size: 80%; color: #666666; text-align: center; padding: 8px; margin: 8px;">
<img src="http://tiernok.com/LTDBlog/webmatrix/reports.png" alt="Reports" style="padding-bottom: 5px;" /><br />
WebMatrix Reports
</div>
<p>Basically the reporting mechanism attempts to walk through the entire site, gathering statistics on the amount of time each page took to run as well as SEO warnings and errors on each page. The output of the the SEO and Performance data comes with a slider that lets you dynamically filter the output from all information to just the most important subset.</p>
<div style="border: 1px solid #AAAAAA; font-size: 80%; color: #666666; text-align: center; padding: 8px; margin: 8px;">
<img src="http://tiernok.com/LTDBlog/webmatrix/slider.png" alt="Silder" style="padding-bottom: 5px;" /><br />
Report Slider
</div>
<p>For the SEO errors, selecting an individual error displays more information about the error. Probably the most consistent warning I received was leaving the the meta description tag off every page I had written (guilty as charged). Examples of other errors included broken hyperlinks, mixed canonical formats, and just plain bad URLs. </p>
<p><strong>More Depth:</strong> <a href="http://www.microsoft.com/web/post/webmatrix-reports-workspace-help" title="Reports Workspace Help">Webmatrix Reports Workspace Help</a><br />
<strong>More Depth:</strong> <a href="http://www.microsoft.com/web/post/use-webmatrix-to-optimize-your-site-for-search-engines" title="Use WebMatrix to optimize your site for search engines">Use WebMatrix to optimize your site for search engines</a></p>
<h2>Deploying a Site</h2>
<p>Web Matrix uses <a href="http://blogs.iis.net/msdeploy/" title="Official WebDeploy team blog">WebDeploy</a>, doing away with all the manual file dragging or xcopying. On the initial deployment we are asked to enter settings in for our host or, if we don&#8217;t have a host, the tool points us to a <a href="http://www.microsoft.com/web/Hosting/Home?" title="Find Web hosting at microsoft.com">host shopping page</a> to help us find one. Once we have a host, we return to the typical WebMatrix approach of only needing a few settings (instead of a reference manual the size of my car).</p>
<div style="border: 1px solid #AAAAAA; font-size: 80%; color: #666666; text-align: center; padding: 8px; margin: 8px;">
<img src="http://tiernok.com/LTDBlog/webmatrix/publish1.png" alt="Publishing" style="padding-bottom: 5px;" /><br />
WebMatrix Publishing
</div>
<p>The initial deployment only takes a few settings or, if you are like me and have a host that supports it, the download of a settings file. The only major hiccup I ran into was that at one point I had a SQL Compact database open in Visual Studio (or maybe just locked, not sure) and this caused all kinds of deployment problems. I have since decided that closing visual studio while deploying seems to be the safe, pain-free route.</p>
<p>Deployments after the initial one are not full site deployments. The tool will scan for changes that haven&#8217;t been deployed yet and provide us with the option of selecting which changes we would like to deploy. It automatically selects all file changes, but leaves SQL Compact files unchecked. </p>
<div style="border: 1px solid #AAAAAA; font-size: 80%; color: #666666; text-align: center; padding: 8px; margin: 8px;">
<img src="http://tiernok.com/LTDBlog/webmatrix/publish2.png" alt="Publishing" style="padding-bottom: 5px;" /><br />
WebMatrix Publishing
</div>
<p>One problem I have run into, coming from a larger scale database background, was that sometimes I would forget to download a fresh copy of the database before making schema changes (so I then had to download the database, make the changes again, then deploy it back to the live site).</p>
<p><strong>More Depth:</strong> <a href="http://learn.iis.net/page.aspx/871/publish-your-website/" title="Publish Your Website - IIS.Net">Publish Your Website &#8211; IIS.Net</a><br />
<strong>More Depth:</strong> <a href="http://www.hanselman.com/blog/MicrosoftWebMatrixInContextAndDeployingYourFirstSite.aspx" title="Microsoft WebMatrix in Context and Deploying Your First Site">Microsoft WebMatrix in Context and Deploying Your First Site &#8211; Scot Hanselman</a></p>
<h2>The Bad News</h2>
<p>Not all is perfect in WebMatrix land. There are a lot of developers that will dismiss it (and anyone using it) out of hand because they see it as a step backwards (it&#8217;s ok, though, you probably don&#8217;t want to see the code they&#8217;ve been writing anyway). </p>
<p>Perhaps the biggest problem I ran into while using it was the fact that the interface occasionally went wonky on my quad-core, 10GB of RAM system w/ a fairly expensive graphics card. Apparently this is due to the use of WPF, and I&#8217;m not the first LessThanDot-er that has had <a href="/index.php/DesktopDev/MSTech/a-few-reasons-why-i-m-not-yet-moving-to" title="Chrissie's post on A Few Reasons I'm Not Yet Moving to WPF">issues with WPF</a> (and yes, my graphics drivers are up to date).</p>
<p>There are times (like with the WordPress install above) when things won&#8217;t go 100% smoothly. I have only been using it for a few weeks and so far the level of issues has not been enough to warrant a rant on twitter or switching to another topic of study, but stay tuned, it&#8217;s still a young technology.</p>
<h2>Go Try It</h2>
<p>There is little reason not to try this tool. The <a href="http://www.microsoft.com/web/webmatrix/" title="WebMatrix page at Microsoft">download</a> is free, you don&#8217;t have to invest a lot of time to learn how to use a few options in it, and you might just find that it&#8217;s a useful tool to have in your toolbelt. If you are one of the crowd that&#8217;s convinced you don&#8217;t need to learn anything past the one technology you know (and use WITH NO LOCK everywhere) then this may be too complex for you, but the rest should at least give it a try, even the non-developers. Being able to spend an afternoon putting together even a fake little website can be a fun accomplishment and, for me at least, reminded me why I got into web development and programming in the first place.</p>
]]></content:encoded>
			<wfw:commentRss>/index.php/webdev/serverprogramming/the-many-functions-of-webmatrix/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
	</channel>
</rss>
