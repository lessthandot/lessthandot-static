<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:wfw="http://wellformedweb.org/CommentAPI/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
	>

<channel>
	<title>bug &#8211; LessthanDot</title>
	<atom:link href="/index.php/tag/bug/feed/" rel="self" type="application/rss+xml" />
	<link>/</link>
	<description>A Technical Community for IT Professionals</description>
	<lastBuildDate>Sat, 09 Mar 2019 12:50:36 +0000</lastBuildDate>
	<language>en-US</language>
	<sy:updatePeriod>hourly</sy:updatePeriod>
	<sy:updateFrequency>1</sy:updateFrequency>
	<generator>https://wordpress.org/?v=4.6.1</generator>
	<item>
		<title>My first SQL 2016 bug</title>
		<link>/index.php/datamgmt/dbprogramming/mssqlserver/my-first-sql-2016-bug/</link>
		<comments>/index.php/datamgmt/dbprogramming/mssqlserver/my-first-sql-2016-bug/#respond</comments>
		<pubDate>Mon, 29 Jun 2015 11:40:05 +0000</pubDate>
		<dc:creator><![CDATA[Koen Verbeeck]]></dc:creator>
				<category><![CDATA[Microsoft SQL Server]]></category>
		<category><![CDATA[bug]]></category>
		<category><![CDATA[sql 216]]></category>
		<category><![CDATA[sql server]]></category>

		<guid isPermaLink="false">/?p=3429</guid>
		<description><![CDATA[A little while back SQL Server 2016 CTP2 was announced¬†and I have spent some time playing with it (read: spent hours creating a VM because there were hundreds of Windows updates). It seems I have already found a very small bug while creating a new database: Apparently they forgot to rename the compatibility level üôÇ]]></description>
				<content:encoded><![CDATA[<p>A little while back <a href="/index.php/datamgmt/dbprogramming/mssqlserver/sql-2016-preview-has-been-released/">SQL Server 2016 CTP2 was announced</a>¬†and I have spent some time playing with it (read: spent hours creating a VM because there were hundreds of Windows updates).<br />
It seems I have already found a very small bug while creating a new database:</p>
<p><a href="/wp-content/uploads/2015/06/firstBug.png"><img class="alignnone size-full wp-image-3430" src="/wp-content/uploads/2015/06/firstBug.png" alt="firstBug" width="704" height="214" srcset="/wp-content/uploads/2015/06/firstBug.png 704w, /wp-content/uploads/2015/06/firstBug-300x91.png 300w" sizes="(max-width: 704px) 100vw, 704px" /></a></p>
<p>Apparently they forgot to rename the compatibility level <img src="https://s.w.org/images/core/emoji/2/72x72/1f642.png" alt="üôÇ" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
]]></content:encoded>
			<wfw:commentRss>/index.php/datamgmt/dbprogramming/mssqlserver/my-first-sql-2016-bug/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>The shaky bug in SSIS</title>
		<link>/index.php/datamgmt/ssis/the-shaky-bug-in-ssis/</link>
		<comments>/index.php/datamgmt/ssis/the-shaky-bug-in-ssis/#respond</comments>
		<pubDate>Tue, 24 Mar 2015 11:52:20 +0000</pubDate>
		<dc:creator><![CDATA[Koen Verbeeck]]></dc:creator>
				<category><![CDATA[SSIS]]></category>
		<category><![CDATA[bug]]></category>
		<category><![CDATA[jitter]]></category>
		<category><![CDATA[shake]]></category>
		<category><![CDATA[ssis]]></category>
		<category><![CDATA[syndicated]]></category>

		<guid isPermaLink="false">/?p=3312</guid>
		<description><![CDATA[You may or may not have noticed it after installing SQL Server 2012: the designer interface in Visual Studio 2010/2012 has had a make-over. Nothing too drastic, but at least the undo button works. However, sometimes when you drag or move tasks/components on the canvas, they start to shake. A lot. And very annoyingly as [&#8230;]]]></description>
				<content:encoded><![CDATA[<p style="text-align: justify">You may or may not have noticed it after installing SQL Server 2012: the designer interface in Visual Studio 2010/2012 has had a make-over. Nothing too drastic, but at least the undo button works. However, sometimes when you drag or move tasks/components on the canvas, they start to shake. A lot. And very annoyingly as well. (Quite impossible to take a screenshot of that, so sorry). This behaviour emerged after applying CU6. There are Connect items logged about this issue:</p>
<ul>
<li><a href="https://connect.microsoft.com/SQLServer/feedback/details/790470/when-dragging-ssis-objects-on-canvas-the-objects-shake-jiggle-jitter">When dragging SSIS objects on canvas the objects shake/jiggle/jitter</a></li>
<li><a href="https://connect.microsoft.com/SQLServer/feedback/details/776664/ssis-2012-control-flow-moving-objects-is-unusable">SSIS 2012 Control Flow moving objects is unusable</a></li>
</ul>
<p style="text-align: justify">Luckily Microsoft patched this bug in CU7. You can download the hotfix <a href="https://support.microsoft.com/en-us/kb/2883424/en-us?wa=wsignin1.0">here</a>. If your environment is up-to-date with the latest patches, most likely you won&#8217;t experience this bug.</p>
<p style="text-align: justify">I patched the Visual Studio 2010 environment at the client and the issue went away. But at home I use Visual Studio 2012 and the issue was still there, even after applying the fix. Fortunately, Twitter was there with the answer:</p>
<blockquote class="twitter-tweet" lang="en"><p><a href="https://twitter.com/Ko_Ver">@Ko_Ver</a> Ok, because the CU that fixes that only updates the DLL&#8217;s for VS2010, you need to manually overwrite the assemblies in VS2012 folder</p>
<p>‚Äî Jan Van humbeek (@janvanhumbeek) <a href="https://twitter.com/janvanhumbeek/status/517569881672544256">October 2, 2014</a></p></blockquote>
<p>If you go back to the <a href="https://connect.microsoft.com/SQLServer/feedback/details/790470/when-dragging-ssis-objects-on-canvas-the-objects-shake-jiggle-jitter">first Connect item</a>, these steps are described in the work arounds and they work like a charm.</p>
<p>The issue has also been <a href="https://connect.microsoft.com/SQLServer/feedback/details/1013088/ssis-2014-control-flow-moving-objects-is-unusable">reported for SSIS 2014</a>, and while the item has been closed as fixed, there&#8217;s no explanation on how it is fixed. Maybe in an upcoming CU for SQL Server 2014? It&#8217;s possible the same work around works for SSIS 2014, but I haven&#8217;t tried it (I don&#8217;t have the bug in Visual Studio 2013) so if you do try it, it&#8217;s at your own risk.</p>
]]></content:encoded>
			<wfw:commentRss>/index.php/datamgmt/ssis/the-shaky-bug-in-ssis/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>Dealing with the mysterious ‚ÄúTrue‚Äù column in BIML</title>
		<link>/index.php/datamgmt/ssis/dealing-with-the-mysterious-true-column-in-biml/</link>
		<comments>/index.php/datamgmt/ssis/dealing-with-the-mysterious-true-column-in-biml/#comments</comments>
		<pubDate>Tue, 18 Feb 2014 14:41:34 +0000</pubDate>
		<dc:creator><![CDATA[Koen Verbeeck]]></dc:creator>
				<category><![CDATA[SSIS]]></category>
		<category><![CDATA[bids helper]]></category>
		<category><![CDATA[biml]]></category>
		<category><![CDATA[bug]]></category>
		<category><![CDATA[issue]]></category>
		<category><![CDATA[sql server]]></category>
		<category><![CDATA[ssis]]></category>

		<guid isPermaLink="false">/?p=2423</guid>
		<description><![CDATA[Recently I ran into the following error when compiling BIML into SSIS packages: The message itself is not very revealing: The data type for input buffer column ‚ÄòTrue‚Äô on the ScriptComponent input buffer ‚ÄòInput0‚Äô does not match the mapped output column from the previous transformation. You might have guessed it already; there is no column [&#8230;]]]></description>
				<content:encoded><![CDATA[<p style="text-align: justify">Recently I ran into the following error when compiling BIML into SSIS packages:</p>
<p style="text-align: justify"><a href="/wp-content/uploads/2014/02/BIMLissue.png"><img class="alignnone size-full wp-image-2425" alt="BIMLissue" src="/wp-content/uploads/2014/02/BIMLissue.png" width="1200" height="92" srcset="/wp-content/uploads/2014/02/BIMLissue.png 1200w, /wp-content/uploads/2014/02/BIMLissue-300x23.png 300w, /wp-content/uploads/2014/02/BIMLissue-1024x78.png 1024w" sizes="(max-width: 1200px) 100vw, 1200px" /></a></p>
<p style="text-align: justify">The message itself is not very revealing:</p>
<p style="text-align: justify"><i>The data type for input buffer column ‚ÄòTrue‚Äô on the ScriptComponent input buffer ‚ÄòInput0‚Äô does not match the mapped output column from the previous transformation.</i></p>
<p style="text-align: justify">You might have guessed it already; there is no column called <b>True</b> in the data flow. A quick Google search brought back this topic on the Varigence forums: <a href="http://www.varigence.com/Forums?threadID=289">Error: Script Transformation</a>. However, uninstalling BIDS Helper and installing an older version (and possible lose other functionality) is not an option. Besides, the BIML code worked when I generated the package for another table, so BIDS Helper was not to blame.</p>
<p style="text-align: justify">After a quick debug using Messageboxes ‚Äì so old school and <a href="http://www.bimlgeek.com/1/post/2013/08/using-windows-forms-messageboxshow-to-debug-bimlscript.html">it is possible in BIMLScript by the way</a> ‚Äì I confirmed it had nothing to do with the C# code generating the BIML.</p>
<p style="text-align: justify">So let‚Äôs take another good look at the error message. It mentions something about data types not being correct. All the data types were simple varchars, numerics and datetimes and I was sure I mapped them to the corresponding <a href="http://msdn.microsoft.com/en-us/library/system.data.dbtype(v=vs.110).aspx">DBType</a>. After all, the code works for other tables.</p>
<p style="text-align: justify">And then it hit me: the destination table had some columns with a greater length than the source column. For example varchar(250) instead of varchar(213). I enlarged them to deal with the risk of other sources being added with larger columns. In the SSIS data flow, the metadata of the columns is derived from the columns returned by the source query. However, in the script component I specified the metadata of the destination columns, all having another length. I changed the lengths of the destination columns, lo and behold, the BIML script compiled successfully. Apparently SSIS (or BIML) has some serious issues of the metadata of an input column doesn&#8217;t match 100% the metadata of the output column of the previous component.</p>
<p style="text-align: justify">If now only one of the kind BIML developers would substitute <i>true</i> with the actual column name, life would be much easier.</p>
]]></content:encoded>
			<wfw:commentRss>/index.php/datamgmt/ssis/dealing-with-the-mysterious-true-column-in-biml/feed/</wfw:commentRss>
		<slash:comments>3</slash:comments>
		</item>
		<item>
		<title>Running sp_helpdb against a snapshot shows wrong files on SQL Server 2008</title>
		<link>/index.php/datamgmt/dbprogramming/running-sp_helpdb-against-a-snapshot-sho-2008/</link>
		<comments>/index.php/datamgmt/dbprogramming/running-sp_helpdb-against-a-snapshot-sho-2008/#respond</comments>
		<pubDate>Thu, 11 Feb 2010 12:58:49 +0000</pubDate>
		<dc:creator><![CDATA[SQLDenis]]></dc:creator>
				<category><![CDATA[Database Programming]]></category>
		<category><![CDATA[Microsoft SQL Server]]></category>
		<category><![CDATA[Microsoft SQL Server Admin]]></category>
		<category><![CDATA[bug]]></category>
		<category><![CDATA[feature]]></category>
		<category><![CDATA[snapshot]]></category>
		<category><![CDATA[sql server 2008]]></category>

		<guid isPermaLink="false">/index.php/2010/02/running-sp_helpdb-against-a-snapshot-sho-2008/</guid>
		<description><![CDATA[If you are using snapshots be aware that running sp_helpdb reports wrong files. Let&#8217;s take a look by running some code First create a test database T-SQL1 2 3 4 5 6 7 8 9 use master go &#160; CREATE DATABASE &#91;test&#93; ON &#160;PRIMARY &#40; NAME = N'test', FILENAME = N'C:test.mdf' &#160;&#41; &#160;LOG ON &#40; [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>If you are using snapshots be aware that running sp_helpdb reports wrong files. Let&#8217;s take a look by running some code</p>
<p>First create a test database</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
</pre></td><td class="de1"><pre class="de1"><span class="kw1">use</span> master
go
&nbsp;
<span class="kw1">CREATE</span> <span class="kw1">DATABASE</span> <span class="br0">&#91;</span>test<span class="br0">&#93;</span> <span class="kw1">ON</span> &nbsp;<span class="kw1">PRIMARY</span> 
<span class="br0">&#40;</span> NAME <span class="sy0">=</span> N<span class="st0">'test'</span>, FILENAME <span class="sy0">=</span> N<span class="st0">'C:test.mdf'</span> &nbsp;<span class="br0">&#41;</span>
&nbsp;<span class="kw2">LOG</span> <span class="kw1">ON</span> 
<span class="br0">&#40;</span> NAME <span class="sy0">=</span> N<span class="st0">'test_log'</span>, FILENAME <span class="sy0">=</span> N<span class="st0">'C:test_log.LDF'</span> <span class="br0">&#41;</span>
&nbsp;
GO</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">use master
go

CREATE DATABASE [test] ON  PRIMARY 
( NAME = N'test', FILENAME = N'C:test.mdf'  )
 LOG ON 
( NAME = N'test_log', FILENAME = N'C:test_log.LDF' )

GO</pre></div></div>

<p>Now let&#8217;s create a table and populate it with some data</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="de1"><pre class="de1"><span class="kw1">USE</span> test
go
&nbsp;
&nbsp;
<span class="kw1">create</span> <span class="kw1">table</span> TestTable <span class="br0">&#40;</span>id <span class="kw1">int</span> not null,somecol <span class="kw1">char</span><span class="br0">&#40;</span><span class="nu0">100</span><span class="br0">&#41;</span> <span class="kw1">default</span> <span class="st0">'a'</span><span class="br0">&#41;</span>
go
&nbsp;
<span class="kw1">insert</span> TestTable<span class="br0">&#40;</span>id<span class="br0">&#41;</span>
<span class="kw1">select</span> row_number<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="kw1">over</span> <span class="br0">&#40;</span><span class="kw1">order</span> <span class="kw1">by</span> s1.<span class="me1">id</span><span class="br0">&#41;</span>
<span class="kw1">from</span> sysobjects s1
cross join sysobjects s2
&nbsp;
go</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">USE test
go


create table TestTable (id int not null,somecol char(100) default 'a')
go

insert TestTable(id)
select row_number() over (order by s1.id)
from sysobjects s1
cross join sysobjects s2

go</pre></div></div>

<p>Now create the snapshot database</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
</pre></td><td class="de1"><pre class="de1"><span class="kw1">use</span> master
go
&nbsp;
&nbsp; &nbsp; 
&nbsp; &nbsp; <span class="kw1">CREATE</span> <span class="kw1">DATABASE</span> TestSnapshot <span class="kw1">ON</span> &nbsp;
<span class="br0">&#40;</span> NAME <span class="sy0">=</span> N<span class="st0">'test'</span>, FILENAME <span class="sy0">=</span> N<span class="st0">'C:testss.mdf'</span> <span class="br0">&#41;</span>
&nbsp; <span class="kw1">AS</span> SNAPSHOT <span class="kw1">of</span> Test;
GO</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">use master
go

    
    CREATE DATABASE TestSnapshot ON  
( NAME = N'test', FILENAME = N'C:testss.mdf' )
  AS SNAPSHOT of Test;
GO</pre></div></div>

<p>Now run a count for that table against the test database and against the snapshot</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
</pre></td><td class="de1"><pre class="de1"><span class="kw1">select</span> <span class="kw2">COUNT</span><span class="br0">&#40;</span><span class="sy0">*</span><span class="br0">&#41;</span> <span class="kw1">from</span> TestSnapshot..<span class="me1">TestTable</span>
<span class="kw1">select</span> <span class="kw2">COUNT</span><span class="br0">&#40;</span><span class="sy0">*</span><span class="br0">&#41;</span> <span class="kw1">from</span> Test..<span class="me1">TestTable</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">select COUNT(*) from TestSnapshot..TestTable
select COUNT(*) from Test..TestTable</pre></div></div>

<pre>Output
--------------
3025
3025</pre>
<p>As you can see the count is the same</p>
<p>Now run sp_helpdb and look at the sizes, we will come back to this output later</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
</pre></td><td class="de1"><pre class="de1"><span class="kw3">sp_helpdb</span> <span class="st0">'Test'</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">sp_helpdb 'Test'</pre></div></div>

<pre>Output
---------------------------------------------------------------
test		1	C:test.mdf		PRIMARY	2304 KB
test_log	2	C:test_log.LDF	        NULL	1792 KB</pre>
<p>Let&#8217;s add some more data to our table</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="de1"><pre class="de1"><span class="kw1">use</span> Test
go
&nbsp;
<span class="kw1">declare</span> @id <span class="kw1">int</span> <span class="sy0">=</span><span class="br0">&#40;</span><span class="kw1">select</span> <span class="kw2">MAX</span><span class="br0">&#40;</span>id<span class="br0">&#41;</span>
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">from</span> &nbsp;Test..<span class="me1">TestTable</span><span class="br0">&#41;</span>
&nbsp;
<span class="kw1">insert</span> Test..<span class="me1">TestTable</span><span class="br0">&#40;</span>id<span class="br0">&#41;</span>
<span class="kw1">select</span> row_number<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="kw1">over</span> <span class="br0">&#40;</span><span class="kw1">order</span> <span class="kw1">by</span> s1.<span class="me1">id</span><span class="br0">&#41;</span> <span class="sy0">+</span> @id
<span class="kw1">from</span> sysobjects s1
cross join sysobjects s2
cross join sysobjects s3</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">use Test
go

declare @id int =(select MAX(id)
					from  Test..TestTable)

insert Test..TestTable(id)
select row_number() over (order by s1.id) + @id
from sysobjects s1
cross join sysobjects s2
cross join sysobjects s3</pre></div></div>

<p>Now if we run the count we will see that the count for the table in the Test database has increased (as expected)</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
</pre></td><td class="de1"><pre class="de1"><span class="kw1">select</span> <span class="kw2">COUNT</span><span class="br0">&#40;</span><span class="sy0">*</span><span class="br0">&#41;</span> <span class="kw1">from</span> TestSnapshot..<span class="me1">TestTable</span>
<span class="kw1">select</span> <span class="kw2">COUNT</span><span class="br0">&#40;</span><span class="sy0">*</span><span class="br0">&#41;</span> <span class="kw1">from</span> Test..<span class="me1">TestTable</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">select COUNT(*) from TestSnapshot..TestTable
select COUNT(*) from Test..TestTable</pre></div></div>

<pre>Output
-------------
3025
169400</pre>
<p>Okay now it is time to run sp_helpdb again</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
</pre></td><td class="de1"><pre class="de1"><span class="kw3">sp_helpdb</span> <span class="st0">'Test'</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">sp_helpdb 'Test'</pre></div></div>

<pre>Output
---------------------------------------------------------------
test		1	C:test.mdf		PRIMARY	20736 KB
test_log	2	C:test_log.LDF	        NULL	69760 KB</pre>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
</pre></td><td class="de1"><pre class="de1"><span class="kw3">sp_helpdb</span> <span class="st0">'TestSnapshot'</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">sp_helpdb 'TestSnapshot'</pre></div></div>

<pre>Output
---------------------------------------------------------------
test		1	C:test.mdf		PRIMARY	2304 KB
test_log	2	C:test_log.LDF	        NULL	1792 KB</pre>
<p>Do you see that? When you run sp_helpdb against the snapshot now it reports what we had originally for the Test database when we ran sp_helpdb before adding rows to the table</p>
<p>Now run this query</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
</pre></td><td class="de1"><pre class="de1"><span class="kw1">select</span> <span class="kw2">db_name</span><span class="br0">&#40;</span>dbid<span class="br0">&#41;</span> <span class="kw1">as</span> <span class="kw2">DB_Name</span>,name,filename,<span class="kw1">size</span> <span class="sy0">*</span> <span class="nu0">8</span> <span class="kw1">from</span> master..<span class="me1">sysaltfiles</span>
<span class="kw1">where</span> dbid in <span class="br0">&#40;</span><span class="kw2">db_id</span><span class="br0">&#40;</span><span class="st0">'Test'</span><span class="br0">&#41;</span>,<span class="kw2">db_id</span><span class="br0">&#40;</span><span class="st0">'TestSnapshot'</span><span class="br0">&#41;</span><span class="br0">&#41;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">select db_name(dbid) as DB_Name,name,filename,size * 8 from master..sysaltfiles
where dbid in (db_id('Test'),db_id('TestSnapshot'))</pre></div></div>

<pre>Output
---------------------------------------------------------------
DB_Name			name		filename	size
test			test		C:test.mdf	20736
test			test_log	C:test_log.LDF	69760
TestSnapshot	        test		C:testss.mdf	2304</pre>
<p>As you can see, this reports the correct files and sizes for both Test and the snapshot.</p>
<p>So where is the problem? The problem is in the sysfiles table, it has the wrong filename</p>
<p>Run these two queries to verify that</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
</pre></td><td class="de1"><pre class="de1"><span class="kw1">select</span> <span class="kw1">size</span> <span class="sy0">*</span> <span class="nu0">8</span> <span class="kw1">as</span> <span class="kw1">Size</span>,filename <span class="kw1">from</span> Test..<span class="me1">sysfiles</span>
<span class="kw1">select</span> <span class="kw1">size</span> <span class="sy0">*</span> <span class="nu0">8</span> <span class="kw1">as</span> <span class="kw1">Size</span>,filename <span class="kw1">from</span> TestSnapshot..<span class="me1">sysfiles</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">select size * 8 as Size,filename from Test..sysfiles
select size * 8 as Size,filename from TestSnapshot..sysfiles</pre></div></div>

<pre>Output
----------------------------
Size        filename
20736       C:test.mdf
69760       C:test_log.LDF

Size        filename
2304        C:test.mdf
1792        C:test_log.LDF</pre>
<p>sp_helpdb actually calls the sys.sp_helpfile proc to get the size and file name<br />
run this and you will see that it is the second result set of sp_helpdb</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
</pre></td><td class="de1"><pre class="de1"><span class="kw1">exec</span> Test.<span class="me1">sys</span>.<span class="kw3">sp_helpfile</span>
<span class="kw1">exec</span> TestSnapshot.<span class="me1">sys</span>.<span class="kw3">sp_helpfile</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">exec Test.sys.sp_helpfile
exec TestSnapshot.sys.sp_helpfile</pre></div></div>

<p>Inside the sys.sp_helpfile proc you will find the following code</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="de1"><pre class="de1"><span class="kw1">select</span> &nbsp;name, &nbsp;fileid, filename, &nbsp;
&nbsp;filegroup <span class="sy0">=</span> <span class="kw2">filegroup_name</span><span class="br0">&#40;</span>groupid<span class="br0">&#41;</span>, &nbsp;
&nbsp;<span class="st0">'size'</span> <span class="sy0">=</span> <span class="kw1">convert</span><span class="br0">&#40;</span><span class="kw1">nvarchar</span><span class="br0">&#40;</span><span class="nu0">15</span><span class="br0">&#41;</span>, <span class="kw1">convert</span> <span class="br0">&#40;</span><span class="kw1">bigint</span>, <span class="kw1">size</span><span class="br0">&#41;</span> <span class="sy0">*</span> <span class="nu0">8</span><span class="br0">&#41;</span> <span class="sy0">+</span> N<span class="st0">' KB'</span>, &nbsp;
&nbsp;<span class="st0">'maxsize'</span> <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw1">case</span> maxsize <span class="kw1">when</span> <span class="sy0">-</span><span class="nu0">1</span> <span class="kw1">then</span> N<span class="st0">'Unlimited'</span> &nbsp;
&nbsp; &nbsp;<span class="kw1">else</span> &nbsp;
&nbsp; &nbsp;<span class="kw1">convert</span><span class="br0">&#40;</span><span class="kw1">nvarchar</span><span class="br0">&#40;</span><span class="nu0">15</span><span class="br0">&#41;</span>, <span class="kw1">convert</span> <span class="br0">&#40;</span><span class="kw1">bigint</span>, maxsize<span class="br0">&#41;</span> <span class="sy0">*</span> <span class="nu0">8</span><span class="br0">&#41;</span> <span class="sy0">+</span> N<span class="st0">' KB'</span> <span class="kw1">end</span><span class="br0">&#41;</span>, &nbsp;
&nbsp;<span class="st0">'growth'</span> <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw1">case</span> status <span class="sy0">&amp;</span> 0x100000 <span class="kw1">when</span> 0x100000 <span class="kw1">then</span> &nbsp;
&nbsp; <span class="kw1">convert</span><span class="br0">&#40;</span><span class="kw1">nvarchar</span><span class="br0">&#40;</span><span class="nu0">15</span><span class="br0">&#41;</span>, growth<span class="br0">&#41;</span> <span class="sy0">+</span> N<span class="st0">'%'</span> &nbsp;
&nbsp; <span class="kw1">else</span> &nbsp;
&nbsp; <span class="kw1">convert</span><span class="br0">&#40;</span><span class="kw1">nvarchar</span><span class="br0">&#40;</span><span class="nu0">15</span><span class="br0">&#41;</span>, <span class="kw1">convert</span> <span class="br0">&#40;</span><span class="kw1">bigint</span>, growth<span class="br0">&#41;</span> <span class="sy0">*</span> <span class="nu0">8</span><span class="br0">&#41;</span> <span class="sy0">+</span> N<span class="st0">' KB'</span> <span class="kw1">end</span><span class="br0">&#41;</span>, &nbsp;
&nbsp;<span class="st0">'usage'</span> <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw1">case</span> status <span class="sy0">&amp;</span> 0x40 <span class="kw1">when</span> 0x40 <span class="kw1">then</span> <span class="st0">'log only'</span> <span class="kw1">else</span> <span class="st0">'data only'</span> <span class="kw1">end</span><span class="br0">&#41;</span> &nbsp;
&nbsp;<span class="kw1">from</span> sysfiles &nbsp;
&nbsp;</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">select  name,  fileid, filename,  
 filegroup = filegroup_name(groupid),  
 'size' = convert(nvarchar(15), convert (bigint, size) * 8) + N' KB',  
 'maxsize' = (case maxsize when -1 then N'Unlimited'  
   else  
   convert(nvarchar(15), convert (bigint, maxsize) * 8) + N' KB' end),  
 'growth' = (case status &amp; 0x100000 when 0x100000 then  
  convert(nvarchar(15), growth) + N'%'  
  else  
  convert(nvarchar(15), convert (bigint, growth) * 8) + N' KB' end),  
 'usage' = (case status &amp; 0x40 when 0x40 then 'log only' else 'data only' end)  
 from sysfiles  
 </pre></div></div>

<p> As you can see it uses the sysfiles table</p>
<p>If you want to see what the code for sp_helpdb and sys.sp_helpfile looks like execute the following</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
</pre></td><td class="de1"><pre class="de1"><span class="kw1">exec</span> <span class="kw3">sp_helptext</span> <span class="st0">'sp_helpdb'</span>
<span class="kw1">exec</span> <span class="kw3">sp_helptext</span> <span class="st0">'sys.sp_helpfile'</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">exec sp_helptext 'sp_helpdb'
exec sp_helptext 'sys.sp_helpfile'</pre></div></div>

<p>So what do you think, is this a bug?</p>
<p>*** <strong>Remember, if you have a SQL related question, try our <a href="http://forum.lessthandot.com/viewforum.php?f=17">Microsoft SQL Server Programming</a> forum or our <a href="http://forum.lessthandot.com/viewforum.php?f=22">Microsoft SQL Server Admin</a> forum</strong><ins></ins></p>
]]></content:encoded>
			<wfw:commentRss>/index.php/datamgmt/dbprogramming/running-sp_helpdb-against-a-snapshot-sho-2008/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>Catching a Visual State Completion in Silverlight</title>
		<link>/index.php/webdev/webdesigngraphicsstyling/catching-a-visual-state-completion-in-si/</link>
		<comments>/index.php/webdev/webdesigngraphicsstyling/catching-a-visual-state-completion-in-si/#respond</comments>
		<pubDate>Wed, 23 Sep 2009 11:41:24 +0000</pubDate>
		<dc:creator><![CDATA[ThatRickGuy]]></dc:creator>
				<category><![CDATA[Web Design, Graphics and Styling]]></category>
		<category><![CDATA[bug]]></category>
		<category><![CDATA[silverlight]]></category>
		<category><![CDATA[storyboard]]></category>
		<category><![CDATA[visual state]]></category>

		<guid isPermaLink="false">/index.php/2009/09/catching-a-visual-state-completion-in-si/</guid>
		<description><![CDATA[Catching the completion of a visual state change in Silverlight 3]]></description>
				<content:encoded><![CDATA[<p>Just a quickie from the Silverlight front today. </p>
<p>Visual States and the VSM are awesome tools to handling most of your application&#8217;s animations. One annoyance though, Visual States do not have a .Completed event!</p>
<p>Luckily for us, Visual States are composed of Story Boards. Story Boards DO have .Completed events <img src="https://s.w.org/images/core/emoji/2/72x72/1f642.png" alt="üôÇ" class="wp-smiley" style="height: 1em; max-height: 1em;" /></p>
<p>To get it to work, it&#8217;s really simple. First, create your event handling method:</p>
<pre>Private Sub SomeStoryBoard_Completed(ByVal sender As Object, ByVal e As System.EventArgs) 
     MessageBox.Show("StoryBoard Completed!")
End Sub</pre>
<p>Next, in your LayoutRoot_Loaded method, add a handler:</p>
<pre>AddHandler Me.MyVisualState.Storyboard.Completed, AddressOf SomeStoryBoard_Completed</pre>
<p>Where &#8220;MyVisualState&#8221; is the name of the visual state you are trying to work with.</p>
<p>Nothing too fancy there. You just have to know that a VisualState contains a story board and that you can wire up that story board&#8217;s completed event. </p>
<p>There is another way, that is even more simple, but it appears to not be working as intended. If you have any idea&#8217;s why the following doesn&#8217;t work, I&#8217;d love to hear about it.</p>
<p>Start by going into the XAML and finding the Storyboard in the Visual State you are trying to work with. Once you&#8217;ve found it, give the Storyboard a name (x:Name=&#8221;sbSearchOpen&#8221; on line 11 in the following example)</p>
<pre>&amp;lt;VisualStateManager.VisualStateGroups&amp;gt;
	&amp;lt;VisualStateGroup x:Name="SearchBox"&amp;gt;
		&amp;lt;VisualStateGroup.Transitions&amp;gt;
			&amp;lt;VisualTransition GeneratedDuration="00:00:00.6000000"&amp;gt;
				&amp;lt;VisualTransition.GeneratedEasingFunction&amp;gt;
					&amp;lt;CubicEase EasingMode="EaseOut"/&amp;gt;
				&amp;lt;/VisualTransition.GeneratedEasingFunction&amp;gt;
			&amp;lt;/VisualTransition&amp;gt;
		&amp;lt;/VisualStateGroup.Transitions&amp;gt;
		&amp;lt;VisualState x:Name="SearchOpen"&amp;gt;
			&amp;lt;Storyboard x:Name="sbSearchOpen"&amp;gt;
				&amp;lt;DoubleAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="grdSearch" Storyboard.TargetProperty="(FrameworkElement.Height)"&amp;gt;
					&amp;lt;EasingDoubleKeyFrame KeyTime="00:00:00" Value="85"/&amp;gt;
				&amp;lt;/DoubleAnimationUsingKeyFrames&amp;gt;
				&amp;lt;ObjectAnimationUsingKeyFrames BeginTime="00:00:00" Duration="00:00:00.0010000" Storyboard.TargetName="grdNavSearch" Storyboard.TargetProperty="(FrameworkElement.Margin)"&amp;gt;
					&amp;lt;DiscreteObjectKeyFrame KeyTime="00:00:00"&amp;gt;
						&amp;lt;DiscreteObjectKeyFrame.Value&amp;gt;
							&amp;lt;Thickness&amp;gt;0,0,0,85&amp;lt;/Thickness&amp;gt;
						&amp;lt;/DiscreteObjectKeyFrame.Value&amp;gt;
					&amp;lt;/DiscreteObjectKeyFrame&amp;gt;
				&amp;lt;/ObjectAnimationUsingKeyFrames&amp;gt;
			&amp;lt;/Storyboard&amp;gt;
		&amp;lt;/VisualState&amp;gt;
	&amp;lt;/VisualStateGroup&amp;gt;
&amp;lt;/VisualStateManager.VisualStateGroups&amp;gt;</pre>
<p> Then we can switch to the code behind and in the object list select the sbSearchOpen story board, and in the event list select Completed. This will generate the sbSearchOpen_Completed event:</p>
<pre>Private Sub sbSearchOpen_Completed(ByVal sender As Object, ByVal e As System.EventArgs) Handles sbSearchOpen.Completed
        MessageBox.Show("Search Opened!")
    End Sub</pre>
<p>Totally an easy and intuitive way of catching the end of a story board. Unfortunately, it doesn&#8217;t work. The IDE acts like it expects it to work, but for some reason, at run time, the sbSearchOpen_Completed method will never fire.</p>
<p>-Rick</p>
]]></content:encoded>
			<wfw:commentRss>/index.php/webdev/webdesigngraphicsstyling/catching-a-visual-state-completion-in-si/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>When Books On Line is not really correct</title>
		<link>/index.php/datamgmt/dbprogramming/when-books-on-line-is-not-really-correct/</link>
		<comments>/index.php/datamgmt/dbprogramming/when-books-on-line-is-not-really-correct/#comments</comments>
		<pubDate>Fri, 24 Jul 2009 12:45:11 +0000</pubDate>
		<dc:creator><![CDATA[SQLDenis]]></dc:creator>
				<category><![CDATA[Database Programming]]></category>
		<category><![CDATA[Microsoft SQL Server]]></category>
		<category><![CDATA[books on line]]></category>
		<category><![CDATA[bug]]></category>
		<category><![CDATA[documentation]]></category>
		<category><![CDATA[gotcha]]></category>
		<category><![CDATA[sql server 2008]]></category>

		<guid isPermaLink="false">/index.php/2009/07/when-books-on-line-is-not-really-correct/</guid>
		<description><![CDATA[A question was posted in our SQL Server programming forum today. A person had this stored procedure T-SQL1 2 3 4 5 6 7 CREATE PROCEDURE TestStuff @id INT, @Val1 VARCHAR&#40;20&#41;, @Val2 VARCHAR&#40;20&#41; AS &#160; SELECT @id,@Val1,@Val2 CREATE PROCEDURE TestStuff @id INT, @Val1 VARCHAR(20), @Val2 VARCHAR(20) AS SELECT @id,@Val1,@Val2 Executing it like this works T-SQL1 [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>A question was posted in our <a href="http://forum.lessthandot.com/viewforum.php?f=17">SQL Server programming forum</a> <a href="http://forum.lessthandot.com/viewtopic.php?f=17&amp;t=6856">today</a>. A person had this stored procedure</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
</pre></td><td class="de1"><pre class="de1"><span class="kw1">CREATE</span> <span class="kw1">PROCEDURE</span> TestStuff
@id <span class="kw1">INT</span>,
@Val1 <span class="kw1">VARCHAR</span><span class="br0">&#40;</span><span class="nu0">20</span><span class="br0">&#41;</span>,
@Val2 <span class="kw1">VARCHAR</span><span class="br0">&#40;</span><span class="nu0">20</span><span class="br0">&#41;</span>
<span class="kw1">AS</span>
&nbsp;
<span class="kw1">SELECT</span> @id,@Val1,@Val2</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">CREATE PROCEDURE TestStuff
@id INT,
@Val1 VARCHAR(20),
@Val2 VARCHAR(20)
AS
 
SELECT @id,@Val1,@Val2</pre></div></div>

<p>Executing it like this works</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
</pre></td><td class="de1"><pre class="de1"><span class="kw1">EXEC</span> TestStuff <span class="nu0">1</span>,<span class="st0">'test1'</span>,<span class="st0">'Test2'</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">EXEC TestStuff 1,'test1','Test2'</pre></div></div>

<p>However executing it like this also works</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
</pre></td><td class="de1"><pre class="de1"><span class="kw1">EXEC</span> TestStuff <span class="nu0">1</span>,test1,Test2</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">EXEC TestStuff 1,test1,Test2</pre></div></div>

<p>So even though you don&#8217;t enclose the character value in quotes it works.</p>
<p>From the <a href="http://msdn.microsoft.com/en-us/library/ms188332.aspx">SQL Server 2008 Books Online (June 2009) EXECUTE (Transact-SQL)</a> page, I changed the color to red for the sentence that is wrong.</p>
<blockquote><p>value<br />
Is the value of the parameter to pass to the module or pass-through command. If parameter names are not specified, parameter values must be supplied in the order defined in the module.</p>
<p>When executing pass-through commands against linked servers, the order of the parameter values depends on the OLE DB provider of the linked server. Most OLE DB providers bind values to parameters from left to right.</p>
<p>If the value of a parameter is an object name, <strong><span class="MT_red">character string, or qualified by a database name or schema name, the whole name must be enclosed in single quotation marks</span></strong>. If the value of a parameter is a keyword, the keyword must be enclosed in double quotation marks.</p>
<p>If a default is defined in the module, a user can execute the module without specifying a parameter.</p>
<p>The default can also be NULL. Generally, the module definition specifies the action that should be taken if a parameter value is NULL.</p></blockquote>
<p>As you can see that is not right at all, I checked Books on line for SQL Server 2000 and it basically has the same information. I am surprised that nobody has alerted Microsoft about this.</p>
<p>So now that we know that you can do that, then why can you not do this?</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
</pre></td><td class="de1"><pre class="de1"><span class="kw1">DECLARE</span> @v <span class="kw1">VARCHAR</span><span class="br0">&#40;</span><span class="nu0">20</span><span class="br0">&#41;</span>
&nbsp;
<span class="kw1">SELECT</span> @v <span class="sy0">=</span> a
&nbsp;
<span class="kw1">SELECT</span> @v</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">DECLARE @v VARCHAR(20)
 
SELECT @v = a
 
SELECT @v</pre></div></div>

<p>That gives you this error<br />
Server: Msg 207, Level 16, State 3, Line 3<br />
Invalid column name &#8216;a&#8217;.</p>
<p>Of course there are other inconsistent things in SQL Server, here is a perfect example</p>
<p>Varchar defaults to 1 character here</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
</pre></td><td class="de1"><pre class="de1"><span class="kw1">DECLARE</span> @v <span class="kw1">VARCHAR</span>
<span class="kw1">SELECT</span> @v <span class="sy0">=</span> <span class="st0">'aaaaaa'</span>
<span class="kw1">SELECT</span> @v</pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">DECLARE @v VARCHAR
SELECT @v = 'aaaaaa'
SELECT @v</pre></div></div>

<p>Varchar defaults to 30 characters here</p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="tsql"><thead><tr><td colspan="2"  class="head">T-SQL</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
</pre></td><td class="de1"><pre class="de1"><span class="kw1">SELECT</span> <span class="kw1">CONVERT</span><span class="br0">&#40;</span><span class="kw1">VARCHAR</span>,<span class="st0">'aaaaa'</span><span class="br0">&#41;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">SELECT CONVERT(VARCHAR,'aaaaa')</pre></div></div>

<p>George Mastros wrote a nice blog post about this here: <a href="/index.php/DataMgmt/DataDesign/sql-server-stored-procedure-with-nvarcha">SQL Server Stored Procedure with nvarchar parameter</a></p>
<p>So what do you think, should I file an item for this on connect?</p>
<p></p>
<p>*** <strong>If you have a SQL related question try our <a href="http://forum.lessthandot.com/viewforum.php?f=17">Microsoft SQL Server Programming</a> forum or our <a href="http://forum.lessthandot.com/viewforum.php?f=22">Microsoft SQL Server Admin</a> forum</strong><ins></ins></p>
]]></content:encoded>
			<wfw:commentRss>/index.php/datamgmt/dbprogramming/when-books-on-line-is-not-really-correct/feed/</wfw:commentRss>
		<slash:comments>2</slash:comments>
		</item>
		<item>
		<title>FIX for A MERGE statement may not enforce a foreign key constraint when the statement updates a unique key column that is not part of a clustering key bug</title>
		<link>/index.php/datamgmt/datadesign/fix-for-a-merge-statement-may-not-enforc/</link>
		<comments>/index.php/datamgmt/datadesign/fix-for-a-merge-statement-may-not-enforc/#respond</comments>
		<pubDate>Tue, 16 Sep 2008 11:07:06 +0000</pubDate>
		<dc:creator><![CDATA[SQLDenis]]></dc:creator>
				<category><![CDATA[Data Modelling and Design]]></category>
		<category><![CDATA[bug]]></category>
		<category><![CDATA[hotfix]]></category>
		<category><![CDATA[sql server 2008]]></category>
		<category><![CDATA[t-sql]]></category>

		<guid isPermaLink="false">/index.php/2008/09/fix-for-a-merge-statement-may-not-enforc/</guid>
		<description><![CDATA[FIX: A MERGE statement may not enforce a foreign key constraint when the statement updates a unique key column that is not part of a clustering key and there is a single row as the update source in SQL Server 2008 In Microsoft SQL Server 2008, a foreign key constraint may not be enforced when [&#8230;]]]></description>
				<content:encoded><![CDATA[<p><strong>FIX: A MERGE statement may not enforce a foreign key constraint when the statement updates a unique key column that is not part of a clustering key and there is a single row as the update source in SQL Server 2008</strong></p>
<p>In Microsoft SQL Server 2008, a foreign key constraint may not be enforced when the following conditions are true:<br />
‚Ä¢	A MERGE statement is issued.<br />
‚Ä¢	The target column of the update has a nonclustered unique index.</p>
<p>Microsoft has created the first Hotfix for SQL Server 2008 which will fix this issue.</p>
<p>You can read more about this bug including how you can obtain the fix here: http://support.microsoft.com/kb/956718</p>
]]></content:encoded>
			<wfw:commentRss>/index.php/datamgmt/datadesign/fix-for-a-merge-statement-may-not-enforc/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
		<item>
		<title>LINQ to SQL queries involving strings cause SQL Server procedure cache bloat</title>
		<link>/index.php/datamgmt/datadesign/linq-to-sql-queries-involving-strings-ca/</link>
		<comments>/index.php/datamgmt/datadesign/linq-to-sql-queries-involving-strings-ca/#comments</comments>
		<pubDate>Thu, 28 Aug 2008 14:12:25 +0000</pubDate>
		<dc:creator><![CDATA[SQLDenis]]></dc:creator>
				<category><![CDATA[Data Modelling and Design]]></category>
		<category><![CDATA[bug]]></category>
		<category><![CDATA[linq]]></category>
		<category><![CDATA[performance]]></category>

		<guid isPermaLink="false">/index.php/2008/08/linq-to-sql-queries-involving-strings-ca/</guid>
		<description><![CDATA[Adam Machanic created an item on connect explaining how LINQ to SQL queries involving strings cause SQL Server procedure cache bloat If an application is using LINQ to SQL and the queries involve the use of strings that can be highly variable in length, the SQL Server procedure cache will become bloated with one version [&#8230;]]]></description>
				<content:encoded><![CDATA[<p><a href="http://sqlblog.com/blogs/adam_machanic/default.aspx">Adam Machanic</a> created an item on connect explaining how LINQ to SQL queries involving strings cause SQL Server procedure cache bloat</p>
<p><em>If an application is using LINQ to SQL and the queries involve the use of strings that can be highly variable in length, the SQL Server procedure cache will become bloated with one version of the query for every possible string length. For example, consider the following very simple queries created against the Person.AddressTypes table in the AdventureWorks2008 database:</em></p>

<div class="bwp-syntax-block clearfix">
<div class="bwp-syntax-toolbar"><div class="bwp-syntax-control"><a href="javascript:;" class="bwp-syntax-source-switch" title="View Source Code"></a></div></div>
<div class="bwp-syntax-wrapper clearfix bwp-syntax-simple"><table class="csharp"><thead><tr><td colspan="2"  class="head">C#</td></tr></thead><tbody><tr class="li1"><td class="ln"><pre class="de1">1
2
3
4
5
6
7
8
9
</pre></td><td class="de1"><pre class="de1">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">var</span> p <span class="sy0">=</span> 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">from</span> n <span class="kw1">in</span> x<span class="sy0">.</span><span class="me1">AddressTypes</span> 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">where</span> n<span class="sy0">.</span><span class="me1">Name</span> <span class="sy0">==</span> <span class="st0">&quot;Billing&quot;</span> 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">select</span> n<span class="sy0">;</span>
&nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">var</span> p <span class="sy0">=</span> 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">from</span> n <span class="kw1">in</span> x<span class="sy0">.</span><span class="me1">AddressTypes</span> 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">where</span> n<span class="sy0">.</span><span class="me1">Name</span> <span class="sy0">==</span> <span class="st0">&quot;Main Office&quot;</span> 
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">select</span> n<span class="sy0">;</span></pre></td></tr></tbody></table></div>
<div class="bwp-syntax-source"><pre class="no-parse">            var p = 
                from n in x.AddressTypes 
                where n.Name == "Billing" 
                select n;

            var p = 
                from n in x.AddressTypes 
                where n.Name == "Main Office" 
                select n;</pre></div></div>

<p><em>If both of these queries are run, we will see two entries in the SQL Server procedure cache: One bound with an NVARCHAR(7), and the other with an NVARCHAR(11). Now imagine if there were hundreds or thousands of different input strings, all with different lengths. The procedure cache would become unnecessarily filled with all sorts of different plans for the exact same query. Even worse, imagine if a query used two or three different string parameters. The procedure cache could end up with hundreds of thousands or even millions of entries, the only differences being the variable lengths</em></p>
<p>Wow that is bad indeed, please go to the connect site and vote for this so that Microsoft &#8216;fixes&#8217; this. Here is the URL: <a href="https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=363290">https://connect.microsoft.com/VisualStudio/feedback/ViewFeedback.aspx?FeedbackID=363290</a></p>
]]></content:encoded>
			<wfw:commentRss>/index.php/datamgmt/datadesign/linq-to-sql-queries-involving-strings-ca/feed/</wfw:commentRss>
		<slash:comments>6</slash:comments>
		</item>
		<item>
		<title>You may receive an error message, or the computer may stop responding, when you host Web applications that use ASP.NET on a computer that is running Windows Server 2003</title>
		<link>/index.php/webdev/webdesigngraphicsstyling/you-may-receive-an-error-message-or-the-2003/</link>
		<comments>/index.php/webdev/webdesigngraphicsstyling/you-may-receive-an-error-message-or-the-2003/#respond</comments>
		<pubDate>Wed, 18 Jun 2008 12:11:05 +0000</pubDate>
		<dc:creator><![CDATA[SQLDenis]]></dc:creator>
				<category><![CDATA[Web Design, Graphics and Styling]]></category>
		<category><![CDATA[asp.net]]></category>
		<category><![CDATA[bug]]></category>
		<category><![CDATA[windows server 2003]]></category>

		<guid isPermaLink="false">/index.php/2008/06/you-may-receive-an-error-message-or-the-2003/</guid>
		<description><![CDATA[Got an email from a friend who is suffering from this problem Here are the symptoms When you host Web applications that use Microsoft ASP.NET on a computer that is running Microsoft Windows Server 2003, you may experience decreased performance. This issue may occur when you host the Web applications in multiple application pools on [&#8230;]]]></description>
				<content:encoded><![CDATA[<p>Got an email from a friend who is suffering from this problem</p>
<p><strong>Here are the symptoms</strong><br />
When you host Web applications that use Microsoft ASP.NET on a computer that is running Microsoft Windows Server 2003, you may experience decreased performance. This issue may occur when you host the Web applications in multiple application pools on a multiprocessor computer. Additionally, you may experience one or more of the following issues when available memory is low:<br />
‚Ä¢ You may receive exceptions of type System.OutOfMemoryException.<br />
‚Ä¢ You may receive the following error message when you try to open an ASP.NET Web page:<br />
Server Application Unavailable<br />
‚Ä¢ The computer may stop responding. </p>
<p><strong>And here is why</strong><br />
These issues occur because the Microsoft .NET Framework common language runtime (CLR) uses the Server garbage collector (GC) on multiprocessor computers. This is the default behavior. The Server garbage collector is optimized for scalable throughput on multiprocessor computers. To reduce contention and to improve garbage collector performance on multiprocessor computers, the Server garbage collector creates one heap per processor for parallel collections. Therefore, the Server garbage collector consumes lots of memory when you host multiple ASP.NET worker processes. This behavior may cause the issues that are described in the &#8220;Symptoms&#8221; section.</p>
<p>Microsoft has published a knowledge base article, you can read the article here: http://support.microsoft.com/kb/911716</p>
<p>The article has the workaround for this problem</p>
]]></content:encoded>
			<wfw:commentRss>/index.php/webdev/webdesigngraphicsstyling/you-may-receive-an-error-message-or-the-2003/feed/</wfw:commentRss>
		<slash:comments>0</slash:comments>
		</item>
	</channel>
</rss>
